<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
<channel>
<title>clean up the desk</title>
<link>https://cleanupthedesk.tistory.com/</link>
<description>일단 책상 정리부터 하는거다</description>
<language>ko</language>
<pubDate>Sun, 12 May 2019 14:32:59 +0900</pubDate>
<generator>TISTORY</generator>
<managingEditor>한크크</managingEditor>
<image>
<title>clean up the desk</title>
<url>http://cfile26.uf.tistory.com/image/2614B14257495028078964</url>
<link>https://cleanupthedesk.tistory.com</link>
<description>일단 책상 정리부터 하는거다</description>
</image>
<item>
<title>네이버클라우드플랫폼에서 Windows 서버 백업 오브젝트 스토리지에 보관하기 - 2</title>
<link>https://cleanupthedesk.tistory.com/18</link>
<description>&lt;p&gt;&lt;a href=&quot;http://cleanupthedesk.tistory.com/17&quot; target=&quot;_blank&quot;&gt;2019/01/14 - [Naver Cloud Platform] - 네이버클라우드플랫폼에서 Windows 서버 백업 오브젝트 스토리지에 보관하기 - 1&lt;/a&gt;&amp;nbsp;를 통해 백업을 수행할 Windows 서버와 네이버클라우드플랫폼의 오브젝트 스토리지 조회 테스트까지 수행하였다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;이제는 진짜 백업을 수행 후 오브젝트 스토리지에 업로드하고 백업 내용을 새로운 서버에 다운로드 하여 복구를 진행해 보려고 한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:500px;width: 500px; height: 427px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/992C384F5C3BE34A19&quot; filemime=&quot;image/jpeg&quot; filename=&quot;0114-12.png&quot; height=&quot;427&quot; style=&quot;width: 500px; height: 427px;&quot; width=&quot;500&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3&gt;1. Windows Backup 수행&amp;nbsp;&lt;/h3&gt;&lt;p&gt;wintest1 서버에서 C:\bksource 하위의 파일들을 Windows backup 을 통해 D:\ 에 저장한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;시작 -&amp;gt; Windows Server Backup 검색&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;아래 이미지를 참고하여 백업을 진행한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99F172465C3BE4471E&quot; filemime=&quot;image/jpeg&quot; filename=&quot;bk1.png&quot; height=&quot;397&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:683px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99A22A475C3BE4551B&quot; filemime=&quot;image/jpeg&quot; filename=&quot;bk2.png&quot; height=&quot;559&quot; width=&quot;683&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:680px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99956B455C3BE46514&quot; filemime=&quot;image/jpeg&quot; filename=&quot;bk3.png&quot; height=&quot;562&quot; width=&quot;680&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99230A4D5C3BE47417&quot; filemime=&quot;image/jpeg&quot; filename=&quot;bk4.png&quot; height=&quot;557&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:683px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/992BF14B5C3BE48A1E&quot; filemime=&quot;image/jpeg&quot; filename=&quot;bk5.png&quot; height=&quot;558&quot; width=&quot;683&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:684px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/994E4F4E5C3BE49D1B&quot; filemime=&quot;image/jpeg&quot; filename=&quot;bk6.png&quot; height=&quot;559&quot; width=&quot;684&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:683px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/9947BB435C3BE4AD1D&quot; filemime=&quot;image/jpeg&quot; filename=&quot;bk7.png&quot; height=&quot;559&quot; width=&quot;683&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:684px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99C4E4505C3BE4BC10&quot; filemime=&quot;image/jpeg&quot; filename=&quot;bk8.png&quot; height=&quot;560&quot; width=&quot;684&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3&gt;2. 백업 파일 오브젝트 스토리지로 업로드&lt;/h3&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;백업이 정상적으로 완료되었다면 백업 디렉토리를 압축 후 오브젝트 스토리지로 업로드 한다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99033D485C3BE51219&quot; filemime=&quot;image/jpeg&quot; filename=&quot;rt1.png&quot; height=&quot;533&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;C:\Users\Administrator&amp;gt;aws --endpoint-url https://sg.object.ncloudstorage.com s3 cp d:\WindowsImageBackup.zip s3://winbk&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;001/20190110/
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;upload: d:\WindowsImageBackup.zip to s3://winbk001/20190110/WindowsImageBackup.zip&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3&gt;3.복구할 서버에 백업 파일 다운로드&lt;/h3&gt;&lt;p&gt;백업해 둔 D:\bksource 디렉토리를 다른 Windows 서버 (wintest2) 의 로컬 디렉토리로 다운로드 하기 위해 네이버클라우드플랫폼 웹 콘솔에 접속하여 업로드 한 오브젝트의 URL 을 복사한다.&amp;nbsp;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99062E4D5C3BE5C71A&quot; filemime=&quot;image/jpeg&quot; filename=&quot;rt2.png&quot; height=&quot;525&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/p&gt;&lt;div&gt;C:\Restore 라는 디렉토리를 생성하고 해당 디렉토리에 오브젝트 스토리지 내용을 다운로드 한다.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255); background-color: rgb(53, 53, 53);&quot;&gt; C:\Restore&amp;gt;wget https://sg.object.ncloudstorage.com/winbk001/20190110/WindowsImageBackup.zip --no-check-certificate&lt;/span&gt;&lt;/div&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255); background-color: rgb(53, 53, 53);&quot;&gt;

&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255); background-color: rgb(53, 53, 53);&quot;&gt;--2019-01-10 16:40:02--&amp;nbsp;&amp;nbsp;https://sg.object.ncloudstorage.com/winbk001/20190110/WindowsImageBackup.zip
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255); background-color: rgb(53, 53, 53);&quot;&gt;Resolving sg.object.ncloudstorage.com (sg.object.ncloudstorage.com)... 203.104.190.139
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255); background-color: rgb(53, 53, 53);&quot;&gt;Connecting to sg.object.ncloudstorage.com (sg.object.ncloudstorage.com)|203.104.190.139|:443... connected.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255); background-color: rgb(53, 53, 53);&quot;&gt;WARNING: cannot verify sg.object.ncloudstorage.com's certificate, issued by 'CN=COMODO RSA Organization Validation Secur
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255); background-color: rgb(53, 53, 53);&quot;&gt;e Server CA,O=COMODO CA Limited,L=Salford,ST=Greater Manchester,C=GB':
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255); background-color: rgb(53, 53, 53);&quot;&gt;&amp;nbsp;&amp;nbsp;Unable to locally verify the issuer's authority.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255); background-color: rgb(53, 53, 53);&quot;&gt;HTTP request sent, awaiting response... 200 OK
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255); background-color: rgb(53, 53, 53);&quot;&gt;Length: 21106128 (20M) [application/x-zip-compressed]
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255); background-color: rgb(53, 53, 53);&quot;&gt;Saving to: 'WindowsImageBackup.zip'
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255); background-color: rgb(53, 53, 53);&quot;&gt;WindowsImageBackup.zip&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;100%[===================================================&amp;gt;]&amp;nbsp;&amp;nbsp;20.13M&amp;nbsp;&amp;nbsp;44.2MB/s&amp;nbsp;&amp;nbsp;&amp;nbsp;in 0.5s
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255); background-color: rgb(53, 53, 53);&quot;&gt;2019-01-10 16:40:02 (44.2 MB/s) - 'WindowsImageBackup.zip' saved [21106128/21106128]&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/9947EB495C3BE61122&quot; filemime=&quot;image/jpeg&quot; filename=&quot;rt3.png&quot; height=&quot;159&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;4. Windows backup 도구를 이용해서 백업 파일 복구&amp;nbsp;&lt;/p&gt;&lt;p&gt;시작 -&amp;gt; Windows Server Backup -&amp;gt; Restore 선택&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/996017405C3BF3A82B&quot; filemime=&quot;image/jpeg&quot; filename=&quot;rt4.png&quot; height=&quot;515&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:752px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/9984023A5C3BF3C02E&quot; filemime=&quot;image/jpeg&quot; filename=&quot;rt5.png&quot; height=&quot;582&quot; style=&quot;&quot; width=&quot;752&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:752px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/9996FE3C5C3BF3DB2D&quot; filemime=&quot;image/jpeg&quot; filename=&quot;rt6.png&quot; height=&quot;580&quot; width=&quot;752&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:753px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/993162365C3BF3EC2D&quot; filemime=&quot;image/jpeg&quot; filename=&quot;rt7.png&quot; height=&quot;585&quot; style=&quot;&quot; width=&quot;753&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:754px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99AE063B5C3BF3FC32&quot; filemime=&quot;image/jpeg&quot; filename=&quot;rt8.png&quot; height=&quot;582&quot; style=&quot;&quot; width=&quot;754&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:752px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99CA89335C3BF40831&quot; filemime=&quot;image/jpeg&quot; filename=&quot;rt9.png&quot; height=&quot;585&quot; style=&quot;&quot; width=&quot;752&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:751px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99DEB7385C3BF4142E&quot; filemime=&quot;image/jpeg&quot; filename=&quot;rt10.png&quot; height=&quot;584&quot; style=&quot;&quot; width=&quot;751&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/991B10355C3BF42031&quot; filemime=&quot;image/jpeg&quot; filename=&quot;rt11.png&quot; height=&quot;567&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:751px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/9931453E5C3BF42C2C&quot; filemime=&quot;image/jpeg&quot; filename=&quot;rt12.png&quot; height=&quot;582&quot; style=&quot;&quot; width=&quot;751&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:752px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99EEC4335C3BF43931&quot; filemime=&quot;image/jpeg&quot; filename=&quot;rt13.png&quot; height=&quot;581&quot; style=&quot;&quot; width=&quot;752&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/995A47355C3BF4442E&quot; filemime=&quot;image/jpeg&quot; filename=&quot;rt14.png&quot; height=&quot;567&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;백업한 파일이 조회되면 작업은 완료된 것이다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;div style=&quot;text-align:right; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://cleanupthedesk.tistory.com/18&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Naver Cloud Platform</category>
<category>objectstorage</category>
<category>S3</category>
<category>Windows</category>
<category>네이버클라우드</category>
<category>네이버클라우드플랫폼</category>
<category>백업</category>
<category>복구</category>
<category>오브젝트스토리지</category>
<author>한크크</author>
<guid>https://cleanupthedesk.tistory.com/18</guid>
<comments>https://cleanupthedesk.tistory.com/18#entry18comment</comments>
<pubDate>Mon, 14 Jan 2019 11:33:02 +0900</pubDate>
</item>
<item>
<title>네이버클라우드플랫폼에서 Windows 서버 백업 오브젝트 스토리지에 보관하기 - 1</title>
<link>https://cleanupthedesk.tistory.com/17</link>
<description>&lt;p style=&quot;text-align: left;&quot;&gt;서버를 운영하다 보면 백업의 보관 주기나 보관 위치에 대해 고민하게 된다. 특히나 저장소 공간이 여유롭지 않은 경우 백업을 받아서 저장을 하긴 해야하는데 로컬 디스크에 계속 보관하기에는 부담스러울 경우 백업을 로컬디스크에 받은 후 오브젝트 스토리지로 옮겨두는 것을 권장한다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left;&quot;&gt;네이버클라우드플랫폼에서도 AWS 의 S3 와 동일한 오브젝트 스토리지 서비스를 제공하는데 비용은 S3 보다 저렴하고 CLI 나 API 는 AWS 와 동일하게 사용하므로 비용이 고민된다면 네이버클라우드플랫폼으로 이관하는 것도 검토해 볼 만한 사안이라고 생각된다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left;&quot;&gt;여기 예제에서는 Windows 서버에 파일을 로컬 드라이브에 저장한 후 오브젝트 스토리지로 업로드 하고 업로드 한 파일을 새로운 Windows 서버에 다운로드해서 복구를 진행한다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left;&quot;&gt;CLI 를 통해 작업을 진행할 것이므로 서버에 AWS CLI 를 설치해야한다. 위에서 언급했듯이&amp;nbsp;AWS CLI 도구를 사용하고 endpoint 만 네이버클라우드플랫폼으로 설정하면 AWS 를 사용하듯 네이버클라우드플랫폼을 사용할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3&gt;1. pip 설치&lt;/h3&gt;&lt;p style=&quot;text-align: left;&quot;&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;div style=&quot;text-align: left;&quot;&gt;&amp;nbsp;&lt;a href=&quot;https://www.python.org/downloads/windows/&quot;&gt;https://www.python.org/downloads/windows/&lt;/a&gt;&amp;nbsp;에 접속해서 Python3 Windows x86-64 설치 관리자 다운로드 및 실행한다.&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99830C395C3BDAAD03&quot; filemime=&quot;image/jpeg&quot; filename=&quot;0114-1.png&quot; height=&quot;563&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3&gt;2. pip 를 사용해서 AWS CLI 설치&lt;br /&gt;&lt;/h3&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;Windows 서버에서 시작 -&amp;gt; CMD 실행&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px; text-align: left;&quot;&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# python —version&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# pip —version
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# pip install awscli
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# aws —version&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:671px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/992433335C3BDB703C&quot; filemime=&quot;image/jpeg&quot; filename=&quot;0114-2.png&quot; height=&quot;1010&quot; width=&quot;671&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;나중에 awscli 를 최신 버전으로 업그레이드 하려면&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px; text-align: left;&quot;&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;/span&gt;&lt;span style=&quot;font-family: Monaco; color: rgb(255, 255, 255);&quot;&gt;# pip install&amp;nbsp;—user&amp;nbsp;—upgrade awscli&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;/div&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3&gt;3. awscli 수행을 위한 PATH 수정&lt;/h3&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;where aws 를 수행했을 때 나오는 경로를 PATH 에 추가해준다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;/span&gt;&lt;span style=&quot;font-family: Monaco; color: rgb(255, 255, 255);&quot;&gt;# where aws&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;p style=&quot;text-align: left;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left;&quot;&gt;시작 -&amp;gt; environment variables 수행 후 아래와 같이 환경변수를 추가한다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left;&quot;&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/p&gt;&lt;div&gt;ex )&amp;nbsp;&lt;span style=&quot;font-size: 16px; color: rgb(68, 68, 68); font-family: &amp;quot;Amazon Ember&amp;quot;, &amp;quot;Open Sans&amp;quot;, Helvetica, Arial, sans-serif;&quot;&gt;예:&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;overflow: auto; font-size: 16px; color: rgb(255, 0, 0); font-family: Consolas, Courier, mono; font-style: italic;&quot;&gt;C:\existing\path&lt;/span&gt;&lt;span style=&quot;overflow: auto; font-size: 16px; color: rgb(68, 68, 68); font-family: Consolas, Courier, mono; font-weight: bold;&quot;&gt;;&lt;/span&gt;&lt;span style=&quot;overflow: auto; font-size: 16px; color: rgb(255, 0, 0); font-family: Consolas, Courier, mono; font-style: italic; font-weight: bold;&quot;&gt;C:\new\path&lt;/span&gt;&lt;/div&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/991C20365C3BDC9408&quot; filemime=&quot;image/jpeg&quot; filename=&quot;0114-4.png&quot; height=&quot;380&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:417px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/991DDB365C3BDC9508&quot; filemime=&quot;image/jpeg&quot; filename=&quot;0114-5.png&quot; height=&quot;474&quot; width=&quot;417&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:391px;text-align: center;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/999611365C3BDC9504&quot; filemime=&quot;image/jpeg&quot; filename=&quot;0114-6.png&quot; height=&quot;438&quot; style=&quot;text-align: center;&quot; width=&quot;391&quot;/&gt;&lt;/span&gt;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:355px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/993F5E365C3BDC9407&quot; filemime=&quot;image/jpeg&quot; filename=&quot;0114-7.png&quot; height=&quot;149&quot; width=&quot;355&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;환경변수 입력 후 아래와 같이 aws 커맨드를 수행했을 때 PATH 오류가 아닌 aws 커맨드 사용법이 나오면 정상적으로 반영된 것이다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:670px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99D755335C3BDD3809&quot; filemime=&quot;image/jpeg&quot; filename=&quot;0114-8.png&quot; height=&quot;337&quot; width=&quot;670&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3&gt;4. Access/Secret Key 등록&amp;nbsp;&lt;/h3&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;네이버클라우드플랫폼 오브젝트 스토리지에 접근하기 위해서는 NCP 에서 발급한 access/secret key 를 등록해 두어야 매번 키 입력 없이 편하게 사용할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/9947FA3B5C3BDE3D07&quot; filemime=&quot;image/jpeg&quot; filename=&quot;2019-01-14 09-53-42.png&quot; height=&quot;184&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;네이버클라우드플랫폼의 Access/secret key 정보는 ncloud.com 로그인 후 마이페이지-&amp;gt; 인증키 관리 에서 확인할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99BF91355C3BDE8308&quot; filemime=&quot;image/jpeg&quot; filename=&quot;0114-10.png&quot; height=&quot;550&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3&gt;5. 오브젝트스토리지 버킷 생성&lt;/h3&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;백업 데이터를 저장할 버킷을 생성한다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;네이버클라우드플랫폼 콘솔에서&amp;nbsp;오브젝트 스토리지 서비스 페이지에서 버킷 생성 버튼을 클릭하고 버킷명과 공개 권한을 설정한다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;이 예제에서는 winbk001 이라는 버킷 이름을 생성했다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/9950903B5C3BE0310A&quot; filemime=&quot;image/jpeg&quot; filename=&quot;0114-11.png&quot; height=&quot;276&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3&gt;6. CLI 로 버킷 조회하기&lt;/h3&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;cli 설치 및 access/secret key 등록이 잘 되었는지 확인하기 위해 cli 로 버킷을 조회해본다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;objectstorage endpoint url 을 리전 별로 다르기 떄문에 아래 리전 별 endpoint url 을 참고하기 바랍니다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/p&gt;&lt;table style=&quot;width: 720px;-en-clipboard:true;&quot;&gt;
&lt;colgroup&gt;&lt;col style=&quot;width: 130px;&quot;&gt;&lt;col style=&quot;width: 130px;&quot;&gt;&lt;col style=&quot;width: 460px;&quot;&gt;&lt;/colgroup&gt;&lt;tbody style=&quot;box-sizing: border-box; -webkit-tap-highlight-color: transparent; text-size-adjust: none; -webkit-font-smoothing: antialiased; font-size: inherit;&quot;&gt;&lt;tr style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit;&quot;&gt;&lt;td style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; text-align: center; border: 1px solid rgb(221, 221, 221);&quot; class=&quot;&quot;&gt;&lt;div style=&quot;font-size: inherit;&quot;&gt;&lt;span style=&quot;font-size: 14px; break-inside: avoid; color: rgb(51, 51, 51); font-family: Roboto, &amp;quot;Apple SD Gothic Neo&amp;quot;, sans-serif; font-weight: 700;&quot;&gt;리전&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; text-align: center; border: 1px solid rgb(221, 221, 221);&quot; class=&quot;&quot;&gt;&lt;div style=&quot;font-size: inherit;&quot;&gt;&lt;span style=&quot;font-size: 14px; break-inside: avoid; color: rgb(51, 51, 51); font-family: Roboto, &amp;quot;Apple SD Gothic Neo&amp;quot;, sans-serif; font-weight: 700;&quot;&gt;리전 이름&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; text-align: center; border: 1px solid rgb(221, 221, 221);&quot; class=&quot;&quot;&gt;&lt;div style=&quot;font-size: inherit;&quot;&gt;&lt;span style=&quot;font-size: 14px; break-inside: avoid; color: rgb(51, 51, 51); font-family: Roboto, &amp;quot;Apple SD Gothic Neo&amp;quot;, sans-serif; font-weight: 700;&quot;&gt;호출 도메인&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit;&quot;&gt;&lt;td style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; text-align: center; border: 1px solid rgb(221, 221, 221);&quot; class=&quot;&quot;&gt;&lt;div style=&quot;font-size: inherit;&quot;&gt;&lt;span style=&quot;font-size: 14px; break-inside: avoid; color: rgb(51, 51, 51); font-family: Roboto, &amp;quot;Apple SD Gothic Neo&amp;quot;, sans-serif;&quot;&gt;한국&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; text-align: center; border: 1px solid rgb(221, 221, 221);&quot; class=&quot;&quot;&gt;&lt;div style=&quot;font-size: inherit;&quot;&gt;&lt;span style=&quot;font-size: 14px; break-inside: avoid; color: rgb(51, 51, 51); font-family: Roboto, &amp;quot;Apple SD Gothic Neo&amp;quot;, sans-serif;&quot;&gt;kr-standard&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; text-align: center; border: 1px solid rgb(221, 221, 221);&quot; class=&quot;&quot;&gt;&lt;div style=&quot;font-size: inherit;&quot;&gt;&lt;a href=&quot;https://kr.object.ncloudstorage.com/&quot; style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 14px; break-inside: avoid; color: rgb(20, 173, 234); font-family: Roboto, &amp;quot;Apple SD Gothic Neo&amp;quot;, sans-serif; background-position: 0px 0px;&quot;&gt;https://kr.object.ncloudstorage.com&lt;/a&gt;&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; background-color: rgb(248, 248, 248);&quot;&gt;&lt;td style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; text-align: center; border: 1px solid rgb(221, 221, 221);&quot; class=&quot;&quot;&gt;&lt;div style=&quot;font-size: inherit;&quot;&gt;&lt;span style=&quot;font-size: 14px; break-inside: avoid; color: rgb(51, 51, 51); font-family: Roboto, &amp;quot;Apple SD Gothic Neo&amp;quot;, sans-serif;&quot;&gt;미국서부(New)&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; text-align: center; border: 1px solid rgb(221, 221, 221);&quot; class=&quot;&quot;&gt;&lt;div style=&quot;font-size: inherit;&quot;&gt;&lt;span style=&quot;font-size: 14px; break-inside: avoid; color: rgb(51, 51, 51); font-family: Roboto, &amp;quot;Apple SD Gothic Neo&amp;quot;, sans-serif;&quot;&gt;us-standard&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; text-align: center; border: 1px solid rgb(221, 221, 221);&quot; class=&quot;&quot;&gt;&lt;div style=&quot;font-size: inherit;&quot;&gt;&lt;a href=&quot;https://us.object.ncloudstorage.com/&quot; style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 14px; break-inside: avoid; color: rgb(20, 173, 234); font-family: Roboto, &amp;quot;Apple SD Gothic Neo&amp;quot;, sans-serif; background-position: 0px 0px;&quot;&gt;https://us.object.ncloudstorage.com&lt;/a&gt;&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit;&quot;&gt;&lt;td style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; text-align: center; border: 1px solid rgb(221, 221, 221);&quot; class=&quot;&quot;&gt;&lt;div style=&quot;font-size: inherit;&quot;&gt;&lt;span style=&quot;font-size: 14px; break-inside: avoid; color: rgb(51, 51, 51); font-family: Roboto, &amp;quot;Apple SD Gothic Neo&amp;quot;, sans-serif;&quot;&gt;싱가포르(New)&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; text-align: center; border: 1px solid rgb(221, 221, 221);&quot; class=&quot;&quot;&gt;&lt;div style=&quot;font-size: inherit;&quot;&gt;&lt;span style=&quot;font-size: 14px; break-inside: avoid; color: rgb(51, 51, 51); font-family: Roboto, &amp;quot;Apple SD Gothic Neo&amp;quot;, sans-serif;&quot;&gt;sg-standard&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; text-align: center; border: 1px solid rgb(221, 221, 221);&quot; class=&quot;&quot;&gt;&lt;div style=&quot;font-size: inherit;&quot;&gt;&lt;a href=&quot;https://sg.object.ncloudstorage.com/&quot; style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 14px; break-inside: avoid; color: rgb(20, 173, 234); font-family: Roboto, &amp;quot;Apple SD Gothic Neo&amp;quot;, sans-serif; background-position: 0px 0px;&quot;&gt;https://sg.object.ncloudstorage.com&lt;/a&gt;&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; background-color: rgb(248, 248, 248);&quot;&gt;&lt;td style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; text-align: center; border: 1px solid rgb(221, 221, 221);&quot; class=&quot;&quot;&gt;&lt;div style=&quot;font-size: inherit;&quot;&gt;&lt;span style=&quot;font-size: 14px; break-inside: avoid; color: rgb(51, 51, 51); font-family: Roboto, &amp;quot;Apple SD Gothic Neo&amp;quot;, sans-serif;&quot;&gt;일본(New)&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; text-align: center; border: 1px solid rgb(221, 221, 221);&quot; class=&quot;&quot;&gt;&lt;div style=&quot;font-size: inherit;&quot;&gt;&lt;span style=&quot;font-size: 14px; break-inside: avoid; color: rgb(51, 51, 51); font-family: Roboto, &amp;quot;Apple SD Gothic Neo&amp;quot;, sans-serif;&quot;&gt;jp-standard&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; text-align: center; border: 1px solid rgb(221, 221, 221);&quot; class=&quot;&quot;&gt;&lt;div style=&quot;font-size: inherit;&quot;&gt;&lt;a href=&quot;https://jp.object.ncloudstorage.com/&quot; style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 14px; break-inside: avoid; color: rgb(20, 173, 234); font-family: Roboto, &amp;quot;Apple SD Gothic Neo&amp;quot;, sans-serif; background-position: 0px 0px;&quot;&gt;https://jp.object.ncloudstorage.com&lt;/a&gt;&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit;&quot;&gt;&lt;td style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; text-align: center; border: 1px solid rgb(221, 221, 221);&quot; class=&quot;&quot;&gt;&lt;div style=&quot;font-size: inherit;&quot;&gt;&lt;span style=&quot;font-size: 14px; break-inside: avoid; color: rgb(51, 51, 51); font-family: Roboto, &amp;quot;Apple SD Gothic Neo&amp;quot;, sans-serif;&quot;&gt;독일(New)&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; text-align: center; border: 1px solid rgb(221, 221, 221);&quot; class=&quot;&quot;&gt;&lt;div style=&quot;font-size: inherit;&quot;&gt;&lt;span style=&quot;font-size: 14px; break-inside: avoid; color: rgb(51, 51, 51); font-family: Roboto, &amp;quot;Apple SD Gothic Neo&amp;quot;, sans-serif;&quot;&gt;de-standard&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;td style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: inherit; text-align: center; border: 1px solid rgb(221, 221, 221);&quot; class=&quot;&quot;&gt;&lt;div style=&quot;font-size: inherit;&quot;&gt;&lt;a href=&quot;https://de.object.ncloudstorage.com/&quot; style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; outline: 0px; font-size: 14px; break-inside: avoid; color: rgb(20, 173, 234); font-family: Roboto, &amp;quot;Apple SD Gothic Neo&amp;quot;, sans-serif; text-decoration-line: underline; background-position: 0px 0px;&quot;&gt;https://de.object.ncloudstorage.com&lt;/a&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;C:\Users\Administrator&amp;gt;aws --endpoint-url=https://sg.objectstorage.ncloud.com s3 ls&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;2019-01-09 12:34:52 winbk001&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;위와 같이 버킷 조회 커맨드를 수행했을 떄 생성한 버킷이 조회된다면 설정 작업은 완료된 것이다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;그럼 다음 포스팅에서 윈도우즈 백업 데이터를 오브젝트에 업로드/다운로드 해 보도록 하겠다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:right; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://cleanupthedesk.tistory.com/17&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Naver Cloud Platform</category>
<category>AWSCLI</category>
<category>NCP</category>
<category>objectstorage</category>
<category>S3</category>
<category>네이버클라우드</category>
<category>네이버클라우드플랫폼</category>
<category>백업보관</category>
<category>오브젝트스토리지</category>
<author>한크크</author>
<guid>https://cleanupthedesk.tistory.com/17</guid>
<comments>https://cleanupthedesk.tistory.com/17#entry17comment</comments>
<pubDate>Mon, 14 Jan 2019 10:09:16 +0900</pubDate>
</item>
<item>
<title>Kubernetes 에서 Wordpress + MySQL 구성하기 (Persistent Volume)</title>
<link>https://cleanupthedesk.tistory.com/16</link>
<description>&lt;div style=&quot;-en-clipboard:true;&quot;&gt;K8S Cluster 환경은 사전 구성이 되어 있어야 하고&amp;nbsp;&lt;a href=&quot;http://cleanupthedesk.tistory.com/13&quot; target=&quot;_blank&quot;&gt;&lt;span style=&quot;background-color: rgb(234, 234, 234);&quot;&gt;2018/11/30 - [Naver Cloud Platform] - 네이버 클라우드에 Kubernetes (k8s) cluster 구성하기 (Calico)&lt;/span&gt;&lt;/a&gt;&lt;/div&gt;&lt;div style=&quot;-en-clipboard:true;&quot;&gt;Pods 에서 Persistent volume 을 사용하기 위해 각 Node 마다 50GB 볼륨을 할당하고 마운트 한다. (예제에서는 /data001 로 마운트 함)
&lt;/div&gt;&lt;div style=&quot;-en-clipboard:true;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;-en-clipboard:true;&quot;&gt;아래 구성에서 Kubernetes 환경은 네이버클라우드플랫폼 싱가폴 리전에서 VM 으로 구성했으며, CNI 는 Calico 로 구성하였다.&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;h3&gt;1. PV (Persistent Volume) 생성
&lt;/h3&gt;&lt;div&gt;PV 는 K8S 관리자가 설정하는 클러스터의 저장소로 사용자가 PVC 를 생성하기 위해 설정해 두는 물리적인 공간이라고 볼 수 있다.&amp;nbsp;
&lt;/div&gt;&lt;div&gt;지금 구성에서는 K8S Cluster 를 스스로 운영하기 때문에 PV 설정이 필요하고, GKE 와 같이 Cluster 를 구성해 주는 서비스의 경우 PVC 만 설정해서 사용하면 된다.
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/p&gt;&lt;div&gt;50GB 파일시스템을 마운트 했으므로 25GB 짜리 PV 를 2개 생성한다.&amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# vi pv1.yaml&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;-en-clipboard:true;&quot;&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;kind: PersistentVolume
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;apiVersion: v1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;name: pv0001
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;labels:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;type: local
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;spec:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;capacity:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;storage: 25Gi
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;accessModes:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- ReadWriteOnce
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;hostPath:
&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;/p&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp; &amp;nbsp; path: &quot;/data001/pv0001&quot;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# vi pv2.yaml&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;kind: PersistentVolume
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;apiVersion: v1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;name: pv0002
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;labels:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;type: local
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;spec:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;capacity:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;storage: 25Gi
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;accessModes:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- ReadWriteOnce
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;hostPath:
&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp; &amp;nbsp; path: &quot;/data001/pv0002&quot;&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# kubectl create -f pv1.yaml&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# kubectl create -f pv2.yaml
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# kubectl get pv
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;NAME&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;CAPACITY&amp;nbsp;&amp;nbsp;&amp;nbsp;ACCESS MODES&amp;nbsp;&amp;nbsp;&amp;nbsp;RECLAIM POLICY&amp;nbsp;&amp;nbsp;&amp;nbsp;STATUS&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;CLAIM&amp;nbsp;&amp;nbsp;&amp;nbsp;STORAGECLASS&amp;nbsp;&amp;nbsp;&amp;nbsp;REASON&amp;nbsp;&amp;nbsp;&amp;nbsp;AGE
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;pv0001&amp;nbsp;&amp;nbsp;&amp;nbsp;25Gi&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RWO&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Retain&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Available&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;8s
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;pv0002&amp;nbsp;&amp;nbsp;&amp;nbsp;25Gi&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RWO&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Retain&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Available&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;5s&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3&gt;2. PVC (Persistent Volume Claim) 생성&amp;nbsp;
&lt;/h3&gt;&lt;div&gt;PVC 는 사용자가 Pod 를 만들면서 요청하는 스토리지로 PV 가 있어야 생성된다. 별도로 PV 를 지정하지 않아도 &amp;nbsp;PV 에 알아서 할당된다.&amp;nbsp;
&lt;/div&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/p&gt;&lt;div&gt;Wordpress 와 MySQL 이 각각 다른 PVC 를 사용하도록 생성한다.&amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# vi&amp;nbsp;wordpress-volumeclaim.yaml&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;-en-clipboard:true;&quot;&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;kind: PersistentVolumeClaim
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;apiVersion: v1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;name: wordpress-volumeclaim
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;spec:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;accessModes:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- ReadWriteOnce
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;resources:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;requests:
&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;/p&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; storage: 10Gi&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# vi mysql-volumeclaim.yaml&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;-en-clipboard:true;&quot;&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;kind: PersistentVolumeClaim
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;apiVersion: v1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;name: mysql-volumeclaim
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;spec:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;accessModes:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- ReadWriteOnce
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;resources:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;requests:
&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;/p&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; storage: 10Gi&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 12px; font-family: Monaco; color: rgb(255, 255, 255);&quot;&gt;# kubectl create&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;wordpress-volumeclaim.yaml&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# kubectl create&amp;nbsp;mysql-volumeclaim.yaml
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# kubectl get pvc
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;NAME&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;STATUS&amp;nbsp;&amp;nbsp;&amp;nbsp;VOLUME&amp;nbsp;&amp;nbsp;&amp;nbsp;CAPACITY&amp;nbsp;&amp;nbsp;&amp;nbsp;ACCESS MODES&amp;nbsp;&amp;nbsp;&amp;nbsp;STORAGECLASS&amp;nbsp;&amp;nbsp;&amp;nbsp;AGE
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;mysql-volumeclaim&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Bound&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pv0002&amp;nbsp;&amp;nbsp;&amp;nbsp;25Gi&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RWO&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;4s
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;wordpress-volumeclaim&amp;nbsp;&amp;nbsp;&amp;nbsp;Bound&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pv0001&amp;nbsp;&amp;nbsp;&amp;nbsp;25Gi&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RWO&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;12s&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3&gt;3. MySQL Root 패스워드 저장
&lt;/h3&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/p&gt;&lt;div&gt;mysql root 패스워드를 mysql-password 라는 secret object 에 저장한다.&amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# kubectl create secret generic mysql-password --from-literal=password=rP@ssw0rd&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# kubectl describe secret mysql-password
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Name:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mysql-password
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Namespace:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;default
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Labels:&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;none&amp;gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Annotations:&amp;nbsp;&amp;nbsp;&amp;lt;none&amp;gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Type:&amp;nbsp;&amp;nbsp;Opaque
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Data
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;====
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;password:&amp;nbsp;&amp;nbsp;9 bytes&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3&gt;4. MySQL Pod 배포
&lt;/h3&gt;&lt;div&gt;MySQL 이 설치된 Pod 를 배포하면서 Database , User, User password 도 함께 설정해준다.&amp;nbsp;
&lt;/div&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/p&gt;&lt;div&gt;아래 예제에서 k8suser 의 패스워드를 노출했는데 위 Root 패스워드의 설정과 같이 secret 오브젝트 형태로 저장해도 된다.&amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# vi mysql.yaml&lt;/span&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;apiVersion: apps/v1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;kind: Deployment
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;name: mysql
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;labels:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;app: mysql
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;spec:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;replicas: 1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;selector:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;matchLabels:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;app: mysql
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;template:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;labels:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;app: mysql
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;spec:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;containers:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- image: mysql:5.6
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;name: mysql
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;env:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: MYSQL_ROOT_PASSWORD
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;valueFrom:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;secretKeyRef:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;name: mysql-password
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;key: password
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: MYSQL_DATABASE # 구성할 database명
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;value: k8sdb
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: MYSQL_USER # database에 권한이 있는 user
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;value: k8suser
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: MYSQL_ROOT_HOST # 접근 호스트
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; value: '%'&amp;nbsp;&amp;nbsp;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: MYSQL_PASSWORD # database에 권한이 있는 user의 패스워드
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;value: P@ssw0rd!!
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ports:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- containerPort: 3306
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;name: mysql
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;volumeMounts:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: mysql-persistent-storage
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mountPath: /var/lib/mysql
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;volumes:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: mysql-persistent-storage
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;persistentVolumeClaim:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;claimName: mysql-volumeclaim&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# kubectl get pods -o wide&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;NAME&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;READY&amp;nbsp;&amp;nbsp;&amp;nbsp;STATUS&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RESTARTS&amp;nbsp;&amp;nbsp;&amp;nbsp;AGE&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;IP&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;NODE&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;NOMINATED NODE
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;mysql-86bb7c99f9-62jmj&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;1/1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Running&amp;nbsp;&amp;nbsp;&amp;nbsp;0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;3m28s&amp;nbsp;&amp;nbsp;&amp;nbsp;172.27.116.214&amp;nbsp;&amp;nbsp;&amp;nbsp;c2node3&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;none&amp;gt;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3&gt;5. MySQL 서비스 생성
&lt;/h3&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/p&gt;&lt;div&gt;앞에서 생성한 MySQL 컨테이너를 노출하기 위해 서비스를 생성하고 뒤에서 생성할 Wordpress 컨테이너가 접근할 수 있도록 설정한다.&amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# vi mysql-service.yaml&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;apiVersion: v1&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;kind: Service
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;name: mysql
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;labels:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;app: mysql
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;spec:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;type: ClusterIP
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;ports:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- port: 3306
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;selector:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;app: mysql&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# kubectl create -f mysql-service.yaml
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# kubectl get svc -o wide
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;NAME&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;TYPE&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;CLUSTER-IP&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;EXTERNAL-IP&amp;nbsp;&amp;nbsp;&amp;nbsp;PORT(S)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;AGE&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;SELECTOR
&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;mysql&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ClusterIP&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;172.20.12.226&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;none&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;3306/TCP&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;3m40s&amp;nbsp;&amp;nbsp;&amp;nbsp;app=mysql&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3&gt;6. Wordpress Pod 배포
&lt;/h3&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/p&gt;&lt;div&gt;wordpress pod 배포 파일에는 MySQL 접근이 가능한 정보가 포함되어야 한다.&amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# vi wordpress.yaml&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;apiVersion:&amp;nbsp;apps/v1&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;kind: Deployment
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;name: wordpress
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;labels:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;app: wordpress
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;spec:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;replicas: 1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;selector:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;matchLabels:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;app: wordpress
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;template:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;labels:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;app: wordpress
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;spec:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;containers:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- image: wordpress
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;name: wordpress
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;env:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: WORDPRESS_DB_HOST
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;value: mysql:3306
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: WORDPRESS_DB_NAME
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;value: k8sdb
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: WORDPRESS_DB_USER
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;value: k8suser
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: WORDPRESS_DB_PASSWORD
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;value: P@ssw0rd!!
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ports:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- containerPort: 80
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;name: wordpress
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;volumeMounts:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: wordpress-persistent-storage
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mountPath: /var/www/html
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;volumes:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: wordpress-persistent-storage
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;persistentVolumeClaim:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;claimName: wordpress-volumeclaim&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# kubectl get pods -o wide&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;NAME&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;READY&amp;nbsp;&amp;nbsp;&amp;nbsp;STATUS&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RESTARTS&amp;nbsp;&amp;nbsp;&amp;nbsp;AGE&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;IP&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;NODE&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;NOMINATED NODE
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;mysql-86bb7c99f9-62jmj&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;1/1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Running&amp;nbsp;&amp;nbsp;&amp;nbsp;0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;3m28s&amp;nbsp;&amp;nbsp;&amp;nbsp;172.27.116.214&amp;nbsp;&amp;nbsp;&amp;nbsp;c2node3&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;none&amp;gt;
&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;wordpress-7ff695b6c6-vp5rc&amp;nbsp;&amp;nbsp;&amp;nbsp;1/1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Running&amp;nbsp;&amp;nbsp;&amp;nbsp;0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;2m52s&amp;nbsp;&amp;nbsp;&amp;nbsp;172.27.116.215&amp;nbsp;&amp;nbsp;&amp;nbsp;c2node3&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;none&amp;gt;&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3&gt;7. Wordpress 서비스 배포
&lt;/h3&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/p&gt;&lt;div&gt;Kubernetes Pod IP 를 사설 IP 로 설정하여 직접 접근이 불가하므로 Node IP 와 Node Port 를 통해 접근할 수 있도록 Wordpress 서비스를 기동한다.&amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# vi wordpress-service.yaml&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;apiVersion: v1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;kind: Service
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;labels:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;app: wordpress
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;name: wordpress
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;spec:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;type: NodePort
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;ports:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- port: 80
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;targetPort: 80
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;protocol: TCP
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;selector:
&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp; &amp;nbsp; app: wordpress&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# kubectl get svc -o wide&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;NAME&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;TYPE&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;CLUSTER-IP&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;EXTERNAL-IP&amp;nbsp;&amp;nbsp;&amp;nbsp;PORT(S)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;AGE&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;SELECTOR
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;mysql&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ClusterIP&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;172.20.12.226&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;none&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;3306/TCP&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;3m40s&amp;nbsp;&amp;nbsp;&amp;nbsp;app=mysql
&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;wordpress&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;font style=&quot;color: rgb(255, 38, 0); --inversion-type-color: simple;&quot;&gt;&lt;span style=&quot;color: rgb(255, 0, 0);&quot;&gt;NodePort&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt; &amp;nbsp; &amp;nbsp; &amp;nbsp; 172.17.70.243&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;none&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;80:&lt;/span&gt;&lt;font style=&quot;color: rgb(255, 38, 0); --inversion-type-color: simple;&quot;&gt;&lt;span style=&quot;color: rgb(255, 0, 0);&quot;&gt;31776&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/TCP&amp;nbsp;&amp;nbsp;&amp;nbsp;26s&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;app=wordpress&lt;/span&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3&gt;8. Wordpress 웹 접속 및 설정&amp;nbsp;
&lt;/h3&gt;&lt;div&gt;Wordpress 가 기동된 Pod 의 노드 IP 와 Wordpress 서비스의 Node Port 로 웹 브라우저를 통해 접속한다.&amp;nbsp;
&lt;/div&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/p&gt;&lt;div&gt;아래와 같은 페이지가 노출되면 정상적으로 서비스 구성이 완료된 것이다.&amp;nbsp;&amp;nbsp;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/993B653B5C353E8C2A&quot; filemime=&quot;image/jpeg&quot; filename=&quot;wd.png&quot; height=&quot;563&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:right; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://cleanupthedesk.tistory.com/16&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>HOWTO</category>
<category>k8s</category>
<category>kubernetes</category>
<category>MySQL</category>
<category>NCP</category>
<category>POD</category>
<category>Wordpress</category>
<category>네이버</category>
<category>네이버클라우드</category>
<category>네이버클라우드플랫폼</category>
<category>쿠버네티스</category>
<author>한크크</author>
<guid>https://cleanupthedesk.tistory.com/16</guid>
<comments>https://cleanupthedesk.tistory.com/16#entry16comment</comments>
<pubDate>Wed, 09 Jan 2019 09:25:18 +0900</pubDate>
</item>
<item>
<title>MySQL DB replication 구성하기</title>
<link>https://cleanupthedesk.tistory.com/15</link>
<description>&lt;p&gt;MySQL DB 사용 시 Master 서버의 장애에 대비하거나 읽기 부하 분산을 위해 Replication 을 구성하여 사용한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;RDS 와 같이 관리형 DB 서비스를 사용할 경우에는 굳이 구성할 필요 없지만 늘 관리형 DB 를 사용할 수 있는 건 아니니 구성 방법 정도는 알아두도록 하자.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;아래 이미지와 같이 1대의 서버를 Master 로 두고 2대의 replication 을 구성하고자 한다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:679px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99B81E465C27375602&quot; filemime=&quot;image/jpeg&quot; filename=&quot;p1.png&quot; height=&quot;458&quot; width=&quot;679&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;1. VM 생성하기&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;네이버 클라우드 플랫폼에서 MySQL 5.7 엔진이 설치된 이미지로 VM 3대를 생성한다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/9976CC405C27398835&quot; filemime=&quot;image/jpeg&quot; filename=&quot;vm.png&quot; height=&quot;254&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;2. VM 에 볼륨 할당하기&lt;/p&gt;&lt;p&gt;데이터를 저장할 볼륨을 생성 후 VM 별로 연결해 준다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;테스트를 위해 할당하는 볼륨이므로 30GB 씩만 할당해 주었다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/990606405C273A1431&quot; filemime=&quot;image/jpeg&quot; filename=&quot;p2.png&quot; height=&quot;854&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;3. 파일 시스템 마운트&lt;/p&gt;&lt;p&gt;볼륨만 할당해서는 사용할 수 없다. 파일시스템도 생성해서 각각 마운트 해준다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;여기서는 /dev/xvdb 를 /data001 로 마운트 했다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99B45E4E5C273A6F08&quot; filemime=&quot;image/jpeg&quot; filename=&quot;p3.png&quot; height=&quot;482&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;/etc/fstab 에 등록해 주어야 리부팅 하더라도 볼륨이 마운트 될 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99D0694F5C273AC407&quot; filemime=&quot;image/jpeg&quot; filename=&quot;p4.png&quot; height=&quot;145&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;마지막으로 mount 할 대상인 data001 디렉토리를 생성해 준 후 마운트 한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# mkdir /data001&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# mount -a&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;4. mysql 데이터 저장 디렉토리 변경&amp;nbsp;&lt;/p&gt;&lt;p&gt;데이터를 /root 영역에 저장하다 보면 용량이 크지 않을 경우에는 상관 없겠지만 데이터가 많아지만 파일시스템 용량 증설이 어렵고 OS 에 문제가 생겨서 서버가 부팅되지 않을 경우 데이터도 함께 유실될 가능성이 있기 때문에 데이터는 별도로 할당한 볼륨에 저장하는 것이 좋다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;먼저 master 서버의 DB 에 접속해서 현재의 datadir 를 확인한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;기본 설정인 /var/lib/mysql 로 되어 있음을 확인할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/p&gt;&lt;div&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/990DEB455C273BAC35&quot; filemime=&quot;image/jpeg&quot; filename=&quot;p5.png&quot; height=&quot;414&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;데이터 저장 경로 변경을 위해 mysql 서비스를 중지한다.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# systemctl stop mysqld&lt;/span&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;그리고 /var/lib/mysql 하위에 있던 기본 데이터 파일 및 설정 정보를 /data001 하위로 복사하고 소유권 정보를 변경한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# rsync -av /var/lib/mysql /data001/&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# chown -R mysql:mysql /data001/mysql&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;5. /etc/my.cnf 파일 내용 수정&amp;nbsp;&lt;/p&gt;&lt;p&gt;변경한 디렉토리 정보로 mysql 서비스가 기동될 수 있도록 /etc/my.cnf 파일에 내용을 수정한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;네이버클라우드플랫폼에서 제공한 mysql 이미지에는 기본 설정이 들어가 있는데 [mysqld] 하위 타 클라우드 플랫폼을 사용하거나 물리 서버에 설치했다면 해당 내용이 없을 수 있다. 동일하게 넣어주는 것이 좋다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;여기서 디렉토리 설정 변경 관련한 파라미터는 [mysqld] 하위의 datadir , socket 정보와 [client] 하위의 socket 정보니 참고하시길..&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/9966FC355C273CB80B&quot; filemime=&quot;image/jpeg&quot; filename=&quot;p6.png&quot; height=&quot;666&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;이제 mysql 서비스를 기동시켜서 변경된 datadir 이 반영되어 기동되는지 확인해 본다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;master 서버 설정이 정상적으로 반영되었음이 확인되면 slave 서버 2대에도 동일하게 datadir 를 변경해 준다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# systemctl start mysqld&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;6. DB 의 Master / Slave 설정&amp;nbsp;&lt;/p&gt;&lt;p&gt;먼저 Master 서버의 /etc/my.cnf 파일에 master 서버임을 기재해준다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# vi /etc/my.cnf&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;[mysqld]&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;server-id = 1
&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;log-bin=mysql-bin&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;slave 1 번 서버에는 아래와 같이 설정한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# vi /etc/my.cnf&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;[mysqld]&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;server-id = 2&lt;/span&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;slave 2번 서버에는 아래와 같이 설정한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# vi /etc/my.cnf&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;[mysqld]&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;server-id=3&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;master / slave 서버의 my.cnf 에 등록한 후 mysql 서비스를 재기동한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# systemctl restart mysqld&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;7. master 서버에서 DB 관리를 위해 사용할 user 를 생성한 후 replication 권한을 부여한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;예제에서는 testuser 라는 계정을 생성하고 P@ssw0rd 라는 패스워드를 설정했다. &lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# mysql -u root -p&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;text-indent: 0in; font-size: 10pt; font-family: &amp;quot;Nanum Gothic&amp;quot;; color: rgb(255, 255, 255); letter-spacing: -0.2pt; vertical-align: baseline;&quot;&gt;mysql&amp;gt; create
user ’testuser&lt;/span&gt;&lt;span style=&quot;text-indent: 0in; font-size: 10pt; font-family: &amp;quot;Nanum Gothic&amp;quot;; color: rgb(255, 255, 255); letter-spacing: -0.2pt; vertical-align: baseline;&quot;&gt;'@'localhost&lt;/span&gt;&lt;span style=&quot;text-indent: 0in; font-size: 10pt; font-family: &amp;quot;Nanum Gothic&amp;quot;; color: rgb(255, 255, 255); letter-spacing: -0.2pt; vertical-align: baseline;&quot;&gt;'
identified by ’P@ssw0rd&lt;/span&gt;&lt;span style=&quot;text-indent: 0in; font-size: 10pt; font-family: &amp;quot;Nanum Gothic&amp;quot;; color: rgb(255, 255, 255); letter-spacing: -0.2pt; vertical-align: baseline;&quot;&gt;’ ;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;font color=&quot;#ffffff&quot; face=&quot;Nanum Gothic&quot;&gt;&lt;span style=&quot;font-size: 13.3333px; letter-spacing: -0.266667px; color: rgb(255, 255, 255);&quot;&gt;mysql&amp;gt;&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;grant replication slave on *.* to testuser@'%' identified by 'P@ssw0rd’ ;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;mysql&amp;gt; flush privileges ;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;8. Master 서버 db dump 수행&amp;nbsp;&lt;/p&gt;&lt;p&gt;Slave 서버에 Master 서버 데이터를 복제하기 전에 시점을 맞추기 위해서 Master 서버에 lock 을 걸고 DB dump 를 수행한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;아래 이미지와 같이 dump.db 파일이 생성되면 완료된 것이다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;mysql &amp;gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;flush tables with read lock ;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;mysql &amp;gt; exit&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;#&amp;nbsp;mysqldump -u root -p --all-databases &amp;gt; dump.db&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/9955DC475C27407A31&quot; filemime=&quot;image/jpeg&quot; filename=&quot;p7.png&quot; height=&quot;205&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;DB 에 접속해서 File 명과 Position 을 확인한다. slave 에 복제 이후에 번호가 동일해야 한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99AFE24C5C2740D314&quot; filemime=&quot;image/jpeg&quot; filename=&quot;p8.png&quot; height=&quot;116&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;File 명과 Position 번호 확인 후 Master DB 에 lock 을 해제한다.&amp;nbsp;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;mysql&amp;gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;unlock tables ;&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;9. Slave 서버에 Master DB 복구&lt;/p&gt;&lt;p&gt;앞에서 수행한 master db 의 dump 파일을 통해 slave db 에 데이터를 복제한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;먼저 master db 의 dump 파일을 각 slave 서버로 복사한 후 복구한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;#scp dump.db root@slave서버IP:/복사위치/&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;#&amp;nbsp;mysql -u root -p &amp;lt; dump.db&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;10. auto.cnf 파일 삭제&lt;/p&gt;&lt;p&gt;동일한 mysql 엔진이 설치된 이미지로 VM 을 생성했기 때문에 서버 UUID 가 동일하게 설정되므로 Slave 서버로 replication 을 시작하면 UUID 중복 에러가 발생한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;master/slave 모든 서버의 데이터 저장 경로에서 my.cnf 파일을 삭제해야 한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99BFCE4F5C27420110&quot; filemime=&quot;image/jpeg&quot; filename=&quot;p9.png&quot; height=&quot;169&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;11. Slave 서버에서 Master 지정 및 replication 시작&amp;nbsp;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;p&gt;각 slave 서버의 DB 에 접속하여 master 서버의 IP , ID, PWD , log file , position number 에 대한 설정을 진행한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;mysql&amp;gt; change master to
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;gt; master_host='master 서버의 IP 입력',
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;gt; master_user='testuser',
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;gt; master_password='P@ssw0rd',
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;gt; master_log_file='mysql-bin.000002',
&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp; &amp;nbsp; -&amp;gt; master_log_pos=154 ;&lt;/span&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;설정이 완료되면 Master -&amp;gt; slave 로 replication 이 시작되므로 에러가 없는지 확인한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;mysql&amp;gt; show slave status \G ;&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;에러가 없다면 정상적으로 replication 구성이 완료된 것이고 이후 테이블 생성이나 데이터 insert 작업을 수행했을 때 slave 서버에서도 동일하게 조회할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:right; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://cleanupthedesk.tistory.com/15&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>HOWTO</category>
<category>MySQL</category>
<category>navercloudplatform</category>
<category>replication</category>
<category>네이버클라우드</category>
<category>네이버클라우드플랫폼</category>
<category>클라우드</category>
<author>한크크</author>
<guid>https://cleanupthedesk.tistory.com/15</guid>
<comments>https://cleanupthedesk.tistory.com/15#entry15comment</comments>
<pubDate>Sat, 29 Dec 2018 18:48:04 +0900</pubDate>
</item>
<item>
<title>Let's Encrypt 에서 ssl 인증서 발급 받기</title>
<link>https://cleanupthedesk.tistory.com/14</link>
<description>&lt;p&gt;웹 사이트에서 https 를 사용하기 위해서는 신뢰된 기관에서 발행한 ssl 인증서가 필요하다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;실제로 서비스를 운영하는 사이트의 경우에는 유료 인증서를 사용하겠지만 테스트를 위해서는 간단히 90일 동안 사용할 수 있는 무료 인증서도 유용하다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;Let's Encrypt 에 대한 상세 설명은 아래 링크를 참고&lt;/p&gt;&lt;p&gt;(&lt;a href=&quot;https://letsencrypt.org/&quot; target=&quot;_blank&quot; class=&quot;tx-link&quot;&gt;https://letsencrypt.org/&lt;/a&gt;)&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;먼저 인증서를 발급 받기 위해서 필요한 패키지들을 설치한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;1. 패키지 설치&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# yum install epel-release&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;# &lt;/span&gt;&lt;span style=&quot;font-size: 14px; white-space: pre; background-color: rgba(0, 0, 0, 0.047); color: rgb(255, 255, 255); font-family: monospace;&quot;&gt;yum install httpd mod_ssl python-certbot-apache&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;2. 인증서 발급&lt;/p&gt;&lt;p&gt;인증서를 적용할 웹 사이트에 도메인 등록이 되어 있어야 인증서를 발급받을 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;도메인으로 웹에 접속할 수 있는지 확인한 후 아래와 같이 진행한다. (연두색 부분만 입력하면 된다.)&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;[root@openprj02 live]# &lt;span style=&quot;color: rgb(171, 242, 0);&quot;&gt;certbot certonly --manual&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Saving debug log to /var/log/letsencrypt/letsencrypt.log&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Plugins selected: Authenticator manual, Installer None&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Starting new HTTPS connection (1): acme-v02.api.letsencrypt.org&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Please enter in your domain name(s) (comma and/or space separated)&amp;nbsp; (Enter 'c'&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;to cancel): &lt;span style=&quot;color: rgb(171, 242, 0);&quot;&gt;www.testkin.cf&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Obtaining a new certificate&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Performing the following challenges:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;http-01 challenge for www.testkin.cf&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;NOTE: The IP of this machine will be publicly logged as having requested this&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;certificate. If you're running certbot in manual mode on a machine that is not&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;your server, please ensure you're okay with that.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Are you OK with your IP being logged?&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;(Y)es/(N)o: &lt;span style=&quot;color: rgb(171, 242, 0);&quot;&gt;Y&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Create a file containing just this data:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;2CGwAIDRJMrQLGNjDtTkJ5PW0hLtgS__qq1Hig9slAA.nBlxCiTAXqgk3Fo1VmrDK0NeV_t44xkrmda3AVJE3zg&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;And make it available on your web server at this URL:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;http://www.testkin.cf/.well-known/acme-challenge/2CGwAIDRJMrQLGNjDtTkJ5PW0hLtgS__qq1Hig9slAA&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Press Enter to Continue&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Waiting for verification...&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Cleaning up challenges&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Resetting dropped connection: acme-v02.api.letsencrypt.org&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;IMPORTANT NOTES:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;- Congratulations! Your certificate and chain have been saved at:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp; &amp;nbsp;/etc/letsencrypt/live/www.testkin.cf-0001/fullchain.pem&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp; &amp;nbsp;Your key file has been saved at:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp; &amp;nbsp;/etc/letsencrypt/live/www.testkin.cf-0001/privkey.pem&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp; &amp;nbsp;Your cert will expire on 2019-03-30. To obtain a new or tweaked&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp; &amp;nbsp;version of this certificate in the future, simply run certbot&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp; &amp;nbsp;again. To non-interactively renew *all* of your certificates, run&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp; &amp;nbsp;&quot;certbot renew&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp;- If you like Certbot, please consider supporting our work by:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp; &amp;nbsp;Donating to ISRG / Let's Encrypt:&amp;nbsp; &amp;nbsp;https://letsencrypt.org/donate&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp; &amp;nbsp;Donating to EFF:&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; https://eff.org/donate-le&lt;/span&gt;&lt;/p&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;3. 생성된 인증서 확인&amp;nbsp;&lt;/p&gt;&lt;p&gt;/etc/letsencrypt/live 하위에 가면 등록한 도메인으로 디렉토리가 생성되어 있을 것이다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;해당 디렉토리로 들어가면 cert, private , chain key 가 발금되어 있어 필요에 따라 사용하면 된다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;[root@openprj02 www.testkin.cf-0001]# pwd&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/etc/letsencrypt/live/www.testkin.cf-0001&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;[root@openprj02 www.testkin.cf-0001]# ls&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;README&amp;nbsp; cert.pem&amp;nbsp; chain.pem&amp;nbsp; fullchain.pem&amp;nbsp; privkey.pem&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:right; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://cleanupthedesk.tistory.com/14&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>HOWTO</category>
<category>certification</category>
<category>letsencrypt</category>
<category>ssl</category>
<category>ssl인증서</category>
<author>한크크</author>
<guid>https://cleanupthedesk.tistory.com/14</guid>
<comments>https://cleanupthedesk.tistory.com/14#entry14comment</comments>
<pubDate>Thu, 27 Dec 2018 14:21:07 +0900</pubDate>
</item>
<item>
<title>네이버 클라우드에 Kubernetes (k8s) cluster 구성하기 (Calico)</title>
<link>https://cleanupthedesk.tistory.com/13</link>
<description>&lt;p&gt;Kubernetes 관련 다양한 매니지드 형태의 상품들을 클라우드 서비스에서 제공하고 있으나 VM 을 활용하여 Kubernetes Cluster 환경을 구성해 보았다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;CNI 는 Calico 를 사용한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 18pt;&quot;&gt;1. 네이버클라우드플랫폼에서 VM 생성하기&lt;/span&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;총 4대의 서버를 생성한다. 1대는 cluster 설치 playbook 을 수행할 Ansible 서버이고 나머지 3대는 K8S master, node 서버로 구성한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;ansible 수행은 서버가 아니라 PC 에서도 가능하다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;page&quot; title=&quot;Page 1&quot;&gt;
			
		&lt;/div&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:400px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99CA833C5C00CCCB34&quot; filemime=&quot;image/jpeg&quot; filename=&quot;servers.png&quot; height=&quot;301&quot; style=&quot;&quot; width=&quot;400&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;1-1) ACG (Security Group) &lt;/span&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;설정&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;각 서버 별 용도에 맞게 ACG 룰을 설정한다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;table class=&quot;txc-table&quot; width=&quot;689&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot; style=&quot;border: none; border-collapse: collapse; width: 689px;&quot; 맑은=&quot;&quot; 고딕&quot;,=&quot;&quot; sans-serif;font-size:13px&quot;=&quot;&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style=&quot;width: 124px; height: 30px; border-width: 1px; border-style: solid; border-color: rgb(204, 204, 204); background-color: rgb(217, 229, 255);&quot;&gt;&lt;p&gt;&amp;nbsp;Server&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 134px; height: 30px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204); border-top: 1px solid rgb(204, 204, 204); background-color: rgb(217, 229, 255);&quot;&gt;&lt;p&gt;&amp;nbsp;Protocol&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 138px; height: 30px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204); border-top: 1px solid rgb(204, 204, 204); background-color: rgb(217, 229, 255);&quot;&gt;&lt;p&gt;&amp;nbsp;Port&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 292px; height: 30px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204); border-top: 1px solid rgb(204, 204, 204); background-color: rgb(217, 229, 255);&quot;&gt;&lt;p&gt;&amp;nbsp;용도&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td style=&quot;width: 124px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204); border-left: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;Ansible&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 134px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;TCP&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 138px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;22&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 292px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;SSH&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td style=&quot;width: 124px; height: 167px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204); border-left: 1px solid rgb(204, 204, 204);&quot; colspan=&quot;1&quot; rowspan=&quot;7&quot;&gt;&lt;p&gt;&amp;nbsp;Master Node&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 134px; height: 23px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;TCP&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 138px; height: 23px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;22&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 292px; height: 23px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;SSH&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;width: 134px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;TCP&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 138px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;6443&amp;nbsp;&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 292px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;Kubernetes API Server&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;width: 134px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;TCP&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 138px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;2379-2380&amp;nbsp;&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 292px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;etcd server client API&amp;nbsp;&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;width: 134px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;TCP&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 138px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;10250&amp;nbsp;&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 292px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;Kubelet API&amp;nbsp;&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;width: 134px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;TCP&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 138px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;10251&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 292px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;Kube-scheduler&amp;nbsp;&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;width: 134px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;TCP&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 138px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;10252&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 292px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;Kube-controller-manager&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;width: 134px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;TCP&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 138px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;10255&amp;nbsp;&lt;/p&gt;&lt;/td&gt;
&lt;td style=&quot;width: 292px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot;&gt;&lt;p&gt;&amp;nbsp;Read-Only Kubelet API&amp;nbsp;&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td style=&quot;width: 124px; height: 96px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204); border-left: 1px solid rgb(204, 204, 204);&quot; rowspan=&quot;4&quot; colspan=&quot;1&quot;&gt;&amp;nbsp;Worker Node&lt;/td&gt;&lt;td style=&quot;width: 134px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot; rowspan=&quot;1&quot;&gt;&amp;nbsp;TCP&amp;nbsp;&lt;/td&gt;&lt;td style=&quot;width: 138px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot; rowspan=&quot;1&quot;&gt;&amp;nbsp;22&amp;nbsp;&lt;/td&gt;&lt;td style=&quot;width: 292px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot; rowspan=&quot;1&quot;&gt;&amp;nbsp;SSH&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width: 134px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot; rowspan=&quot;1&quot;&gt;&amp;nbsp;TCP&lt;/td&gt;&lt;td style=&quot;width: 138px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot; rowspan=&quot;1&quot;&gt;&amp;nbsp;10250&lt;/td&gt;&lt;td style=&quot;width: 292px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;&amp;nbsp;Kubelet API&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width: 134px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot; rowspan=&quot;1&quot;&gt;&amp;nbsp;TCP&lt;/td&gt;&lt;td style=&quot;width: 138px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot; rowspan=&quot;1&quot;&gt;&amp;nbsp;10255&lt;/td&gt;&lt;td style=&quot;width: 292px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot; rowspan=&quot;1&quot;&gt;&amp;nbsp;Read-Only Kubelet API&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;width: 134px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot; rowspan=&quot;1&quot;&gt;&amp;nbsp;TCP&lt;/td&gt;&lt;td style=&quot;width: 138px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot; rowspan=&quot;1&quot;&gt;&amp;nbsp;30000-32767&lt;/td&gt;&lt;td style=&quot;width: 292px; height: 24px; border-bottom: 1px solid rgb(204, 204, 204); border-right: 1px solid rgb(204, 204, 204);&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;&amp;nbsp;NodePort Services&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/9997753D5C00D1CA25&quot; filemime=&quot;image/jpeg&quot; filename=&quot;ACG.png&quot; height=&quot;436&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;1-2) VM 생성&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;필요한 SPEC 에 맞게 각 용도 별 VM 을 생성한다. OS 는 CentOS 를 사용한다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;서버 생성 방법은 NCP 가이드 참고 ( &lt;a href=&quot;http://docs.ncloud.com/ko/compute/compute-1-1-v2.html&quot; target=&quot;_blank&quot; class=&quot;tx-link&quot;&gt;http://docs.ncloud.com/ko/compute/compute-1-1-v2.html&lt;/a&gt; )&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;1-3) Master / Worker Node 에 Public IP 할당하기&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;Ansible 서버의 경우 포트 포워딩 설정해서 ssh 접속만 하면 되므로 Public IP 는 필요치 않다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;하지만 서비스 포트로 접근이 필요한 Master/Node 서버에는 Public IP 를 할당해야 외부에서 접근이 가능하다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none; text-align: center;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99B23F4B5C00D4A21F&quot; filemime=&quot;image/jpeg&quot; filename=&quot;publicIP.png&quot; height=&quot;436&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;span style=&quot;font-size: 18pt;&quot;&gt;2. Ansible 설치하기&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;2-1) ansible 서버의 ssh key 생성 및 master/node 서버에 key 복사&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;ansible 서버에서 kubernetes cluster 설치를 위해 master/node 서버 접근 시 패스워드 입력 없이 접근하기 위해 ansible 서버의 키를 master/node 서버에 복사한다.&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 4px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;ANSIBLE 서버에서 실행 (키 생성/키 복사)&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;ssh-keygen&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;cp id_rsa.pub root@$master/nodeIP:id_rsa.pub&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;Master/Node 서버에서 실행&amp;nbsp;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;mkdir /root/.ssh (디렉토리가 있으면 생성하지 않아도 됨)&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;cat id_rsa.pub &amp;gt;&amp;gt; /root/.ssh/authorized_keys&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/div&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;2-2) ansible 패키지 설치&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 4px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;&lt;span style=&quot;font-size: 10pt; color: rgb(255, 255, 255);&quot;&gt;yum install epel-release -y&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;yum install ansible -y&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;2-3&lt;/span&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;) swapoff&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 4px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;&lt;span style=&quot;font-size: 10pt; color: rgb(255, 255, 255);&quot;&gt;swapoff -a&lt;/span&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;2-4&lt;/span&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;) ip forward 설정&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 4px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;&lt;span style=&quot;font-size: 10pt; color: rgb(255, 255, 255);&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;sysctl -w net.ipv4.ip_forward=1&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;2-4&lt;/span&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;) Git clone kubespray&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 4px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;&lt;span style=&quot;font-size: 10pt; color: rgb(255, 255, 255);&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;git clone https://github.com/kubernetes-incubator/kubespray.git&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;cd kubespray&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;sudo pip install -r requirements.txt&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;2-5&lt;/span&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;) Python 3 설치&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 4px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;sudo yum install -y https://centos7.iuscommunity.org/ius-release.rpm&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;sudo yum install -y python36u python36u-libs python36u-devel python36u-pip&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;2-6) 인벤토리 파일 수정&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 4px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;div style=&quot;line-height: 1.5;&quot;&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;cp -r inventory/sample inventory/ncloud&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 1.5;&quot;&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;cd /kubespray&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;line-height: 1.5;&quot;&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;declare -a IPS=(10.41.4.220 10.41.2.83 10.41.0.188) &lt;span style=&quot;color: rgb(0, 216, 255);&quot;&gt;&amp;lt;- Master/&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 216, 255);&quot;&gt;Node 서버의 Public IP 입력&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt; background-color: rgb(53, 53, 53); color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;line-height: 1.5;&quot;&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; background-position: 0px 0px;&quot;&gt;CONFIG_FILE=inventory/ncloud/hosts.ini python3.6 contrib/inventory_builder/inventory.py ${IPS[@]}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;/kubespray/inventory/ncloud/hosts.ini 파일을 열어보면 아래와 같이 설정되어 있음을 확인할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 4px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255); font-size: 10pt; background-color: rgb(53, 53, 53);&quot;&gt;&lt;/span&gt;&lt;span style=&quot;background-color: rgb(53, 53, 53); color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;; font-size: 10pt;&quot;&gt;[all]&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;font-size: 10pt; background-color: rgb(53, 53, 53); color: rgb(255, 255, 255);&quot;&gt;

&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;node1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ansible_host=10.41.4.220&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;node2&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ansible_host=10.41.2.83&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;node3&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ansible_host=10.41.0.188&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;[kube-master]&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;node1&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;node2&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;[etcd]&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;node1&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;node2&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;node3&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;[kube-node]&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;node1&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;node2&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;node3&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;[k8s-cluster:children]&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;kube-master&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;kube-node&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;[calico-rr]&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;[vault]&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;node1&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;node2&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 10pt; --inversion-type-color: simple; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; color: rgb(255, 255, 255); font-family: &amp;quot;Helvetica Neue&amp;quot;;&quot;&gt;node3&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;2-7) Cluster Services, Pods Subnet IP range 설정&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;네이버클라우드플랫폼에서는 지정되지 않은 사설 IP 를 사용할 경우 drop 되어 통신이 안되는 경우가 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;따라서 docker/k8s 사용시에는 아래와 같은 IP range 를 사용하는 것을 권장한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 4px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;&lt;span style=&quot;font-size: 10pt; color: rgb(255, 255, 255);&quot;&gt;vi /kubespray/inventory/ncloud/group_vars/k8s-cluster/k8s-cluster.yml&lt;/span&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255); font-size: 10pt;&quot;&gt;-&amp;gt; kube_service_addresses: 172.16.0.0/13&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255); font-size: 10pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255); font-size: 10pt;&quot;&gt;-&amp;gt; kube_pods_subnet: 172.24.0.0/13&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/990935375C00E2CF16&quot; filemime=&quot;image/jpeg&quot; filename=&quot;pods_subnet.png&quot; height=&quot;652&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;2-8) K8S Cluster deploy&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;ansible 서버에서 playbook 을 실행시키고 설치 status , 에러를 확인한다. (아래 커맨드를 모두 붙여서 한줄에 쓴다.)&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 4px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;ansible-playbook -i inventory/ncloud/hosts.ini cluster.yml -b -v --private-key=~/.ssh/id_rsa --extra-vars &quot;sysctl_file_path=/etc/sysctl.d/kubespray_sysctl.conf&quot;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 18.6667px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/9948773C5C00E3BF1F&quot; filemime=&quot;image/jpeg&quot; filename=&quot;deloy.png&quot; height=&quot;652&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;span style=&quot;font-size: 18pt;&quot;&gt;3. k8s cluster 상태 확인&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;ansible 로 설치한 k8s cluster 가 정상적으로 설치 되었는지 Master 서버에 접속하여 확인한다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none;&quot;&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 4px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;Master 서버에서 확인&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;# kubectl get nodes&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;div style=&quot;-en-clipboard:true;&quot;&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;NAME&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; STATUS&amp;nbsp;&amp;nbsp;&amp;nbsp; ROLES&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; AGE&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; VERSION&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;node1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Ready&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; master,node&amp;nbsp;&amp;nbsp; 5m&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; v1.11.2&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;node2&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Ready&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; master,node&amp;nbsp;&amp;nbsp; 5m&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; v1.11.2&lt;/span&gt;&lt;/div&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;background-color: rgb(53, 53, 53); color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;

&lt;/span&gt;&lt;/p&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; background-position: 0px 0px;&quot;&gt;node3&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Ready&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; node&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 5m&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; v1.11.2&lt;/span&gt;&lt;/div&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;# kubectl get pods --all-namespaces&amp;nbsp;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;br /&gt;&lt;/font&gt;&lt;/p&gt;&lt;div style=&quot;-en-clipboard:true;&quot;&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;NAMESPACE&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; NAME&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; READY&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; STATUS&amp;nbsp;&amp;nbsp;&amp;nbsp; RESTARTS&amp;nbsp;&amp;nbsp; AGE&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;kube-system&amp;nbsp;&amp;nbsp; calico-node-2w7pq&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1/1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Running&amp;nbsp;&amp;nbsp; 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 5m&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;kube-system&amp;nbsp;&amp;nbsp; calico-node-pk6st&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1/1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Running&amp;nbsp;&amp;nbsp; 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 5m&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;kube-system&amp;nbsp;&amp;nbsp; calico-node-w5f55&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1/1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Running&amp;nbsp;&amp;nbsp; 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 5m&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;kube-system&amp;nbsp;&amp;nbsp; kube-apiserver-node1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1/1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Running&amp;nbsp;&amp;nbsp; 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 5m&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;kube-system&amp;nbsp;&amp;nbsp; kube-apiserver-node2&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1/1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Running&amp;nbsp;&amp;nbsp; 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 5m&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;kube-system&amp;nbsp;&amp;nbsp; kube-controller-manager-node1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1/1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Running&amp;nbsp;&amp;nbsp; 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 6m&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;kube-system&amp;nbsp;&amp;nbsp; kube-controller-manager-node2&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1/1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Running&amp;nbsp;&amp;nbsp; 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 6m&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;kube-system&amp;nbsp;&amp;nbsp; kube-dns-6d54bdd9d6-rrp4m&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 3/3&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Running&amp;nbsp;&amp;nbsp; 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 5m&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;kube-system&amp;nbsp;&amp;nbsp; kube-dns-6d54bdd9d6-xsw99&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 3/3&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Running&amp;nbsp;&amp;nbsp; 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 4m&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;kube-system&amp;nbsp;&amp;nbsp; kube-proxy-node1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1/1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Running&amp;nbsp;&amp;nbsp; 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 5m&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;kube-system&amp;nbsp;&amp;nbsp; kube-proxy-node2&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1/1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Running&amp;nbsp;&amp;nbsp; 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 5m&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;kube-system&amp;nbsp;&amp;nbsp; kube-proxy-node3&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1/1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Running&amp;nbsp;&amp;nbsp; 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 5m&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;kube-system&amp;nbsp;&amp;nbsp; kube-scheduler-node1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1/1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Running&amp;nbsp;&amp;nbsp; 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 6m&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;kube-system&amp;nbsp;&amp;nbsp; kube-scheduler-node2&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1/1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Running&amp;nbsp;&amp;nbsp; 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 6m&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;kube-system&amp;nbsp;&amp;nbsp; kubedns-autoscaler-76f87d889d-dgs6z&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1/1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Running&amp;nbsp;&amp;nbsp; 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 4m&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; background-position: 0px 0px;&quot;&gt;kube-system&amp;nbsp;&amp;nbsp; kubernetes-dashboard-8595fbc877-v8rc2&amp;nbsp;&amp;nbsp; 1/1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Running&amp;nbsp;&amp;nbsp; 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 4m&lt;/span&gt;&lt;/div&gt;&lt;p style=&quot;clear: none; float: none; line-height: 1.5;&quot;&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;background-color: rgb(53, 53, 53); color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;

&lt;/span&gt;&lt;/p&gt;&lt;div&gt;&lt;span style=&quot;box-sizing: border-box; -webkit-font-smoothing: antialiased; font-size: 10pt; direction: ltr; border: none; white-space: pre; background-color: rgb(53, 53, 53); --inversion-type-background-color: simple; break-inside: avoid; color: rgb(255, 255, 255); font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; background-position: 0px 0px;&quot;&gt;kube-system&amp;nbsp;&amp;nbsp; nginx-proxy-node3&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1/1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; Running&amp;nbsp;&amp;nbsp; 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 5m&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:right; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://cleanupthedesk.tistory.com/13&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Naver Cloud Platform</category>
<category>ansible</category>
<category>k8s</category>
<category>kubernetes</category>
<category>navercloudplatform</category>
<category>NCP</category>
<category>네이버클라우드</category>
<category>네이버클라우드플랫폼</category>
<category>쿠버네티스</category>
<author>한크크</author>
<guid>https://cleanupthedesk.tistory.com/13</guid>
<comments>https://cleanupthedesk.tistory.com/13#entry13comment</comments>
<pubDate>Fri, 30 Nov 2018 16:20:31 +0900</pubDate>
</item>
<item>
<title>Mac OS 에 jq 설치하기</title>
<link>https://cleanupthedesk.tistory.com/12</link>
<description>&lt;p&gt;jq 는 command line 으로 json 을 컨트롤 할 수 있게 해주는 도구인데 mac os 에 설치하려고 하니 자꾸 아래와 같은 메세지가 보이면서 설치가 이뤄지지 않았다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;➜&amp;nbsp; .ssh brew install jq&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Updating Homebrew...&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;==&amp;gt; Auto-updated Homebrew!&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Updated 1 tap (homebrew/core).&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;==&amp;gt; Updated Formulae&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;swiftlint&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;vaulted&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Error: The following directories are not writable by your user:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/man/man3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/man/man5&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/man/man7&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;You should change the ownership of these directories to your user.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;sudo chown -R $(whoami) /usr/local/share/man/man3 /usr/local/share/man/man5 /usr/local/share/man/man7&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;좀 찾아보니까 mac os 가 업그레이드 되면서 /usr/local 폴더 권한이 변경 되었다고 한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;그래서 폴더 권한을 변경하려고 했더니.. ㅠㅠ&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;➜&amp;nbsp; ~ sudo chown -R $(whoami) /usr/local&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;chown: /usr/local: Operation not permitted&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;sudo su 로 root 스위칭 후 커맨드를 실행했는데 동일한 에러가 발생한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;sh-3.2# chown -R $(whoami):wheel /usr/local&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;chown: /usr/local: Operation not permitted&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;혹시 몰라서 brew install 한번 해봤더니 동일한 경고 ㅠㅠ&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;sh-3.2# brew install jq&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Error: Running Homebrew as root is extremely dangerous and no longer supported.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;As Homebrew does not drop privileges on installation you would be giving all&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;build scripts full access to your system.&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;다시 원래 사용하던 사용자 계정으로 brew install 했더니 조금 다른 에러가 떨어졌다. (기쁨)&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;➜&amp;nbsp; ~ brew install jq&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Error: /usr/local/Cellar is not writable. You should change the&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;ownership and permissions of /usr/local/Cellar back to your&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;user account:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp; sudo chown -R $(whoami) /usr/local/Cellar&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Error: The following directories are not writable by your user:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/Cellar&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/Homebrew&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/bin&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/etc&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/etc/bash_completion.d&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/include&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/lib&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/lib/pkgconfig&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/lib/python3.7/site-packages&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/opt&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/doc&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/info&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/man&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/man/man1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/man/man3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/man/man5&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/man/man7&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/zsh&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/zsh/site-functions&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/var/homebrew/linked&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/var/homebrew/locks&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;You should change the ownership of these directories to your user.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp; sudo chown -R $(whoami) /usr/local/Cellar /usr/local/Homebrew /usr/local/bin /usr/local/etc /usr/local/etc/bash_completion.d /usr/local/include /usr/local/lib /usr/local/lib/pkgconfig /usr/local/lib/python3.7/site-packages /usr/local/opt /usr/local/share /usr/local/share/doc /usr/local/share/info /usr/local/share/man /usr/local/share/man/man1 /usr/local/share/man/man3 /usr/local/share/man/man5 /usr/local/share/man/man7 /usr/local/share/zsh /usr/local/share/zsh/site-functions /usr/local/var/homebrew/linked /usr/local/var/homebrew/locks&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;일단 시키는대로&amp;nbsp;/usr/local/Cellar 권한을 변경해주고 다시 설치했더니 /usr/local/Homebrew 디렉토리 권한도 변경해주라고 한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;➜&amp;nbsp; ~ sudo chown -R $(whoami) /usr/local/Cellar&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Password:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;➜&amp;nbsp; ~ brew install jq&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Error: /usr/local/Homebrew is not writable. You should change the&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;ownership and permissions of /usr/local/Homebrew back to your&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;user account:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;&amp;nbsp; sudo chown -R $(whoami) /usr/local/Homebrew&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;Error: The following directories are not writable by your user:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/Homebrew&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/bin&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/etc&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/etc/bash_completion.d&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/include&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/lib&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/lib/pkgconfig&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/lib/python3.7/site-packages&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/opt&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/doc&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/info&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/man&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/man/man1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/man/man3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/man/man5&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/man/man7&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/zsh&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/share/zsh/site-functions&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/var/homebrew/linked&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;/usr/local/var/homebrew/locks&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;시킨대로 /usr/local/Homebrew 디렉토리 권한 변경하고 다시 설치했더니 성공 !&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 1px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;➜&amp;nbsp; ~ sudo chown -R $(whoami) /usr/local/Homebrew&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;➜&amp;nbsp; ~ brew install jq&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;==&amp;gt; Installing dependencies for jq: oniguruma&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;==&amp;gt; Installing jq dependency: oniguruma&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;==&amp;gt; Downloading https://homebrew.bintray.com/bottles/oniguruma-6.9.0.mojave.bottle.tar.gz&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;######################################################################## 100.0%&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;==&amp;gt; Pouring oniguruma-6.9.0.mojave.bottle.tar.gz&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt; &amp;nbsp; /usr/local/Cellar/oniguruma/6.9.0: 17 files, 1.3MB&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;==&amp;gt; Installing jq&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;==&amp;gt; Downloading https://homebrew.bintray.com/bottles/jq-1.6.mojave.bottle.1.tar.gz&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;######################################################################## 100.0%&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;==&amp;gt; Pouring jq-1.6.mojave.bottle.1.tar.gz&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt; &amp;nbsp; /usr/local/Cellar/jq/1.6: 18 files, 1MB&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:right; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://cleanupthedesk.tistory.com/12&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>HOWTO</category>
<author>한크크</author>
<guid>https://cleanupthedesk.tistory.com/12</guid>
<comments>https://cleanupthedesk.tistory.com/12#entry12comment</comments>
<pubDate>Wed, 28 Nov 2018 17:12:35 +0900</pubDate>
</item>
<item>
<title>kubernetes 에 weavescope 설치하기</title>
<link>https://cleanupthedesk.tistory.com/11</link>
<description>&lt;p&gt;weavescope 은 kubernetes 나 docker 의 topology 를 보여주면서 상태를 모니터링 할 수 있는 application 이다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;application pod 는 kubernetes 에 띄우지만 브라우저를 통해 topology 를 조회할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;mac 에서 원격 k8s cluster 를 제어하는 방법은 아래 글 참고&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://cleanupthedesk.tistory.com/10&quot; target=&quot;_blank&quot;&gt;2018/11/22 - [HOWTO] - mac 에서 원격 kubernetes cluster 제어하기&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;1. weavescope client agent 를 kubernetes cluster 에 설치하기&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 4px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255); background-color: rgb(53, 53, 53);&quot;&gt;&lt;/span&gt;&lt;span class=&quot;pln&quot; style=&quot;font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; background-color: rgb(53, 53, 53); font-size: 12px; -webkit-font-smoothing: antialiased; box-sizing: inherit; color: rgb(255, 255, 255);&quot;&gt;kubectl apply &lt;/span&gt;&lt;span class=&quot;pun&quot; style=&quot;font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; background-color: rgb(53, 53, 53); font-size: 12px; -webkit-font-smoothing: antialiased; box-sizing: inherit; color: rgb(255, 255, 255);&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;pln&quot; style=&quot;font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; background-color: rgb(53, 53, 53); font-size: 12px; -webkit-font-smoothing: antialiased; box-sizing: inherit; color: rgb(255, 255, 255);&quot;&gt;f &lt;/span&gt;&lt;span class=&quot;str&quot; style=&quot;font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; background-color: rgb(53, 53, 53); font-size: 12px; -webkit-font-smoothing: antialiased; box-sizing: inherit; color: rgb(255, 255, 255);&quot;&gt;&quot;https://cloud.weave.works/k8s/scope.yaml?k8s-version=$(kubectl version | base64 | tr -d '\n')&quot;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;2. 브라우저로 접근하기 위해 mac 에서 port forwarding 설정하기&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 4px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;background-color: rgb(53, 53, 53); color: rgb(255, 255, 255);&quot;&gt;&lt;/span&gt;&lt;span class=&quot;pln&quot; style=&quot;font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; background-color: rgb(53, 53, 53); font-size: 12px; -webkit-font-smoothing: antialiased; box-sizing: inherit; color: rgb(255, 255, 255);&quot;&gt;kubectl port&lt;/span&gt;&lt;span class=&quot;pun&quot; style=&quot;font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; background-color: rgb(53, 53, 53); font-size: 12px; -webkit-font-smoothing: antialiased; box-sizing: inherit; color: rgb(255, 255, 255);&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;pln&quot; style=&quot;font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; background-color: rgb(53, 53, 53); font-size: 12px; -webkit-font-smoothing: antialiased; box-sizing: inherit; color: rgb(255, 255, 255);&quot;&gt;forward &lt;/span&gt;&lt;span class=&quot;pun&quot; style=&quot;font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; background-color: rgb(53, 53, 53); font-size: 12px; -webkit-font-smoothing: antialiased; box-sizing: inherit; color: rgb(255, 255, 255);&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;pln&quot; style=&quot;font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; background-color: rgb(53, 53, 53); font-size: 12px; -webkit-font-smoothing: antialiased; box-sizing: inherit; color: rgb(255, 255, 255);&quot;&gt;n weave &lt;/span&gt;&lt;span class=&quot;str&quot; style=&quot;font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; background-color: rgb(53, 53, 53); font-size: 12px; -webkit-font-smoothing: antialiased; box-sizing: inherit; color: rgb(255, 255, 255);&quot;&gt;&quot;$(kubectl get -n weave pod --selector=weave-scope-component=app -o jsonpath='{.items..metadata.name}')&quot;&lt;/span&gt;&lt;span class=&quot;pln&quot; style=&quot;font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; background-color: rgb(53, 53, 53); font-size: 12px; -webkit-font-smoothing: antialiased; box-sizing: inherit; color: rgb(255, 255, 255);&quot;&gt; &lt;/span&gt;&lt;span class=&quot;lit&quot; style=&quot;font-family: Menlo, Monaco, &amp;quot;Courier New&amp;quot;, monospace; background-color: rgb(53, 53, 53); font-size: 12px; -webkit-font-smoothing: antialiased; box-sizing: inherit; color: rgb(255, 255, 255);&quot;&gt;4040&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;3. 브라우저에서 localhost:4040 으로 접속하면 topology view 를 확인할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/992B404C5BF67C211D&quot; filemime=&quot;image/jpeg&quot; filename=&quot;weavescop.png&quot; height=&quot;512&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;다른 환경에서의 설치는 weavescope 홈페이지 참고&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://www.weave.works/docs/scope/latest/installing/#k8s&quot; target=&quot;_blank&quot; class=&quot;tx-link&quot;&gt;https://www.weave.works/docs/scope/latest/installing/#k8s&lt;/a&gt;&lt;/p&gt;&lt;div style=&quot;text-align:right; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://cleanupthedesk.tistory.com/11&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>HOWTO</category>
<category>k8s</category>
<category>kubernetes</category>
<category>Mac</category>
<category>weavescope</category>
<category>쿠버네티스</category>
<author>한크크</author>
<guid>https://cleanupthedesk.tistory.com/11</guid>
<comments>https://cleanupthedesk.tistory.com/11#entry11comment</comments>
<pubDate>Thu, 22 Nov 2018 18:53:54 +0900</pubDate>
</item>
<item>
<title>mac 에서 원격 kubernetes cluster 제어하기</title>
<link>https://cleanupthedesk.tistory.com/10</link>
<description>&lt;p&gt;kubernetes cluster 구성 후 kubernetes node 에 접속하지 않고 mac 에서 바로 pod 도 만들고 cluster 정보도 확인할 수 있도록 설정할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;원격으로 kubernetes 를 접근할 경우 weavescope 을 통해 컨테이너 간 toploogy dashboard 를 쉽게 확인할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;1. kubernetes-cli 설치&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 4px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;brew install kubernetes-cli&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;2. kubernetes version 확인&lt;/p&gt;&lt;p&gt;kubernetes cli 가 정상적으로 설치되었다고 하면 아래와 같이 정상인듯 아닌듯 한 내용으로 보여진다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99A1BE405BF6765F10&quot; filemime=&quot;image/jpeg&quot; filename=&quot;kubernetesversion.png&quot; height=&quot;99&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;3. 원격 kubernetes cluster 정보 내려받기&amp;nbsp;&lt;/p&gt;&lt;p&gt;mac 에서 접속하고자 하는 원격 kubernetes cluster 의 credential file 을 내려받는다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;필자는 root 계정으로 kubernetes 를 설치했기 때문에 /root 하위에 .kube 디렉토리가 있었는데 다른 계정으로 구성한 경우 해당 계정의 home dir 로 가면 확인할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 4px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 255, 255);&quot;&gt;scp -r root@$kubernetes node IP:/root/.kube .&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;생각보다 꽤 많은 파일들을 내려받는다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/995CCB3C5BF677C606&quot; filemime=&quot;image/jpeg&quot; filename=&quot;kubecredential.png&quot; height=&quot;534&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;4. 다운받은 .kube 디렉토리를 home directory 로 복사&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: solid; border-width: 4px; border-color: rgb(53, 53, 53); background-color: rgb(53, 53, 53); padding: 10px;&quot;&gt;&lt;p&gt;&lt;span style=&quot;background-color: rgb(53, 53, 53); color: rgb(255, 255, 255);&quot;&gt;cp -r .kube $HOME/&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;5. kubectl version 확인&amp;nbsp;&lt;/p&gt;&lt;p&gt;원격 kubernetes credential 내려 받은 이후에 다시 version 을 확인해본다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99B0F14E5BF678B40B&quot; filemime=&quot;image/jpeg&quot; filename=&quot;kubectl-version.png&quot; height=&quot;94&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;nodes 나 pods 정보도 조회해 본다. kubernetes cluster node 에서 수행한 결과와 동일한 결과를 조회할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:860px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99A7714A5BF6792F0A&quot; filemime=&quot;image/jpeg&quot; filename=&quot;kubectl-get-nodes.png&quot; height=&quot;227&quot; style=&quot;&quot; width=&quot;860&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:right; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://cleanupthedesk.tistory.com/10&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>HOWTO</category>
<category>k8s</category>
<category>kubernetes</category>
<category>Mac</category>
<category>쿠버네티스</category>
<author>한크크</author>
<guid>https://cleanupthedesk.tistory.com/10</guid>
<comments>https://cleanupthedesk.tistory.com/10#entry10comment</comments>
<pubDate>Thu, 22 Nov 2018 18:40:08 +0900</pubDate>
</item>
<item>
<title>AWS cloudformation , codedeploy 를 활용한 프로비저닝 관리</title>
<link>https://cleanupthedesk.tistory.com/9</link>
<description>&lt;p style=&quot;margin-right: 0px; margin-bottom: 9px; margin-left: 0px; color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;West Florida 대학교에서 작성한&amp;nbsp;Automated AWS Provisioning and Deployment Using CloudFormation and CodeDeploy 튜토리얼을 정리한 내용입니다.&amp;nbsp;&lt;/p&gt;&lt;p style=&quot;margin-right: 0px; margin-bottom: 9px; margin-left: 0px; color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;먼저 기본적으로 사용하는 서비스는 아래와 같습니다.&amp;nbsp;&lt;/p&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;- 인증 및 권한 관리 : IAM&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;- main service : CloudFormation&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;- Code Deploy : S3&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;-&amp;nbsp;&amp;nbsp;Linux AMI 를 통해 Linux 인스턴스를 배포하고 인스턴스마다 AWS CLI 가 설치되어 있어야함&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;1. Basic Mechanism&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:768px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/2464634457A1950F21&quot; filemime=&quot;image/jpeg&quot; filename=&quot;image111.png&quot; height=&quot;557&quot; width=&quot;768&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&lt;div&gt;1) 맨 위 레이어는 우리가 가진 build server&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;- deploy.sh 은 bash script 이며 아래와 같은 커맨드들을 포함하고 있음&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; . 모든 application 을 압축해서 S3 로 전송&lt;/div&gt;&lt;div&gt;&amp;nbsp; . CloudFormation 에게 EC2 인스턴스를 프로비저닝 할 것을 전달&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; . CodeDeploy 에게 어떠한 인스턴스에 어떤 어플리케이션이 있는지 전달&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;2) CloudFormation Template file (cfTemplate.json)&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; . 인스턴스와 네트워크 환경과 같은 CloudFormation 서비스에 대해 정의함&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; . User Data 영역의 Bash script 를 가지고 있고 인스턴스가 기동 시 CodeDeploy Agent 를 설치하고 기동함&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;3) A directory (/myApp)&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;. application 설치를 위해 필요한 모든 내용을 담고 있음&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;(예제에서는 &amp;nbsp;python 기반의 HTTP 서버를 띄워서 간단한 web site 를 구성할 것임)&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;. web site 는 single index.html 테스트 페이지가 있는데 CodeDeploy 를 사용하기 위해서&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp;서버를 기동하고 CodeDeploay Agent 구성 요소로 사용하는 appspec.yml 을 startApp.sh script 에 추가해야 한다.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;두번째 레이어는 AWS 서비스를 보여줌&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;1) Cloudformation 은 자동으로 프로비저닝 하고 EC2 가상 하드웨어(Insatnaces, LB, Virtual Networks)를 구성하기 위한 AWS 의 서비스&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;2) CodeDeploy 는 서비스와 agent 로 구성된 deployment service&lt;/div&gt;&lt;div&gt;&amp;nbsp;Build server 는 application이 deployment 가능한 상태가 되었을 때 CodeDeploy 서비스에 전달&lt;/div&gt;&lt;div&gt;&amp;nbsp;인스턴스의 CodeDeploy Agent 는 주기적으로 배포할 job 이 있는지 CodeDeploy 서비스를 쿼리함&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;3) S3 스토리지 서비스는 CodeDeploy Agent 가 설치를 위해 필요한 패키지와 application 압축 파일을 가지고 있음&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;2. Authentication and Authorization Issues&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;만약 cloudformation 과 codedeploy 가 H/W 와 application 을 배포할 수 있다면, 잠재적인 공격자는 악성 코드를 배포하는데 이용할 수 있다. 이러한 공격을 방지하기 위해서 자격 증명은 각 배포 프로세스 단계마다 확인해야 한다. AWS 는 IAM (Identity and Access Management) 서비스와 STS(simple token service)를 통해 필요한 자격증명을 생성/관리할 수 있다.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;authentication / authorization 진행 과정&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;1) 인스턴스는 S3 에 접근하여 CodeDeploy Agent 패키지를 가져오고 사용자의 응용 프로그램 zip 파일을 읽는다. 이 때 cloudformation 은 새로운 인스턴스에 IAM 인스턴스 프로파일을 첨부한다.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;그 프로파일은 S3 에 접근할 수 있는 IAM EC2 role 을 포함하고 있고 EC2 서비스의 역할을 가정할 수 있는 신뢰 관계를 갖는다. 인스턴스에 기동되어 있는 어떠한 프로세스든 STS 를 부르기 위해 EC2 role 을 사용하고 S3 를 호출하기 위한 임시 토큰을 발급받는다.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;2) CodeDeploy 서비스는 어떤 spec 의 인스턴스에 어떤 application 이 배포되어야 하는지 사용자의 EC2 인스턴스를 스캔하고 태그를 확인한다. 이러한 접근을 위해 IAM service role 을 만들고 인스턴스 목록을 만들고 태그를 읽는것을 허용한다. service role의 신뢰 관계는 CodeDeploy 서비스가 역할을 가정 할 수 있다.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;3) cloudformation,Codedeploy,S3 의 자격증명을 통해 deploy.sh 스크립트가 수행된다. 이 자격증명 역시 서비스에 의해 상속된다. 예를들어 IAM 인스턴스 프로파일을 새로운 인스턴스에 전달하기 위해서는 IAM user 를 정책에 맞게 생성하고 IAM user 의 자격증명 (secret access key and access key id) 을 스크립트 기동 시 제공한다.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;두가지 보안 원칙&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;1) 자격증명은 최소 인원이 만들고 접근해야한다.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;IAM role 과 IAM user 는 Administrator 로 구성하고 운영중에는 변경하지 않도록 한다. (자격증명은 주기적으로 변경해야한다.)&lt;/div&gt;&lt;div&gt;&amp;nbsp;생성된 자격증명은 스크립트에 하드코딩하면 안되고 코드 저장소에 대한 읽기 권한을 갖는 사람만 접근할 수 있어야 한다.&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;2) 자격증명에는 최소한의 권한만 부여되어야 한다. 필요하지 않는 작업에 대해서는 허용되지 않아야 한다.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;3. SETTING UP AUTHENTICATION AND AUTHORIZATION&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;1) IAM EC2 Role / IAM 인스턴스 프로파일 설정&lt;/div&gt;&lt;div&gt;&amp;nbsp;- S3 접근을 통해 인스턴스를 프로비저닝 하는 방법 / CodeDeploy 에이전트와 응용 프로그램 zip 파일을 포함하는 버킷에 대한 읽기 권한 부여&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;2) IAM Service Role 설정&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;- IAM service role 을 codedeploy 서비스에서 사용자의 EC2 목록을 가져오고 tag 를 읽을 수 있도록 허용하고 업데이트가 필요한 인스턴스를 확인할 수 있어야 함&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;3) IAM User 설정&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;- IAM user 는 build server 에서 deploy.sh 을 수행하는데 사용된다.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;4) 식별할 태그 선택&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;- 앞에서도 얘기했지만 CodeDeploy 는 설치된 application 확인을 위하 인스턴스를 스캔하고 tag 는 key/value 로 구성되어 있다.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;5) Key Pair 생성&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;- 필수 옵션 아니지만 인스턴스 로그인 할 때 필요하다.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;4. SETTING UP ON YOUR BUILD SERVER&lt;/div&gt;&lt;div&gt;&amp;nbsp;1) AWS CLI 를 통한 Build Server 프로비저닝&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;- EC2 Linux 인스턴스 프로비저닝&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;2) SETTING UP YOUR Application&lt;/div&gt;&lt;div&gt;&amp;nbsp;- 앞에서 얘기한대로 index.html 테스트 페이지만 있는 웹사이트를 만들 예정이고 서버와 CodeDeploy 에이전트에 대한 지침과 함께 appspec.yml 파일을 시작하는 startApp.sh 스크립트를 추가해야 CodeDeploy를 사용할 수 있음&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;==&amp;gt;&amp;gt; startApp.sh&lt;/div&gt;&lt;div&gt;#!/bin/bash&lt;/div&gt;&lt;div&gt;# Start python HTTP server to show test page on port 8000&lt;/div&gt;&lt;div&gt;# Run in background discarding output&lt;/div&gt;&lt;div&gt;cd /var/myApp/appData/&lt;/div&gt;&lt;div&gt;nohup python -m SimpleHTTPServer &amp;amp;&amp;gt;/dev/null &amp;amp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;==&amp;gt;&amp;gt; appspec.yml&amp;nbsp;&lt;/div&gt;&lt;div&gt;# appspec.yml file to install myApp using CodeDeploy&lt;/div&gt;&lt;div&gt;version: 0.0&lt;/div&gt;&lt;div&gt;os: linux&lt;/div&gt;&lt;div&gt;# Copy all files to /var/myApp&lt;/div&gt;&lt;div&gt;files:&lt;/div&gt;&lt;div&gt;- source: /&lt;/div&gt;&lt;div&gt;destination: /var/myApp&lt;/div&gt;&lt;div&gt;hooks:&lt;/div&gt;&lt;div&gt;## After files have been copied, run the startApp.sh script&lt;/div&gt;&lt;div&gt;ApplicationStart:&lt;/div&gt;&lt;div&gt;- location: scripts/startApp.sh&lt;/div&gt;&lt;div&gt;timeout: 300&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;4) SETTING UP CloudFormation&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;CloudFormation 서비스는 템플릿에 정의된 가상 H/W 의 stack 을 배포한다.&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;인스턴스 SPEC, Security &amp;nbsp;Group 및 rule, AZ, DNS, Public IP, H/W 생성 후 수행되어야 하는 커맨드, 스크립트 에 대해서 템플릿을 정의함&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;/div&gt;&lt;div&gt;5. THE SCRIPTS AND HOW TO USE THEM&lt;/div&gt;&lt;div&gt;&amp;nbsp;1) deploy.sh script&lt;/div&gt;&lt;div&gt;&amp;nbsp;- Build 서버에서 deploy.sh 수행하면 기존에 수행되다 남아있는 작업을 제거하는 스크립트가 수행되고 (이건 deploy.sh 에 정의하기 나름) 앞에서 정의한 cloudformation 템플릿을 통해 EC2 인스턴스를 생성하고 startApp.sh 이 기동되면서 HTTP server 가 기동됨&amp;nbsp;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;위 게시글은 아래 튜토리얼 스터디를 통해 작성되었습니다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;(&lt;a href=&quot;http://uwf.edu/nwilde/codeDeployTutorial/CodeDeployTutorial.pdf&quot; target=&quot;_blank&quot; class=&quot;tx-link&quot;&gt;http://uwf.edu/nwilde/codeDeployTutorial/CodeDeployTutorial.pdf&lt;/a&gt;)&lt;/p&gt;&lt;div style=&quot;text-align:right; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://cleanupthedesk.tistory.com/9&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>AWS</category>
<category>automation</category>
<category>AWS</category>
<category>cloud</category>
<category>cloudformation</category>
<category>codedeploy</category>
<category>provisioning</category>
<category>아마존</category>
<category>자동화</category>
<category>클라우드</category>
<category>클라우드서비스</category>
<category>프로비저닝</category>
<author>한크크</author>
<guid>https://cleanupthedesk.tistory.com/9</guid>
<comments>https://cleanupthedesk.tistory.com/9#entry9comment</comments>
<pubDate>Wed, 03 Aug 2016 16:03:16 +0900</pubDate>
</item>
<item>
<title>Auto Scaling 사용 관련하여 알아두어야 할 것 2</title>
<link>https://cleanupthedesk.tistory.com/8</link>
<description>&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;1탄을 보려면 아래 링크를 확인해 주세요.&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&lt;p&gt;&lt;a href=&quot;http://cleanupthedesk.tistory.com/7&quot; target=&quot;_blank&quot;&gt;2016/07/17 - [AWS] - AWS auto scaling 을 사용하기 위해 알아두면 좋을 내용들&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;1. Benefits of Auto Scaling&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;Adding Auto Scaling to your application architecture is one way to maximize the benefits of the AWS cloud. When you use Auto Scaling, your applications gain the following benefits:&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;• Better fault tolerance.&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;Auto Scaling can detect when an instance is unhealthy, terminate it, and launch&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;an instance to replace it.You can also configure Auto Scaling to use multiple Availability Zones.&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;If one Availability Zone becomes unavailable, Auto Scaling can launch instances in another one to compensate.&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;• Better availability.&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;Auto Scaling can help you ensure that your application always has the right amount of capacity to handle the current traffic demands.&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;• Better cost management.&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;Auto Scaling can dynamically increase and decrease capacity as needed.&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;Because you pay for the EC2 instances you use, you save money by &amp;nbsp;launching instances when they&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;are actually needed and terminating them when they aren't needed.&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;(scale in/out 동일)&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;- manual scaling : manually increase the size of the group&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;- dynamic scaling : create a scaling policy to automatically increase the size of the group based on a specified increase in demand.&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;- scheduled scaling : increase the size of the group at a specific time&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;- Scale in Process&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; . scale in 이벤트 발생 , auto scaling group 크기 감소를 위해 삭제할 인스턴스 선택&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; . 선택한 인스턴스를 standby 상태로 변경&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; . auto scaling group 에서 인스턴스 제거&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; . health check 대상에서 fail 로 떨어지면 auto scaling group 에서 삭제&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;- lifecycel hooks (custom action 수행) 하는동안 새로운 인스턴스가 또 생성되는 것을 방지하기 위해 인스턴스는 pending state 로 시작함&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; : pending -&amp;gt; pending:wait -&amp;gt; pending:proceed -&amp;gt; Inservice&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;- scale in 수행시에는&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; : Terminating -&amp;gt; Terminating:wait -&amp;gt; Terminating:Proceed -&amp;gt; Terminated&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;- Auto Scaling Limits (limit 증가 요청 가능/ 현재 limit 에 대한 확인 가능해야함)&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; . Launch configurations 100&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; . Auto Scaling groups 20&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; . Scaling policies per Auto Scaling group 50&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; . Scheduled actions per Auto Scaling group 125&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; . Lifecycle hooks per Auto Scaling group 50&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; . SNS topics per Auto Scaling group 10&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; . Load balancers per Auto Scaling group 50*&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; . Step adjustments per scaling policy 20&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;* can attach or detach at most 10 load balancers at a time&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;- scaling &amp;amp; LB 설정&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;- Launch configuration 은 새로 만들거나 기존에 있던걸 선택하면 됨&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;- 기존 launch configuration 사용하는 경우&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; . LB를 생성할 region 선택&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; . 사용할 Launch configuration 선택하고 auto scaling group 생성&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;- launch configuration 을 새로 만들 경우&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; . LB를 생성할 region 선택&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; . auto scaling group 을 만들어 둔게 없다면 먼저 만들고 launch configuration 생성&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; . AMI 선택 -&amp;gt; 인스턴스 타입 선택 (인스턴스의 H/W configuration) -&amp;gt; 상세 설정 (Name, IAM role 설정, Public IP 할당 여부, User data 설정 등) -&amp;gt; security group 설정 -&amp;gt; launch configuration 생성 요청 -&amp;gt; keypair 선택 (인스턴스에 접근해야 한다면 keypair 를 꼭 사용해야함)&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;- Auto scaling group 생성&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; . configure auto scaling group 상세 페이지에서&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; &amp;nbsp;a. 그룹 이름, 타입 설정&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; &amp;nbsp;b. 그룹 size (최초 인스턴스 생성 개수, VPC 네트워크를 꼭 선택해야함 / T2 와 같은 인스턴스 타입을 사용하려면 VPC &amp;nbsp;환경이 필요하고 EC2_Classic 같은 타입은 VPC 가 필요하지 않음 )&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; &amp;nbsp;* T2 인스턴스는 중간 정도의 기본 성능을 발휘하면서 워크로드의 필요에 따라 성능을 크게 높이는 버스트 기능을 제공하도록 설계 (Virtual Private Cloud(VPC)로 T2 인스턴스를 시작해야 하며 EC2-Classic 플랫폼에서는 지원되지 않습니다)&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; &amp;nbsp;* EC2-Classic 과 VPC 의 차이점&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; &amp;nbsp;(http://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/using-vpc.html#differences-ec2-classic-vpc)&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; &amp;nbsp;c. 상세 설정에서 Receive traffic from Elastic Load Balancers 와 auto scaling group 에서 사용할 ELB 선택&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; &amp;nbsp;d. ELB 에서 health check 를 하려면 ELB 상세 설정에서 health check type 설정&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; &amp;nbsp;e. auto scaling 정책에서 group initial size 선택 후 설정 내용 리뷰&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; &amp;nbsp;f. 그룹 생성&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; &amp;nbsp;* ELB 가 auto scaling gropu 에 정상적으로 연결되었는지 확인&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; &amp;nbsp; . auto scaling group 선택&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; &amp;nbsp; . Details 탭에서 Load Balancers 를 보면 ELB 연결 여부가 보여짐&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; &amp;nbsp; . Activity History 에서 status 컬럼을 보면 auto scaling 인스턴스를 확인할 수 있고 인스턴스가 생성되는 동안의 상태는 In progress 이며 완료된 이후에는 successful 로 변경됨&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; &amp;nbsp; . 인스턴스 탭의 Lifecycle 컬럼에서 인스턴스 상태가 InService 로 변경되면 traffic 을 받을 준비가 된것임&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; line-height: 18px;&quot;&gt;&amp;nbsp; &amp;nbsp; health status 에서 healtch check 결과를 보여줌&amp;nbsp;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:right; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://cleanupthedesk.tistory.com/8&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>AWS</category>
<category>autoscaling</category>
<category>AWS</category>
<category>cloud</category>
<category>ELB</category>
<category>로드밸런서</category>
<category>아마존</category>
<category>오토스케일링</category>
<category>클라우드</category>
<category>클라우드서비스</category>
<author>한크크</author>
<guid>https://cleanupthedesk.tistory.com/8</guid>
<comments>https://cleanupthedesk.tistory.com/8#entry8comment</comments>
<pubDate>Wed, 03 Aug 2016 15:52:26 +0900</pubDate>
</item>
<item>
<title>AWS auto scaling 을 사용하기 위해 알아두면 좋을 내용들</title>
<link>https://cleanupthedesk.tistory.com/7</link>
<description>&lt;p&gt;간혹 auto scaling 을 사용하면 서비스 중단없이 인프라 자원이 확장되었다 축소되었다 하는걸로 환상을 가지고 있는 사람들이 종종 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;AWS 에서 제공하는 auto scaling 을 인프라 자원에 대한 확장이고 서비스는 그들의 관심사가 아니다&amp;nbsp;&lt;/p&gt;&lt;p&gt;서비스를 무중단으로 auto scaling 하는 것은 운영자의 몫..&amp;nbsp;&lt;/p&gt;&lt;p&gt;관련하여 auto scaling 에 대한 명확한 개념 정리와 최대한 서비스를 중단시키지 않는 방법은 무엇이 있는지 차근차근 확인해보려고 한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;일단 이번에는 auto scaling 의 개념과 사용방법에 대해서 먼저 알아보았다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;1. Auto Scaling Lifecycle&lt;/p&gt;&lt;p&gt;auto scaling group 의 &amp;nbsp;EC2 인스턴스는 다른 EC2 인스턴스의와 다른 경로 또는 수명주기를 가지고 있음&amp;nbsp;&lt;/p&gt;&lt;p&gt;auto scaling group 설정에 따라 인스턴스를 시작하고 서비스에 추가되었을 때 수명주기가 시작됨.&amp;nbsp;&lt;/p&gt;&lt;p&gt;인스턴스를 종료 할 때 라이프 사이클이 종료되거나 auto scaling group &amp;nbsp;설정에 따라 서비스에서 인스턴스를 종료할 수 있음&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:586px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/26013542578B3A3D02&quot; filemime=&quot;image/jpeg&quot; filename=&quot;auto_scaling_lifecycle.png&quot; height=&quot;397&quot; width=&quot;586&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;1) Auto Scaling : Auto Scaling은 사용자가 정의한 정책, 일정 및 상태 확인에 따라 자동으로 Amazon EC2 인스턴스를 시작하거나 종료하도록 설계된 웹 서비스입니다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;auto scaling 룰 자체를 주는 것에 대해서는 무료이지만 인스턴스 사용 요금은 내야함&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;2) Auto Scaling types&lt;/p&gt;&lt;p&gt;&amp;nbsp;- Vertical Scaling : 인스턴스 사이즈 변경, EBS capacity 증가&lt;/p&gt;&lt;p&gt;&amp;nbsp;- horizontal Scaling : 인스턴스를 추가하거나 삭제, ELB 활용&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;3) auto scaling 시나리오&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- auto scaling group 에 최소/최대 운영할 인스턴스 개수 정의&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 언제 scaling 할지에 대한 정책 설정 (scaling plan)&lt;/p&gt;&lt;p&gt;&amp;nbsp;- cloudwatch 를 통해 사용량 데이터 수집 및 scaling 시도&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 지정한 spot 에 scaling group 에 지정된 형태로 인스턴스 확장&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;4) 자원 사용량 측정&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- CloudWatch : 다양한 항목에 대해 사용량을 모니터링 하고 관리할 수 있는 서비스,&amp;nbsp;&lt;/p&gt;&lt;p&gt;알람을 설정하고 측정되는 데이터를 기반으로 어떠한 액션을 취할 수 있도록 알람을 설정할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- CloudWatch Alarm : CloudWatch에서 알람은 특정 기간 동안 하나의 메트릭을 모니터링하는 것이며 메트릭은 모니터링할 대상을 뜻함 (ex. CPU Usage , Network In traffic 등)&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 모니터링 항목에 대해 지정한 범위 안의 값이 변경되었을 때 알람이 상태를 변경함.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;5) Auto scaling group 계획 관리&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 인스턴스를 생성하고 구성하는데 얼마나 시간이 소요되는지?&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 어떠한 모니터링 항목이 어플리케이션의 성능을 측정하는데 적정한지?&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 기존의 어떠한 자원 (EC2 인스턴스나 AMIS) 는 오토스케일링 그룹의 일부로 사용할 수 있음&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 몇개의 AZ 에 auto scaling group 이 확장시킬 것인지?&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 인스턴스를 auto scaling 한 후 application 기동을 수행할 역할 지정&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;6) auto scaling group 에서의 부하 분산&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 들어오는 웹 트래픽에 대해서 자동으로 분산해야 함&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 어플리케이션에 접근하기 위한 싱글 포인트&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 로드밸러서와 EC2 인스턴스의 사용량 데이터는 CloudWatch 로 보내짐&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 어플리케이션을 확장하는데 ELB 모니터링 항목을 사용할 수 있음&amp;nbsp;&lt;/p&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;2. Auto Scaling Lifecycle Hooks&lt;/p&gt;&lt;p&gt;&amp;nbsp;- Auto Scaling lifecycle hooks 는 사용자가 지정한 액션을 오토스케일링이 수행되거나 중단될 때 수행할 수 있게 한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;관련하여 필요한 요소들은 아래와 같다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:519px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/254C7143578B3A7C30&quot; filemime=&quot;image/jpeg&quot; filename=&quot;lifecycle_hooks.png&quot; height=&quot;399&quot; width=&quot;519&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;1) bootstrapping 이란?&lt;/p&gt;&lt;p&gt;&amp;nbsp;- bootstrapping 을 통해 수행할 수 있는 일들&lt;/p&gt;&lt;p&gt;&amp;nbsp; . 최근의 software 를 설치&lt;/p&gt;&lt;p&gt;&amp;nbsp; . S3 로부터 data copy&lt;/p&gt;&lt;p&gt;&amp;nbsp; . DNS 에 등록&lt;/p&gt;&lt;p&gt;&amp;nbsp; . 서비스 기동&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp; . 패키지 업데이트&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp; . 리부팅 수행&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp; . 포트 80 오픈 (ELB 에 등록, 디바이스 마운트)&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- bootstrapping 도구&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;. 인스턴스에 포함된 스크립트 (Bash, Powershell)&lt;/p&gt;&lt;p&gt;&amp;nbsp;. 설정 관리 도구 (chef, Puppet)&lt;/p&gt;&lt;p&gt;&amp;nbsp;. Amazon Opsworks&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;2) EC2 Metadata 와 UserData&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 모든 EC2 인스턴스는 로컬 인스턴스의 metadata 와 userdata 서비스에 접근할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- metadata : 인스턴스에 대해 변경할 수 없는 정보&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp; . 인스턴스에서 http://169.254.169.254/latest/meta-data/ 로 확인할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- Metadata 를 통해 Hostname, AMI ID, Instance ID, Public/Private DNS, Availability Zone 등을 검색할 수 있음&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 인스턴스 생성 시 text 16KB 까지 사용 가능&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- text 는 인스턴스에서 설정작업을 위해 스크립트로 parsing 할 수 있어야 한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- Cloudinit 은 인스턴스 최초 부팅 시 UserData 를 수행할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- Cloudinit 은 Amazon Linux, Ubuntu, RHEL AMI 에 설치되어 있다. (각 플랫폼 별 repo 를 통해 설치할 수 있음)&lt;/p&gt;&lt;p&gt;&amp;nbsp;- EC2Config 는 Windows Server AMIs 에 설치되어 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- Userdata 를 통해 Apache 나 MySQL 등의 패키지를 설치하고 EIP 를 연결할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;3. 마무리&amp;nbsp;&lt;/p&gt;&lt;p&gt;1) 하나의 Autoscaling 그룹으로 모든걸 만족시킬 수 없다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 적절한 모니터링 항목을 선택할 것&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp; . CPU Usage, Queue Depth, 현재 유저의 수 등..&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 너무 공격적으로 확장하지 말 것&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp; . Over provisioning 을 비용을 증가시킴&lt;/p&gt;&lt;p&gt;&amp;nbsp; . 탄력적인 확장 : scaling up 한 이후에 너무 빠른 시간안에 scale back 하게 되면 오히려 비용이 증가됨&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 너무 소극적으로 확장하지 말것&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp; . 서비스 성능이 저하될 수 있음&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp; . 용량 부족으로 서비스 중단될 수 있음&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 너무 성급하게 확장하고 천천히 축소하는 것을 지양해야 함&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;2) 추가된 기능 (2015년 ;;)&lt;/p&gt;&lt;p&gt;&amp;nbsp;- auto scaling group 안에 인스턴스를 추가/제외 할 수 있음&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 트러블 슈팅을 위해 인스턴스를 스탠바이 상태로 유지할 수 있음&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 소프트웨어를 설치하고 로그를 검색하기 위핸 인스턴스를 펜딩 상태로 유지할 수 있음&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;- 기동중인 인스턴스의 launch configuration 을 기반으로 auto scaling group 을 생성할 수 있음&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;위 내용은 아래 링크의 문서를 기반으로 스터디 한 내용입니다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://www.slideshare.net/awskorea/kr-webinar-2015-autoscaling-masterclass&quot; target=&quot;_blank&quot; class=&quot;tx-link&quot;&gt;http://www.slideshare.net/awskorea/kr-webinar-2015-autoscaling-masterclass&lt;/a&gt;&lt;/p&gt;&lt;div style=&quot;text-align:right; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://cleanupthedesk.tistory.com/7&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>AWS</category>
<category>AmazonWebService</category>
<category>autoscaling</category>
<category>AWS</category>
<category>CloudService</category>
<category>lifecycle</category>
<category>lifecyclehook</category>
<category>아마존웹서비스</category>
<category>오토스케일링</category>
<author>한크크</author>
<guid>https://cleanupthedesk.tistory.com/7</guid>
<comments>https://cleanupthedesk.tistory.com/7#entry7comment</comments>
<pubDate>Sun, 17 Jul 2016 17:00:15 +0900</pubDate>
</item>
<item>
<title>cloud Automation 과 Orchestration 의 차이</title>
<link>https://cleanupthedesk.tistory.com/6</link>
<description>&lt;p&gt;클라우드라는 이야기가 나오면서부터 orchestration 이라는 이야기를 많이 들었고 대충 무엇을 이야기 하고자 하는지 정도만 파악하고 있었는데 클라우드 매니지먼트 플랫폼 (CMP) 솔루션을 준비하면서 orchestration 과 automation 이 무엇인지 조금 명확히 해야할 필요가 생겼다. 이 포스팅을 읽고 다니 대략적인 개념이 잡히는 것 같아 공유한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;아래 포스팅을 읽고 내가 생각한대로 정리했으니 90% 정도만 신뢰하길 바란다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;원본 : http://www.logicworks.net/blog/2015/05/cloud-automation-vs-cloud-orchestration/&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;==========================================================================================&lt;/p&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;p&gt;대부분의 상황에서&amp;nbsp;&lt;/p&gt;&lt;p&gt;automation : 사람의 개입 없이 완수할 수 있는 taks 또는 기능&amp;nbsp;&lt;/p&gt;&lt;p&gt;orchestration : 자동화된 task 에 대한 배치나 조정 , 궁극적으로 통합된 프로세스 또는 워크 플로우의 결과&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;새로운 어플리케이션 호스트 환경으로 전환하는 프로세스를 만들 때&amp;nbsp;&lt;/p&gt;&lt;p&gt;IT팀은 여러가지 자동화 된 작업들을 조정이 필요&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;-&amp;gt;&amp;nbsp;오토스케일링 그룹을 통한 오토스케일링, ELB, 알람 등으로 오토스케일링 설정에 따라 새로운 인스턴스의 추가를 자동화 할 수 있음&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;환경 설정은 Code Deploy 와 같은 배포 자동화 도구를 포함할 수 있고 Puppet 을 통해 OS 구성/설정을 자동화 할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;이러한 것들이 자동화 프로세스&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;이러한 자동화 도구들을 각각의 명령을 통해 수행되며 , 특정 보안 그룹 또는 도구를 통해 역할 및 권한을 부여 받는다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;즉, 엔지니어는 해당 환경의 빌딩 블록이 자동화 된 경우에도, 새로운 환경을 제공하기 위해 수백가지의 수작업을 수행해야 한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;이것이 클라우드 오케스트레이션이 필요한 이유&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;Orchestration tools 은&lt;/p&gt;&lt;p&gt;IaaS 본래의 플랫폼 또는 3rd party S/W tools, 자원, 인스턴스의 타입, IAM 역할 등을 관리하고&amp;nbsp;&lt;/p&gt;&lt;p&gt;해당 자원과 자원의 구성간에는 상호 작용이 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;엔지니어는 하나의 워크 플로우에 이러한 프로세스를 선언한 템플릿을 만들고 단일의 API 로 호출 할 수 있도록 AWS Cloud Formation , VMWare vRealize Orchestrator 같은 도구를 사용할 수 있다. 그리고 이러한 템플릿을 만드는 건 시간이 많이 소요되는 작업이다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;작은 IT팀은 보유한&amp;nbsp;인력으로 많은 일을 할 수 있는 효율성이 좋은 툴을 요구하고&amp;nbsp;&lt;/p&gt;&lt;p&gt;큰 IT팀은 표준화 된 유지보수, 보안 설정, 여러팀에 걸친 배포 당 대략적인 비용을 산정해야 하는데&amp;nbsp;&lt;/p&gt;&lt;p&gt;오케스트레이션 툴은 이러한 작업들의 위험을 제거하고 단순화 할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;오케스트레이션은 DevOps 와 어떻게 연관되는가?&lt;/p&gt;&lt;p&gt;잘 조합된 IT 프로세스는 팀 조직 별 IT개발자의 요구사항을 템플릿에 담아 연속적으로 통합, 딜리버리 할 수 있게한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;automation 은 기술적인 task, orchestration 은 task 들의 구성을 통해 만들어진 workflow&lt;/p&gt;&lt;p&gt;그리고 Devops 는 수준높게 조직된 프로세스들이 동작할 수 있도록 하는 철학이다&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;이미 알 수 있는 바와 같이 오케스트레이션은 전체적인 IT 비용 절감, 새로운 프로젝트에 대한 설계 시간 확보, 딜리버리 타임 향상, system 과 개발 팀 간의 마찰을 줄일 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;그러나 모든 기업은 각각 다른 구현 단계의 툴을 가지고 있고 오케스트레이션에 대한 다른 철학을 가지고 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;어떤 조직은 클라우드 자동화 프로세스의 시작 단계에 있고, 작은 조직에서는 IT프로세스를 조정하는 brain 으로 인식된 사람 또는 팀에 의존하고 있다. (이런 조직이나 사람이 없어졌을 때를 상상해 봐야함)&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;하나의 모니터링 및 오케스트레이션 소프트웨어 인터페이스를 통해&amp;nbsp;&lt;/p&gt;&lt;p&gt;표준화되었지만 유연한 IT workflow 에 자동화된 작업을 조율 하는 조직이 진짜 Devops &amp;nbsp;!!&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;==========================================================================================&lt;/p&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;p&gt;자동화 task 들을 통합적으로 workflow 에 따라 수행시킬 수 있는 게 orchestration tool 이고&amp;nbsp;&lt;/p&gt;&lt;p&gt;이 orchestration tool 은 자동화 작업의 대상이 되는 자원들이 어떻게 상호 연결되고 있는지까지도 알고 있다는게 특징인 듯 !!&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:right; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://cleanupthedesk.tistory.com/6&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>CLOUD</category>
<category>automation</category>
<category>Chef</category>
<category>cloud</category>
<category>cloudforms</category>
<category>CMP</category>
<category>devops</category>
<category>orchestration</category>
<category>puppet</category>
<category>vrealize</category>
<category>오케스트레이션</category>
<category>오토메이션</category>
<category>자동화</category>
<category>클라우드</category>
<category>클라우드관리</category>
<category>클라우드매니지먼트플랫폼</category>
<category>클라우드자동화</category>
<author>한크크</author>
<guid>https://cleanupthedesk.tistory.com/6</guid>
<comments>https://cleanupthedesk.tistory.com/6#entry6comment</comments>
<pubDate>Tue, 21 Jun 2016 16:09:08 +0900</pubDate>
</item>
<item>
<title>일반 계정으로 tomcat 을 80 포트로 연결하고 443 포트로 SSL 리다이렉션 설정</title>
<link>https://cleanupthedesk.tistory.com/5</link>
<description>&lt;p&gt;관리하고 있는 사이트에서는 apache 같은 웹서버를 사용하지 않고 톰캣을 통해 웹을 바로 띄우고 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;연결된 도메인도 있어 도메인에 별도 포트를 붙이는 것은 원치 않아 80 으로 기동하려고 하다보니&amp;nbsp;&lt;/p&gt;&lt;p&gt;1024 포트 하위는 root user 로만 기동할 수 있다는 제약사항이 있었다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;(사용중인 OS 는 RHEL 5.11 / TOMCAT 8 버전)&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;tomcat 을 root 유저로 띄우자니 일부 일반계정으로 액세스 해야 하는 부분에서 권한 문제로 접근이 어려워&amp;nbsp;&lt;/p&gt;&lt;p&gt;일반 유저로 tomcat 을 띄우되 도메인에서는 80 포트로 연결될 수 있는 방법을 찾아야 했다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;이런 저런 검색 결과 3가지 정도로 압축되었다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;1. AUTHBIND 설정&amp;nbsp;&lt;/p&gt;&lt;p&gt;2. CAP_NET_BIND_SERVICE 설정&amp;nbsp;&lt;/p&gt;&lt;p&gt;3. IPTABLES 를 통한 포트 포워딩&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;먼저 1번 authbind 설정이 제일 간단해 보여 찾아봤는데 대부분 ubuntu 에서의 사용 사례만 있고&amp;nbsp;&lt;/p&gt;&lt;p&gt;rhel 이나 centos 에 설정한 사례를 찾지 못했다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;selinux 패키지 안에 authbind 설정이 있다는데 알려준대로 해봐도 문제는 지속되어 패스&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;2번 CAP_NET_BIND_SERVICE 설정을 해보려 했더니 RHEL 4, 5 에서는 지원하지 않는다고 하여 패스&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;3번 IPTABLES 를 통한 포트포워딩 방법 적용을 위해서는 server.xml 에 80, 443 으로 설정한 부분을&amp;nbsp;&lt;/p&gt;&lt;p&gt;8080, 8443 으로 변경해서 일반 유저로 톰캣을 띄워야 했다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;그런 다음 sysctl.conf 에 ip_forward 설정이 가능하도록 enable 시켜두고&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;# sysctl -w net.ipv4.ip_forward=1&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;IPTABLES 에 라우팅 룰을 설정하였다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(51, 51, 51); font-family: Arial, Helvetica, sans-serif; line-height: 17.329px;&quot;&gt;# iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 8080&lt;/span&gt;&lt;br style=&quot;color: rgb(51, 51, 51); font-family: Arial, Helvetica, sans-serif; line-height: 17.329px;&quot;&gt;&lt;span style=&quot;color: rgb(51, 51, 51); font-family: Arial, Helvetica, sans-serif; line-height: 17.329px;&quot;&gt;# iptables -t nat -A PREROUTING -p tcp --dport 443 -j REDIRECT --to-port 8443&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(51, 51, 51); font-family: Arial, Helvetica, sans-serif; line-height: 17.329px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(51, 51, 51); font-family: Arial, Helvetica, sans-serif; line-height: 17.329px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(51, 51, 51); font-family: Arial, Helvetica, sans-serif; line-height: 17.329px;&quot;&gt;iptables 설정은 순서대로 적용되기 때문에 만약에 80 -&amp;gt; 8080 포워딩 룰을 443 -&amp;gt; 8443 이후에 넣게되면&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(51, 51, 51); font-family: Arial, Helvetica, sans-serif; line-height: 17.329px;&quot;&gt;도메인을 통해 http 로 접속는 되는데 https 로 SSL 리다이렉션은 되지 않으니 꼭 순서대로 입력해야 한다.&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(51, 51, 51); font-family: Arial, Helvetica, sans-serif; line-height: 17.329px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(51, 51, 51); font-family: Arial, Helvetica, sans-serif; line-height: 17.329px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;text-align:right; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://cleanupthedesk.tistory.com/5&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>HOWTO</category>
<category>iptables</category>
<category>prerouting</category>
<category>RHEL5</category>
<category>Tomcat</category>
<category>톰캣</category>
<category>트러블슈팅</category>
<category>포트포워딩</category>
<author>한크크</author>
<guid>https://cleanupthedesk.tistory.com/5</guid>
<comments>https://cleanupthedesk.tistory.com/5#entry5comment</comments>
<pubDate>Mon, 20 Jun 2016 09:08:16 +0900</pubDate>
</item>
<item>
<title>Error 2003: Can't connect to MySQL server on '127.0.0.1' (99 &quot;Cannot assign requested address&quot;</title>
<link>https://cleanupthedesk.tistory.com/3</link>
<description>&lt;p&gt;오픈스택의 ceilometer 에서 미터링 데이터를 불러와서 mariadb 에 저장하는 역할을 하는 python 프로그램이 있는데&amp;nbsp;&lt;/p&gt;&lt;p&gt;어느날인가부터 데이터 누락이 생기는 거 같아 확인하다보니 데이터 호출 시 아래와 같은 메세지가 뜨면서 TCP 세션이 증가하는 현상이 있었다. (프로그램이 수행되는 환경은 &amp;nbsp;Centos 6.6 에 10.1.13-MariaDB 를 사용중이다)&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;Error 2003: Can't connect to MySQL server on '127.0.0.1' (99 &quot;Cannot assign requested address&quot;)&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;또한 프로그램이 수행될 때 netstat -nt 명령어를 통해 세션상태를 확인한 결과&amp;nbsp;&lt;/p&gt;&lt;p&gt;TIME_WAIT 상태의 세션이 12000 여개 정도로 증가하고 있었다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;TIME_WAIT 상태 해제되지 않은 대량의 연결시도가 로컬 포트​​를 잡아 버려, 유효한 범위의 포트 번호를 잠식했던 것 같고&lt;/p&gt;&lt;p&gt;포트 중 하나가 해제될 때 까지 새로운 연결을 설정할 수 없게 하는 상황인 것으로 추측하여&amp;nbsp;&lt;/p&gt;&lt;p&gt;이런 저런 검색을 통해 sysctl.conf 에 아래 파라미터들을 추가해 주었더니&lt;/p&gt;&lt;p&gt;12000 여개 TIME_WAIT 을 발생시키던 세션수가 200개 &amp;nbsp;정도로 감소하였다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;추가한 파라미터 및 역할을 아래와 같다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;. ip_local_port_range ::&amp;nbsp;로컬 포트로 사용할 수 있는 주소의 범위&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;. tcp_tw_recycle : TIME_WAIT 상태에 있는 연결을 빠르게 재활용 할 수 있도록 하기 위한 값&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 기본적으로 비활성화 되어 있으므로 값을 추가하여 넣어줘야 함&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;. tcp_fin_timeout FIN_WAIT2 상태에 있는 보유 시간 설정 (기본 60초 -&amp;gt; 10초)&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;# vi /etc/sysctl.conf&lt;/p&gt;&lt;p&gt;net.ipv4.ip_local_port_range = 1024 65000&lt;/p&gt;&lt;p&gt;net.ipv4.tcp_tw_recycle = 1&lt;/p&gt;&lt;p&gt;net.ipv4.tcp_fin_timeout = 10&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;내용 추가 후 sysctl -p 명령어를 통해 바로 적용할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;조치 후 이런 저런 검색을 더 해보다 보니&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;net. ipv4 .tcp_tw_recycle을 사용하면 조건에 따라 TCP 세션 이 부풀어 없게되는 문제가 발생할 수도있다고 하니&amp;nbsp;&lt;/p&gt;&lt;p&gt;관리하는 시스템 성격에 따라 유의하여 적용해야 할 것 같다.&amp;nbsp;&lt;/p&gt;&lt;div style=&quot;text-align:right; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://cleanupthedesk.tistory.com/3&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>HOWTO</category>
<category>error</category>
<category>mariadb</category>
<category>MySQL</category>
<category>TIME_WAIT</category>
<author>한크크</author>
<guid>https://cleanupthedesk.tistory.com/3</guid>
<comments>https://cleanupthedesk.tistory.com/3#entry3comment</comments>
<pubDate>Thu, 16 Jun 2016 12:40:02 +0900</pubDate>
</item>
<item>
<title>mkfs.ext4: command not found (RHEL 5.11)</title>
<link>https://cleanupthedesk.tistory.com/4</link>
<description>&lt;p&gt;새로운 파일시스템 구성이 필요해서 LVM 구성한 LV 를 파일시스템으로 생성하려고 평소와 다름없이 mkfs.ext4 명령어를 쳤는데&lt;/p&gt;&lt;p&gt;아래와 같이 커맨드를 찾을 수 없다는 에러가 발생하였다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;# mkfs.ext4 /dev/bkvg01/bklv001&lt;/p&gt;&lt;p&gt;-bash: mkfs.ext4: command not found&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;/sbin 하위에 있는 mkfs 명령어의 환경변수가 적용되어 있지 않은 건가 확인해 보았는데 /sbin 은 적용되어 있었다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;실제 /sbin 디렉토리를 찾아가서 확인해 보니 아니 이게 &amp;nbsp;뭐람 mkfs.ext2 , 3 다 있는데 mkfs.ext4 만 없다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;# ls -lt /sbin/mkfs&lt;/p&gt;&lt;p&gt;mkfs &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; mkfs.cramfs &amp;nbsp;mkfs.ext2 &amp;nbsp; &amp;nbsp;mkfs.ext3 &amp;nbsp; &amp;nbsp;mkfs.msdos &amp;nbsp; mkfs.vfat&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;mkfs.ext4 를 사용하기 위해서 RHEL 5 에서는&amp;nbsp;e4fsprogs-1.41.12-4.el5_10.x86_64&amp;nbsp;패키지 설치가 필요하다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;# yum install e4fsprogs-1.41.12-4.el5_10.x86_64&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;패키지 설치가 완료된 후 /sbin 하위를 확인해 보니 mkfs.ext4 가 생긴것을 확인할 수 있다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;sbin]# ls -lt &amp;nbsp;| grep mkfs&lt;/p&gt;&lt;p&gt;-rwxr-xr-x 3 root root &amp;nbsp; 49600 Sep 18 &amp;nbsp;2014 mkfs.ext2&lt;/p&gt;&lt;p&gt;-rwxr-xr-x 3 root root &amp;nbsp; 49600 Sep 18 &amp;nbsp;2014 mkfs.ext3&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(255, 0, 0);&quot;&gt;&lt;b&gt;-rwxr-xr-x 3 root root &amp;nbsp;210296 Dec &amp;nbsp;5 &amp;nbsp;2013 mkfs.ext4&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;-rwxr-xr-x 3 root root &amp;nbsp;210296 Dec &amp;nbsp;5 &amp;nbsp;2013 mkfs.ext4dev&lt;/p&gt;&lt;p&gt;-rwxr-xr-x 1 root root &amp;nbsp; 21544 Nov &amp;nbsp;8 &amp;nbsp;2012 mkfs.cramfs&lt;/p&gt;&lt;p&gt;-rwxr-xr-x 1 root root &amp;nbsp; 10000 Nov &amp;nbsp;8 &amp;nbsp;2012 mkfs&lt;/p&gt;&lt;p&gt;-rwxr-xr-x 3 root root &amp;nbsp; 28216 Jan 27 &amp;nbsp;2010 mkfs.msdos&lt;/p&gt;&lt;p&gt;-rwxr-xr-x 3 root root &amp;nbsp; 28216 Jan 27 &amp;nbsp;2010 mkfs.vfat&lt;/p&gt;&lt;div style=&quot;text-align:right; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://cleanupthedesk.tistory.com/4&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>HOWTO</category>
<category>CentOS</category>
<category>e4fsprogs</category>
<category>ext4</category>
<category>LVM</category>
<category>mkfs</category>
<category>mkfs.ext4</category>
<author>한크크</author>
<guid>https://cleanupthedesk.tistory.com/4</guid>
<comments>https://cleanupthedesk.tistory.com/4#entry4comment</comments>
<pubDate>Wed, 15 Jun 2016 09:11:44 +0900</pubDate>
</item>
<item>
<title>The State of Containers and the Docker Ecosystem 2015</title>
<link>https://cleanupthedesk.tistory.com/2</link>
<description>&lt;p&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;docker ecosystem 에 대해 알아보던 중 찾은 내용으로&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;docker 를 다들 어떻게 사용하고 있으며 어떠한 고민이 있는지 조금이나마 파악할 수 있다.&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;원래 리서치 항목이 더 많은데 아래는 내가 궁금했던 것에 대해서만 옮겨왔다.&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;- 내가 봤던 원본 항목은 아래와 같음&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://wiki.tunelinux.pe.kr/display/sysadmin/The+State+of+Containers+and+the+Docker+Ecosystem%3A+2015&quot; style=&quot;box-sizing: border-box; color: rgb(64, 120, 192); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, &amp;quot;Segoe UI&amp;quot;, Arial, freesans, sans-serif, &amp;quot;Apple Color Emoji&amp;quot;, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; font-size: 16px; line-height: 25.6px;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;http://wiki.tunelinux.pe.kr/display/sysadmin/The+State+of+Containers+and+the+Docker+Ecosystem%3A+2015&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;ol style=&quot;box-sizing: border-box; padding-left: 2em; margin-top: 0px; margin-bottom: 16px; color: rgb(51, 51, 51); font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, &amp;quot;Segoe UI&amp;quot;, Arial, freesans, sans-serif, &amp;quot;Apple Color Emoji&amp;quot;, &amp;quot;Segoe UI Emoji&amp;quot;, &amp;quot;Segoe UI Symbol&amp;quot;; font-size: 16px; line-height: 25.6px;&quot;&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;p style=&quot;box-sizing: border-box; margin-top: 16px; margin-bottom: 16px;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;컨테이너 도입 목적&lt;/span&gt;&lt;/p&gt;&lt;ul style=&quot;box-sizing: border-box; padding-left: 2em; margin-top: 0px; margin-bottom: 0px;&quot;&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;85% 빠르고 쉬운 배포&lt;/span&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;62% 유연한 배포&lt;/span&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;54% better isolation(보안)&lt;/span&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;48% 아키텍쳐(마이크로서비스)&lt;/span&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;30% 비용 절감&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;p style=&quot;box-sizing: border-box; margin-top: 16px; margin-bottom: 16px;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;컨테이너 도입 현황&lt;/span&gt;&lt;/p&gt;&lt;ul style=&quot;box-sizing: border-box; padding-left: 2em; margin-top: 0px; margin-bottom: 0px;&quot;&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;86% Dev&lt;/span&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;64% Testing&lt;/span&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;43% Staging/pre-production&lt;/span&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;40% Production&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;p style=&quot;box-sizing: border-box; margin-top: 16px; margin-bottom: 16px;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;컨테이너 기술 사용 분포&lt;/span&gt;&lt;/p&gt;&lt;ul style=&quot;box-sizing: border-box; padding-left: 2em; margin-top: 0px; margin-bottom: 0px;&quot;&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;78% Docker&lt;/span&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;24% LXC&lt;/span&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;16% RTK&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;p style=&quot;box-sizing: border-box; margin-top: 16px; margin-bottom: 16px;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;컨테이너 도입 영향&lt;/span&gt;&lt;/p&gt;&lt;ul style=&quot;box-sizing: border-box; padding-left: 2em; margin-top: 0px; margin-bottom: 0px;&quot;&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;쉽고 빠른 배포&lt;/span&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;자동화된 배포와 DevOps 프로그램을 통합하여 전체 관리를 개선 (더 자주 배포 가능)&lt;/span&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;운영 호스트 감소에 따른 비용 절감 (소규모의 경우 해당사항 없음)&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;p style=&quot;box-sizing: border-box; margin-top: 16px; margin-bottom: 16px;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;컨테이너 도입에 대한 해결 과제&lt;/span&gt;&lt;/p&gt;&lt;ul style=&quot;box-sizing: border-box; padding-left: 2em; margin-top: 0px; margin-bottom: 0px;&quot;&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;56% 기술 성숙도&lt;/span&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;50% Orchestration&lt;/span&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;46% 모니터링&lt;/span&gt;&lt;br style=&quot;box-sizing: border-box;&quot;&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;span style=&quot;font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;40% 자동화&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li style=&quot;box-sizing: border-box;&quot;&gt;&lt;p style=&quot;box-sizing: border-box; margin-top: 16px; margin-bottom: 16px;&quot;&gt;&lt;span style=&quot;line-height: 25.6px; font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif; font-size: 10pt;&quot;&gt;결론은 많은 사용자들이 컨테이너를 실서비스에 배포할 계획을 있으므로 실서비스에서 사용할 수 있는 안정적이고 통합된 솔루션이 필요함 분산된 컨테이너 기반의 애플리케이션을 위해서 오케스트레이션, 모니터링, 자동화가 중요한 과제임&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:right; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://cleanupthedesk.tistory.com/2&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>HOWTO</category>
<category>Container</category>
<category>docker</category>
<category>도커</category>
<category>컨테이너</category>
<author>한크크</author>
<guid>https://cleanupthedesk.tistory.com/2</guid>
<comments>https://cleanupthedesk.tistory.com/2#entry2comment</comments>
<pubDate>Sat, 11 Jun 2016 20:54:53 +0900</pubDate>
</item>
<item>
<title>시작</title>
<link>https://cleanupthedesk.tistory.com/1</link>
<description>&lt;p&gt;&lt;span style=&quot;font-size: 10pt; font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif;&quot;&gt;우린 아주 옛날부터&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 10pt; font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif;&quot;&gt;무언가를 시작할 때&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 10pt; font-family: &amp;quot;맑은 고딕&amp;quot;, sans-serif;&quot;&gt;책상정리부터 했었지.&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;text-align:right; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://cleanupthedesk.tistory.com/1&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>ETC</category>
<category>시작</category>
<category>책상정리</category>
<author>한크크</author>
<guid>https://cleanupthedesk.tistory.com/1</guid>
<comments>https://cleanupthedesk.tistory.com/1#entry1comment</comments>
<pubDate>Sat, 11 Jun 2016 20:49:13 +0900</pubDate>
</item>
</channel>
</rss>