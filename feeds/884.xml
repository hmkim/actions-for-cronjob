<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Blog by Hyeungshik Jung]]></title><description><![CDATA[If I keep marking the dots, someday they will 🔗🔗]]></description><link>https://blog.hyeungshikjung.com</link><generator>RSS for Node</generator><lastBuildDate>Wed, 01 May 2019 11:55:12 GMT</lastBuildDate><item><title><![CDATA[Yarn workspace caching]]></title><link>https://blog.hyeungshikjung.com/yarn-workspace-caching/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/yarn-workspace-caching/</guid><pubDate>Wed, 01 May 2019 20:26:57 GMT</pubDate><content:encoded>&lt;p&gt;모노리포에 대해서는 &lt;a href=&quot;https://rokt33r.github.io/devnotes/2017/03/08/monorepo-and-lerna/&quot;&gt;Rokt33r - Monorepo and Lerna&lt;/a&gt;에서 설명을 잘 해주고 있고, 이 글은 &lt;a href=&quot;https://yarnpkg.com/lang/en/docs/workspaces/&quot;&gt;Yarn workspace&lt;/a&gt;를 사용하는 것을 가정. &lt;/p&gt;
&lt;h3&gt;문제&lt;/h3&gt;
&lt;p&gt;아무래도 패키지가 많아지니까 이들이 의존하는 모듈을 설치하는데 시간이 좀 오래 걸리는데, 평소에 로컬이나 젠킨스 환경에서 빌드를 하면 이제에 설치해놓았던 모듈들이 그대로 남아있어서 큰 불편을 느끼지 못했다. 그러다가 이번에 도커에서 빌드를 하기로 하면서 어떻게 해야 효율적으로 캐싱을 할까 방법을 찾아보았다.&lt;/p&gt;
&lt;h3&gt;방법들&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;**/node_modules&lt;/code&gt;를 캐시로 사용하기&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;https://www.benpickles.com/article%EB%B2%95/77-caching-yarn-workspaces-on-circleci/?utm_source=feedburner&amp;#x26;utm_medium=feed&amp;#x26;utm_campaign=Feed%3A+benpickles+%28Ben+Pickles%29&quot;&gt;Caching Yarn workspaces on CircleCI&lt;/a&gt;라는 블로그에서 본 방법으로 최상단의 &lt;code class=&quot;language-text&quot;&gt;node_modules&lt;/code&gt; 폴더만 캐싱하지 말고 각 패키지 안에 들어있는 node&lt;em&gt;modules들도 함께 캐싱하는 것이다. CircleCI 처럼 캐싱할 폴더를 지정할 수 있고, 또 workspace 갯수가 많지 않다면 가장 깔끔한 방법이라고 할 수 있겠다. 다만 도커에서 비슷한 느낌을 내려고 일단 패키지 전체를 설치하고, `**/node&lt;/em&gt;modules`만 복사해서 쓰는 방법을 해보고 있는데 복사하는 과정에서 뭔가 링크가 깨지는지 잘 안 됬다. 아니면 아예 폴더를 옮기지 말고 소스만 지우는 방법도 있을 것 같은데 이건 해보고서 업데이트.&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;**/package.json&lt;/code&gt;이랑 &lt;code class=&quot;language-text&quot;&gt;yarn.lock&lt;/code&gt;만 복사해서 도커 레이어를 재사용하기&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/lerna/lerna/issues/858#issuecomment-399699208&quot;&gt;Caching strategy for dependencies with Docker - lerna/lerna#858&lt;/a&gt;에서 본 것으로, 도커에서 파일이나 폴더를 복사할 때 체크섬이 같아야 레이어가 재활용이 된다는 점을 이용해서 전체 소스 코드 대신 &lt;code class=&quot;language-text&quot;&gt;yarn.lock&lt;/code&gt;이랑 &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt;, 그리고 각 workspace의 &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt;만 복사해서 모듈을 설치하는 것이다. 이러면 소스코드가 바뀌어도 저 파일들이 바뀌지 않으면 의존성이 설치된 상태까지의 도커까지는 재사용이 되니까 이미지 만드는 속도가 훨씬 빨리진다. 이것도 따라해 봤는데 저렇게만 복사해서는 아예 yarn 명령어로 설치가 안되었다. &lt;/p&gt;
&lt;p&gt;아쉬운대로 일단 전체 설치한 이미지를 base로 삼아서 그 위에서 새로 코드를 받고, yarn을 돌려서 필요한 패키지가 있으면 새로 받는 것도 나름 방법이 되는데, 안 쓰는 소스코드가 남아있는 것이 뭔가 찜찜해서 좋은 방법은 아닌 것 같다. 1이나 2중에서 잘 되는 방법을 찾아서 이 포스트를 업데이트 할 수 있으면 좋겠다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Google Cloud Next 2019 Extended를 다녀와서]]></title><link>https://blog.hyeungshikjung.com/google-cloud-next--extended--yangjae/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/google-cloud-next--extended--yangjae/</guid><pubDate>Sat, 27 Apr 2019 19:23:08 GMT</pubDate><content:encoded>&lt;p&gt;주말에 뭐하지 하다가 festa.io에서 표를 팔길래 한 번 가봄. 행사 관련 정보는 행사 페이지 - &lt;a href=&quot;https://festa.io/events/256&quot;&gt;Next ‘19 Extended | Festa!&lt;/a&gt; 를 참조.&lt;/p&gt;
&lt;h3&gt;Beyond kubernetes (조대협님)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;microservice pattern&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;eg) circuit braking. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Netflix OSS hystrix 등&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;다 좋은데 Application Layer고, Java로 되있다&lt;/li&gt;
&lt;li&gt;스프링이 좀 편한데 그래도 자바다&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Envoy&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Network Layer에서!&lt;/li&gt;
&lt;li&gt;다 좋은데… 그때그때 계속 어플리케이션을 엮기가 귀찮다&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Istio&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;그냥 k8s 쓰듯이 쓰면 컨테이너에 Istio Proxy가 알아서 붙음&lt;/li&gt;
&lt;li&gt;Traefik이랑 크게 다른건 없는데 정책을 입힐 수 있다는 것이 큰 차이점&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;특히 눈에 띄는 기능&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Rate control이 특히 눈에 띄었음&lt;/li&gt;
&lt;li&gt;네트워크토폴로지 뽑아줌&lt;/li&gt;
&lt;li&gt;Distributed Tracing도 된다&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;다 좋은데 깔아서 쓰면 힘드니 managed service를 쓰자  (GKE씁시다)&lt;/li&gt;
&lt;li&gt;1.0 나옴&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DevOps&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;개발자들이 스스로 운영을 한다&lt;/li&gt;
&lt;li&gt;DevOps팀은 그게 가능하도록 시스템을 만든다&lt;/li&gt;
&lt;li&gt;DevOps 팀의 목표는 DevOps 팀이 필요 없는 것인데…그게 잘 안 됨&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SideCar  패턴&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;보통 App이 있고 fluentd, envoy 이런게 같이 붙는다&lt;/li&gt;
&lt;li&gt;어차피 App이 바뀌는거니까 그냥 Pod 하나에 다 놓고 앱만 바꾼다&lt;/li&gt;
&lt;li&gt;괜히 k8s에서 Pod 하나에 컨테이너 여러개 들어가 있는게 아니다&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Spinnaker&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;클러스터 환경에서 배포 / 롤백 프로세스를 자동화해줌&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;스모크 테스트를 하고 30분동안 괜찮으면 넘어가자&lt;/li&gt;
&lt;li&gt;밤에만 배포를 하자&lt;/li&gt;
&lt;li&gt;자동 롤백&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;StackDriver&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;장비 레벨, 컨테이너 레벨, 어플리케이션 레벨의 모니터링이 한 방에!&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;라우팅 용도로 쓰고 저장은 BigQuery에 하면 비용이 겁나 싸다&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;모 회사는 오픈소스 기반으로 하다가 (NELO 같은 툴이 있었나 봄) 이거로 바꿔서 비용 1/10으로 줄이고 운영인력 다 필요 없어짐&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;네이버 / 카카오 사이즈 아니면 직접 모니터링 하지 말고 DataDog이나 기타 제품을 써라&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;예전에 Heapster에서 Prometheus로 훅 넘어간 적이 있다. 이 리스크를 작은 조직이 감당하기는 부담이 된다&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;앱간의 관계를 그래프로 그려준다. 분산 트레이싱도 당연히 지원 (Zipkin, Jagger 기반. 스프링에서 쉽게 붙일 수 있음)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Knative&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PaaS의 일종&lt;/li&gt;
&lt;li&gt;쿠베 오케스트레이션이 춘추전국 시대를 거처서 K8s로 왔듯이 PaaS 솔루션도 이게 대세가 될 느낌이 온다&lt;/li&gt;
&lt;li&gt;다른건 불안한데 Run + Deployment 까지는 그래도 안정화가 되어있다&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Kubeflow&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;정말정말 좋은데, 아직은 쓰면 안된다&lt;/li&gt;
&lt;li&gt;ML은 모델보다도 데이터 - 빌드 - 서빙 등등 파이프라인 구축이 겁나 빡세다. &lt;/li&gt;
&lt;li&gt;K8S 기반&lt;/li&gt;
&lt;li&gt;Jupyter Labs라고 공용 Jupyter Notebook이 있다&lt;/li&gt;
&lt;li&gt;TF 분산 환경 설치에 장점이 있다&lt;/li&gt;
&lt;li&gt;Seldon 이라고 TF serve 비슷하게 여러 프레임워크 지원하는 서빙용 엔진도 지원&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Anthos&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GKE를 고객사 On premise 머신에 깔아드림&lt;/li&gt;
&lt;li&gt;AWS, Azure에도 올라감&lt;/li&gt;
&lt;li&gt;k8s 운영을 다 해줌&lt;/li&gt;
&lt;li&gt;비쌈&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;기타&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;여기 나온 툴, 그러니까 CNCF에서 한창 개발되고 있는 툴들은 1.0 버전이 나오기 전에는 쓰는 것을 비추. API가 정말 훅훅 바뀐다.&lt;/li&gt;
&lt;li&gt;그리고 실제 얘네 운영하려면 literally 깊은 빡침을 느낄 수 있음. (PPL) 구글 클라우드 쓰시라.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;(글쓴이 주)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GCP가 레퍼런스가 적어서 그렇지 특히 컨테이너 쪽으로 좋은게 많은듯…확실히 k8s 원조 맛집.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Knative로 서버리스 워크로드 구현 (김진웅님)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Managed FaaS&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Vendor lock-in의 문제&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;FaaS on k8s&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;한 15개 있다&lt;/li&gt;
&lt;li&gt;Knative가 나온지는 얼마 안 됬는데, 겁나 유망하다&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Knative&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;빌드 - 배포 - 관리를 하나로&lt;/li&gt;
&lt;li&gt;소스 중심, 컨테이너 기반이라서 언어 프레임워크를 가리지 않음&lt;/li&gt;
&lt;li&gt;서비스 디스커버리 용으로 Istio나 Gloo가 있어야 한다&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Eventing이 좀 유연한거 같다&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;이거는 그냥 Service-Deployment-Pod에 비해 장점이 될 거 같음&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;(글쓴이 주 1) 얘는 스케일링이 팍팍 잘 될까?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://knative.dev/docs/serving/samples/autoscale-go/index.html&quot;&gt;Autoscale Sample App - Go | Knative&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;사실 k8s의 CPU 기반의 HPA가 굼떠서 좀 못마땅하고 불안했는데 (기본값은 15초 주기로 CPU 사용량의 평균을 냄) &lt;/li&gt;
&lt;li&gt;얘는 일단 1분 윈도우를 가지고 Pod별 concurrency를 계산해서 target concurrency랑 맞추고 (다만 이건 개발자가 정해야되니까 좀 더 정하기 어려울 수 있겠다)&lt;/li&gt;
&lt;li&gt;또 패닉 모드라고 있어서 갑자기 트래픽이 확 치고 올라오면 바로 Pod 갯수를 2배로 올리는 기능이 있음&lt;/li&gt;
&lt;li&gt;HPA 보다는 확실히 옵션이 좋다&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;(글쓴이 주 2)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;한동안 AWS 람다에서 이것 저것 돌리려고 AMI Linux에서 빌드하고 그 아티팩트를 람다에 태우는 방법들을 많이 찾아봤는데, 이제 그것도 옛날 얘기가 될거 같다&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Cloud Spanner (이정운님)&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;CAP를 진짜 다 충족 하느냐?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CAP 이론을 창시하신 분 (now at Google)이 쓰신 &lt;a href=&quot;https://ai.google/research/pubs/pub45855&quot;&gt;Spanner, TrueTime &amp;#x26; The CAP Theorem&lt;/a&gt; 을 읽어보면 얼추 다 충족한다고 되있다&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;99.999% SLA 경쟁 DB보다 높음&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;이미 구글에서 5년 넘게 사용함&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;엄청 빠르지는 않지만 노드가 추가되는 와중에도 지속적인 성능을 보여줌&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://quizlet.com/blog/quizlet-cloud-spanner&quot;&gt;Quizlet Tests Cloud Spanner — The Most Sophisticated Cloud Database | Quizlet&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;스키마 변경, 트리거, 프로시저 많은 경우는 별로&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;사례&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;에버노트&lt;/li&gt;
&lt;li&gt;Streak - Next 19 &lt;a href=&quot;https://www.youtube.com/watch?v=3aHBkfBRFEU&quot;&gt;https://www.youtube.com/watch?v=3aHBkfBRFEU&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;게임 - &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;글로벌 런칭하면 레이턴시, 노드 갯수 등등 관리가 손이 많이 간다&lt;/li&gt;
&lt;li&gt;그리고 게임이 오픈빨이 빠지고 접속자가 줄면 노드를 엄청 쉽게 줄일 수 있다&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://medium.com/google-cloud/colopl-open-sourced-a-cloud-spanner-driver-for-laravel-framework-4ca1db018a3&quot;&gt;Colopl open sourced a Cloud Spanner driver for Laravel framework&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;오로라랑 비교&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;오로라는 MySQL compliant&lt;/li&gt;
&lt;li&gt;얘는 아니다&lt;/li&gt;
&lt;li&gt;대신 수평 확장에 구조가 더 유용하다 (오로라는 최근에 마스터 - 마스터 레플리카가 됐는데 얘는 애초에 그렇게 만들어짐. 근데 얘네들은 지연이 거의 없어서 레플리카가 레플리카가 아님…)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;(글쓴이 주)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;New SQL 이라고 TiDB, CockroachDB 이런게 막 나오는데 아직 우리나라 사이즈에서는 정말 정말 transaction 필요한 건 그냥 어플리케이션 샤딩을 해버리고 나머지는 NoSQL 쓰는게 더 싸게 먹히고, 쌓여있는 경험도 많은거 같음&lt;/li&gt;
&lt;li&gt;저게 되려면 일단 인프라 단에서 스토리지도 좋고 네트워크도 좋고, 일단 시계가 좋아야 한다.. 구글이 괜히 오픈소스를 하는게 아니다&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[카프카, 데이터 플랫폼의 최강자를 읽고]]></title><link>https://blog.hyeungshikjung.com/on-kafka-koh-kong/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/on-kafka-koh-kong/</guid><pubDate>Sun, 17 Mar 2019 16:27:21 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;https://book.naver.com/bookdb/book_detail.nhn?bid=13540082&quot;&gt;네이버 도서 링크&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;회사에 다니다보니 카프카를 안 쓸 수가 없어서 어떻게 익히지 하다가 회사 도서관에서 빌려본 책. 저자 두 분은 카카오에서 전사 공용 카프카 클러스터를 운영하시는 분들인데 그래서 그런지 정말 실용적인 내용만 쏙쏙 담아주셨다. 내용은 읽으면서 작성한 &lt;a href=&quot;https://www.notion.so/zxzl/kafka-553720ad75624cba8d63f7f5e7c5f63d&quot;&gt;노션 메모&lt;/a&gt;를 참고하시고… 전반적으로 엄청 큰 클러스터를 운영할 때의 꿀팁, 삽질기 그런 내용보다는 카프카를 처음 접하고 한 5대 규모로 운영해야 하는 개발자를 위해 쓰여졌다. 어쩌면 카프카가 이제 꽤 성숙해서 설명이 별로 없는 것일 수도 있겠는데 어쨌든 ‘주키퍼 깔고 카프카 깔고 토픽 만들고 프로듀서 만들어서 컨슈머로 가져다 쓰고,,, 모니터링도 하고 가끔 업데이트도 하고’하는 흐름을 충실하게 짚어주신다.&lt;/p&gt;
&lt;p&gt;원래 책을 읽으면 예제를 다 따라 쳐보고, 결과도 다 확인하는 편인데 너무 설명이 잘 되있어서 직접 따라쳐보지 않고 3시간 동안 빠르게 읽었다. 그렇게 읽어도 좋고, 실제 머신에 하나씩 깔아보면서 따라가도 좋은 책. 역서보다도 이렇게 한국분이 쓰신 좋은 책을 보면 참 반갑다.&lt;/p&gt;
&lt;p&gt;다시 원래 목적으로 돌아와서 카프카를 ‘익히려면’ 이제 무엇을 해야할까. 제일 좋은 것은 이걸 이용한 무언가를 만들어보는 것인데 그러려면 일단 카프카를 띄워야 한다. 내가 카프카를 리얼 머신에 깔면서 운영할 일은 없으니 (깔아도 아마 k8s에 깔 듯…?) 간편하게 도커로 띄워보자. 이광식님의 &lt;a href=&quot;http://www.kwangsiklee.com/2017/03/docker-compose%EB%A1%9C-kafka%EB%A5%BC-%EB%A1%9C%EC%BB%AC%EC%97%90-%EB%9D%84%EC%9B%8C%EB%B3%B4%EC%9E%90/&quot;&gt;블로그 글&lt;/a&gt;이 설명이 가장 잘 되어 있지만, 한가지 아쉬운 점은 kafka-manager가 빠져있다는 것이다. 마찬가지로 두가지 방법이 있다&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;소스를 받아서 로컬에서 빌드하는 방법 - 아마 같은 층에 계신거로 추정되는 분이 정리를 잘 해주셨다. &lt;a href=&quot;https://blog.naver.com/occidere/221395731049&quot;&gt;https://blog.naver.com/occidere/221395731049&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;도커를 쓰는 법 - 다행히 도커로 잘 말아주신 분이 계신다. &lt;a href=&quot;https://github.com/sheepkiller/kafka-manager-docker&quot;&gt;sheepkiller/kafka-manager-docker&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;(19-04-06) 아래와 같은 삽질을 하지 말고 그냥 &lt;a href=&quot;https://docs.confluent.io/current/quickstart/ce-docker-quickstart.html&quot;&gt;Confluent Platform Quickstart 도커 이미지&lt;/a&gt;를 쓰면 해결&lt;/p&gt;
&lt;p&gt;카프카 매니저만 따로 띄우면 계속 올리고 내리기 귀찮으니까 저기서 나온 &lt;code class=&quot;language-text&quot;&gt;docker-compose-single-broker.yml&lt;/code&gt; 밑에다가 kafka-manager를 추가해준다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-docker&quot;&gt;&lt;code class=&quot;language-docker&quot;&gt;(기타 등등)
kafka&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;manager&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  image&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; sheepkiller/kafka&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;manager&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;latest
  ports&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;9000:9000&quot;&lt;/span&gt;
  links&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; zookeeper
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; kafka
  environment&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    ZK_HOSTS&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; zookeeper&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;2181
    APPLICATION_SECRET&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; letmein
    KM_ARGS&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;Djava.net.preferIPv4Stack=true&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;이렇게 하면 왠만한건 다 되는데, 저 이미지가 빌드된지 좀 되서 최신 kafka-manager가 담겨있지 않다. 따라서 최신 버전의 카프카를 지원하지 않고, 몇몇 &lt;a href=&quot;https://github.com/yahoo/kafka-manager/issues/407&quot;&gt;이슈&lt;/a&gt; 들을 밟을 수 있으니 저 이미지를 살짝 고쳐서 최신 버전의 kafka-manager 이미지를 만들어야 한다.
&lt;a href=&quot;https://github.com/sheepkiller/kafka-manager-docker/blob/master/Dockerfile&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;sheepkiller/kafka-manager-docker/Dockerfile&lt;/code&gt;&lt;/a&gt;를 보면 &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;ENV JAVA_HOME=/usr/java/default/ \
    ZK_HOSTS=localhost:2181 \
    KM_VERSION=1.3.1.8 \
    KM_REVISION=97329cc8bf462723232ee73dc6702c064b5908eb \
    KM_CONFIGFILE=&amp;quot;conf/application.conf&amp;quot;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;이렇게 환경 변수를 설정해주는 부분이 있다. 여기서 &lt;code class=&quot;language-text&quot;&gt;KM_VERSION&lt;/code&gt;이랑 &lt;code class=&quot;language-text&quot;&gt;KM_REVISION&lt;/code&gt;을 수정해주면 된다. kafka-manager 리포의 &lt;a href=&quot;https://github.com/yahoo/kafka-manager/releases&quot;&gt;release&lt;/a&gt;를 보면 최신 버전이랑 커밋ID를 알 수 있다. 그걸로 환경 변수를 업데이트하고, &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;ENV JAVA_HOME=/usr/java/default/ \
  ZK_HOSTS=localhost:2181 \
  KM_VERSION=1.3.3.23 \
  KM_REVISION=2ca848bfdf542bf1da8fc860db9bbcc99548f89d \
  KM_CONFIGFILE=&amp;quot;conf/application.conf&amp;quot;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;strong&gt;영겁&lt;/strong&gt;의 세월을 기다려서 이미지를 빌드하면 개발용으로 쓸만한 카프카랑 카프카 매니저를 편하게 띄울 수 있다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Designing Data Intensive Applications를 읽고]]></title><description><![CDATA[매년 다시 읽어야 할 책]]></description><link>https://blog.hyeungshikjung.com/on-designing-data-intensive-applications/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/on-designing-data-intensive-applications/</guid><pubDate>Sat, 16 Mar 2019 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;우선 개인적으로 이 책을 100% 이해를 못했음을 미리 밝히고, 우선 다른 분들이 써주신 좋은 리뷰들의 링크를 남긴다. 이 책의 공식 트위터 &lt;a href=&quot;https://twitter.com/intensivedata&quot;&gt;계정&lt;/a&gt;에 가면 다른 리뷰도 많다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://blog.softwaremill.com/designing-data-intensive-applications-by-martin-kleppmann-a-review-20406d7132f9&quot;&gt;Designing Data-Intensive Applications by Martin Kleppmann: a review&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://forvillelser.vorce.se/posts/2018-12-30-on-designing-data-intensive-applications.html&quot;&gt;On Designing Data-Intensive Applications&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;오늘날 우리가 만들고 접하는 많은 소프트웨어들이 많은 양의 데이터를 처리하고 있는데 이 책은 이런 데이터를 처리하는 시스템을 어떻게 디자인 할 것이냐를 주제로 다방면의 지식을 처음부터 차근차근 알려준다. 일단 &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;어떻게든 데이터를 어떻게 저장하고 불러올지 정의를 해야 하고 (Ch2. Data Models and Query Languages)&lt;/li&gt;
&lt;li&gt;램에만 저장하고 끝날 것이 아니니 Btree, SSTable등의 자료구조와 크래시 복구를 위한 WAL 얘기도 나오고 (Ch3. Storage and Retrieval)&lt;/li&gt;
&lt;li&gt;데이터를 효율적으로 저장하는 포맷 (XML, JSON, Avro, Parquet, Protobuf)과 Schema evolution에 대한 얘기도 해주시고 (Ch4. Encoding and Evolution)&lt;/li&gt;
&lt;li&gt;데이터가 한 대에 다 안 들어갈테니 머신 여러 대에 나눠서 저장하는 방법 (Ch5, Ch6. Replicatoin &amp;#x26; Partitioning)&lt;/li&gt;
&lt;li&gt;데이터를 여러 명이 동시에 수정하다 보니까 생기는 Transaction 문제 (Ch7)&lt;/li&gt;
&lt;li&gt;그리고 Reliable한 시스템을 만드려면 결국 분산 시스템을 만들 수 밖에 없는데 왜 그게 어려운지와 (Ch8) 특히 Consistency and Consenus 문제 (Ch9)&lt;/li&gt;
&lt;li&gt;그리고 데이터를 처리하는 방식 - Batch Processing과 Stream Processing의 개념과 이를 위해 등장한 도구들을 소개하신다. Event sourcing, CQRS 얘기도 같이 나온다.(Ch10, Ch11)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이렇게 다양한 분야의 지식을 훑은 다음에는 이 분야의 미래를 조망하시면서 결국 데이터베이스의 내부가 돌아가는 방식과 현재의 다양한 스택으로 구성된 어플리케이션이나 결국 크게 보면 닮은 점이 많다고 일깨워 주신다 (예를 들면 DB에서 인덱스를 만드는 것은 원본 데이터가 바뀔 때마다 다른 데이터가 바로바로 따라가면서 업데이트되어야 한다는 점에서 결국 팔로워 레플리카를 만드는 것이랑 비슷하다). &lt;/p&gt;
&lt;p&gt;하지만 더욱 유연하고 확장성있는 시스템을 위해서는 데이터베이스 내부의 Transaction에 의존하기 보다는 스트림으로 여러 모듈을 잇는 것이 유리하고 (결국 application의 모든 state는 소스 event의 derived state로 바라봐야 하고, 다시 이 state가 다른 event의 src가 됨. 그리고 이게 replicate이 되려면 각 action은 idempotent 해야 함) 이런 식으로 여러 도구들을 쉽게 잇는 쪽으로 기술이 발전할 것이라고 저자는 예측한다. 따져보면 MySQL에 있는 데이터를 ElasticSearch를 통해 검색을 지원하려면 예전에는 rivering을 위한 별도의 툴이 있었지만 지금은 Kafka Connector 등이 나와있고, 앞으로는 유닉스에서 파이프를 통해 작업들을 잇듯이 더 간단하게 같은 작업을 할 수 있도록 진화할 가능성이 높다.&lt;/p&gt;
&lt;p&gt;솔직히 이해를 100% 못한 부분도 많았지만 (예를 들자면 메시지 큐가 exactly once delivery를 어떻게 보장하는지…) 그래도 막연히 스파크, 카프카 등등을 잘 익혀야겠다 생각하는 것과, 각각 도구들이 어떤 문제를 풀고자 나왔는지 대략의 이해를 하고 익히는 것은 정말 큰 차이라서 책을 읽으면서 참 낸 돈에 비해 많이 배워간다는 생각이 많이 들었다. 물론 꾸역꾸역 킨들로 읽는데 거의 3달이 걸렸지만 저자는 이 책을 쓰는데 더 많은 시간을 썼을 것이고, 또 이 도구들이 현재의 수준으로 발전하기에는 더 많은 사람들의 노력이 있었을테니 시간이 하나도 아깝지 않다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Zappa로 배포한 애플리케이션에서 S3 관련 에러가(HeadBucket) 날 때]]></title><link>https://blog.hyeungshikjung.com/zappa-s3-mistake/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/zappa-s3-mistake/</guid><pubDate>Fri, 22 Feb 2019 16:30:40 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;https://github.com/Miserlou/Zappa&quot;&gt;Zappa&lt;/a&gt;로 Django나 Flask 앱을 배포할 때 흔히 static 파일은 s3에 올리게 되는데, zappa 배포도 잘 되고, django-stoarages 등을 이용한 static 파일 업로드도 잘 되었는데 배포된 URL에 들어가면 람다 함수에서 s3 버킷에 접근이 아예 안되는 경우가 있다. 이 때 여러가지 원인이 있겠지만 zappa_settings.json에서 &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;   &lt;span class=&quot;token property&quot;&gt;&quot;profile_name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;your-profile-name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; // AWS profile credentials to use. Default &apos;default&apos;. Removing this setting will use the AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY environment variables instead.&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;이 &lt;code class=&quot;language-text&quot;&gt;profile_name&lt;/code&gt;을 의심해 볼 필요가 있다. 보통 프로젝트마다 AWS 프로필을 다르게 사용하려고 환경 변수에 있는 키를 사용하곤 하는데, 저 때 &lt;code class=&quot;language-text&quot;&gt;profile_name&lt;/code&gt;이 “default”로 설정되어 있으면 awscli에 등록된 키로 zappa가 돌아간다. 저 필드를 비우고 환경 변수에 있는 정보를 사용하면 static 파일을 올렸을 때와 람다 함수를 배포할 때 사용한 프로필이 같아져서 권한 문제가 발생할 확률이 크게 줄어든다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[다양한 isolation level]]></title><link>https://blog.hyeungshikjung.com/various-isolation-levels/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/various-isolation-levels/</guid><pubDate>Sun, 17 Feb 2019 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;요즘 &lt;a href=&quot;https://www.amazon.com/Designing-Data-Intensive-Applications-Reliable-Maintainable-ebook/dp/B06XPJML5D/ref=sr_1_1?crid=2H5GZ7J4G1UC9&amp;#x26;keywords=designing+data-intensive+applications&amp;#x26;qid=1550406040&amp;#x26;s=gateway&amp;#x26;sprefix=designing+data%2Caps%2C341&amp;#x26;sr=8-1&quot;&gt;Designing Data Intensive Application&lt;/a&gt;이란 책을 읽는데 Transaction 챕터는 메모를 하면서 읽어서 공유해 봄. 그림을 그대로 복붙한 것이 맘에 걸리는데…부디 그림을 보시고서 ‘아 좋은 책이구나’ 하고서 많이 사셨으면 좋겠음.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.notion.so/zxzl/Ch7-Transaction-de5a5326bf58462e8b686689e1b56e64&quot;&gt;https://www.notion.so/zxzl/Ch7-Transaction-de5a5326bf58462e8b686689e1b56e64&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[할 일이 없을 때는 공부를]]></title><description><![CDATA[스트레스 안 받고 공부하기]]></description><link>https://blog.hyeungshikjung.com/studying-habit/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/studying-habit/</guid><pubDate>Sat, 02 Feb 2019 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;대학원에 다닐 때 공부를 어떻게 해야 하나 하고 인터넷을 찾다가 물리학 공부를 하고 계신 분의 글을 읽고 느낀 점이 많았는데, 졸업하고 다시 찾아서 읽어보니까 개발자로 살아도 그대로 적용되는 내용이 많아서 감상을 남겨봄. &lt;/p&gt;
&lt;p&gt;일단 원본 글은
&lt;a href=&quot;https://blog.naver.com/todd0522/10173673554&quot;&gt;영재학교, 칼텍을 다니면서 느낀 최고의 공부습관&lt;/a&gt;라는 글로 어차피 공부를 쭉 해야되는 사람이라면 별일 없을 때 고민을 많이 하지 말고 일단 공부를 하는 습관을 들여놓으면, 나중에 다른 일을 할 때도 공부를 급하게 할 필요가 없어서 크게 부담이 없다고.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;공부가 필요할 때만 공부를 하면 되는 사람이면 이렇게 안 해도 된다고 생각한다. 할일 없을땐 자신이 바라는 미래에 관련된 투자를 하는 게 낫지. 하지만 공부에 말 그대로 ‘끝이 없는’ 나같은 과학도들의 경우 어차피 언젠가 할 거. 내가 아무리 공부를 많이 한다고 해도 넘치게 할 걱정이 없다. 그러니까 할 일 없을 때 딴짓하느라 시간 쏟고 나중에 공부하느라 하고 싶은거 못하지 말고 그냥 할일 없을때 공부를 하자.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;그런데 사실 위의 내용은 개발자에게 적용해도 큰 무리가 없다. 새로운 프레임워크와 패러다임은 계속해서 나오고 있고, 동시에 예전부터 내려오던 CS기초 역시 계속 공부해야 한다 (HTTP를 모르는데 HTTP/3를 알 수 있을까?). 학교를 졸업하고도 위의 내용은 계속 공부해야 되는 내용이고 공부를 회사 밖에서 해놓으면 회사에서 삽질할 확률을 줄일 수 있고, 동료에게 더 도움이 될 수 있고, 또 퇴근을 더 가벼운 마음으로 할 수 있다. &lt;/p&gt;
&lt;p&gt;모든 개발자가 코딩을 취미로 삼아야 한다는 이야기는 아니다. 다만 딱히 취미가 없고, 당장 해야 할 일이 없으면 회사 밖에서 코딩을 하는 것에 대해서 크게 거부감을 가질 필요가 없다는 것이다. 그렇게 공부를 해놓으면 나중에 개발보다 더 중요한 일이 생겼을 때 그곳에 더 많은 리소스를 쏟을 수 있다 (Code will make you free!).&lt;/p&gt;
&lt;p&gt;p.s) 첫 출근날에 동료 분이 &lt;em&gt;형식씨는 취미가 뭐에요…? 막 개발이고 그런거 아니죠?&lt;/em&gt; 하셔서 지도로 부동산 보는 것이라고 말씀을 드렸는데, 확실히 개발이 지도보는 것처럼 재밌지는 않은 것 같다. 다만 어차피 생계가 걸려있으니 쉬는 시간에 레고를 조립하는 것 보다는 코드를 조립하는 것이 더 가성비가 좋다고 생각해서 (심지어 돈도 덜 듬) 틈틈히 볼 뿐이다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[장고에서 manage.py로 데이터 옮기기]]></title><link>https://blog.hyeungshikjung.com/django-dumpdata/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/django-dumpdata/</guid><pubDate>Mon, 28 Jan 2019 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;장고 앱을 다른 곳에서 띄울 때는 그냥 &lt;code class=&quot;language-text&quot;&gt;pg_dumpall&lt;/code&gt; 등의 툴을 사용해서 데이터베이스 스키마랑 데이터랑 싹 옮겨서 새 서버에서는 마이그레이션도 필요 없게 썼었는데, 오늘은 pg_dumpall이 중간에 계속 멈추는 상황이 있었다. 그래서 Postgres의 백업 기능 말고 장고의 데이터 내보내기 / 불러오기 기능을 써보기로 했다.
기본적으로&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;기존 디비에 물린 상태&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
python manage.py dumpdata --exclude&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;contenttypes --exclude&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;auth.Permission &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; 파일.json&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;새 디비에서 마이그레이션 돌리고 난 후 데이터는 없는 상태&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
python manage.py loaddata 파일.json&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;을 돌리면 잘 되었다. 처음에 &lt;code class=&quot;language-text&quot;&gt;contenttypes&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;auth.Permission&lt;/code&gt; 테이블을 제외하는 것을 몰라서 약간 헤맸다.&lt;/p&gt;
&lt;h3&gt;도움이 된 글&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://coderwall.com/p/kogbla/django-fixture-dumpdata-loaddata-and-integrity-error&quot;&gt;Django fixture dumpdata, loaddata and Integrity Error&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[신과함께 반도체 에피소드 두 편을 듣고 (노근창, 이주완)]]></title><link>https://blog.hyeungshikjung.com/views-on-chineses-memory/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/views-on-chineses-memory/</guid><pubDate>Mon, 03 Dec 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;별 일 없으면 졸업하고 반도체 회사를 가게 되는 입장으로써… 업황이 궁굼하여 공부를 하다가 &lt;a href=&quot;http://www.podbbang.com/ch/15781&quot;&gt;신과함께&lt;/a&gt;라는 팟캐스트에서 반도체 관련 에피소드 두 개를 들음&lt;/p&gt;
&lt;h3&gt;어떤걸 들었나&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;6/27 방영분 - 28화 - 반도체, 시작인가 꼭지인가 (f.노근창) - 긍정론&lt;/li&gt;
&lt;li&gt;11/23 방영분 - 48화 - 반도체 시장 누가 호황을 말하나 (f.이주완) - 비관론&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;두 분이 동의하는 부분&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;중국이 곧, 적어도 2020년부터는 기초적인 수준의 반도체를 만들 것이다.&lt;/li&gt;
&lt;li&gt;자국내 수요를 상당부분 감당할 수 있을 것이다. 성능이 문제가 되더라도 정부가 그렇게 만들 것이다.&lt;/li&gt;
&lt;li&gt;한국과 중국간의 메모리 기술 격차는 크고, 그 격차는 빠른 시일 내에 좁혀지지 않을 것이다&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;두 분이 동의하지 않는 부분&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;중국산 메모리가 업계에 어떤 영향을 미치는가?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;긍정론
_ 어차피 미미하다. 저렇게 만들어진 제품은 특허 이슈를 피하지 못할텐데 특허를 해결하지 않고 만들어진 자국산 메모리를 사용하는 순간 사용한 기업이 국제적 제제 대상이 되버린다.
_ 또한 크기 / 발열 / 전력사용 / 속도 면에서 많은 부분이 떨어져서 경쟁력을 가지기 쉽지 않다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;비관론
_ 현재 램 시장에서 주류가 되는 제품이 DDR3 4기가인데 이건 나온지 꽤 된 제품
_ 이런걸 보면 물론 최신 제품은 삼전 / 하이닉스 / 마이크론 제품을 쓰겠지만, 보편적인 용도의 제품은 저렴한 중국산을 쓸 수도 있다!&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;그런식으로 중국 업체가 시장 내에서 나름의 자리를 잡으면, 중국 정부의 비호아래서 기술격차를 점점 좁힐 수 있을 것이다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;12월 중으로 두 분을 같이 모신다는데 꼭 성사되었으면 좋겠다.&lt;/p&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;(19/1/28) 18/12/23 방영분에 두 분이 나오셨는데 두 분 모두 비관론의 ‘보편적 용도의 제품에서는 꽤 영향력이 있을 것이다’에 동의를 하셨는데 그러다 최근에 미국 덕분에(?) 중국 반도체 굴기가 주춤해지면서 삼전 주식이 훅 올랐다.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[AWS Batch로 Gensim 돌리기]]></title><link>https://blog.hyeungshikjung.com/awslinux-gensim/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/awslinux-gensim/</guid><pubDate>Sun, 28 Oct 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Gensim을 돌리다보면 램이 모자랄 때가 많아서 EC2를 잠깐 띄워서 돌렸었는데 이것도 하다보니까 반복인 것 같아서 AWS Batch를 써보기로 했다. 기본적으로는 예제로 나오는 &lt;a href=&quot;https://aws.amazon.com/blogs/compute/creating-a-simple-fetch-and-run-aws-batch-job/&quot;&gt;Fetch &amp;#x26; Run&lt;/a&gt;이랑 크게 다를게 없는데 태스크를 돌릴 이미지를 만들 때 실수하기 쉬운 부분이 있다. 사실 스크립트로 EC2 띄우는 거랑 크게 없지만 요구하는 사양에 맞추어서 적절하게 스팟 인스턴스로 돌려주고, 또 띄우고 내리는 과정이 자동이라서 이참에 써보기로 했다. 다음은 이미지를 만들 때 유의할 점.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;amazonlinux&lt;/code&gt; 이미지 위에다가 만들 것. 처음에는 &lt;code class=&quot;language-text&quot;&gt;python:3.6&lt;/code&gt; 이미지로 했다가 나중에 CloudWatch에서 로그를 확인하기 위해서 awslogs를 깔아야 함을 깨닫고, 깔려다가, 인스톨러는 파이썬 3.6을 지원 안하고…그냥 아마존 리눅스에서 까는게 더 낫겠다 해서 베이스 이미지를 바꿨다.&lt;/li&gt;
&lt;li&gt;gensim을 깔기 전에 컴파일러들이랑 python-devel도 같이 깔아줄 것. 이거 없으면 C컴파일을 안해서 FAST_VERSION 값이 1로 안나오고, 트레이닝이 느릴꺼라고 경고가 나온다. &lt;code class=&quot;language-text&quot;&gt;python:3.6&lt;/code&gt; 이미지에서는 그냥 잘 되었는데 &lt;code class=&quot;language-text&quot;&gt;amazonlinux&lt;/code&gt;에서는 설치가 필요했다.&lt;/li&gt;
&lt;li&gt;이것만 주의하면 그냥 리눅스다. 삽질 끝에 정착한 Dockerfile은 다음과 같다.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-dockerfile&quot;&gt;&lt;code class=&quot;language-dockerfile&quot;&gt;# Dockerfile
FROM amazonlinux:latest

# Ubuntu에서 build-essential 비슷한 것
RUN yum groupinstall -y &amp;quot;Development Tools&amp;quot;

RUN yum install -y python3
RUN yum install -y python3-devel

RUN pip3 install gensim
RUN pip3 install awscli
RUN python3 check_fast_version.py&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# check_fast_version.py&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; sys

&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; gensim&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;models&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;word2vec_inner &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; FAST_VERSION

    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;FAST_VERSION ok ! Retrieved with value &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; FAST_VERSION&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    sys&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exit&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;except&lt;/span&gt; ImportError&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Failed... fall back to plain numpy (20-80x slower training than the above)&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    sys&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exit&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h4&gt;느낀점&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;애초에 개발을 도커 위에서 해야지 로컬에서 해보고 옮기려고 하면 시간을 너무 많이 쓴다. 어떤 선배 블로그에서 모든 로컬 개발 환경을 도커로만 구성한다고 읽었는데 무슨 의미인지 알겠다.&lt;/li&gt;
&lt;li&gt;s3에서 데이터를 가져오는 경우에는 애초에 개발을 AWS 인스턴스 위에서 해도 좋겠다.&lt;/li&gt;
&lt;li&gt;로컬에서 램이 모자라서 안 돌아가던거도 그냥 코어 / 용량을 패러미터로 넣어 주면 알아서 인스턴스가 생기고, 일이 끝나면 다시 꺼지니까 너무 편하다 +_+&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[백준 15683번]]></title><link>https://blog.hyeungshikjung.com/boj-15683/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/boj-15683/</guid><pubDate>Sun, 14 Oct 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;이 문제는 풀먼서 교훈이 있어서 특별히 TIL에 남겨봄.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;처음에는 DP인줄 알고 풀었고, 그렇게해서 예제 6개는 맞았는데 채점을 돌리면 틀렸다.&lt;/li&gt;
&lt;li&gt;앞에서 풀어본 문제처럼 삼성=DFS / BFS 라는 선현들의 말을 떠올리고서 DFS로 완전 탐색을 돌렸더니 맞췄다.&lt;/li&gt;
&lt;li&gt;다행히 카메라의 경우의 수와, 그에 따라서 사각지대를 검사하는 코드는 재사용이 가능해서 수정이 크게 어렵지는 않았다.&lt;/li&gt;
&lt;li&gt;DP임을 확신하지 않으면 괜히 그렇게 풀지 말자!&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-cpp&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;#&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;iostream&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;#&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;vector&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;#&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;limits&gt;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;namespace&lt;/span&gt; std&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; MAX_INT &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; numeric_limits&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; camStatus&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; camType&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;pair&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; camLoc&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; choices &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; M&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; C&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; map&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; min_blind &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; MAX_INT&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; dirs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// 오른쪽&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 윗쪽&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 왼쪽&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 아랫쪽&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;mm&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; m&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; dir&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// n,m을 기점으로 방향을 따라 쭉 감시가능한 구간을 표시함&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; cn &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; n &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; dirs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;dir&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; cm &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; m &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; dirs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;dir&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; cn &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; cn &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; N &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; cm &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; cm &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; M&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mm&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;cn&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;cm&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;//벽을 만났으니 멈춤&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mm&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;cn&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;cm&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// 빈 공간이니까 감시가 가능하다고 써줌&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// 만약 카메라면 안건드리고 그냥 넘어감&lt;/span&gt;
            mm&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;cn&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;cm&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;//7은 감시가 된다는 뜻&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        cn &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dirs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;dir&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        cm &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dirs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;dir&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; until&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// until번째 카메라까지 반영해서 사각지대의 갯수를 계산&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; tmap &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; map&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// copy&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; until&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; ctype &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; camType&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; cStatus &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; camStatus&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; n &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; camLoc&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;first&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; m &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; camLoc&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;second&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctype &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmap&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; m&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; cStatus&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctype &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cStatus &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmap&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; m&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmap&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; m&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cStatus &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmap&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; m&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmap&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; m&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctype &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; dd &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cStatus &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmap&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; m&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; cStatus&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmap&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; m&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dd&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctype &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; d &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; d &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; d&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;d &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; cStatus&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;token keyword&quot;&gt;continue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmap&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; m&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; d&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctype &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; d &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; d &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; d&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;mark&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmap&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; m&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; d&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; bcnt &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; n &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; n &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; n&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; m &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; m &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; M&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; m&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmap&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;n&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;m&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                bcnt&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; bcnt&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;dfs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; depth&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;depth &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; camLoc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; cost &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;depth &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cost &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; min_blind&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            min_blind &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; cost&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; type &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; camType&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;depth&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; c &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; c &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; choices&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; c&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 카메라의 종류에 따라 가능한 경우의 수를 하나 골라서 저장하고 다음 단계로 넘어감&lt;/span&gt;
        camStatus&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;depth&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; c&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;dfs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;depth &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    cin &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; N &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; M&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// height, width&lt;/span&gt;

    map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;N&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;M&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; n &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; n &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; n&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; m &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; m &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; M&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; m&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; t&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            cin &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; t&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            map&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;n&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;m&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; t&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; t &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; t &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                camLoc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push_back&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;make_pair&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;n&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; m&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                camType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push_back&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;dfs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    cout &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; min_blind&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;</content:encoded></item><item><title><![CDATA[백준 15685번]]></title><link>https://blog.hyeungshikjung.com/boj-15685/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/boj-15685/</guid><pubDate>Sun, 14 Oct 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;풀고나서 풀이를 찾아보니 다들 스택으로 풀어서 그렇게 머리를 안써도 풀리는 문제라는 것을 남기려고 TIL에 남김.  &lt;/p&gt;
&lt;p&gt;재귀적으로 &lt;code class=&quot;language-text&quot;&gt;g = N&lt;/code&gt;인 그림을 그릴 경우&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;g = 1&lt;/code&gt; 방향따라 잘 그림 (기저 케이스)&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;g = N-1&lt;/code&gt; 인 그림을 시작점에서 우선 그리고&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;시작에서 끝점까지 얼마나 변했나를 보고&lt;/li&gt;
&lt;li&gt;먼저 그린 그림의 끝점에 닿게 알맞게 시작점과 각도를 정해서 &lt;code class=&quot;language-text&quot;&gt;g = N-1&lt;/code&gt;인 그림을 그리면&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;된다.
물론 코드를 돌리는 컴퓨터 입장에서는 스택을 이용한 풀이가 훨씬 깔끔하겠다. 실제 채점 조건에서는 둘 다 통과하는지 잘 모르겠다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-cpp&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;#&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;vector&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;#&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;utility&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;#&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;iostream&gt;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;namespace&lt;/span&gt; std&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; map&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// (x, y)&lt;/span&gt;

vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; dirs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;


&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; nextDir&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; firstDx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; firstDy&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; secondDx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; secondDy&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

pair&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; rmap&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; pair&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; start&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; dir&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; gen&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 다 그리고서 끝점의 위치를 반환&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gen &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// basecase&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; x &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; start&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;first&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; y &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; start&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;second&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

		&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; newX &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; x &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; dirs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;dir&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; newY &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; y &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; dirs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;dir&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

		rmap&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;newX&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;newY&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		rmap&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;make_pair&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; newY&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

	pair&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; firstEnd &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rmap&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; start&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dir&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; gen &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 먼저 첫번째 파트를 그리고&lt;/span&gt;
	firstDx &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; firstEnd&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;first &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; start&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;first&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
	firstDy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; firstEnd&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;second &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; start&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;second&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;token comment&quot;&gt;// 첫번째 파트에서 시작 -&gt; 끝의 변화량을 구하고&lt;/span&gt;

	secondDx &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;firstDy&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 그걸 오른쪽으로 90도 회전해서&lt;/span&gt;
	secondDy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; firstDx&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	nextDir &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dir &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; dir &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;//첫번째 부분이 끝난 곳에서 dx,dy 만큼 뒤로 가주면 두번째 부분을 시작해야할 위치가 나옴&lt;/span&gt;
	pair&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; secondStart &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;make_pair&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;firstEnd&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;first &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; secondDx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; firstEnd&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;second &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; secondDy&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token function&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rmap&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; secondStart&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; nextDir&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; gen &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; secondStart&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	cin &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;102&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;102&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; d&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; g&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		cin &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; x &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; y &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; d &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; g&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token function&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;map&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;make_pair&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; d&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; g&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

	&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;101&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; j &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; j &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;101&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; j&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;map&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; map&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; map&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; map&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
				count&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

	cout &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; count &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;</content:encoded></item><item><title><![CDATA[Python Crawling with Serverless framework]]></title><link>https://blog.hyeungshikjung.com/serverless-crawling-python/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/serverless-crawling-python/</guid><pubDate>Thu, 11 Oct 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;사실 너무 당연한건데 안 써놓으면 까먹으니까.&lt;/p&gt;
&lt;h3&gt;Serverless + Python 관해서&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;프로젝트별로 virtualenv를 만들어서 시작한다. 나중에 requirements.txt를 만들어야 의존성을 패키징할 수 있는데, 원래 쓰던 환경에서는 온갖 라이브러리가 다 깔려있을테니 &lt;code class=&quot;language-text&quot;&gt;pip freeze &amp;gt; requirements.txt&lt;/code&gt;로 파일을 작성할 수가 없다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;sls invoke local&lt;/code&gt;을 최대한 써먹어서 적어도 로직 자체의 오류 때문에 deploy를 다시 할 일은 없게 만든다. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://serverless.com/framework/docs/providers/aws/guide/testing/&quot;&gt;공식 가이드&lt;/a&gt;에서는 유닛 테스팅은 언어별 테스팅 프레임워크를 활용하고, 인테그레이션 테스팅 용으로 invoke를 사용하라고 나와있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;사용하는 라이브러리가 C의존성이 있다면, serverless-python-requirements 패키지의 &lt;a href=&quot;https://github.com/UnitedIncome/serverless-python-requirements#cross-compiling&quot;&gt;dockerizePip&lt;/a&gt; 옵션을 꼭 켜준다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;이번에 크롤링을 할 때는 lxml 패키지가 그랬는데 저걸 모르고 약간의 삽질을 거쳤다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://html.python-requests.org/&quot;&gt;requests-html&lt;/a&gt; 진짜 너무 편하다. &lt;code class=&quot;language-text&quot;&gt;bs4&lt;/code&gt;는 이제 안녕.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;크롤링 + 람다에 관해서&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;별도로 동시성 옵션을 지정해주지 않으면 금새 동시에 1000개의 람다 컨테이너가 해당 사이트를 크롤하게 되는데, 그러다보면 사이트가 마비되어 크롤은 실패하고, 람다 함수는 timeout 되서 끝나고, 함수는 오래 실행되었으니 요금은 많이 청구되는 속상한 경우가 생긴다. 꼭 적절한 숫자의 동시성을 설정해주자.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Invoke Async vs Synchronous&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Async 방식으로 함수를 실행하면 적어도 랩탑에서의 파이썬 코드가 바틀넥이 되지는 않는데 대신 결과를 SQS, S3, DynamoDB 등에 저장을 해야한다. 결과까지 돌려 받는 식으로 Synchronous Invoke를 받으면 여러 개의 람다 컨테이너로부터 결과를 받는 부분이 바틀넥이 될 수 있는 대신 (그래도 로컬 CPU의 쓰레드를 활용하는거 보다는 훨씬 동시에 실행할 수 있는 작업의 개수가 많다) 평소에 하던대로 로컬에서 데이터 전처리를 마저 할 수 있다. 시간이 오래 걸리는 부분만 람다로 짜는 것도 방법이다.&lt;/li&gt;
&lt;li&gt;양이 진짜 많은 경우 람다 여러개로 전처리를 하고 Kinesis에 넣어서 최종적으로는 S3에 쓰기 편한 결과물이 저장되는 것이 이상적이겠다. 로컬 &amp;#x3C;-&gt; AWS 사이의 데이터가 오가면 비용과 시간이 많이 들테니까.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;어쨌든 Fail하는 케이스가 생기는데, Async로 Invoke할 경우 이런 실패한 태스크들을 어떻게 처리해야하는지 아직 맘에 드는 방법을 못찾겠다. 데이터베이스를 쓰는 것이 답일까.&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[재귀시 변수 선언에 유의]]></title><link>https://blog.hyeungshikjung.com/dfsstack/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/dfsstack/</guid><pubDate>Sat, 06 Oct 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;백준 1890번.
그냥 DFS + DP 문제로 아래 코드로는 무난히 돌아가지만 &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-cpp&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;#&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;iostream&gt;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;namespace&lt;/span&gt; std&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; tile&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; memo&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; j&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; N &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; j &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; N &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;memo&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; memo&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

	&lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ret &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; memo&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	ret &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; tile&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		ret &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; tile&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; j&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;j &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; tile&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		ret &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; j &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; tile&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; ret&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	cin &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; j &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; j &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; j&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			cin &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; tile&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
			memo&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

	cout &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;#include &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;iostream&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;namespace&lt;/span&gt; std&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; tile&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; memo&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; j&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; N &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; j &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; N &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;memo&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; memo&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;


	&lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; ret &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; tile&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		ret &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; tile&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; j&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;j &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; tile&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		ret &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; j &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; tile&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	memo&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ret&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; ret&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	cin &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; j &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; j &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; j&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			cin &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; tile&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
			memo&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

	cout &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;중간에 sol 부분에서 변수를 하나 선언해서 쓰는 것으로 바뀌면 호출 스택에서 메모리를 무지 많이 써서 바로 메모리 초과가 뜬다&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-cpp&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; j&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; N &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; j &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; N &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;memo&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; memo&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;


	&lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; ret &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; tile&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		ret &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; tile&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; j&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;j &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; tile&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		ret &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; j &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; tile&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	memo&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;j&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ret&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; ret&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;DFS를 재귀로 짤 때는 변수 선언에 유의하자.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Celery + KoNLPy]]></title><description><![CDATA[병렬인 듯 병렬 아닌 병렬 같은]]></description><link>https://blog.hyeungshikjung.com/celery-konlpy/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/celery-konlpy/</guid><pubDate>Mon, 01 Oct 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;KoNLPy를 좀 많이, 오래 돌려야 하는 일이 있어서 처음에 람다를 생각해보다가, 이 패키지가 래핑해놓은 형태소 분석기들이 자바 기반이라서 패키징하기가 까다로워서 패스를 했다. 아예 자바로 람다 함수를 만드는 방법도 있지만 &lt;a href=&quot;https://www.reimaginer.me/entry/ds-part1-pos-tagger&quot;&gt;링크&lt;/a&gt; 자바랑 친하지 않아서 다른 방법을 찾기로 했다. Pool 같은 것을 쓸까 하다가 조금 더 쉽게 갈 수 있는 방법이 있을 것 같아서 Celery를 써보기로 했다. &lt;/p&gt;
&lt;h3&gt;준비물&lt;/h3&gt;
&lt;p&gt;도커가 깔려있다고 가정하고 일단 레디스를 띄운다. 어차피 오래 쓸 것이 아니라서 데몬으로 띄우지 않았다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;docker run --name redis-for-celery -i --rm -p 6379:6379 redis&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;Celery랑 Flower를 설치하고, redis 백엔드를 사용할거니까 레디스 라이브러리도 깔아준다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;pip install celery flower redis&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;태스크 작성&lt;/h3&gt;
&lt;p&gt;함수에 데코레이터를 붙이면 끝. 램을 아껴야 해서 결과를 레디스 대신 파일에 저장하고 (참고: &lt;a href=&quot;http://docs.celeryproject.org/en/latest/userguide/configuration.html#conf-filesystem-result-backend&quot;&gt;File system result backend&lt;/a&gt;), 트위터 tokenizer는 변수 공유가 안되서 함수 안에서 정의했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# tokenizer.py&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; celery &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Celery
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; konlpy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tag &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Twitter
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; json

app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Celery&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;tokenizer&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; broker&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;redis://localhost&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; backend&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;file:///./tmp&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

@app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;task
&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;tokenize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;line&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    t &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Twitter&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    tokens &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Twitter&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nouns&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;line&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; tokens&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;이제 여기에다가 일을 시킬 스크립트를 작성한다. 결과를 불러올 때 저렇게 순서대로 불러오는게 약간 걸리지만 (태스크가 enque된 순서대로 끝나는 것이 아니므로 앞에 태스크가 안 끝나면 다 블록 됨) 전체적인 작업 시간에는 큰 영향을 미치지 않으니 딱히 문제가 되지는 않는다. 물론 Task가 절대 Fail할 일이 없을 경우의 이야기.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# master.py&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; json
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; tokenizer &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; tokenize
&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; tqdm &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; tqdm

lines &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
tokens_async &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;tokenize&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;delay&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;line&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; line &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; tqdm&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lines&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# Queue에 payload를 넣음. 그 결과 AsyncResult를 얻음&lt;/span&gt;
tokens &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; t &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; tqdm&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tokens_async&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; total&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lines&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;wait&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 작업의 결과를 불러옴&lt;/span&gt;
  t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;forget&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 임시로 저장된 각 작업의 결과를 삭제&lt;/span&gt;
  tokens&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;시작&lt;/h3&gt;
&lt;p&gt;워커를 띄우고 모니터링을 위해 Flower도 띄운다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;celery -A tokenizer worker
celery -A tokenizer flower --broker=redis://localhost
python master.py&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;이러면 편리하게 코어를 다 부려먹을 수 있다.

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/full-e74a604a11a8013ace083f9c5fda05c2-6c11a.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 960px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 26.08932461873638%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwElEQVQY012P6RKCMAyEeQ9HaNFRqUIvSjl9/7eK20MH/JFJ5+tusikq2RM3PTFlY7+PM3HtUTayGuwR2XBkfia2Y6GLdaWCaUe1dfiE0EI4LehjNCXmqAHjxseFXPdRJ8YjC719b2HgsEtosXnCsF1CmJuQ8Mt0vsQfLwleAV0RhHXcks27hPw/oTK/JWLZwLLOpNRtOtlT2Wo6o8pOx/hlZzNTxMBu/UQVzNdhoosb8fZUvQydhELJVE9JTFr6ACEsmTnztg8LAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;열일&quot;
        title=&quot;&quot;
        src=&quot;/static/full-e74a604a11a8013ace083f9c5fda05c2-c83f1.png&quot;
        srcset=&quot;/static/full-e74a604a11a8013ace083f9c5fda05c2-569e3.png 240w,
/static/full-e74a604a11a8013ace083f9c5fda05c2-93400.png 480w,
/static/full-e74a604a11a8013ace083f9c5fda05c2-c83f1.png 960w,
/static/full-e74a604a11a8013ace083f9c5fda05c2-23e13.png 1440w,
/static/full-e74a604a11a8013ace083f9c5fda05c2-10d8f.png 1920w,
/static/full-e74a604a11a8013ace083f9c5fda05c2-6bb82.png 2880w,
/static/full-e74a604a11a8013ace083f9c5fda05c2-6c11a.png 3672w&quot;
        sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;결론&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;닭 잡는데 소 잡는 칼을 쓴 격이지만, 소 잡는 칼이 더 편의성이 좋다면 굳이 안 쓸 이유는 하나도 없다고 생각한다. 이렇게 접근하는게 &lt;a href=&quot;http://python-rq.org/&quot;&gt;RQ&lt;/a&gt; 같이 더 간단한 툴을 쓰는거보다 훨씬 편하다.&lt;/li&gt;
&lt;li&gt;다만 패키징만 편하게 된다면 람다로 가는게 훨씬 좋은 방법이라고 생각한다. 이건 cpu 코어 갯수대로 빨라진다면 그건 기본이 최대 1000개니까.&lt;/li&gt;
&lt;li&gt;생각해보니 맨 위에 링크해놓은 포스트의 저자 분이 올려주신 &lt;a href=&quot;https://github.com/voyagerwoo/pos-tagger&quot;&gt;리포&lt;/a&gt;가 있어서 (자바랑 친해질 겸) 그걸 그냥 썼어도 됐겠다.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Deque 메모]]></title><link>https://blog.hyeungshikjung.com/deque/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/deque/</guid><pubDate>Thu, 27 Sep 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;CHI submission이 끝나고 취업 인터뷰를 위한 알고리즘 공부를 위해 (=생계형) C++, 엄밀히 말하면 입출력 + STL의 자료구조들을 익히고 있다. 이 중 deque는 한 번 익혀놓으면 stack에도 쓰고, queue에도 쓸 수 있어서 stack이나 queue가 필요한 문제는 다 deque로 풀려고 한다. 아래는 몇 가지 메모들.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;빈 deque에서 pop&lt;em&gt;back()이나 pop&lt;/em&gt;front()를 하면 무슨 일이 일어날 줄 모른다. 일단 empty()를 부르고 보자.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Subpath에서 장고앱 돌리기]]></title><link>https://blog.hyeungshikjung.com/under-subpath/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/under-subpath/</guid><pubDate>Fri, 14 Sep 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;https://github.com/Miserlou/Zappa&quot;&gt;Zappa&lt;/a&gt;나 &lt;a href=&quot;https://serverless.com/&quot;&gt;Serverless&lt;/a&gt; 같은 툴로 장고앱을 디플로이하면 보통 &lt;code class=&quot;language-text&quot;&gt;https://0c6zvbc5lk.execute-api.ap-northeast-2.amazonaws.com/dev/&lt;/code&gt;처럼 URL의 Root가 아닌 subpath에 앱을 올려주는데, 이 상태에서는 장고앱이 라우팅을 잘 해주지 못한다. ( &lt;code class=&quot;language-text&quot;&gt;/dev/&lt;/code&gt;를 입력하면 &lt;code class=&quot;language-text&quot;&gt;/&lt;/code&gt;이 아니라 &lt;code class=&quot;language-text&quot;&gt;/dev/&lt;/code&gt;에 해당하는 뷰를 찾으려고 함)
이럴 때는 (배포용) 세팅에다가 &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;FORCE_SCRIPT_NAME = &amp;#39;/dev&amp;#39;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;이런 식으로 subpath 명을 지정해주면 이 부분은 알아서 제외하고 라우팅이 정상적으로 이루어진다.  &lt;/p&gt;
&lt;p&gt;p.s) 말끔한 프론트엔드 URL에 이렇게 못생긴 API URL을 붙이는 것이 프로토타이핑 할 때는 가장 적절한 것 같다 (API Gateway에 일일이 인증서를 붙이는 것도 일이다. 차라리 와일드카드 인증서 세팅이 된 kubernetes 클러스터를 하나 가지고 있으면 편하겠다 싶다).&lt;/p&gt;
&lt;h2&gt;참고 자료&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/28147916/how-to-host-a-django-project-in-a-subpath&quot;&gt;How to host a Django project in a subpath?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Cypress + Travis + Webpack]]></title><link>https://blog.hyeungshikjung.com/setup-travis-cypress/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/setup-travis-cypress/</guid><pubDate>Sun, 09 Sep 2018 00:00:00 GMT</pubDate><content:encoded>&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.cypress.io/&quot;&gt;Cypress&lt;/a&gt;라는 툴로 Integration test를 붙이고 싶은데, 기왕 하는김에 &lt;a href=&quot;https://travis-ci.org/&quot;&gt;Travis CI&lt;/a&gt;에서도 테스트를 돌리고 싶음&lt;/li&gt;
&lt;li&gt;친절하게 &lt;a href=&quot;https://docs.cypress.io/guides/guides/continuous-integration.html#Travis&quot;&gt;설명서&lt;/a&gt;를 따라가면 될 것 같지만, 저건 Cypress를 돌리는 얘기고 Cypress가 테스트할 웹사이트는 띄워지지 않음&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;다른 &lt;a href=&quot;https://github.com/cypress-io/cypress-example-todomvc/blob/master/.travis.yml&quot;&gt;예제&lt;/a&gt;를 보면 백그라운드 프로세스로 npm start를 해주는데 여기서 npm start는 dev server가 아니라 이미 빌드된 애를 서빙만 해주는 &lt;a href=&quot;https://www.npmjs.com/package/http-server&quot;&gt;http-server&lt;/a&gt;를 띄우는 스크립트임에 유의해야 한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-yml&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;before_script:
- npm start -- --silent &amp;amp;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;webpack dev server 등을 띄우면 빌드가 완료되서 웹앱을 서빙하기 이전에 Cypress 테스트가 시작되서 다 깨진다ㅜㅜ. &lt;code class=&quot;language-text&quot;&gt;index.html&lt;/code&gt;이 빈 페이지인데 무슨 테스트를 하겠어. 이 문제 때문에 &lt;a href=&quot;https://www.npmjs.com/package/wait-on&quot;&gt;wait-on&lt;/a&gt; 이라는 패키지도 써보고 이런저런 시도를 많이 했는데, 결국 빌드를 하고 정적파일을 호스팅해서 그 주소로 테스팅을 진행하는 방식을 택했다.&lt;/li&gt;
&lt;li&gt;생각해보면 이게 좀 더 실제 환경이랑 가까우니까 개발서버로 테스팅이 가능했어도 이렇게 하는게 맞다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;개인적으로는 가볍게 정적파일을 서빙할 때 &lt;a href=&quot;https://www.npmjs.com/package/serve&quot;&gt;serve&lt;/a&gt;를 더 좋아해서 최종적으로 이렇게 생긴 &lt;a href=&quot;https://github.com/wafflestudio/snutt-webclient/blob/master/.travis.yml&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;.travis.yml&lt;/code&gt;&lt;/a&gt;을 작성했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-yml&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;before_script:
- yarn build # 이러면 dist에 index.html 등등해서 생김
- serve -s dist &amp;amp;
script:
- cypress run --record&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Kubernetes에 관한 잡생각]]></title><link>https://blog.hyeungshikjung.com/tasting-kube/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/tasting-kube/</guid><pubDate>Sat, 01 Sep 2018 00:00:00 GMT</pubDate><content:encoded>&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;튜토리얼을 두어개 따라가봤음&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/tutorials/stateless-application/guestbook/&quot;&gt;Example: Deploying PHP Guestbook application with Redis - Kubernetes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/tutorials/stateful-application/mysql-wordpress-persistent-volume/&quot;&gt;Example: Deploying WordPress and MySQL with Persistent Volumes - Kubernetes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;AWS&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;AWS에 다양한 서비스를 조합해서 사용하는게 생각보다 어려워보인다&lt;/li&gt;
&lt;li&gt;띄우는건 어렵지가 않은데 얘네를 통합된 관점에서 관리하는게 어렵다&lt;/li&gt;
&lt;li&gt;그래서 회사들은 TerraForm 같은 친구를 사용하겠지&lt;/li&gt;
&lt;li&gt;근데 여기도 결국 AWS에 종속된다는 문제가 생김 (회사 관점에서는 문제겠다…)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Vendor-agnostic&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;그냥 아무 클라우드에나 하나 클러스터를 만들어 놓으면 Kubernetes 운영 노하우를 써먹을 수 있어&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;공통된 정의로&lt;/li&gt;
&lt;li&gt;그래서 이게 거의 업계 표준이 되는 이유겠지. AWS를 쓰나 자기 서버를 쓰나 똑같으니까&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;용도&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DB 같이 장애가 나면 큰일나는 서비스는 Managed 서비스를 쓰는게 좋은거 같은데 아닌 경우라면 깔아서 쓰는게 더 저렴하고, 잉여자원을 활용하기 좋을거 같아&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;특히 개인이 이것저것 스택을 조합하는 연습을 할 경우 이렇게 Unified된 방법으로 이런 저런 도구를 띄었다 내렸다하면서 쓸 수 있다는게 엄청 매력.  특히 기본적으로 여러 노드에 올려서 써야하는 도구들의 경우 장점이 클 거 같다.돈은 따로 더 안나가고&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;약간만 익혀놓으면 생산성이 크게 늘 것 같아&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;어떻게 익히지?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;항상 그렇지만, 자기가 직접 써봐야 는다고 생각해&lt;/li&gt;
&lt;li&gt;Minikube에라도 이것저것 올리는 연습을 하면 좋지 않을까&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;괜찮은 과제&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;지금 개인 홈페이지는 Next.js로 정적 사이트를 만들어서 Netlify에서 서브하는 형태로 되있는데, &lt;del&gt;얘를 SSR을 해주는 도커 이미지&lt;/del&gt;정적 파일을 serve하는 &lt;a href=&quot;https://gitlab.com/zxzl/research-website/blob/master/Dockerfile&quot;&gt;nginx 이미지&lt;/a&gt;로 만들어서 얘를 다시 쿠베에 올리는 연습을 하면 꽤 해볼만 하지 않을까?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;생각보다 인증서 붙이고 하는 과정에서 AWS / GCP를 사용할 때랑 Minikube에 올릴 때랑 많이 다른 것 같다.&lt;/li&gt;
&lt;li&gt;&lt;del&gt;어차피 쓸 일이 있으면 AWS에서 쓸테니 kops로 작은 클러스터를 띄우는게 맞는 공부 방향 같다. Spot으로 띄우면 얼마 안하지 않을까?!&lt;/del&gt; 보니까 GKE는 아예 Preemptible VM + Auto Scaling 으로 만들 수 있는 옵션이 있다. &lt;/li&gt;
&lt;li&gt;보니까 손으로 일일이 버전업을 하는거는 kubernetes를 쓰는 의미가 없고.. Helm 차트로 만들어서 업데이트 하는 방법이 맞는거 같다.&lt;/li&gt;
&lt;li&gt;클러스터를 판게 아까워서라도 천천히 옮겨봐야겠다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;논문을 다 내고 해볼만한 태스크 같아. 항상 데드라인이 있을 때 이런게 재밌더라.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Google Cloud Speech API를 브라우저에서 사용하기]]></title><description><![CDATA[오디오 파일이랑 친해져가는 이야기]]></description><link>https://blog.hyeungshikjung.com/google-cloud-speech-api-at-browser/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/google-cloud-speech-api-at-browser/</guid><pubDate>Sat, 28 Jul 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;브라우저로 &lt;a href=&quot;https://www.html5rocks.com/ko/tutorials/getusermedia/intro/&quot;&gt;getUserMedia()&lt;/a&gt;를 가지고 오디오를 캡쳐하면 Blob 형태로 오디오 파일을 얻을 수 있는데, 이 때 크롬에서는 &lt;code class=&quot;language-text&quot;&gt;webm/audio&lt;/code&gt;라는 형식으로 오디오를 캡쳐하고, 파이어폭스에서는 &lt;code class=&quot;language-text&quot;&gt;audio/ogg;codecs=opus&lt;/code&gt; 형태로 오디오를 캡쳐함. (&lt;a href=&quot;https://stackoverflow.com/questions/41739837/all-mime-types-supported-by-mediarecorder-in-firefox-and-chrome&quot;&gt;SO 질문&lt;/a&gt;).&lt;br&gt;
문제는 IBM Watson Speech Recognition API와 다르게 Google Cloud Speech API는 webm 파일을 지원을 안한다는 것 &lt;a href=&quot;https://cloud.google.com/speech-to-text/docs/reference/rest/v1/RecognitionConfig&quot;&gt;지원하는 포맷들&lt;/a&gt;. 여기서 여러가지 솔루션이 있음.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;어차피 연구 프로토타입인데 그냥 파이어폭스로 사용하도록 안내.&lt;/li&gt;
&lt;li&gt;그냥 별도의 서버에다가 &lt;code class=&quot;language-text&quot;&gt;webm/audio&lt;/code&gt; 형태로 올리고 거기서 &lt;code class=&quot;language-text&quot;&gt;audio/ogg;codecs=opus&lt;/code&gt;형태로 변환. &lt;/li&gt;
&lt;li&gt;브라우저 상에서 다른 오디오 파일 형식으로 변환 후 API를 호출. Web Worker를 써서 많이들 하는 것 같음.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;만약 내가 프론트엔드 개발자라면 당연히 3을 택해서 크로스-브라우징되는 솔루션을 고민해야겠지만 지금은 그냥 프로토타입 만들기 바쁜 대학원생이라서 2를 택함. 1을 선택 안 한 이유는.. &lt;del&gt;해봤는데 왜인지 잘 안 되었음&lt;/del&gt;. 원래 잘 안 되었는데 이거 쓰다가 찜찜해서 해보니까 또 된다. 일단 두 방법을 소개해 본다.&lt;/p&gt;
&lt;h4&gt;방법1. 파이어폭스로 녹음&lt;/h4&gt;
&lt;p&gt;파이어폭스에서 녹음된 blob을 &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL&quot;&gt;FileReader.readAsDataURL()&lt;/a&gt;를 이용, base64로 잘 인코딩해준다. 여기서 유의할 점은 이 오디오 파일은 채널이 2개라서 API &lt;code class=&quot;language-text&quot;&gt;v1&lt;/code&gt;으로는 처리가 되지 않고, &lt;code class=&quot;language-text&quot;&gt;v1p1beta&lt;/code&gt;에서 &lt;code class=&quot;language-text&quot;&gt;audioChannelCount&lt;/code&gt;까지 같이 설정해줘야 정상적으로 인식이 된다. 단, 녹음된 오디오의 비트레이트가 44,100이면 인식을 지원하지 않는다. 비트레이트를 바꾸는 방법은..#3을 참조.&lt;/p&gt;
&lt;h4&gt;방법2. 그냥 서버에서 OGG로 변환&lt;/h4&gt;
&lt;p&gt;일단 &lt;a href=&quot;https://mediaarea.net/ko/MediaInfo/Download&quot;&gt;mediainfo&lt;/a&gt;로 크롬에서 녹음된 파일을 뜯어보면&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;General
Complete name                            &lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt; blob.ogg
Format                                   &lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt; WebM
Format version                           &lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt; Version 4 / Version 2
File size                                &lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt; 21.7 KiB
Writing application                      &lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt; Chrome
Writing library                          &lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt; Chrome
IsTruncated                              &lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt; Yes
FileExtension_Invalid                    &lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt; webm

Audio
ID                                       &lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt; 1
Format                                   &lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt; Opus
Codec ID                                 &lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt; A_OPUS
Channel&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;                               &lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt; 1 channel
Channel positions                        &lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt; Front: C
Sampling rate                            &lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt; 48.0 kHz
Bit depth                                &lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt; 16 bits
Compression mode                         &lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt; Lossy
Language                                 &lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt; English
Default                                  &lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt; Yes
Forced                                   &lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt; No&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;이렇게 나온다. 코덱은 Opus 인데 컨테이너가 WebM 임을 알 수 있다. 우리의 친구 FFMpeg으로 오디오만 Ogg 컨테이너에 담아서 꺼내주면&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;ffmpeg -i webp_name -vn -acodec copy ogg_name&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Complete name                            : blogreal.ogg
Format                                   : Ogg
File size                                : 21.6 KiB
Duration                                 : 3 s 359 ms
Overall bit rate                         : 52.6 kb/s
Writing application                      : Lavf57.83.100

Audio
ID                                       : 608693484 (0x2447ECEC)
Format                                   : Opus
Duration                                 : 3 s 359 ms
Channel(s)                               : 1 channel
Channel positions                        : Front: C
Sampling rate                            : 48.0 kHz
Compression mode                         : Lossy
Writing library                          : Lavf57.83.100
Language                                 : English&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;구글 클라우드 스피치 API에 넣을 수 있는 형태로 잘 바뀐다.&lt;/p&gt;
&lt;h3&gt;느낀점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Web Worker, WebAssembly 이런게 왜 나오나 몰랐는데 이제 확실히 알 것 같다. 브라우저로 전통적인 작업을 넘어선 범위의 일을 하고 싶으면 저런게 정말 필요한듯.&lt;/li&gt;
&lt;li&gt;영어 못하면 진짜 개발 어떻게 하지 ???&lt;/li&gt;
&lt;li&gt;왠지 기다리면 크롬에서 짜잔하고 ogg를 지원하지 않을까 하는 바램이 있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;참고한 글들&lt;/h3&gt;
&lt;p&gt;아마 이 글을 검색해서 들어오셨을 분들이면 다 읽어보셨겠지만,&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://air.ghost.io/recording-to-an-audio-file-using-html5-and-js/&quot;&gt;Record to an Audio File using HTML5 and JS&lt;/a&gt; 는 하지 못했던 #3 솔루션에 대해서 자세한 설명을 해주고 계심. 물론 바로 가져다 쓸 수 있는 정도는 아님. 구글 스피치 API 데모는 LINEAR16으로 인코딩을 한 다음에 웹소켓으로 &lt;a href=&quot;https://cloud.google.com/speech-to-text/docs/streaming-recognize&quot;&gt;Streaming Recognize&lt;/a&gt;를 하는듯.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/GoogleCloudPlatform/google-cloud-dotnet/issues/2135&quot;&gt;WebRTC to .NetCore API, GoogleSpeechApi return nothing #2135&lt;/a&gt; 나랑 무지 유사한 삽질의 흐름을 거치셨음. 근데 마지막에 사용하는 ffmpeg 커맨드가 살짝 다름.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Vue components within Django Template]]></title><description><![CDATA[SPA를 안 만드려고 기를 쓴 이야기]]></description><link>https://blog.hyeungshikjung.com/django-template-vue/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/django-template-vue/</guid><pubDate>Sat, 07 Jul 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;작년(2017년) 크라우드소싱 수업 시간에 동관씨, 현규씨랑 같이 크라우드 소싱으로 법률의 가독성을 개선하겠다고 야심차게 시작한 프로젝트가 있었다 &lt;a href=&quot;https://dike.hyeungshikjung.com&quot;&gt;사이트&lt;/a&gt; &lt;a href=&quot;https://github.com/zxzl/dike&quot;&gt;Github Repo&lt;/a&gt;.&lt;br&gt;
당시 프로토타입을 만들때 팀 내에 백엔드 API를 만들고, 다시 프론트엔드 웹앱을 만드는 방식이 비효율적이라는 공감대가 형성되서 Django Template으로 페이지를 찍어내되 페이지의 인터랙티브한 요소는 Vue로 구현을 해보기로 했고, 어찌어찌 돌아가는 물건을 만들기는 했다.
최근에 조금 더 잘할 수 있는 방법을 공부할 일이 있어서 간단히 과정과 소감을 기록해 본다.&lt;/p&gt;
&lt;h2&gt;어떻게?&lt;/h2&gt;
&lt;h3&gt;STEP1. Vue 불러오기&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;그냥 jQuery 불러오듯이 CDN 한 줄 넣으면 된다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;STEP2. Vue로 다루고 싶은 데이터를 JSON형태로 템플릿에 넣어주기&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;데이터를 넣어줄 때, 모델의 인스턴스는 &lt;code class=&quot;language-text&quot;&gt;to_dict()&lt;/code&gt;를 사용하면 serialize가 되고 쿼리셋의 경우는 &lt;code class=&quot;language-text&quot;&gt;values()&lt;/code&gt;를 사용하면 된다고 한다. 아니면 아예 Django REST Framework에 있는 Serializer를 사용하면 다양한 형태로 Related Field를 serialize 할 수 있다.&lt;/li&gt;
&lt;li&gt;Serialize된 데이터를 &lt;code class=&quot;language-text&quot;&gt;json.dumps&lt;/code&gt;에 넣어 템플릿에 넣어 준다.&lt;/li&gt;
&lt;li&gt;더 자세한 사항은 &lt;a href=&quot;https://stackoverflow.com/questions/21925671/convert-django-model-object-to-dict-with-all-of-the-fields-intact&quot;&gt;SO 질문&lt;/a&gt;을 참조&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;STEP3. 템플릿에서 Json으로 들어가있는 스트링을 읽기&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;아까 만든 Json 스트링을 템플릿에 넣으면 &lt;a href=&quot;https://docs.djangoproject.com/en/1.7/topics/templates/#automatic-html-escaping&quot;&gt;Escaping&lt;/a&gt;이 일어나서 다음과 같은 형태로 템플릿에 들어간다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&amp;amp;quot&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;id&amp;amp;quot&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;93&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &amp;amp;quot&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;url&amp;amp;quot&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; ...&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;따라서 템플릿 내부에서 변수를 읽을 때&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;{{ data|safe }}&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;로 읽든, 템플릿의 autoescape를 사용하든(Escaping 링크 참조), &lt;a href=&quot;https://docs.djangoproject.com/en/2.0/ref/utils/#module-django.utils.safestring&quot;&gt;safestring&lt;/a&gt;을 활용하든지 해서 json을 알맞은 형태로 읽어준다.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;STEP4. Vue 코드를 작성&lt;/h3&gt;
&lt;p&gt;여기부터는 그냥 Vue 인데, 한가지 유의할 점은 장고 템플릿의 Delimitter도 &lt;code class=&quot;language-text&quot;&gt;{{ }}&lt;/code&gt;이고 Vue에서도 &lt;code class=&quot;language-text&quot;&gt;{{ }}&lt;/code&gt;을 사용한다는 점이다. 여기서 두가지 솔루션이 가능하다. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;장고 템플릿의 &lt;a href=&quot;https://docs.djangoproject.com/en/2.0/ref/templates/builtins/#verbatim&quot;&gt;verbatim&lt;/a&gt; 태그를 사용.
이러면 템플릿 엔진이 &lt;code class=&quot;language-text&quot;&gt;verbatim&lt;/code&gt; 태그 내부는 건드리지 않는다.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Vue 인스턴스의 &lt;a href=&quot;https://vuejs.org/v2/api/#delimiters&quot;&gt;delimiters&lt;/a&gt; 옵션을 활용해서 다른 delimiter를 사용할 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Vue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
delimiters&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;[[&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;]]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;이렇게 템플릿이랑 CSS와 같이 넣으면 나름 Vue 컴포넌트 느낌으로 파일 하나에 스타일이랑 로직을 다 정의할 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;  {% verbatim %}
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;ul&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;li&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;v-for&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;page in pages&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;{{ page }}&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;li&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;ul&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  {% endverbatim %}

  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;style&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token style language-css&quot;&gt;
  &lt;span class=&quot;token comment&quot;&gt;/* */&lt;/span&gt; CSS
  &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;style&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;

  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; data&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;safe &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Vue&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    el&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;#app&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      pages&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pages&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;STEP5. Vue 코드를 이곳 저곳에서 재사용하기&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;위의 방식은 나름 편한데, 템플릿 여러 곳에서 쓰이는 Vue component를 다 따로 정의해야한다는 단점이 있다.&lt;/li&gt;
&lt;li&gt;그래서 Vue 컴포넌트만 따로 별도의 js파일에 작성하고, 이를 템플릿에서 불러와서 쓰는 방법이 더 바람직하다고 생각한다. 아까 코드를 두 파일로 나눈다면,&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;component.js&lt;/code&gt; 에 Vue 컴포넌트를 정리하고,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;Vue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;component&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;vue-component&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	props&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;pages&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	template&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`
		&amp;lt;ul&gt;
			&amp;lt;li v-for=&quot;page in pages&quot;&gt;{{ page }}&amp;lt;/li&gt;
		&amp;lt;/ul&gt;
	`&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;page.html&lt;/code&gt;에서 불러서 쓰는 방법이 있다. CSS도 js에 넣고 싶은데 방법을 모르겠다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;  &amp;lt;script src=&quot;{% static &quot;js/component.js&quot; %}&quot;&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 
  /* 전역 컴포넌트여서인지 템플릿보다 먼저 불려야함*/

  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;vue-component&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;:pages&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;pages&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;vue-component&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;

  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;style&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token style language-css&quot;&gt;
  &lt;span class=&quot;token comment&quot;&gt;/* */&lt;/span&gt; CSS
  &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;style&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;

  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;

  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; data&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;safe &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Vue&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    el&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;#app&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      pages&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pages&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;과연 이럴 가치가 있는가?&lt;/h2&gt;
&lt;h4&gt;느꼈던 장점:&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;보일러플레이트가 필요 없어짐 -&gt; 인증, HTTP 요청 등을 프론트엔드 단에서 고민할 필요가 하나도 없다.  그냥 데이터를 가지고 인터랙션만 구현하면 된다. &lt;/li&gt;
&lt;li&gt;필요한 경우 몇몇 페이지는 장고 폼 / 기타 라이브러리에서 그려주는 페이지 들을 그대로 활용할 수 있다.&lt;/li&gt;
&lt;li&gt;모-던한 프론트 개발에 덜 익숙한 분과도 빠르게 협업할 수 있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;느꼈던 단점:&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;컴포넌트를 잘게 쪼개기가 어렵다. 위 예제에서 컴포넌트 안에서 다시 컴포넌트를 부르려면 음… script 태그를 두 개 사용하든지 이제 모든 메이저 브라우저에서 지원한다는 &lt;a href=&quot;https://markus.oberlehner.net/blog/goodbye-webpack-building-vue-applications-without-webpack/&quot;&gt;ES6 모듈&lt;/a&gt;을 사용하든지 해야한다.&lt;/li&gt;
&lt;li&gt;자바스크립트 코드를 작성할 때 에디터의 지원을 받기가 어렵다.&lt;/li&gt;
&lt;li&gt;다른 컴포넌트를 가져오기가 불편하다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;결론&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;그냥 API를 빠르게 Django REST 등으로 찍어내고, 프론트를 모-던하게 짜는게 개인의 성장, 확장성, 유지보수 등 여러면에서 훨씬 훨씬 유리하다. 이제는 공부할 자료도 많고, Vue 정도 되면 React보다 코드도 훨씬 짧아진다.&lt;/li&gt;
&lt;li&gt;다만 여전히 수업 프로젝트 같은 제한적인 상황에서 이런 방법이 같은 기능을 훨씬 빠른 시간안에 만드는 방법일 수는 있다고 생각한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2&gt;참고한 글들&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.djangoproject.com/en/1.7/topics/templates/#automatic-html-escaping&quot;&gt;The Django template language | Django documentation | Django&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/21925671/convert-django-model-object-to-dict-with-all-of-the-fields-intact&quot;&gt;python - Convert Django Model object to dict with all of the fields intact - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://markus.oberlehner.net/blog/goodbye-webpack-building-vue-applications-without-webpack/&quot;&gt;Goodbye webpack: Building Vue.js Applications Without webpack - Markus Oberlehner&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/48442598/can-we-make-vue-js-application-without-vue-extension-component-and-webpack&quot;&gt;Can we make vue.js application without .vue extension component and webpack?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://scotch.io/bar-talk/build-an-app-with-vuejs-and-django-part-one&quot;&gt;Build an App with VueJS and Django Part One ― Scotch&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[N=1 case for managing papers]]></title><description><![CDATA[논문을 다운받고 읽고 정리하는 이야기]]></description><link>https://blog.hyeungshikjung.com/managing-papers/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/managing-papers/</guid><pubDate>Sun, 24 Jun 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;트위터를 넘기다가 Phillip Guo 교수님의 트윗을 &lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot; data-lang=&quot;ko&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;I have a Dropbox folder of random papers and other PDFs that I download whenever I see something interesting. When I’m bored and want to kill time (eg, waiting at airport) I just browse thru that folder.&lt;/p&gt;&amp;mdash; Philip Guo (@pgbovine) &lt;a href=&quot;https://twitter.com/pgbovine/status/1010726467771043840?ref_src=twsrc%5Etfw&quot;&gt;2018년 6월 24일&lt;/a&gt;&lt;/blockquote&gt;
&lt;p&gt;보고 &lt;em&gt;어 나도 저렇게 하는데!&lt;/em&gt; 하는 생각이 들었다. 평소 읽을 / 읽은 페이퍼를 관리하는 방법에 대해 고민이 많아서 요즘 해보고 있는 방법을 간략히 기록해보려고 한다.&lt;/p&gt;
&lt;h4&gt;1. 읽을 페이퍼들은 일단 한 폴더에 넣어서 관리한다&lt;/h4&gt;
&lt;p&gt;개인적으로 Dropbox에 &lt;code class=&quot;language-text&quot;&gt;currently_reading&lt;/code&gt; 이라는 폴더를 만들어 놓고  읽어야 되는 페이퍼를 마치 큐처럼 그 폴더에 넣어놓는 것을 선호한다. 드랍박스에 넣는 이유는 아이패드에서 페이퍼를 읽기 편해서이다. 이런 식으로 일단 한 폴더에 넣어 놓으면 논문을 찾다가 갑자기 읽어야 할 페이퍼가 확 많아졌을 때 페이퍼를 빠뜨리지 않고, 일단 그 페이퍼들을 이 폴더에 다 넣어 놓으면 언젠가 하나씩 다 읽을 수 있어서 좋다. &lt;/p&gt;
&lt;p&gt;페이퍼를 넣어 놓기만 하고 안 읽으면 어떡하나? 할 수 있지만 그건 그 시간에 더 중요한 페이퍼를 읽거나, 다른 일을 했다는 뜻이니까 크게 걱정할 일이라고 생각하지는 않는다.&lt;/p&gt;
&lt;h4&gt;2. 페이퍼를 읽는다&lt;/h4&gt;
&lt;p&gt;예전에는 &lt;a href=&quot;https://www.mendeley.com/&quot;&gt;Mendeley&lt;/a&gt; 로 밑줄도 치고 메모도 남겼는데 멘델리의 아이패드 앱이 그렇게 질이 좋지 않고, 또 멘델리 밖에서 그 메모 / 밑줄을 확인할 수 없으므로 PDF 파일에 직접 annotate 하는 것을 선호한다. Annotation을 해놓으면 꼭 메모를 열심히 해놓지 않았더라도 나중에 내가 이 페이퍼에서 어디를 힘줘서 읽었는지 기억해내기가 편해서 귀찮아도 메모랑 밑줄을 꼭 남겨 놓으려고 한다. PDF 리더로는 맥 / 아이패드 모두에서 &lt;a href=&quot;https://pdfexpert.com/&quot;&gt;PDF Expert&lt;/a&gt;를 제일 선호한다. 특히 아이패드 버전에서 드랍박스 폴더랑 싱크를 해주는 기능이 아주 편리하다.&lt;/p&gt;
&lt;h4&gt;3. 읽은 페이퍼를 정리한다&lt;/h4&gt;
&lt;p&gt;다 읽은 페이퍼는 일단 별도의 폴더 (예, &lt;code class=&quot;language-text&quot;&gt;done&lt;/code&gt;. 생각해보니 &lt;a href=&quot;https://ko.wikipedia.org/wiki/Getting_Things_Done&quot;&gt;GTD&lt;/a&gt;랑 비슷한 감이 있다)에 넣어 놓고 한 번에 정리하거나, 맥북으로 논문을 읽었을 때는 바로 정리한다. 여기서 정리라 함은 &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Mendeley에 등록&lt;br&gt;
우선 논문을 mendeley에 넣어 놓는다. Mendeley에 논문을 넣어 놓으면 제목이나 내용으로 논문을 검색할 때도 좋고, 나중에 인용할 때도 바로 BibTex 를 만들 수 있어서 편리하다. &lt;/li&gt;
&lt;li&gt;메모&lt;br&gt;
Mendeley에 페이퍼를 넣어놓는  것과 별도로 페이퍼에 관한 메모를 어딘가 적어 놓는 편인데 보통 프로젝트 때문에 페이퍼를 읽을 때는 프로젝트 폴더에, 논문을 쓸 때는 그 폴더에  관련 논문을 정리하는 폴더를 만들어놓고 &lt;em&gt;Citation Key (e.g Guo2018) - Title&lt;/em&gt; 밑에 한 줄로 논문의 내용을 적어놓는다. Citation Key를 적는 이유는 말 그대로 Tex에서 인용할 때 그 키를 적어줘야 하기 때문이다.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;이렇게 정리가 끝난 논문들은 1에서 말한 읽을 페이퍼를 담아놓는 폴더에서 삭제해준다.&lt;/p&gt;
&lt;h4&gt;4. (고민) 페이퍼들의 목록을 관리한다&lt;/h4&gt;
&lt;p&gt;1~3 까지는 어느정도 고민이 끝난 상태인데 이런 식으로 페이퍼가 쌓이면 이 페이퍼들의 목록을 좀 더 체계적으로 관리해야할 필요가 생긴다. 일단 현재는 비슷한 친구들 끼리 소제목을 찾아서 그 소제목 아래에 관련된 페이퍼를 모아 놓는 식으로 만족하고 있다. 서베이 페이퍼를 쓰는 방법을 찾아보면 프로세스를 개선하는데 크게 도움이 될 것 같다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Jekyll에서 Gatsby로]]></title><description><![CDATA[송아지를 들이려고 외양간을 고친 이야기]]></description><link>https://blog.hyeungshikjung.com/migrate-to-gatsby/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/migrate-to-gatsby/</guid><pubDate>Sat, 12 May 2018 00:00:00 GMT</pubDate><content:encoded>&lt;h3&gt;블로그에 TIL 섹션을 넣고 싶어졌다&lt;/h3&gt;
&lt;p&gt;최근 삽질한 기록들을 TIL이라는 리포를 파서 기록하기 시작했다. 기왕이면 이 내용들이 구글에서 검색되었으면 좋겠는데 - 누군가에게는 도움이 될 수 있으니 - 그렇다고 이 리포를 퍼블릭으로 만들자니 괜히 커밋 타일이 초록색으로 물드는 것 같아서 꺼려졌다. 오픈소스 활동은 하지도 않는데 타일만 푸르다면 그게 무슨 의미가 있을까. 결국 블로그에 TIL 섹션을 추가해서 포스트 리스트에는 뜨지 않지만, 어쨌든 접근은 가능한 상태로 만들기로 했다.&lt;/p&gt;
&lt;h3&gt;Jekyll을 떠나서 Gatsby 로&lt;/h3&gt;
&lt;p&gt;예전 블로그는 Jekyll을 사용했는데, TIL 섹션을 추가하려고 Jekyll을 배우자니 Ruby랑 친하지 않아서 부담이 많이 갔다. 그래서 최근 많이 언급되는 툴들인 hugo, hexo, gatsby, metalsmith 중에서 Gatsby가 제일 힙해보여서 이걸로 블로그를 다시 만들기로 했다. 항상 감사하게 쓰고 있는 Netlify에서 JAM 스택을 미는 것도 있고, JavaScript와 React에 비교적 친숙하기도 해서 선택이 어렵지는 않았다.&lt;/p&gt;
&lt;h3&gt;Gatsby랑 친해지기&lt;/h3&gt;
&lt;p&gt;Gatsby는 정적 사이트 생성기다. 콘텐츠는 동적인데 웹사이트가 정적이려면 결국 특정 시점을 기준으로 컨텐츠들을 박제한 후 파일들을 빌드하면 된다. Jekyll에서는 markdown 파일이 그 컨텐츠라면 Gatsby는 마크다운 파일 뿐만 아니라 더 다양한 소스, Wordpress 나 Contentful 등의 CMS 시스템, 아니면 임의의 API 에서 데이터를 불러와서 정적 사이트를 생성할 수 있다. 이렇게 로드된 데이터는 GraphQL을 통해 각각의 페이지로 주입이 되는데, 이래저래 Jekyll로 처음 블로그를 만들 때 (그때는 그냥 다른 리포를 클론해서 markdown 파일들만 채웠다)에 비해서 약간의 학습이 필요했다. 튜토리얼이 정말 잘 쓰여져있어 감탄하면서 읽었다.&lt;/p&gt;
&lt;h3&gt;포스팅 옮기기&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/alxshelepenok/gatsby-starter-lumen&quot;&gt;Lumen&lt;/a&gt;이란 템플릿에 블로그를 옮겼는데, 이 템플릿은 Jekyll의 &lt;a href=&quot;https://jekyllrb.com/docs/frontmatter/&quot;&gt;frontmatter&lt;/a&gt; 를 적극적으로 활용하는 편이었다. 기존에 작성된 markdown 파일들에는 &lt;code class=&quot;language-text&quot;&gt;title&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;layout&lt;/code&gt; 정도를 제외하고는 frontmatter 정보가 거의 작성되있지 않았기 때문에 포스팅을 그대로 옮기고 나니 처음에 node를 생성하고 레이아웃과 페이지를 만들 때 에러가 발생했다. 여기서 두가지 선택지가 있었다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Lumen에서 사용하는 frontmatter 필드를 다 넣어주기&lt;/li&gt;
&lt;li&gt;Gatsby 튜토리얼 중 마지막인, &lt;a href=&quot;https://www.gatsbyjs.org/tutorial/part-seven/#creating-slugs-for-pages&quot;&gt;Programmatically create pages from data | GatsbyJS&lt;/a&gt; 을 따라서 onCreateNode 에서 파일명에 따라 frontmatter 정보를 바꿔주기.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;애초에 Jekyll 에서 Gatsby 로 옮긴 이유가 좀 편하게 Customize 를 하기 위해서였으니까 호기롭게 2번 방안을 시도했는데, Gatsby 에서 Node 는 immutable 한 객체라서 수정이 안되고 &lt;a href=&quot;https://www.gatsbyjs.org/docs/bound-action-creators/#createNodeField&quot;&gt;createNodeField&lt;/a&gt;를 사용해서 필드를 추가하는 경우만 가능했다. 그러면 node.frontmatter 객체에 createNodeField 를 하면 되지 않을까 싶었는데 잘 되지 않았고, 아쉽지만 노가다로 1번 방안을 택했다. 어차피 마크다운 기반의 정적사이트 생성기는 다 frontmatter를 사용할테니 아주 시간을 버린 것은 아니지만, 기분이 계속 찝찝했다.&lt;/p&gt;
&lt;h3&gt;TIL Node 만들기&lt;/h3&gt;
&lt;p&gt;&lt;del&gt;~드디어 원래 목적인 TIL 섹션을 추가할 차례다. TIL은 다른 리포에 쓰고 있는데, 이걸 블로그 리포 안에 넣을 수는 없으니 git submodule 로 TIL 에 있는 마크다운 파일들을 클론하기로 했다. TIL은 프라이빗 리포기 때문에 Netlify에서 clone이 안되서.. 환경변수로 깃헙 아이디랑 비번을 읽어서 pull 하는 간단한 스크립트를 붙였다. 여전히 좋은 방법인지는 확신이 안가지만 데이터와 로직이 분리되었음에 만족하기로 한다.&lt;/del&gt;~ 그냥 TIL 리포를 GitLab으로 옮겼다. 아래와 같은 스크립트도 필요없고, GitHub 타일이 푸르게 변할 일도 없고 문제가 다 풀림 :D&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-sh&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;{
if [[ -z &amp;quot;${GIT_ID}&amp;quot; ]]; then
  echo &amp;quot;pull.sh: No GitHub ID and PASS in environemnt variables&amp;quot;
  GIT_REPO_URL=github.com/zxzl/til.git
else
  echo &amp;quot;pull.sh: Using GitHub ID and PASS from environment variables&amp;quot;
  GIT_REPO_URL=$GIT_ID:$GIT_PASS@github.com/zxzl/til.git
fi
cd til
git pull https://$GIT_REPO_URL
cd ../
git submodule update
}&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;라고 &lt;code class=&quot;language-text&quot;&gt;pull.sh&lt;/code&gt;를 만든 다음에 빌드 스크립트로 &lt;code class=&quot;language-text&quot;&gt;pull.sh &amp;amp;&amp;amp; gatsby build&lt;/code&gt;를 쓰면, 어쨌든 현재 submodule이 담는 커밋에 상관없이 최신 정보로 빌드가 되긴 한다.&lt;/p&gt;
&lt;p&gt;이렇게 pull된 til 폴더에서도 파일을 불러오는 플러그인을 추가한다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      resolve&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &apos;gatsby-source-filesystem&apos;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      options&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        path&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; `$&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;__dirname&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;/src/pages`&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        name&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &apos;pages&apos;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      resolve&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &apos;gatsby-source-filesystem&apos;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      options&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        path&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; `$&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;__dirname&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;/til`&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        name&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &apos;til&apos;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;블로그 포스팅은 사진도 있으니까 폴더를 생성하고 그 안에서 마크다운을 작성하는데, TIL은 그냥 마크다운 파일들이 하나씩 있는 형태다.
따라서 slug를 폴더명이 아닌 파일 명에서 뽑아내도록 onCreateNode를 고쳐준다.&lt;/p&gt;
&lt;h3&gt;TIL 섹션 만들기&lt;/h3&gt;
&lt;p&gt;이제 저 node들을 쿼리해서, 페이지들을 만들고 이 페이지들을 모아놓은 리스트를 만들 차례다. 여기서 Gatsby (혹은 GraphQL)의 편리함이 느껴지는데,
그냥 원래 Index 페이지에서는 category가 til이 아닌 것만 넣도록 쿼리를 수정하고, TIL 페이지에서는 category가 til인 마크다운 파일만 넣도록 쿼리를 작성하면 된다. 사실 Hexo 같은 거에서도 될 것 같은데 왠지 이게 더 직관적인 것 같다 (GraphQL이랑 친한척?). 아쉽지만 오늘은 이정도로 끝내기로.&lt;/p&gt;
&lt;h3&gt;느낀점&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;글이나 디자인을 고칠 때 HMR이 기본으로 지원되니까 엄청 편하다.&lt;/li&gt;
&lt;li&gt;마크다운 파일도 node고, 그걸 렌더한 결과도 node라는 개념을 이해해야 한다.&lt;/li&gt;
&lt;li&gt;플러그인과 onCreateNode를 거쳐서 GraphQL로 쿼리 가능한 API가 생성되고, 그걸 가지고 보통의 React 앱을 만든다고 생각하면 대충 맞다.&lt;/li&gt;
&lt;li&gt;솔직히 마크다운만 다룰 거면(=이 블로그) Hexo가 훨씬 간단할 것 같은데, 워드프레스나 다른 CMS에서 컨텐츠가 바뀔 때마다 바로바로 빌드되는 시스템이나, 아니면 인터랙션이 많은 사이트를 고려하면 이게 좋겠다. React 생태계의 모든 것을 바로 가져다 쓸 수 있다.&lt;/li&gt;
&lt;li&gt;고로 &lt;a href=&quot;https://www.contentful.com/&quot;&gt;Contentful&lt;/a&gt;이나 &lt;a href=&quot;https://github.com/netlify/netlify-cms&quot;&gt;Netlify-CMS&lt;/a&gt; 같은 툴도 같이 익혀놓으면 좋겠다. 특히 개발자가 아닌 분들이랑 일할 경우 더더욱.&lt;/li&gt;
&lt;li&gt;Netlify-CMS를 잠시 시험해 보았는데, 개인적으로는 VSCode에서 마크다운을 편집하고 옆의 탭에서 Preview를 보는 것에 비해서 딱히 장점을 느끼지 못했다. 또한 Netlify Identify에 종속적이다. 컨셉은 재밌는데..왠지 개발자는 그냥 로컬에서 작업하고 비개발자는 더 유저 친화적인 CMS를 쓸 것 같다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;참고한 글들&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://unlikenesses.com/2017-11-06-migrating-blog-to-gatsby/&quot;&gt;Migrating The Blog From Jekyll To Gatsby&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/gatsbyjs/gatsby/issues/2991&quot;&gt;Is there a way to access the fields created by the gatsby-remark-transformer plugin?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[순서를 이용해서 파일 이름에 숫자 붙이기]]></title><link>https://blog.hyeungshikjung.com/rename-by-index/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/rename-by-index/</guid><pubDate>Tue, 01 May 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/3211595/renaming-files-in-a-folder-to-sequential-numbers&quot;&gt;https://stackoverflow.com/questions/3211595/renaming-files-in-a-folder-to-sequential-numbers&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;파일 이름을 그냥 싹 순서로 바꾸고 싶을 때&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;cat&lt;/span&gt; -n &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;read&lt;/span&gt; n f&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mv&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$f&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;%04d.extension&quot;&lt;/span&gt; $n&lt;span class=&quot;token variable&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;done&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;해설&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;ls&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;bash&lt;/span&gt;     caddy    django   docker   leetcode python&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ &lt;span class=&quot;token function&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;cat&lt;/span&gt; -n
     1	&lt;span class=&quot;token function&quot;&gt;bash&lt;/span&gt;
     2	caddy
     3	django
     4	docker
     5	leetcode
     6	python&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;while read n f&lt;/code&gt; 이거는 튜플 읽듯이 라인넘버랑 파일명을 파싱해서 루프 안에 집어 넣어주는거&lt;/p&gt;</content:encoded></item><item><title><![CDATA[장고 정적 파일을 S3로 관리하기]]></title><link>https://blog.hyeungshikjung.com/collectstatic-s3/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/collectstatic-s3/</guid><pubDate>Sat, 28 Apr 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Django 프로젝트를 별도의 서버에서 Deploy 하는 대신 Zappa 로 deploy 하려고 하니까 static 파일들을 다른 곳에서 serve 할 필요가 생겼다.
그냥 라이브러리 써서 간단히 될 것 같은데 직접 해보면 은근히 시간이 걸리니 이참에 정리해놓자.&lt;/p&gt;
&lt;h2&gt;S3 에 collectstatic 하기&lt;/h2&gt;
&lt;p&gt;기본적으로는 django-storages 의 &lt;a href=&quot;http://django-storages.readthedocs.io/en/latest/backends/amazon-S3.html&quot;&gt;설명&lt;/a&gt;을 따라감.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;직접 버킷을 만들면 권한 설정이 까다로우니 그냥 &lt;code class=&quot;language-text&quot;&gt;AWS_AUTO_CREATE_BUCKET&lt;/code&gt; 옵션을 이용하자.&lt;/li&gt;
&lt;li&gt;버킷이 만들어진 후 &lt;code class=&quot;language-text&quot;&gt;python manage.py runserver --nostatic&lt;/code&gt;으로 개발서버를 띄워서 static 애셋이 잘 로딩되나 보자.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;예전에는 AWS Signature Version 4 때문에 복잡했다는데 지금은 그냥 seamless 하게 잘 된다.&lt;/p&gt;
&lt;h2&gt;참고 자료&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://blog.leop0ld.org/posts/django-use-s3/&quot;&gt;https://blog.leop0ld.org/posts/django-use-s3/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Jupyter 커널 추가하기]]></title><link>https://blog.hyeungshikjung.com/installing-jupyter-kernels/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/installing-jupyter-kernels/</guid><pubDate>Sun, 22 Apr 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;걍 한 줄인데 계속 검색하게 됨 ㅜㅜ
&lt;a href=&quot;https://ipython.readthedocs.io/en/latest/install/kernel_install.html&quot;&gt;링크&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;python -m ipykernel install --user --name myenv --display-name &amp;quot;Python (myenv)&amp;quot;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;</content:encoded></item><item><title><![CDATA[Pyenv 설치시 의존성]]></title><link>https://blog.hyeungshikjung.com/pyenv-dependency/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/pyenv-dependency/</guid><pubDate>Sun, 22 Apr 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Pyenv 자체는 금방 깔리는데 막 띄운 인스턴스에는 빌드 디펜던시가 하나도 없음. Pyenv 는 파이썬 소스를 가져다가 빌드하는 방식이라서 툴들이 필요함.
&lt;a href=&quot;https://github.com/pyenv/pyenv/wiki/Common-build-problems&quot;&gt;여기&lt;/a&gt;를 따라서&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;sudo apt-get install -y make build-essential libssl-dev zlib1g-dev libbz2-dev \
libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev libncursesw5-dev \
xz-utils tk-dev&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;를 쭉 깔아준다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Caddy를 이용해서 AWS Elasticsearch에 간단한 인증을 붙이기]]></title><link>https://blog.hyeungshikjung.com/not-forward-auth-header/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/not-forward-auth-header/</guid><pubDate>Fri, 20 Apr 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;AWS ES 에 인증을 붙이고 싶은데, IAM 같은 걸 쓰는건 복잡하고 아이디나 비밀번호를 써서 인증을 하고 싶을 때.&lt;/p&gt;
&lt;p&gt;Caddy 로 그냥 proxy 를 붙이면 basicauth 때문에 생긴 Authorization Header 가 AWS ES 에 그대로 들어가서 에러가 난다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;kibana.hyeungshikjung.com {
     gzip
     basicauth / id pass
     proxy / https://search-lol-rcx7zrououmaytn3wngmyy7bwm.ap-northeast-2.es.amazonaws.com/_plugin/kibana/ {
       transparent
     }
 }&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;역시나 누군가 GitHub Issue&lt;a href=&quot;https://github.com/mholt/caddy/issues/1508&quot;&gt;#1508&lt;/a&gt;를 남기셔서 잘 따라했다. 이러면 Authorization 헤더는 딱 Caddy 에서 인증용으로만 사용되고 AWS ES 까지 전달되지 않는다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;kibana.hyeungshikjung.com {
     gzip
     basicauth / id pass
     proxy / https://search-lol-rcx7zrououmaytn3wngmyy7bwm.ap-northeast-2.es.amazonaws.com/_plugin/kibana/ {
         header_upstream -Authorization
     }
 }&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;오늘도 남들 덕분에 문제를 해결했다 -0-&lt;/p&gt;</content:encoded></item><item><title><![CDATA[psql의 비밀번호]]></title><link>https://blog.hyeungshikjung.com/pgsql-password/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/pgsql-password/</guid><pubDate>Mon, 16 Apr 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;docker-compose 에서 postgreSQL 을 사용할 때, 환경변수로 비밀번호를 넣게 되어있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-yml&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;version: &amp;#39;3.1&amp;#39;

services:

  db:
    image: postgres
    restart: always
    volumes:
      - &amp;#39;postgres:/var/lib/postgresql/data&amp;#39;
    environment:
      POSTGRES_PASSWORD: example
    ports:
      - &amp;quot;5432:5432&amp;quot;

volumes:
    postgres:&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;그런데 docker-compose.yml 에서 비밀번호를 바꾸고 다시 띄워도 postgres 에서 비밀번호가 바뀌지 않는다.
써놓고보니까 당연한데, 컨테이너가 시작될 때만 환경변수에서 비밀번호를 읽는거지 그 이후에는 내부적으로 volume 에 저장된다.&lt;br&gt;
진짜 써놓고 보니까 당연하네 ㅜㅜ더 자세한 내용은 &lt;a href=&quot;https://stackoverflow.com/questions/29580798/docker-compose-environment-variables&quot;&gt;여기서&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[BFS에서 깊이 별로 작업하기]]></title><link>https://blog.hyeungshikjung.com/bfs/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/bfs/</guid><pubDate>Sat, 14 Apr 2018 00:00:00 GMT</pubDate><content:encoded>&lt;h1&gt;Binary Tree Level Order Traversal&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;https://leetcode.com/problems/binary-tree-level-order-traversal/description/&quot;&gt;Q102&lt;/a&gt;
&lt;a href=&quot;https://leetcode.com/problems/average-of-levels-in-binary-tree/description/&quot;&gt;Q637&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;BFS 는 BFS 인데 깊이 별로 무언가 하는 문제가 있었음그때는 깊이 별로 작업을 시작하기 전, 끝에 처리를 해주면 됨&lt;/p&gt;
&lt;p&gt;기록해두고 싶은건 queue 모듈을 쓰기 싫을 때는 그냥 리스트에다 append 하고 한 번 reverse 해서 계속 pop 하면 나름 FIFO 느낌 나게 쓸 수 있다는거.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; queue

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Solution&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;levelOrder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; root&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token triple-quoted-string string&quot;&gt;&quot;&quot;&quot;
        :type root: TreeNode
        :rtype: List[List[int]]
        &quot;&quot;&quot;&lt;/span&gt;
        res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;not&lt;/span&gt; root&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; res
        q &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;root&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; q&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            level_roots &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            childs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            q&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;reverse&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; q&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                node &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; q&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pop&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                level_roots&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;left&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                    childs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;left&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;right&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                    childs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;right&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;level_roots&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            q &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; childs
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; res&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;</content:encoded></item><item><title><![CDATA[나는 4시간만 일한다를 읽고]]></title><description><![CDATA[남을 위해 일하는 시간을 줄이기]]></description><link>https://blog.hyeungshikjung.com/four-hour-work-week/</link><guid isPermaLink="false">https://blog.hyeungshikjung.com/four-hour-work-week/</guid><pubDate>Sun, 10 Dec 2017 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4hrs-c249b5fd5ebee237032f81db3b0b726e-1caba.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 400px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAFdiaw+ebEP/8QAGBAAAwEBAAAAAAAAAAAAAAAAAQIDEyL/2gAIAQEAAQUC5CJKbTeaAxZDLWYFGBb/xAAXEQEAAwAAAAAAAAAAAAAAAAABEBES/9oACAEDAQE/AVM1H//EABYRAQEBAAAAAAAAAAAAAAAAABEBEP/aAAgBAgEBPwGLn//EAB4QAAIBAwUAAAAAAAAAAAAAAAABAhESIRMiMmGR/9oACAEBAAY/AobVnou04+HBEbyiZg//xAAaEAEBAQEAAwAAAAAAAAAAAAABEQAhMWFx/9oACAEBAAE/IY8vHlvHl0yfMcIU9OOGD46mVJv/2gAMAwEAAgADAAAAEN8f/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAh/9oACAEDAQE/EFgG23//xAAXEQADAQAAAAAAAAAAAAAAAAABECER/9oACAECAQE/EApsX//EABoQAQEAAwEBAAAAAAAAAAAAAAERACExYdH/2gAIAQEAAT8Q3a1aGplmVvI44dFJeeuGy2wFIXzAYR4Hww0XQsfc/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;리디북스로 읽음&quot;
        title=&quot;&quot;
        src=&quot;/static/4hrs-c249b5fd5ebee237032f81db3b0b726e-1caba.jpg&quot;
        srcset=&quot;/static/4hrs-c249b5fd5ebee237032f81db3b0b726e-38c71.jpg 240w,
/static/4hrs-c249b5fd5ebee237032f81db3b0b726e-1caba.jpg 400w&quot;
        sizes=&quot;(max-width: 400px) 100vw, 400px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;전통적인 9-5, 주 40 시간 근무를 해야 생계를 유지할 수 있다는 편견을 버리고 자신만의 소규모 비즈니스를 정착시키면 1) 하루에 4 시간만 일하고도 2) 충분한 수입을 이룰 수 있다는 이야기. 1 과 2 가 