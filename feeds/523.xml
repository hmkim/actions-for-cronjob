<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
<channel>
<title>안승규(Ahn Seungkyu)의 블로그 (Stay hungry, stay foolish)</title>
<link>https://ahnseungkyu.com/</link>
<description>Kubernetes, OpenStack, Linux, Programming and so on</description>
<language>ko</language>
<pubDate>Sun, 12 May 2019 14:46:12 +0900</pubDate>
<generator>TISTORY</generator>
<managingEditor>seungkyua@gmail.com</managingEditor>
<image>
<title>안승규(Ahn Seungkyu)의 블로그 (Stay hungry, stay foolish)</title>
<url>http://cfile9.uf.tistory.com/image/277A994B5306DAC5277652</url>
<link>https://ahnseungkyu.com</link>
<description>Kubernetes, OpenStack, Linux, Programming and so on</description>
</image>
<item>
<title>Ingress Controller 에서 subpath 사용</title>
<link>https://ahnseungkyu.com/257</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;Ingress Controller 를 사용하여 같은 도메인에서 subpath 로 웹서비스를 분리하는 방법은 각 서비스마다 Ingress 를 만들고, '/' path 는 무조건 포함시키는 방법입니다. 한가지 단점은 root path '/' 는 처음 만든 Ingress 가 먼저 선점하게 됩니다.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;물론 이 방법은 '/' 가 경로가 반드시 필요한 서비스가 2개 이상이면 적용할 수 없지만 그런 경우는 없다고 가정합니다.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;예를 들어 Jupyterlab 은 '/' 경로를 반드시 필요로 합니다. '/jupyter' 를 호출할 때 jupyterlab 이 호출되게 Ingress 의 subpath 를 지정하려면 다음과 같이 작성하면 됩니다.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;pre id=&quot;code_1555322308675&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  annotations:
    kubernetes.io/ingress.class: nginx
    nginx.ingress.kubernetes.io/rewrite-target: /
  name: jupyterlab
  namespace: jupyterlab
spec:
  rules:
  - host: jupyterlab.myserver
    http:
      paths:
      - backend:
          serviceName: jupyterlab
          servicePort: 80
        path: /jupyter
  - host: jupyterlab.myserver
    http:
      paths:
      - backend:
          serviceName: jupyterlab
          servicePort: 80
        path: /&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;이렇게 하면 '&lt;span style=&quot;color: #333333;&quot;&gt;http://&lt;/span&gt;jupyterlab.myserver/jupyter' 가 호출되거나 'http://jupyterlab.myserver/' 가 호출되어도 jupyterlab 이 잘 연결됩니다.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;여기에 '/echoserver' 를 subpath 로 연결되게 추가하고 싶으면 새로운 Ingress 를 만들면 됩니다.&lt;/p&gt;
&lt;pre id=&quot;code_1555322551892&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  annotations:
    kubernetes.io/ingress.class: nginx
    nginx.ingress.kubernetes.io/rewrite-target: /
  name: echoserver
  namespace: jupyterlab
spec:
  rules:
  - host: jupyterlab.myserver
    http:
      paths:
      - backend:
          serviceName: clusterip
          servicePort: 80
        path: /echoserver
  - host: jupyterlab.myserver
    http:
      paths:
      - backend:
          serviceName: clusterip
          servicePort: 80
        path: /&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;여기서 두번째에 들어가 '/' 는 소용이 없습니다. Nginx 에서는 처음 입력된 순서에 의해서 location 이 결정되기 때문에 'http://jupyterlab.myserver/' 를 호출하면 첫번째 생성한 jupyterlab ingress 가 적용되기 때문입니다.&amp;nbsp;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/257&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Kubernetes</category>
<category>Ingress Controller subpath</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/257</guid>
<comments>https://ahnseungkyu.com/257#entry257comment</comments>
<pubDate>Mon, 15 Apr 2019 19:06:56 +0900</pubDate>
</item>
<item>
<title>Ingress Controller 에서 original source client ip 확인</title>
<link>https://ahnseungkyu.com/256</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;웹서비스를 인터넷에 노출시키기 위해서는 Cloud Provider 가 제공하는 Load Balancer 나 On-Prem 에서 Load Balancer 나 Ingress Controller 를 사용해야 합니다. Ingress Controller 를 사용할 때 원래의 Client IP 를 확인하는 방법은 다음과 같습니다.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;여기서 사용하는 Ingress Controller 와 Pod 의 Web Server 는 Nginx 를 사용했습니다.&lt;/p&gt;
&lt;h3&gt;1. [ 인터넷 ] ---&amp;gt; [ Ingress Controller ] ---&amp;gt; [ Pod (Web Server) ]&lt;/h3&gt;
&lt;p&gt;가장 기본적인 방법으로 추가 세팅없이도 바로 original client ip 를 알 수 있습니다.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;Ingress Controller 를 설치하기 위해 node label 을 세팅합니다.&lt;/p&gt;
&lt;pre id=&quot;code_1555292234504&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;$ kubectl label --overwrite node k1-node01 node-role.kubernetes.io/ingress=true&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;그리고 아래의 Ingress Controller yaml 로 설치합니다.&lt;/p&gt;
&lt;pre id=&quot;code_1555292307168&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;$ vi nginx-controller.yaml

apiVersion: v1
kind: Namespace
metadata:
  name: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx

---

kind: ConfigMap
apiVersion: v1
metadata:
  name: nginx-configuration
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
data:
  enable-underscores-in-headers: &quot;true&quot;

---
kind: ConfigMap
apiVersion: v1
metadata:
  name: tcp-services
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx

---
kind: ConfigMap
apiVersion: v1
metadata:
  name: udp-services
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx

---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: nginx-ingress-serviceaccount
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx

---
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRole
metadata:
  name: nginx-ingress-clusterrole
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
rules:
  - apiGroups:
      - &quot;&quot;
    resources:
      - configmaps
      - endpoints
      - nodes
      - pods
      - secrets
    verbs:
      - list
      - watch
  - apiGroups:
      - &quot;&quot;
    resources:
      - nodes
    verbs:
      - get
  - apiGroups:
      - &quot;&quot;
    resources:
      - services
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - &quot;extensions&quot;
    resources:
      - ingresses
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - &quot;&quot;
    resources:
      - events
    verbs:
      - create
      - patch
  - apiGroups:
      - &quot;extensions&quot;
    resources:
      - ingresses/status
    verbs:
      - update

---
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: Role
metadata:
  name: nginx-ingress-role
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
rules:
  - apiGroups:
      - &quot;&quot;
    resources:
      - configmaps
      - pods
      - secrets
      - namespaces
    verbs:
      - get
  - apiGroups:
      - &quot;&quot;
    resources:
      - configmaps
    resourceNames:
      # Defaults to &quot;&amp;lt;election-id&amp;gt;-&amp;lt;ingress-class&amp;gt;&quot;
      # Here: &quot;&amp;lt;ingress-controller-leader&amp;gt;-&amp;lt;nginx&amp;gt;&quot;
      # This has to be adapted if you change either parameter
      # when launching the nginx-ingress-controller.
      - &quot;ingress-controller-leader-nginx&quot;
    verbs:
      - get
      - update
  - apiGroups:
      - &quot;&quot;
    resources:
      - configmaps
    verbs:
      - create
  - apiGroups:
      - &quot;&quot;
    resources:
      - endpoints
    verbs:
      - get

---
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: RoleBinding
metadata:
  name: nginx-ingress-role-nisa-binding
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: nginx-ingress-role
subjects:
  - kind: ServiceAccount
    name: nginx-ingress-serviceaccount
    namespace: ingress-nginx

---
apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRoleBinding
metadata:
  name: nginx-ingress-clusterrole-nisa-binding
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: nginx-ingress-clusterrole
subjects:
  - kind: ServiceAccount
    name: nginx-ingress-serviceaccount
    namespace: ingress-nginx

---

apiVersion: v1
kind: Service
metadata:
  name: ingress-nginx
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
spec:
  type: ClusterIP
  ports:
    - name: http
      port: 80
      targetPort: 80
      protocol: TCP
    - name: https
      port: 443
      targetPort: 443
      protocol: TCP
  selector:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx

---

apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-ingress-controller
  namespace: ingress-nginx
  labels:
    app.kubernetes.io/name: ingress-nginx
    app.kubernetes.io/part-of: ingress-nginx
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: ingress-nginx
      app.kubernetes.io/part-of: ingress-nginx
  template:
    metadata:
      labels:
        app.kubernetes.io/name: ingress-nginx
        app.kubernetes.io/part-of: ingress-nginx
      annotations:
        prometheus.io/port: &quot;10254&quot;
        prometheus.io/scrape: &quot;true&quot;
    spec:
      serviceAccountName: nginx-ingress-serviceaccount
      hostNetwork: true
      nodeSelector:
        node-role.kubernetes.io/ingress: &quot;true&quot;
      containers:
        - name: nginx-ingress-controller
          image: quay.io/kubernetes-ingress-controller/nginx-ingress-controller:0.24.0
          args:
            - /nginx-ingress-controller
            - --configmap=$(POD_NAMESPACE)/nginx-configuration
            - --tcp-services-configmap=$(POD_NAMESPACE)/tcp-services
            - --udp-services-configmap=$(POD_NAMESPACE)/udp-services
            - --publish-service=$(POD_NAMESPACE)/ingress-nginx
            - --annotations-prefix=nginx.ingress.kubernetes.io
          securityContext:
            allowPrivilegeEscalation: true
            capabilities:
              drop:
                - ALL
              add:
                - NET_BIND_SERVICE
            # www-data -&amp;gt; 33
            runAsUser: 33
          env:
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
            - name: POD_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
          ports:
            - name: http
              containerPort: 80
            - name: https
              containerPort: 443
          livenessProbe:
            failureThreshold: 3
            httpGet:
              path: /healthz
              port: 10254
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 10
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /healthz
              port: 10254
              scheme: HTTP
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 10&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Ingress Controller 가 설치 되었으면 echoserver 로 Pod 에서 어떻게 Client IP 를 받는지 확인할 수 있습니다.&lt;/p&gt;
&lt;p&gt;echoserver 소스 :&amp;nbsp; &lt;a href=&quot;https://kubernetes.io/docs/tutorials/services/source-ip/&quot;&gt;https://kubernetes.io/docs/tutorials/services/source-ip/&lt;/a&gt;&lt;/p&gt;
&lt;figure id=&quot;og_1555292393410&quot; contenteditable=&quot;false&quot; data-ke-type=&quot;opengraph&quot;&gt;&lt;a href=&quot;https://kubernetes.io/docs/tutorials/services/source-ip/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot; data-original-url=&quot;https://kubernetes.io/docs/tutorials/services/source-ip/&quot;&gt;
&lt;div class=&quot;og-image&quot; style=&quot;background-image: url('https://scrap.kakaocdn.net/dn/dbO2oM/hyAKyT98yz/KurBJpKxKf5LsTW14ORFqK/img.png?width=1727&amp;amp;height=373&amp;amp;face=0_0_1727_373');&quot;&gt;&amp;nbsp;&lt;/div&gt;
&lt;div class=&quot;og-text&quot;&gt;
&lt;p class=&quot;og-title&quot;&gt;Using Source IP&lt;/p&gt;
&lt;p class=&quot;og-desc&quot;&gt;&amp;nbsp;&lt;/p&gt;
&lt;p class=&quot;og-host&quot;&gt;kubernetes.io&lt;/p&gt;
&lt;/div&gt;
&lt;/a&gt;&lt;/figure&gt;
&lt;pre id=&quot;code_1555292435487&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;$ kubectl create ns echoserver

$ vi echoserver.yaml

apiVersion: apps/v1
kind: Deployment
metadata:
  name: source-ip-app
  namespace: echoserver
  labels:
    run: source-ip-app
spec:
  replicas: 1
  selector:
    matchLabels:
      run: source-ip-app
  template:
    metadata:
      labels:
        run: source-ip-app
    spec:
      containers:
      - image: k8s.gcr.io/echoserver:1.4
        name: source-ip-app&lt;/code&gt;&lt;/pre&gt;
&lt;pre id=&quot;code_1555292460338&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;$ vi echoserver-service.yaml

apiVersion: v1
kind: Service
metadata:
  name: clusterip
  namespace: echoserver
  labels:
    run: source-ip-app
spec:
  ports:
  - port: 80
    protocol: TCP
    targetPort: 8080
  selector:
    run: source-ip-app
  type: ClusterIP&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;echoserver 는 nginx 서버이며 head 의 값을 출력하는 로직을 가지고 있습니다.&lt;/p&gt;
&lt;p&gt;busybox 로 echoserver 출력 내용을 확인해 보겠습니다. 그러기 위해서 먼저,&amp;nbsp;echoserver 의 service ip 를 확인한 후 curl 로 http request 를 호출해 봅니다.&lt;/p&gt;
&lt;pre id=&quot;code_1555292620078&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;$ kubectl get svc -n echoserver 
NAME        TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)   AGE
clusterip   ClusterIP   10.233.35.118   &amp;lt;none&amp;gt;        80/TCP    66s&lt;/code&gt;&lt;/pre&gt;
&lt;pre id=&quot;code_1555292642421&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;# kubectl run busybox -it --image=busybox --restart=Never --rm -n echoserver

If you don't see a command prompt, try pressing enter.
/ # ip addr
1: lo: &amp;lt;LOOPBACK,UP,LOWER_UP&amp;gt; mtu 65536 qdisc noqueue qlen 1
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
2: tunl0@NONE: &amp;lt;NOARP&amp;gt; mtu 1480 qdisc noop qlen 1
    link/ipip 0.0.0.0 brd 0.0.0.0
3: gre0@NONE: &amp;lt;NOARP&amp;gt; mtu 1476 qdisc noop qlen 1
    link/gre 0.0.0.0 brd 0.0.0.0
4: gretap0@NONE: &amp;lt;BROADCAST,MULTICAST&amp;gt; mtu 1462 qdisc noop qlen 1000
    link/ether 00:00:00:00:00:00 brd ff:ff:ff:ff:ff:ff
6: eth0@if404: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN&amp;gt; mtu 1500 qdisc noqueue 
    link/ether 5e:8e:b0:19:be:56 brd ff:ff:ff:ff:ff:ff
    inet 10.233.125.19/32 scope global eth0
       valid_lft forever preferred_lft forever

/ # wget -qO - 10.233.35.118
CLIENT VALUES:
client_address=10.233.125.19
command=GET
real path=/
query=nil
request_version=1.1
request_uri=http://10.233.35.118:8080/

SERVER VALUES:
server_version=nginx: 1.10.0 - lua: 10001

HEADERS RECEIVED:
connection=close
host=10.233.35.118
user-agent=Wget
BODY:
-no body in request-&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;pod 에서 service 를 통해 web server 를 호출하면 client_address 에 client ip 가 제대로 출력됩니다. 그러나, Ingress Controller 호출하는 경우에는 다음과 같습니다.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;Ingress Controller 는 k1-node01 (192.168.30.12) 에 떠있고, k1-node05 (192.168.30.20) 에서 echoserver 를 호출해 보겠습니다.&lt;/p&gt;
&lt;p&gt;echoserver 를 위한 Ingress 를 생성합니다.&lt;/p&gt;
&lt;pre id=&quot;code_1555292876111&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;$ vi echoserver-ingress.yaml 

apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  annotations:
    kubernetes.io/ingress.class: nginx
  name: echoserver
  namespace: echoserver
spec:
  rules:
  - host: echoserver.ip
    http:
      paths:
      - backend:
          serviceName: clusterip
          servicePort: 80
        path: /&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;k1-node05 서버에서 echoserver.ip 도메인을 hosts 파일에 등록하고, echoserver 를 호출합니다.&lt;/p&gt;
&lt;pre id=&quot;code_1555292934766&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;$ cat /etc/hosts
192.168.30.12    k1-node01    echoserver.ip
192.168.30.20    k1-node05



$ curl -X GET echoserver.ip -H 'Host: echoserver.ip'
CLIENT VALUES:
client_address=192.168.30.12
command=GET
real path=/
query=nil
request_version=1.1
request_uri=http://echoserver.ip:8080/

SERVER VALUES:
server_version=nginx: 1.10.0 - lua: 10001

HEADERS RECEIVED:
accept=*/*
host=echoserver.ip
user-agent=curl/7.47.0
x-forwarded-for=192.168.30.20
x-forwarded-host=echoserver.ip
x-forwarded-port=80
x-forwarded-proto=http
x-original-uri=/
x-real-ip=192.168.30.20
x-request-id=15b32d8bb2a8945f0dfebf3fae29c736
x-scheme=http
BODY:
-no body in request-&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;client_address 에는 Ingress Controller 가 떠있는 서버의 ip 가 들어오고, header 의 x-forwared-for 값에 original client ip 가 출력되는 것을 알 수 있습니다.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;실제 Ingress Controller 의 echoserver 에 대한 config 값은 다음과 같습니다.&lt;/p&gt;
&lt;pre id=&quot;code_1555293110492&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;proxy_set_header X-Request-ID           $req_id;
proxy_set_header X-Real-IP              $the_real_ip;
             
proxy_set_header X-Forwarded-For        $the_real_ip;
             
proxy_set_header X-Forwarded-Host       $best_http_host;
proxy_set_header X-Forwarded-Port       $pass_port;
proxy_set_header X-Forwarded-Proto      $pass_access_scheme;
             
proxy_set_header X-Original-URI         $request_uri;
             
proxy_set_header X-Scheme               $pass_access_scheme;
             
# Pass the original X-Forwarded-For
proxy_set_header X-Original-Forwarded-For $http_x_forwarded_for;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Pod 의 nginx 에서 client ip 에 original client ip 를 출력하고 싶을 때는 pod nginx 에 다음과 같은 설정이 필요합니다. (추가 확인 필요)&lt;/p&gt;
&lt;pre id=&quot;code_1555293261977&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;set_real_ip_from  192.168.30.0/24;
real_ip_header    X-Forwarded-For;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;set_real_ip_from 은 ingress controller 가 실행될 수 있는 서버의 cidr 입니다.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;h3&gt;2. [ 인터넷 ] ---&amp;gt; [ Google or Azure LB ] ---&amp;gt; [ Pod (Web Server) ]&lt;/h3&gt;
&lt;p&gt;Cloud Provider (Google or Azure) 의 LB 를 이용하고 Service 의&amp;nbsp; LoadBalancer type 으로 웹서비스를 한다면 아래와 같이 Service 의&amp;nbsp; externalTrafficPolicy 값을 local 로 지정하면 됩니다. local 로 지정하면 LB 에서 바로 Web Server Pod 가 떠 있는 서버로만 접근되기 때문에 다른 서버를 통해서 연결될 때 client ip 가 해당 서버의 ip 로 들어가는 것을 방지해 줍니다.&lt;/p&gt;
&lt;pre id=&quot;code_1555294710496&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;---
kind: Service
apiVersion: v1
metadata:
  name: example-service
spec:
  ports:
  - port: 8765
    targetPort: 9376
  selector:
    app: example
  type: LoadBalancer
  externalTrafficPolicy: Local&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Azure 부분은 한국 MS 의 박인혜 차장께서 알려주셨습니다.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;h3&gt;3. [ 인터넷 ] ---&amp;gt; [ AWS ELB (classic lb) ] ---&amp;gt; [ Pod (Web Server) ]&lt;/h3&gt;
&lt;p&gt;Classic LB 에 proxy protocol 을 enable 하고, Service 의 annotations 에 다음과 같이 설정합니다.&lt;/p&gt;
&lt;pre id=&quot;code_1555294885369&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;# Enable PROXY protocol
service.beta.kubernetes.io/aws-load-balancer-proxy-protocol: '*'
service.beta.kubernetes.io/aws-load-balancer-backend-protocol: 'https'
service.beta.kubernetes.io/aws-load-balancer-ssl-cert: arn:aws:acm:us-west-myarn-long-entry-obfuscated-here&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;h3&gt;4. [ 인터넷 ] ---&amp;gt; [ AWS NLB ] ---&amp;gt; [ Ingress Controller ] ---&amp;gt; [ Pod (Web Server) ]&lt;/h3&gt;
&lt;p&gt;Ingress Controller 의 config 에 다음과 같이 설정합니다.&lt;/p&gt;
&lt;pre id=&quot;code_1555294989837&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;use-proxy-protocol: &quot;true&quot;
real-ip-header: &quot;proxy_protocol&quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;AWS NLB 의 각 타겟 그룹에&amp;nbsp;Proxy Protocol V2 를 설정한 후,&amp;nbsp; Ingress Controller 의 Service annotations 에 다음과 같이 설정합니다.&lt;/p&gt;
&lt;pre id=&quot;code_1555295059679&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;# by default the type is elb (classic load balancer).
service.beta.kubernetes.io/aws-load-balancer-type: nlb
# Enable PROXY protocol
service.beta.kubernetes.io/aws-load-balancer-proxy-protocol: &quot;*&quot;
service.beta.kubernetes.io/aws-load-balancer-backend-protocol: 'tcp'&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;※ AWS 와 Google 의 경우에는 테스트 해보지 못했습니다.&amp;nbsp;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/256&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Kubernetes</category>
<category>Cloud Provider Load Balancer</category>
<category>Ingress Controller Original Client IP</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/256</guid>
<comments>https://ahnseungkyu.com/256#entry256comment</comments>
<pubDate>Mon, 15 Apr 2019 11:29:56 +0900</pubDate>
</item>
<item>
<title>Ingress Controller TLS 적용</title>
<link>https://ahnseungkyu.com/255</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;Ingress Controller 를 활용한 웹서비스에 TLS 를 적용하는 방법 중 가장 쉬운 방법은 Ingress Controller 에 TLS 를 적용하는 방법입니다. 이 방법은 client 와 Ingress Controller 까지 https 로 통신하고 Ingress Controller 와 web server 와는 http 로 통신하게 됩니다.&lt;/p&gt;
&lt;p&gt;아래의 방법은 Ingress Controller 는 미리 설치되어 있다고 가정합니다.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;먼저, letsencrypt 로 접속하여&amp;nbsp;&lt;span style=&quot;color: #333333;&quot;&gt;3개월간 무료로 인증서를 받는 방법을 알아봅니다.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;1. 필요 패키지 설치&amp;nbsp;(Ubuntu&amp;nbsp;16.04&amp;nbsp;기준)&lt;/p&gt;
&lt;pre id=&quot;code_1554702999406&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;# apt-get update
# apt-get install software-properties-common
# add-apt-repository universe
# sudo add-apt-repository ppa:certbot/certbot
# sudo apt-get update
# sudo apt-get install certbot python-certbot-nginx&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;2. 인증서 다운로드&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;color: #333333;&quot;&gt;중요한 것은 인터넷에서 해당 도메인으로 로컬 서버에 접속이 되어야 하며 (Inbound 가능) standalone 을 사용할 때 로컬에 80 포트는 unbind 되어 있어야 합니다. 아래와 같은 경우는 외부에서 &lt;a href=&quot;http://cloudnativeday.kr&quot;&gt;cloudnativeday.kr&lt;/a&gt;, &lt;a href=&quot;http://www.cloudnativeday.kr&quot;&gt;www.cloudnativeday.kr&lt;/a&gt;, test.cloudnativeday.kr 도메인이 갖는 ip address 가 내 로컬 서버여야 한다는 의미입니다. 정확히는 해당 ip address 로 외부에서 내 서버로 연결이 가능해야 합니다.&lt;/span&gt;&lt;/p&gt;
&lt;pre id=&quot;code_1554703294866&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;# certbot certonly --standalone --cert-name cloudnativeday.kr -d cloudnativeday.kr,www.cloudnativeday.kr,test.cloudnativeday.kr&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;color: #333333;&quot;&gt;인증서 발급이 완료되면 다음과 같은 디렉토리에 인증서가 생성되어 보입니다. archive 디렉토리와 심볼릭 링크가 있는&amp;nbsp;&lt;/span&gt;live 디렉토리가 있는데 live 디렉토리를 활용합니다. 그리고,&amp;nbsp;crt 는 fullchain.pem 을, key 는 private.pem 을 사용합니다.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;pre id=&quot;code_1554703640829&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;# ls -al /etc/letsencrypt/archive/cloudnativeday.kr/
total 24
drwxr-xr-x 2 root root 4096 Apr  7 21:31 .
drwx------ 3 root root 4096 Apr  7 21:31 ..
-rw-r--r-- 1 root root 1931 Apr  7 21:31 cert1.pem
-rw-r--r-- 1 root root 1647 Apr  7 21:31 chain1.pem
-rw-r--r-- 1 root root 3578 Apr  7 21:31 fullchain1.pem
-rw------- 1 root root 1704 Apr  7 21:31 privkey1.pem


# ls -al /etc/letsencrypt/live/cloudnativeday.kr/
total 12
drwxr-xr-x 2 root root 4096 Apr  7 21:31 .
drwx------ 3 root root 4096 Apr  7 21:31 ..
lrwxrwxrwx 1 root root   41 Apr  7 21:31 cert.pem -&amp;gt; ../../archive/cloudnativeday.kr/cert1.pem
lrwxrwxrwx 1 root root   42 Apr  7 21:31 chain.pem -&amp;gt; ../../archive/cloudnativeday.kr/chain1.pem
lrwxrwxrwx 1 root root   46 Apr  7 21:31 fullchain.pem -&amp;gt; ../../archive/cloudnativeday.kr/fullchain1.pem
lrwxrwxrwx 1 root root   44 Apr  7 21:31 privkey.pem -&amp;gt; ../../archive/cloudnativeday.kr/privkey1.pem
-rw-r--r-- 1 root root  692 Apr  7 21:31 README&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;인증서를 성공적으로 생성하고 나면, Ingress Controller 에서 사용하기위해서 인증서를 secret tls 타입으로 생성합니다.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;3. secret tls 생성&lt;/p&gt;
&lt;pre id=&quot;code_1554703984352&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;# kubectl create secret tls cloudnativeday-certs --key /etc/letsencrypt/live/cloudnativeday.kr/privkey.pem --cert /etc/letsencrypt/live/cloudnativeday.kr/fullchain.pem --namespace cloudnative&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;타입은 secret tls 로 하고, key 는 private.pem 을, cert 는&amp;nbsp; fullchain.pem 을 사용합니다.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;4. tls ingress 생성&lt;/p&gt;
&lt;pre id=&quot;code_1554704243623&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  annotations:
    kubernetes.io/ingress.class: nginx
  name: cloudnative-kr
  namespace: cloudnative
spec:
  tls:
  - secretName: cloudnativeday-certs
    hosts:
    - cloudnativeday.kr
    - www.cloudnativeday.kr
  rules:
  - host: cloudnativeday.kr
    http:
      paths:
      - backend:
          serviceName: nginx-cloudnative
          servicePort: 80
        path: /
  - host: www.cloudnativeday.kr
    http:
      paths:
      - backend:
          serviceName: nginx-cloudnative
          servicePort: 80
        path: /&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;http 로 들어오면 자동으로 https 로 redirect 됩니다. 왜냐하면 기본 값이 nginx.ingress.kubernetes.io/&lt;span&gt;ssl-redirect&lt;/span&gt;: &quot;true&quot; 이기 때문입니다. 일반 http 와 다른 부분은 tls 부분입니다. secret 과 인증서가 적용될 도메인명을 적으면 됩니다.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/255&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Kubernetes</category>
<category>Ingress Controller TLS</category>
<category>letsencrypt</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/255</guid>
<comments>https://ahnseungkyu.com/255#entry255comment</comments>
<pubDate>Mon, 08 Apr 2019 15:24:26 +0900</pubDate>
</item>
<item>
<title>Kubernetes 사용자 계정 생성과 권한 설정</title>
<link>https://ahnseungkyu.com/254</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;Kubernetes 는 RBAC 이 디폴트 접근 제어 권한으로 User account 와 RBAC 을 적절히 사용하면 효과적인 접근 제어를 할 수 있습니다.&lt;/p&gt;
&lt;p&gt;예를 들어, Kubernetes Cluster 에 접근할 수 있는 사용자 seungkyua 를 새로 만들고 해당 사용자는 seungkyua 네임스페이스에만 접근 가능하게 설정하고 싶은 경우가 있을 수 있습니다.&lt;/p&gt;
&lt;p&gt;또한 seungkyua 네임스페이스 접근 안에서도 pods, replicasets, deployments, services 만 생성, 조회, 수정, 삭제권한만 주고 싶을 때도 있습니다.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;이러한 세팅은 아래와 같은 절차를 거쳐야 합니다. 물론 Kubernetes 는 RBAC 사용으로 세팅되어 있다고 가정합니다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;신규 namespace 생성&lt;/li&gt;
&lt;li&gt;User account 생성 (client key 와 client crt 생성)&lt;/li&gt;
&lt;li&gt;새로운 namespace 에 제한적으로 접근할 수 있는 권한 생성 (role 생성)&lt;/li&gt;
&lt;li&gt;3번의 새로운 User account 와 3 번의 role 을 연결 (rolebinding 생성)&lt;/li&gt;
&lt;li&gt;kubectl 이 사용할 새로운 config context 를 만들고 연결&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;h3&gt;1. 신규 naemspace 생성&lt;/h3&gt;
&lt;pre id=&quot;code_1554446425121&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;# kubectl create namespace seungkyua&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;h3&gt;2. 새로운 User account 생성&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;client private key 생성&amp;nbsp;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre id=&quot;code_1554446448070&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;# openssl genrsa -out seungkyua.key 2048&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;crt 생성을 위한 csr 생성&lt;/li&gt;
&lt;/ul&gt;
&lt;pre id=&quot;code_1554446464102&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;# openssl req -new -key seungkyua.key -subj &quot;/CN=seungkyua/O=Kubernetes Korea Group&quot; -out seungkyua.csr&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;client cert 파일 생성&lt;/li&gt;
&lt;/ul&gt;
&lt;pre id=&quot;code_1554446476129&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;# openssl x509 -req -in seungkyua.csr -CA /etc/kubernetes/ssl/ca.crt -CAkey /etc/kubernetes/ssl/ca.key -CAcreateserial -out seungkyua.crt -days 10000&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;h3&gt;3. 새로운 namespace 로 접근 role 설정&lt;/h3&gt;
&lt;pre id=&quot;code_1554446492093&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;# vi role.yaml

apiVersion: rbac.authorization.k8s.io/v1beta1
kind: Role
metadata:
  name: seungkyua-manager
  namespace: seungkyua
rules:
  - apiGroups:
      - &quot;&quot;            # core api
      - &quot;extensions&quot;
      - &quot;apps&quot;
    resources:
      - &quot;deployments&quot;
      - &quot;replicasets&quot;
      - &quot;pods&quot;
      - &quot;services&quot;
    verbs:
      - &quot;get&quot;
      - &quot;list&quot;
      - &quot;watch&quot;
      - &quot;create&quot;
      - &quot;update&quot;
      - &quot;patch&quot;
      - &quot;delete&quot;


# kubectl create -f role.yaml&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;h3&gt;4. User 와 Role 을 연결 (rolebinding 생성)&lt;/h3&gt;
&lt;pre id=&quot;code_1554446572374&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;# vi rolebinding.yaml

apiVersion: rbac.authorization.k8s.io/v1beta1
kind: RoleBinding
metadata:
  name: seungkyua-manager-rolebinding
  namespace: seungkyua
subjects:
  - kind: User         # User or ServiceAccount
    name: seungkyua
roleRef:
  kind: Role
  name: seungkyua-manager
  apiGroup: rbac.authorization.k8s.io
  

# kubectl create -f rolebinding.yaml&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;h3&gt;5. Kubectl config context 생성&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;인증을 위한 사용자 정보 등록 (key, crt 로 접속)&lt;/li&gt;
&lt;/ul&gt;
&lt;pre id=&quot;code_1554446583534&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;# kubectl config set-credentials seungkyua --client-certificate=/root/ahnsk/private-certs/seungkyua.crt --client-key=/root/ahnsk/private-certs/seungkyua.key --embed-certs=true&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;context 생성&lt;/li&gt;
&lt;/ul&gt;
&lt;pre id=&quot;code_1554446593176&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;# kubectl config get-clusters NAME cluster.local # kubectl config set-context seungkyua@k1 --cluster=cluster.local --user=seungkyua --namespace=seungkyua&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;kubernetes 접속&lt;/li&gt;
&lt;/ul&gt;
&lt;pre id=&quot;code_1554446620209&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;# kubectl config get-contexts
CURRENT   NAME                             CLUSTER         AUTHINFO           NAMESPACE
*         kubernetes-admin@cluster.local   cluster.local   kubernetes-admin   
          seungkyua@k1                     cluster.local   seungkyua 


# kubectl config use-context seungkyua@k1


# kubectl config get-contexts
CURRENT   NAME                             CLUSTER         AUTHINFO           NAMESPACE
          kubernetes-admin@cluster.local   cluster.local   kubernetes-admin   
*         seungkyua@k1                     cluster.local   seungkyua          seungkyua&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;Kubernetes 에 접속하여 해당 계정이 해당 네임스페이스에만 접속 권한이 있는지 확인&lt;/p&gt;
&lt;pre id=&quot;code_1554446650000&quot; class=&quot;html xml&quot; data-ke-type=&quot;codeblock&quot;&gt;&lt;code&gt;# kubectl get pods

No resources found.



# kubectl get pods -n defaults

Error from server (Forbidden): pods is forbidden: User &quot;seungkyua&quot; cannot list resource &quot;pods&quot; in API group &quot;&quot; in the namespace &quot;defaults&quot;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/254&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Kubernetes</category>
<category>kubernetes</category>
<category>RBAC</category>
<category>user account</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/254</guid>
<comments>https://ahnseungkyu.com/254#entry254comment</comments>
<pubDate>Fri, 05 Apr 2019 15:46:11 +0900</pubDate>
</item>
<item>
<title>GoLang 으로 개발한 프로젝트 구조 설명</title>
<link>https://ahnseungkyu.com/253</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;Kubernetes 는 GoLang 으로 만들어진 대표적인 s/w 입니다. Kubernetes&amp;nbsp; 구조와 비슷하게 GoLang 으로 프로젝트를 만들 때 사용되는 일반적인 디렉토리 구조를 설명하겠습니다.&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;제일 먼저 GOPATH 를 지정하고, bin 디렉토리를 PATH에 추가로 지정합니다.&lt;/p&gt;&lt;pre class=&quot;EnlighterJSRAW&quot; data-enlighter-language=&quot;null&quot;&gt;$ GOPATH=/Users/ahnsk/Documents/go_workspace
$ PATH=/Users/ahnsk/Documents/go_workspace/bin:$PATH&lt;/pre&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;다음은 go get 으로 govendor 를 설치합니다. govendor 는 dependency module 을 쉽게 다운받고 관리할 수 있습니다.&lt;/p&gt;&lt;pre class=&quot;EnlighterJSRAW&quot; data-enlighter-language=&quot;null&quot;&gt;$ go get -u github.com/kardianos/govendor
$ govendor -version
v1.0.9&lt;/pre&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;이제 본인이 생성할 프로젝트를 만들어 보겠습니다. github.com 에 있는 go 프로젝트를 다운로드 받습니다.&lt;/p&gt;&lt;pre class=&quot;EnlighterJSRAW&quot; data-enlighter-language=&quot;null&quot;&gt;$ mkdir -p /Users/ahnsk/Documents/go_workspace/cookiemonster2
$ GOPATH=/Users/ahnsk/Documents/go_workspace/cookiemonster2
$ go get -u github.com/seungkyua/cookiemonster2&lt;/pre&gt;&lt;p&gt;GOPATH 는 각 프로젝트마다 자신만의 용도로 사용하기 위해&amp;nbsp;각각 지정하는 것이 편리합니다.&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;cookiemonster2 라는 프로젝트는 GOPATH 아래의 src 디렉토리에 패키지 경로(github.com/seungkyua/cookiemonster2)로 다운로드 됩니다.&lt;/p&gt;&lt;pre class=&quot;EnlighterJSRAW&quot; data-enlighter-language=&quot;null&quot;&gt;/Users/ahnsk/Documents/go_workspace/cookiemonster2/src/
github.com/seungkyua/cookiemonster2&lt;/pre&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;프로젝트 디렉토리로 이동해서 보면 다음과 같습니다.&lt;/p&gt;&lt;pre class=&quot;EnlighterJSRAW&quot; data-enlighter-language=&quot;null&quot;&gt;$ tree -L 2 .
.
├── Dockerfile.cookiemonster
├── LICENSE
├── Makefile
├── README.md
├── cmd
│   ├── cluster_client.go
│   ├── cluster_client2.go
│   └── server.go
├── config
│   └── config.yaml
├── manifest
│   ├── cookiemonster-cm-config.yaml
│   ├── cookiemonster-deployment.yaml
│   ├── cookiemonster-rbac.yaml
│   └── cookiemonster-service.yaml
├── pkg
│   ├── domain
│   └── handler
└── vendor
    └── ...&lt;/pre&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;일반적으로 entrypoint 가 되는 go 파일은 cmd 디렉토리 아래에 위치하고 나머지 go 파일들은 pkg 디렉토리에 패키지 구조로 위치합니다.&lt;/p&gt;&lt;p&gt;vendor 디렉토리는 dependency module 을 다운받은 곳이므로 이 디렉토리는 삭제를 하고, 처음부터 새롭게 구성해 보겠습니다.&lt;/p&gt;&lt;pre class=&quot;EnlighterJSRAW&quot; data-enlighter-language=&quot;null&quot;&gt;$ rm -rf vendor&lt;/pre&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;govendor init 으로 vendor 디렉토리를 생성합니다.&amp;nbsp; 새롭게 생성된 vendor 디렉토리에 vendor.json 파일이 보이는데 이것은 향후 dependency module 을 다운 받을 때 활용됩니다.&lt;/p&gt;&lt;pre class=&quot;EnlighterJSRAW&quot; data-enlighter-language=&quot;null&quot;&gt;$ govendor init

$ tree -L 2 .
.
├── Dockerfile.cookiemonster
├── LICENSE
├── Makefile
├── README.md
├── cmd
│   ├── cluster_client.go
│   ├── cluster_client2.go
│   └── server.go
├── config
│   └── config.yaml
├── manifest
│   ├── cookiemonster-cm-config.yaml
│   ├── cookiemonster-deployment.yaml
│   ├── cookiemonster-rbac.yaml
│   └── cookiemonster-service.yaml
├── pkg
│   ├── domain
│   └── handler
└── vendor
    └── vendor.json&lt;/pre&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;vendor 디렉토리 밑으로 디펜던시 module 을 다운로드 받습니다.&lt;/p&gt;&lt;pre class=&quot;EnlighterJSRAW&quot; data-enlighter-language=&quot;null&quot;&gt;$ govendor get github.com/seungkyua/cookiemonster2

$ tree -L 2 .
.
├── Dockerfile.cookiemonster
├── LICENSE
├── Makefile
├── README.md
├── cmd
│   ├── cluster_client.go
│   ├── cluster_client2.go
│   └── server.go
├── config
│   └── config.yaml
├── manifest
│   ├── cookiemonster-cm-config.yaml
│   ├── cookiemonster-deployment.yaml
│   ├── cookiemonster-rbac.yaml
│   └── cookiemonster-service.yaml
├── pkg
│   ├── domain
│   └── handler
└── vendor
    ├── appengine
    ├── appengine_internal
    ├── github.com
    ├── golang.org
    ├── google.golang.org
    ├── gopkg.in
    ├── k8s.io
    ├── sigs.k8s.io
    └── vendor.json&lt;/pre&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;vendor 디렉토리에 dependency module 의 특정버전까지 다운 받을 수 있으니 관리가 편리해 집니다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;현재 버전에서&amp;nbsp;labstack 의 echo v4 모듈에 버그가 있어 v3 로 다시 다운받기 위해 해당 디렉토리를 지우고 다시 다운 받을 수 있습니다. @v3 는 v3&amp;nbsp; 이상의 최신 버전에 해당하는 git 브랜치나 태그를 다운받으라는 의미입니다.&lt;/p&gt;&lt;pre class=&quot;EnlighterJSRAW&quot; data-enlighter-language=&quot;null&quot;&gt;$ rm -rf vendor/github.com/labstack/echo

$ govendor get github.com/labstack/echo@v3&lt;/pre&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;여기서 govendor 의 버그로 echo 는 다운받았지만 하위 디렉토리인&amp;nbsp;echo/middleware 는 다운이 안되었으므로 추가로 vendor.json 을 수정하여 다운로드 받습니다.&lt;/p&gt;&lt;pre class=&quot;EnlighterJSRAW&quot; data-enlighter-language=&quot;null&quot;&gt;$ vi vendor/vendor.json
{
   &quot;checksumSHA1&quot;: &quot;ynPXfBgVKquHSKkdFWk3oqSYf+g=&quot;,
   &quot;path&quot;: &quot;github.com/labstack/echo&quot;,
   &quot;revision&quot;: &quot;38772c686c76b501f94bd6cd5b77f5842e93b559&quot;,
   &quot;revisionTime&quot;: &quot;2019-01-28T14:12:53Z&quot;,
   &quot;version&quot;: &quot;v3.3.10&quot;,
   &quot;versionExact&quot;: &quot;v3.3.10&quot;
},
{
   &quot;checksumSHA1&quot;: &quot;Rp/k+BJKpaeB9vyjEPFBW4LeFP8=&quot;,
   &quot;path&quot;: &quot;github.com/labstack/echo/middleware&quot;,
   &quot;revision&quot;: &quot;38772c686c76b501f94bd6cd5b77f5842e93b559&quot;,
   &quot;revisionTime&quot;: &quot;2019-01-28T14:12:53Z&quot;,
   &quot;version&quot;: &quot;v3.3.10&quot;,
   &quot;versionExact&quot;: &quot;v3.3.10&quot;
}

$ govendor fetch github.com/labstack/echo/middleware&lt;/pre&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;











































&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/253&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Go</category>
<category>golang</category>
<category>govendor</category>
<category>프로젝트디렉토리구조</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/253</guid>
<comments>https://ahnseungkyu.com/253#entry253comment</comments>
<pubDate>Thu, 28 Feb 2019 16:44:22 +0900</pubDate>
</item>
<item>
<title>Ansible playbook 변수 값 살펴 보기</title>
<link>https://ahnseungkyu.com/252</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;-en-clipboard:true;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;Kubespray 와 같이 많은 role 을 가진 ansible playbook 에서는 선언된 변수와 실제 할당된 값을 살펴보는 것이 쉽지 않습니다. ansible 에서는 이러한 변수들에 대한 값, 특히 hostvar 값을 볼 수 가 있습니다.
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;일단 먼저 inventory 파일인 hosts.ini 로 어떤 host 와 group 이 지정되었는지 확인할 수 있습니다.
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;$ vi inventory/k1-seungkyua/hosts.ini
&lt;/div&gt;&lt;div&gt;[all]
&lt;/div&gt;&lt;div&gt;k1-master01 ip=192.168.30.13
&lt;/div&gt;&lt;div&gt;k1-master02 ip=192.168.30.14
&lt;/div&gt;&lt;div&gt;k1-master03 ip=192.168.30.15
&lt;/div&gt;&lt;div&gt;k1-node01 ip=192.168.30.12
&lt;/div&gt;&lt;div&gt;k1-node02 ip=192.168.30.17
&lt;/div&gt;&lt;div&gt;k1-node03 ip=192.168.30.18
&lt;/div&gt;&lt;div&gt;k1-node04 ip=192.168.30.21
&lt;/div&gt;&lt;div&gt;k1-node05 ip=192.168.30.20
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;[etcd]
&lt;/div&gt;&lt;div&gt;k1-master01
&lt;/div&gt;&lt;div&gt;k1-master02
&lt;/div&gt;&lt;div&gt;k1-master03
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;[kube-master]
&lt;/div&gt;&lt;div&gt;k1-master01
&lt;/div&gt;&lt;div&gt;k1-master02
&lt;/div&gt;&lt;div&gt;k1-master03
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;[kube-node]
&lt;/div&gt;&lt;div&gt;k1-node01
&lt;/div&gt;&lt;div&gt;k1-node02
&lt;/div&gt;&lt;div&gt;k1-node03
&lt;/div&gt;&lt;div&gt;k1-node04
&lt;/div&gt;&lt;div&gt;k1-node05
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;[k8s-cluster:children]
&lt;/div&gt;&lt;div&gt;kube-master
&lt;/div&gt;&lt;div&gt;kube-node
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;다양한 그룹이 있음을 볼 수 있는데 맨 마지막의 k8s-cluster 그룹은 하위로 kube-master 와 kube-node 를 가지고 있으므로, k8s-cluster 그룹이 모든 노드를 포함한다는 것을 알 수 있습니다.
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;이제 ansible 명령어로 하나의 host 노드 &quot;k1-master01&quot; 에 대해 적용된 변수를 볼 수 있습니다.
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&lt;br /&gt;
&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;$ ansible -i inventory/k1-seungkyua/hosts.ini -m debug -a &quot;var=hostvars['k1-master01']&quot; k8s-cluster
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;이에 대한 결과는 다음과 같습니다.
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;k1-node01 | SUCCESS =&amp;gt; {
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;hostvars['k1-master01']&quot;: {
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;admin_token&quot;: &quot;QVFBTmRVVlh5UmZoTlJBQTMyZTh6Qk5uajV1VElrMDJEbWFwWmc9PQ==&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_all_ipv4_addresses&quot;: [
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;192.168.230.13&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;192.168.30.13&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;172.16.31.64&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;172.17.0.1&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;10.233.0.1&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;10.233.0.3&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;10.233.55.72&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;10.233.18.191&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;],
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_all_ipv6_addresses&quot;: [
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;fe80::3ea8:2aff:fe1c:cfd4&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;fe80::5eb9:1ff:fe8c:67dc&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;fe80::42:98ff:fec4:7ad1&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;fe80::ecee:eeff:feee:eeee&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;fe80::ecee:eeff:feee:eeee&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;],
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_apparmor&quot;: {
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;status&quot;: &quot;enabled&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;},
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_architecture&quot;: &quot;x86_64&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_bios_date&quot;: &quot;05/06/2015&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_bios_version&quot;: &quot;P89&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_cali1845c564081&quot;: {
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;active&quot;: true,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;device&quot;: &quot;cali1845c564081&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;features&quot;: {
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;busy_poll&quot;: &quot;off [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;fcoe_mtu&quot;: &quot;off [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;generic_receive_offload&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;generic_segmentation_offload&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;highdma&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;hw_tc_offload&quot;: &quot;off [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;l2_fwd_offload&quot;: &quot;off [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;large_receive_offload&quot;: &quot;off [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;loopback&quot;: &quot;off [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;netns_local&quot;: &quot;off [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ntuple_filters&quot;: &quot;off [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;receive_hashing&quot;: &quot;off [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;rx_all&quot;: &quot;off [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;rx_checksumming&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;rx_fcs&quot;: &quot;off [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;rx_vlan_filter&quot;: &quot;off [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;rx_vlan_offload&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;rx_vlan_stag_filter&quot;: &quot;off [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;rx_vlan_stag_hw_parse&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;scatter_gather&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tcp_segmentation_offload&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_checksum_fcoe_crc&quot;: &quot;off [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_checksum_ip_generic&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_checksum_ipv4&quot;: &quot;off [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_checksum_ipv6&quot;: &quot;off [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_checksum_sctp&quot;: &quot;off [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_checksumming&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_fcoe_segmentation&quot;: &quot;off [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_gre_segmentation&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_gso_robust&quot;: &quot;off [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_ipip_segmentation&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_lockless&quot;: &quot;on [fixed]&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_nocache_copy&quot;: &quot;off&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_scatter_gather&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_scatter_gather_fraglist&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_sit_segmentation&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_tcp6_segmentation&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_tcp_ecn_segmentation&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_tcp_segmentation&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_udp_tnl_segmentation&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_vlan_offload&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tx_vlan_stag_hw_insert&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;udp_fragmentation_offload&quot;: &quot;on&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;vlan_challenged&quot;: &quot;off [fixed]&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;},
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;hw_timestamp_filters&quot;: [],
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ipv6&quot;: [
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;address&quot;: &quot;fe80::ecee:eeff:feee:eeee&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;prefix&quot;: &quot;64&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;scope&quot;: &quot;link&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;],
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;macaddress&quot;: &quot;ee:ee:ee:ee:ee:ee&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;mtu&quot;: 1500,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;promisc&quot;: false,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;speed&quot;: 10000,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;timestamping&quot;: [
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;rx_software&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;software&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;],
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;type&quot;: &quot;ether&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;},
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_uptime_seconds&quot;: 46351496,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_user_dir&quot;: &quot;/root&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_user_gecos&quot;: &quot;root&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_user_gid&quot;: 0,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_user_id&quot;: &quot;root&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_user_shell&quot;: &quot;/bin/bash&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_user_uid&quot;: 0,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_userspace_architecture&quot;: &quot;x86_64&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_userspace_bits&quot;: &quot;64&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_verbosity&quot;: 0,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_version&quot;: {
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;full&quot;: &quot;2.7.7&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;major&quot;: 2,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;minor&quot;: 7,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;revision&quot;: 7,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;string&quot;: &quot;2.7.7&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;},
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_virtualization_role&quot;: &quot;host&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ansible_virtualization_type&quot;: &quot;kvm&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;calico_ip_auto_method&quot;: &quot;can-reach=8.8.8.8&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ceph_version&quot;: &quot;mimic&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;dashboard_enabled&quot;: true,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;docker_insecure_registries&quot;: [
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;tacorepo:5000&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;],
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;gather_subset&quot;: [
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;all&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;],
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;global_as_num&quot;: &quot;65000&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;group_names&quot;: [
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;etcd&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k8s-cluster&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;kube-master&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;],
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;groups&quot;: {
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;all&quot;: [
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-master01&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-master02&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-master03&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-node01&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-node02&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-node03&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-node04&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-node05&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;],
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;etcd&quot;: [
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-master01&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-master02&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-master03&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;],
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k8s-cluster&quot;: [
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-node01&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-node02&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-node03&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-node04&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-node05&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-master01&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-master02&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-master03&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;],
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;kube-master&quot;: [
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-master01&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-master02&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-master03&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;],
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;kube-node&quot;: [
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-node01&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-node02&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-node03&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-node04&quot;,
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;k1-node05&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;],
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ungrouped&quot;: []
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;},
&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;helm_enabled&quot;: true,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ingress_nginx_enabled&quot;: true,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ingress_nginx_host_network&quot;: true,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ingress_nginx_node_count&quot;: 1,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ingress_nginx_nodeselector&quot;: {&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;node-role.kubernetes.io/ingress&quot;: &quot;true&quot;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;},&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;inventory_dir&quot;: &quot;/home/seungkyua/deploy/my-kubespray/inventory/k1-seungkyua&quot;,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;inventory_file&quot;: &quot;/home/seungkyua/deploy/my-kubespray/inventory/k1-seungkyua/hosts.ini&quot;,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;inventory_hostname&quot;: &quot;k1-master01&quot;,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;inventory_hostname_short&quot;: &quot;k1-master01&quot;,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ip&quot;: &quot;192.168.30.13&quot;,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;ipip_mode&quot;: &quot;Never&quot;,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;kubeadm_enabled&quot;: true,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;kubeconfig_localhost&quot;: true,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;kubectl_localhost&quot;: true,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;local_volume_provisioner_enabled&quot;: true,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;module_setup&quot;: true,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;monitors&quot;: &quot;192.168.30.23:6789,192.168.30.24:6789,192.168.30.25:6789&quot;,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;nat_outgoing&quot;: true,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;omit&quot;: &quot;__omit_place_holder__4491a572b322dda2550f5ce4d8005946f456f738&quot;,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;override_system_hostname&quot;: false,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;peer_with_router&quot;: true,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;peers&quot;: [&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;as&quot;: &quot;65000&quot;,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;router_id&quot;: &quot;192.168.30.1&quot;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;],&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;playbook_dir&quot;: &quot;/home/seungkyua/deploy/my-kubespray&quot;,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;pool_name&quot;: &quot;kubes&quot;,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;populate_inventory_to_hosts_file&quot;: false,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;storageclass_name&quot;: &quot;rbd&quot;,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;user_id&quot;: &quot;kube&quot;,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;user_secret_namespace&quot;: &quot;openstack&quot;,&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#941100&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;user_token&quot;: &quot;QVFDdC9CcFlpZ0o3TVJBQTV2eStjbDM5RXNLcFkzQyt0WEVHckE9PQ==&quot;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}
&lt;/div&gt;&lt;div&gt;}
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/252&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Ansible</category>
<category>Ansible</category>
<category>hostvars</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/252</guid>
<comments>https://ahnseungkyu.com/252#entry252comment</comments>
<pubDate>Tue, 26 Feb 2019 16:45:47 +0900</pubDate>
</item>
<item>
<title>Kubespray 를 쉽게 활용할 수 있는 my-kubespray</title>
<link>https://ahnseungkyu.com/251</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;https://github.com/seungkyua/my-kubespray&lt;/p&gt;&lt;h1 cid=&quot;n0&quot; mdtype=&quot;heading&quot; class=&quot;md-end-block md-heading md-focus&quot; style=&quot;box-sizing: border-box; break-after: avoid-page; break-inside: avoid; font-size: 2.25em; margin-top: 1rem; margin-bottom: 1rem; position: relative; line-height: 1.2; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238); white-space: pre-wrap; width: inherit; caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); font-family: &amp;quot;Open Sans&amp;quot;, &amp;quot;Clear Sans&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; text-size-adjust: auto;&quot;&gt;&lt;span md-inline=&quot;plain&quot; class=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;my-kubespray&lt;/span&gt;&lt;/h1&gt;&lt;p cid=&quot;n2&quot; mdtype=&quot;paragraph&quot; class=&quot;md-end-block&quot; style=&quot;box-sizing: border-box; orphans: 4; margin: 0.8em 0px; white-space: pre-wrap; width: inherit; position: relative; caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); font-family: &amp;quot;Open Sans&amp;quot;, &amp;quot;Clear Sans&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; text-size-adjust: auto;&quot;&gt;&lt;span md-inline=&quot;plain&quot; class=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;You can easily add your custom logic without modifying kubespray.&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n41&quot; mdtype=&quot;paragraph&quot; class=&quot;md-end-block&quot; style=&quot;box-sizing: border-box; orphans: 4; margin: 0.8em 0px; white-space: pre-wrap; width: inherit; position: relative; caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); font-family: &amp;quot;Open Sans&amp;quot;, &amp;quot;Clear Sans&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; text-size-adjust: auto;&quot;&gt;&lt;span md-inline=&quot;plain&quot; class=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;The my-kubespray has serveral parameters to override and can deploy ceph rbd provisioner into namespace.&lt;/span&gt;&lt;/p&gt;&lt;h2 cid=&quot;n43&quot; mdtype=&quot;heading&quot; class=&quot;md-end-block md-heading&quot; style=&quot;box-sizing: border-box; break-after: avoid-page; break-inside: avoid; font-size: 1.75em; margin-top: 1rem; margin-bottom: 1rem; position: relative; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238); white-space: pre-wrap; width: inherit; caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); font-family: &amp;quot;Open Sans&amp;quot;, &amp;quot;Clear Sans&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; text-size-adjust: auto;&quot;&gt;&lt;span md-inline=&quot;plain&quot; class=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;Prerequisites&lt;/span&gt;&lt;/h2&gt;&lt;ul class=&quot;ul-list&quot; cid=&quot;n19&quot; mdtype=&quot;list&quot; data-mark=&quot;-&quot; style=&quot;box-sizing: border-box; margin: 0.8em 0px; padding-left: 30px; position: relative; caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); font-family: &amp;quot;Open Sans&amp;quot;, &amp;quot;Clear Sans&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; text-size-adjust: auto;&quot;&gt;&lt;li class=&quot;md-list-item&quot; cid=&quot;n18&quot; mdtype=&quot;list_item&quot; style=&quot;box-sizing: border-box; margin: 0px; position: relative;&quot;&gt;&lt;p cid=&quot;n17&quot; mdtype=&quot;paragraph&quot; class=&quot;md-end-block&quot; style=&quot;box-sizing: border-box; orphans: 4; margin-right: 0px; margin-bottom: 0.5rem; margin-left: 0px; white-space: pre-wrap; position: relative;&quot;&gt;&lt;span md-inline=&quot;plain&quot; class=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;All servers must have the same user, and the user must set root permissions to NOPASSWD in sudo.&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li class=&quot;md-list-item&quot; cid=&quot;n22&quot; mdtype=&quot;list_item&quot; style=&quot;box-sizing: border-box; margin: 0px; position: relative;&quot;&gt;&lt;p cid=&quot;n20&quot; mdtype=&quot;paragraph&quot; class=&quot;md-end-block&quot; style=&quot;box-sizing: border-box; orphans: 4; margin-right: 0px; margin-bottom: 0.5rem; margin-left: 0px; white-space: pre-wrap; position: relative;&quot;&gt;&lt;span md-inline=&quot;plain&quot; class=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;In the deployment node (or master 1 node), you need to enable ssh access to all other servers (including localhost) without a password to the corresponding account.&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li class=&quot;md-list-item&quot; cid=&quot;n25&quot; mdtype=&quot;list_item&quot; style=&quot;box-sizing: border-box; margin: 0px; position: relative;&quot;&gt;&lt;p cid=&quot;n23&quot; mdtype=&quot;paragraph&quot; class=&quot;md-end-block&quot; style=&quot;box-sizing: border-box; orphans: 4; margin-right: 0px; margin-bottom: 0.5rem; margin-left: 0px; white-space: pre-wrap; position: relative;&quot;&gt;&lt;span md-inline=&quot;plain&quot; class=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;Register all cluster servers in the /etc/hosts file.&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li class=&quot;md-list-item&quot; cid=&quot;n28&quot; mdtype=&quot;list_item&quot; style=&quot;box-sizing: border-box; margin: 0px; position: relative;&quot;&gt;&lt;p cid=&quot;n26&quot; mdtype=&quot;paragraph&quot; class=&quot;md-end-block&quot; style=&quot;box-sizing: border-box; orphans: 4; margin-right: 0px; margin-bottom: 0.5rem; margin-left: 0px; white-space: pre-wrap; position: relative;&quot;&gt;&lt;span md-inline=&quot;plain&quot; class=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;Time synchronization between servers with ntp.&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li class=&quot;md-list-item&quot; cid=&quot;n31&quot; mdtype=&quot;list_item&quot; style=&quot;box-sizing: border-box; margin: 0px; position: relative;&quot;&gt;&lt;p cid=&quot;n29&quot; mdtype=&quot;paragraph&quot; class=&quot;md-end-block&quot; style=&quot;box-sizing: border-box; orphans: 4; margin-right: 0px; margin-bottom: 0.5rem; margin-left: 0px; white-space: pre-wrap; position: relative;&quot;&gt;&lt;span md-inline=&quot;plain&quot; style=&quot;box-sizing: border-box;&quot;&gt;Enable network restart with &lt;/span&gt;&lt;span md-inline=&quot;code&quot; spellcheck=&quot;false&quot; class=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;&lt;code style=&quot;box-sizing: border-box; font-family: var(--monospace); border: 1px solid rgb(231, 234, 237); background-color: rgb(243, 244, 244); border-radius: 3px; padding: 0px 2px; font-size: 0.9em;&quot;&gt;systemctl restart network.service&lt;/code&gt;&lt;/span&gt;&lt;span md-inline=&quot;plain&quot; class=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt; .&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li class=&quot;md-list-item&quot; cid=&quot;n34&quot; mdtype=&quot;list_item&quot; style=&quot;box-sizing: border-box; margin: 0px; position: relative;&quot;&gt;&lt;p cid=&quot;n32&quot; mdtype=&quot;paragraph&quot; class=&quot;md-end-block&quot; style=&quot;box-sizing: border-box; orphans: 4; margin-right: 0px; margin-bottom: 0.5rem; margin-left: 0px; white-space: pre-wrap; position: relative;&quot;&gt;&lt;span md-inline=&quot;plain&quot; class=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;Disable firewall such as selinux or ufw.&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li class=&quot;md-list-item&quot; cid=&quot;n37&quot; mdtype=&quot;list_item&quot; style=&quot;box-sizing: border-box; margin: 0px; position: relative;&quot;&gt;&lt;p cid=&quot;n35&quot; mdtype=&quot;paragraph&quot; class=&quot;md-end-block&quot; style=&quot;box-sizing: border-box; orphans: 4; margin-right: 0px; margin-bottom: 0.5rem; margin-left: 0px; white-space: pre-wrap; position: relative;&quot;&gt;&lt;span md-inline=&quot;plain&quot; class=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;swapoff.&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li class=&quot;md-list-item&quot; cid=&quot;n40&quot; mdtype=&quot;list_item&quot; style=&quot;box-sizing: border-box; margin: 0px; position: relative;&quot;&gt;&lt;p cid=&quot;n38&quot; mdtype=&quot;paragraph&quot; class=&quot;md-end-block&quot; style=&quot;box-sizing: border-box; orphans: 4; margin-right: 0px; margin-bottom: 0.5rem; margin-left: 0px; white-space: pre-wrap; position: relative;&quot;&gt;&lt;span md-inline=&quot;plain&quot; class=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;Install python 2.7.x in ansible runner node.  &lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 cid=&quot;n5&quot; mdtype=&quot;heading&quot; class=&quot;md-end-block md-heading&quot; style=&quot;box-sizing: border-box; break-after: avoid-page; break-inside: avoid; font-size: 1.75em; margin-top: 1rem; margin-bottom: 1rem; position: relative; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238); white-space: pre-wrap; width: inherit; caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); font-family: &amp;quot;Open Sans&amp;quot;, &amp;quot;Clear Sans&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; text-size-adjust: auto;&quot;&gt;&lt;span md-inline=&quot;plain&quot; class=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;Quick Start&lt;/span&gt;&lt;/h2&gt;&lt;p cid=&quot;n7&quot; mdtype=&quot;paragraph&quot; class=&quot;md-end-block&quot; style=&quot;box-sizing: border-box; orphans: 4; margin: 0.8em 0px; white-space: pre-wrap; width: inherit; position: relative; caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); font-family: &amp;quot;Open Sans&amp;quot;, &amp;quot;Clear Sans&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; text-size-adjust: auto;&quot;&gt;&lt;span md-inline=&quot;plain&quot; style=&quot;box-sizing: border-box;&quot;&gt;To deploy the cluster you can use :&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;pre spellcheck=&quot;false&quot; class=&quot;md-fences md-end-block ty-contain-cm modeLoaded&quot; lang=&quot;&quot; contenteditable=&quot;false&quot; cid=&quot;n12&quot; mdtype=&quot;fences&quot; style=&quot;box-sizing: border-box; overflow: visible; font-family: var(--monospace); font-size: 0.9em; break-inside: avoid; white-space: normal; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: rgb(248, 248, 248); border: 1px solid rgb(231, 234, 237); border-radius: 3px; padding: 8px 4px 6px; margin-bottom: 15px; margin-top: 15px; width: inherit; caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); text-size-adjust: auto; position: relative !important;&quot;&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;# Download kubespray and my-kubespray&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;$ git clone https://github.com/kubernetes-sigs/kubespray.git&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;$ git clone https://github.com/seungkyua/my-kubespray.git&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;&lt;span cm-text=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;# Change directory into my-kubespray&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;$ cd my-kubespray&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;&lt;span cm-text=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;# Install dependencies from ``requirements.txt``&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;$ sudo pip install -r ../kubespray/requirements.txt&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;&lt;span cm-text=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;# Copy ``inventory/k2-seungkyua`` as ``inventory/mycluster``&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;$ cp -rfp inventory/k2-seungkyua inventory/mycluster&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;&lt;span cm-text=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;# Update Ansible inventory file&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;$ vi inventory/mycluster/hosts.ini&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;[all]&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;k2-master01 ip=192.168.30.151&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;k2-master02 ip=192.168.30.152&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;k2-master03 ip=192.168.30.153&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;k2-ctrl01 ip=192.168.30.154&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;k2-ctrl02 ip=192.168.30.155&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;k2-ctrl03 ip=192.168.30.156&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;k2-cn01 ip=192.168.30.157&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;&lt;span cm-text=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;[etcd]&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;k2-master01&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;k2-master02&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;k2-master03&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;&lt;span cm-text=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;[kube-master]&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;k2-master01&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;k2-master02&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;k2-master03&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;&lt;span cm-text=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;[kube-node]&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;k2-ctrl01&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;k2-ctrl02&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;k2-ctrl03&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;k2-cn01&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;&lt;span cm-text=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;[k8s-cluster:children]&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;kube-node&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;kube-master&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;&lt;span cm-text=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;# Review and change parameters under ``inventory/mycluster/group_vars/k8s-cluster.yml``&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;$ cat inventory/mycluster/group_vars/k8s-cluster.yml&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;populate_inventory_to_hosts_file: false&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;override_system_hostname: false&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;helm_enabled: true&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;etcd_memory_limit: 8192M&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;kubeconfig_localhost: true&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;kubectl_localhost: true&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;ipip_mode: Never&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;calico_ip_auto_method: &quot;can-reach=8.8.8.8&quot;&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;kubeadm_enabled: true&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;docker_insecure_registries:&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;  - seungkyua:5000&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;dashboard_enabled: true&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;local_volume_provisioner_enabled: true&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;ingress_nginx_enabled: true&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;ingress_nginx_host_network: true&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;ingress_nginx_nodeselector:&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;  node-role.kubernetes.io/ingress: true&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;ceph_version: mimic&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;storageclass_name: rbd&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;monitors: 192.168.30.23:6789,192.168.30.24:6789,192.168.30.25:6789&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;admin_token: QBTEBmRVVlh5UmZoTlJBQTMyZTh6Qk5uajV1VElrMDJEbWFwWmc9WA==&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;user_secret_namespace: default&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;pool_name: kubes&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;user_id: kube&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;user_token: QEFESG9CcFlpZ0o3TVJBQTV2eStjbDM5RXNLcFkzQyt0WEVHckE9WA==&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;&lt;span cm-text=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;# Run Ansible Playbook to deploy kubernetes cluster&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;$ ansible-playbook -b -f 30 -i inventory/mycluster/hosts.ini ../kubespray/cluster.yml&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;&lt;span cm-text=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;# Run Ansible Playbook to deploy ceph rbd provisioner&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;$ ansible-playbook -b -f 30 -i inventory/mycluster/hosts.ini storage.yml&lt;/span&gt;&lt;/pre&gt;&lt;h2 cid=&quot;n10&quot; mdtype=&quot;heading&quot; class=&quot;md-end-block md-heading&quot; style=&quot;box-sizing: border-box; break-after: avoid-page; break-inside: avoid; font-size: 1.75em; margin-top: 1rem; margin-bottom: 1rem; position: relative; line-height: 1.225; cursor: text; padding-bottom: 0.3em; border-bottom: 1px solid rgb(238, 238, 238); white-space: pre-wrap; width: inherit; caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); font-family: &amp;quot;Open Sans&amp;quot;, &amp;quot;Clear Sans&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; text-size-adjust: auto;&quot;&gt;&lt;span md-inline=&quot;plain&quot; style=&quot;box-sizing: border-box;&quot;&gt;Miscellaneous&lt;/span&gt;&lt;/h2&gt;&lt;p cid=&quot;n45&quot; mdtype=&quot;paragraph&quot; class=&quot;md-end-block&quot; style=&quot;box-sizing: border-box; orphans: 4; margin: 0.8em 0px; white-space: pre-wrap; width: inherit; position: relative; caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); font-family: &amp;quot;Open Sans&amp;quot;, &amp;quot;Clear Sans&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; text-size-adjust: auto;&quot;&gt;&lt;span md-inline=&quot;plain&quot; style=&quot;box-sizing: border-box;&quot;&gt;After installation, you can find the artifacts which are &lt;/span&gt;&lt;span md-inline=&quot;code&quot; spellcheck=&quot;false&quot; style=&quot;box-sizing: border-box;&quot;&gt;&lt;code style=&quot;box-sizing: border-box; font-family: var(--monospace); border: 1px solid rgb(231, 234, 237); background-color: rgb(243, 244, 244); border-radius: 3px; padding: 0px 2px; font-size: 0.9em;&quot;&gt;kubectl&lt;/code&gt;&lt;/span&gt;&lt;span md-inline=&quot;plain&quot; style=&quot;box-sizing: border-box;&quot;&gt; and &lt;/span&gt;&lt;span md-inline=&quot;code&quot; spellcheck=&quot;false&quot; style=&quot;box-sizing: border-box;&quot;&gt;&lt;code style=&quot;box-sizing: border-box; font-family: var(--monospace); border: 1px solid rgb(231, 234, 237); background-color: rgb(243, 244, 244); border-radius: 3px; padding: 0px 2px; font-size: 0.9em;&quot;&gt;admin.conf&lt;/code&gt;&lt;/span&gt;&lt;span md-inline=&quot;plain&quot; style=&quot;box-sizing: border-box;&quot;&gt; in inventory/mycluster/artifacts directorin on deploy node(ansible runner).&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;pre spellcheck=&quot;false&quot; class=&quot;md-fences md-end-block ty-contain-cm modeLoaded&quot; lang=&quot;&quot; contenteditable=&quot;false&quot; cid=&quot;n52&quot; mdtype=&quot;fences&quot; style=&quot;box-sizing: border-box; overflow: visible; font-family: var(--monospace); font-size: 0.9em; break-inside: avoid; white-space: normal; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: rgb(248, 248, 248); border: 1px solid rgb(231, 234, 237); border-radius: 3px; padding: 8px 4px 6px; margin-bottom: 15px; margin-top: 15px; width: inherit; caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); text-size-adjust: auto; position: relative !important;&quot;&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;$ ls -al inventory/mycluster/artifacts&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;total 173620&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;drwxr-x--- 2 seungkyua seungkyua &amp;nbsp; &amp;nbsp;  4096 Feb 22 05:25 .&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;drwxrwxr-x 4 seungkyua seungkyua &amp;nbsp; &amp;nbsp;  4096 Feb 22 02:38 ..&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;-rw-r----- 1 seungkyua seungkyua &amp;nbsp; &amp;nbsp;  5449 Feb 22 05:25 admin.conf&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;-rwxr-xr-x 1 seungkyua seungkyua 177766296 Feb 22 05:25 kubectl&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;-rwxr-xr-x 1 seungkyua seungkyua &amp;nbsp; &amp;nbsp; &amp;nbsp;  65 Feb 22 05:25 kubectl.sh&lt;/span&gt;&lt;/pre&gt;&lt;p cid=&quot;n50&quot; mdtype=&quot;paragraph&quot; class=&quot;md-end-block&quot; style=&quot;box-sizing: border-box; orphans: 4; margin: 0.8em 0px; white-space: pre-wrap; width: inherit; position: relative; caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); font-family: &amp;quot;Open Sans&amp;quot;, &amp;quot;Clear Sans&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Arial, sans-serif; text-size-adjust: auto;&quot;&gt;&lt;span md-inline=&quot;plain&quot; style=&quot;box-sizing: border-box;&quot;&gt;If desired, copy &lt;/span&gt;&lt;span md-inline=&quot;code&quot; spellcheck=&quot;false&quot; style=&quot;box-sizing: border-box;&quot;&gt;&lt;code style=&quot;box-sizing: border-box; font-family: var(--monospace); border: 1px solid rgb(231, 234, 237); background-color: rgb(243, 244, 244); border-radius: 3px; padding: 0px 2px; font-size: 0.9em;&quot;&gt;admin.conf&lt;/code&gt;&lt;/span&gt;&lt;span md-inline=&quot;plain&quot; style=&quot;box-sizing: border-box;&quot;&gt; to &lt;/span&gt;&lt;span md-inline=&quot;code&quot; spellcheck=&quot;false&quot; style=&quot;box-sizing: border-box;&quot;&gt;&lt;code style=&quot;box-sizing: border-box; font-family: var(--monospace); border: 1px solid rgb(231, 234, 237); background-color: rgb(243, 244, 244); border-radius: 3px; padding: 0px 2px; font-size: 0.9em;&quot;&gt;~/.kube/config&lt;/code&gt;&lt;/span&gt;&lt;span md-inline=&quot;plain&quot; style=&quot;box-sizing: border-box;&quot;&gt; and &lt;/span&gt;&lt;span md-inline=&quot;code&quot; spellcheck=&quot;false&quot; class=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;&lt;code style=&quot;box-sizing: border-box; font-family: var(--monospace); border: 1px solid rgb(231, 234, 237); background-color: rgb(243, 244, 244); border-radius: 3px; padding: 0px 2px; font-size: 0.9em;&quot;&gt;kubectl&lt;/code&gt;&lt;/span&gt;&lt;span md-inline=&quot;plain&quot; class=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt; to &lt;/span&gt;&lt;span md-inline=&quot;code&quot; spellcheck=&quot;false&quot; class=&quot;&quot; style=&quot;box-sizing: border-box;&quot;&gt;&lt;code style=&quot;box-sizing: border-box; font-family: var(--monospace); border: 1px solid rgb(231, 234, 237); background-color: rgb(243, 244, 244); border-radius: 3px; padding: 0px 2px; font-size: 0.9em;&quot;&gt;/usr/local/bin/kubectl&lt;/code&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;pre mdtype=&quot;fences&quot; cid=&quot;n53&quot; contenteditable=&quot;false&quot; lang=&quot;&quot; class=&quot;md-fences md-end-block ty-contain-cm modeLoaded&quot; spellcheck=&quot;false&quot; style=&quot;box-sizing: border-box; overflow: visible; font-family: var(--monospace); font-size: 0.9em; break-inside: avoid; white-space: normal; background-image: inherit; background-size: inherit; background-attachment: inherit; background-origin: inherit; background-clip: inherit; background-color: rgb(248, 248, 248); border: 1px solid rgb(231, 234, 237); border-radius: 3px; padding: 8px 4px 6px; margin-bottom: 15px; margin-top: 15px; width: inherit; caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); text-size-adjust: auto; position: relative !important;&quot;&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;$ mkdir -p ~/.kube&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;$ cp inventory/mycluster/artifacts/admin.conf ~/.kube/config&lt;/span&gt;&lt;br /&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;$ sudo cp inventory/mycluster/artifacts/kubectl /usr/local/bin/kubectl&lt;/span&gt;&lt;/pre&gt;&lt;div&gt;&lt;span role=&quot;presentation&quot; style=&quot;box-sizing: border-box; padding-right: 0.1px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/251&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Kubernetes</category>
<category>kubespray</category>
<category>my-kubespray</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/251</guid>
<comments>https://ahnseungkyu.com/251#entry251comment</comments>
<pubDate>Fri, 22 Feb 2019 16:18:32 +0900</pubDate>
</item>
<item>
<title>Ansible dictionary 변수에서 가변 key 를 사용하는 방법</title>
<link>https://ahnseungkyu.com/250</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;-en-clipboard:true;&quot;&gt;변수의 key 값을 가져오기 위해서는 regex_replace 함수를 사용하여 substring 을 할 수 도 있지만 set_fact 를 이용할 수 도 있습니다.
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;아래 내용은 set_fact 를 활용한 내용입니다.
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;예제는 ingress controller 가 실행될 node label 을 세팅하기 위한 방법입니다.
&lt;/div&gt;&lt;div&gt;node label 은 다음과 같은 명령어로 세팅할 수 있습니다.
&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;$ kubectl label --overwrite node k2-ctrl01 node-role.kubernetes.io/ingress=true
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;먼저 변수를 세팅하는 defaults/main.yml 파일은 다음과 같습니다.
&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;ingress_nginx_nodeselector:&lt;br /&gt;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;node-role.kubernetes.io/ingress: &quot;true&quot;
&lt;/div&gt;&lt;div&gt;ingress_nginx_node_count: 1
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;ingress_nginx_nodeselector 의 dict 값은&amp;nbsp;node-role.kubernetes.io/ingress: &quot;true&quot; 인데&amp;nbsp;node-role.kubernetes.io 는 key 값으로 이 값이 변경될 수 있으므로 key 를 사용하기에는 어렵습니다.
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;key 값을 유동적으로 활용하기 위해서는 set_fact 를 활용합니다.
&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;- name: Set ingress nginx node role
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;set_fact:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ingress_nginx_node_role:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;key: &quot;{{ item.key }}&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;value: &quot;{{ item.value }}&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;with_dict: &quot;{{ ingress_nginx_nodeselector }}&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;when:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- inventory_hostname == groups['kube-master'][0]
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;위 태스크가 실행되면&amp;nbsp;ingress_nginx_node_role 변수에 {&quot;key&quot; : &quot;node-role.kubernetes.io/ingress&quot;, &quot;value&quot; :&amp;nbsp;&quot;true&quot;} 라고 저장됩니다.
&lt;/div&gt;&lt;div&gt;그럼 이제 쉽게 ingress_nginx_node_role.key 로 해당 값을 가져올 수 있습니다.
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;- name: Set ingress nginx node list
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;set_fact:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ingress_nginx_node_list:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- &quot;{{ groups['kube-node'][item|int] }}&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;with_sequence: start=0 end={{ (ingress_nginx_node_count-1)|int }}
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;when:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- inventory_hostname == groups['kube-master'][0]
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;- name: NGINX Ingress Controller | Set node label
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;shell: |
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{{ bin_dir }}/kubectl label --overwrite node {{ item }} {{ ingress_nginx_node_role.key }}={{ ingress_nginx_node_role.value }}
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;loop: &quot;{{ ingress_nginx_node_list }}&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;when:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- inventory_hostname == groups['kube-master'][0]
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/p&gt;&lt;div&gt;label 을 세팅하기 전에 node 를 선택해야 하기 때문에 node 를 선택하는 &quot;Set ingress nginx node list&quot; 태스크를 먼저 수행했고 &quot;NGINX Ingress Controller | Set node label&quot; 태스크가 node label 을 지정하는 명령어 입니다.&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&amp;nbsp;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/250&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Ansible</category>
<category>ansible variable key</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/250</guid>
<comments>https://ahnseungkyu.com/250#entry250comment</comments>
<pubDate>Fri, 22 Feb 2019 11:29:00 +0900</pubDate>
</item>
<item>
<title>Kubernetes Node 가 NotReady 일 때 - inotify_add_watch</title>
<link>https://ahnseungkyu.com/249</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;Kubernetes Node 가 NotReady 인 경우&amp;nbsp;해결을 위해서&amp;nbsp;제일 먼저 해당 노드의 syslog 를 확인 하는 것이 좋다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;-en-clipboard:true;&quot;&gt;## Node 의 syslog 확인 (ubuntu 인 경우)&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;# vi &lt;b&gt;/etc/log/syslog&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;Feb 20 12:14:49 k1-node01 kubelet[31100]: E0220 12:14:49.401890&amp;nbsp;&amp;nbsp;&amp;nbsp;31100 raw.go:146] Failed to watch directory &quot;/sys/fs/cgroup/devices/system.slice&quot;: &lt;b&gt;inotify_add_watch&lt;/b&gt; /sys/fs/cgroup/devices/system.slice/run-ref5f878051f440b98dfd9bd843a01b58.scope: &lt;b&gt;no space left on device
&lt;/b&gt;&lt;/div&gt;&lt;div&gt;Feb 20 12:14:49 k1-node01 kubelet[31100]: F0220 12:14:49.401909&amp;nbsp;&amp;nbsp;&amp;nbsp;31100 kubelet.go:1369] Failed to start cAdvisor inotify_add_watch /sys/fs/cgroup/devices/system.slice/run-ref5f878051f440b98dfd9bd843a01b58.scope: no space left on device
&lt;/div&gt;&lt;div&gt;Feb 20 12:14:49 k1-node01 kubelet[31100]: E0220 12:14:49.640153&amp;nbsp;&amp;nbsp;&amp;nbsp;31100 kubelet.go:2266] node &quot;k1-node01&quot; not found
&lt;/div&gt;&lt;div&gt;Feb 20 12:14:49 k1-node01 systemd[1]: kubelet.service: Main process exited, code=exited, status=255/n/a
&lt;/div&gt;&lt;div&gt;Feb 20 12:14:49 k1-node01 systemd[1]: kubelet.service: Unit entered failed state.
&lt;/div&gt;&lt;div&gt;Feb 20 12:14:49 k1-node01 systemd[1]: kubelet.service: Failed with result 'exit-code'.
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;위와 같이 inotify_add_watch 에서 no space left on device 로 에러가 날 경우에 sysctl 로 값을 늘려줘야 한다.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;##&amp;nbsp;fs.inotify.max_user_watches 값을 늘려줌
&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# vi &lt;b&gt;/etc/sysctl.d/99-sysctl.conf
&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;net.ipv4.ip_forward=1
&lt;/div&gt;&lt;div&gt;net.ipv4.ip_local_reserved_ports=30000-32767
&lt;/div&gt;&lt;div&gt;net.bridge.bridge-nf-call-iptables=1
&lt;/div&gt;&lt;div&gt;net.bridge.bridge-nf-call-arptables=1
&lt;/div&gt;&lt;div&gt;net.bridge.bridge-nf-call-ip6tables=1
&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(204, 61, 61);&quot;&gt;fs.inotify.max_user_watches=1048576&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;해당 값을 적용하고 나서 kubelet 이 activating 상태이거나 failed 상태인 경우가 많으므로 아래와 같이 kubelet 을 재 시작해 준다.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;## sysctl 로 적용 및 kubelet 재실행&lt;/div&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/p&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;div&gt;# sysctl -p
&lt;/div&gt;&lt;div&gt;# sudo systemctl restart kubelet&amp;nbsp;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/249&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Kubernetes</category>
<category>inotify_add_watch</category>
<category>kubernetes</category>
<category>node</category>
<category>NotReady</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/249</guid>
<comments>https://ahnseungkyu.com/249#entry249comment</comments>
<pubDate>Wed, 20 Feb 2019 12:51:28 +0900</pubDate>
</item>
<item>
<title>kubernetes 에서 rbd provisioner 활용하기</title>
<link>https://ahnseungkyu.com/248</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;kubernetes 에서 ceph rbd provisioner 활용 방법입니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;-en-clipboard:true;&quot;&gt;1. 먼저 rbd provisioner 가 사용할 rbac 권한 yaml 파일을 만듭니다.&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;div&gt;# vi rbd-rbac.yaml
&lt;/div&gt;&lt;div&gt;---
&lt;/div&gt;&lt;div&gt;kind: ClusterRole
&lt;/div&gt;&lt;div&gt;apiVersion: rbac.authorization.k8s.io/v1
&lt;/div&gt;&lt;div&gt;metadata:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;name: rbd-provisioner
&lt;/div&gt;&lt;div&gt;rules:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;- apiGroups: [&quot;&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resources: [&quot;persistentvolumes&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;, &quot;create&quot;, &quot;delete&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;- apiGroups: [&quot;&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resources: [&quot;persistentvolumeclaims&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;, &quot;update&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;- apiGroups: [&quot;storage.k8s.io&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resources: [&quot;storageclasses&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;- apiGroups: [&quot;&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resources: [&quot;events&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;verbs: [&quot;create&quot;, &quot;update&quot;, &quot;patch&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;- apiGroups: [&quot;&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resources: [&quot;services&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resourceNames: [&quot;kube-dns&quot;,&quot;coredns&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;verbs: [&quot;list&quot;, &quot;get&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;- apiGroups: [&quot;&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resources: [&quot;endpoints&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;, &quot;create&quot;, &quot;update&quot;, &quot;patch&quot;]
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;---
&lt;/div&gt;&lt;div&gt;kind: ClusterRoleBinding
&lt;/div&gt;&lt;div&gt;apiVersion: rbac.authorization.k8s.io/v1
&lt;/div&gt;&lt;div&gt;metadata:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;name: rbd-provisioner
&lt;/div&gt;&lt;div&gt;subjects:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;- kind: ServiceAccount
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;name: rbd-provisioner
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;namespace: kube-system
&lt;/div&gt;&lt;div&gt;roleRef:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;kind: ClusterRole
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;name: rbd-provisioner
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;apiGroup: rbac.authorization.k8s.io
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;---
&lt;/div&gt;&lt;div&gt;apiVersion: v1
&lt;/div&gt;&lt;div&gt;kind: ServiceAccount
&lt;/div&gt;&lt;div&gt;metadata:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;name: rbd-provisioner
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;namespace: kube-system
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;---
&lt;/div&gt;&lt;div&gt;apiVersion: rbac.authorization.k8s.io/v1
&lt;/div&gt;&lt;div&gt;kind: Role
&lt;/div&gt;&lt;div&gt;metadata:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;name: rbd-provisioner
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;namespace: kube-system
&lt;/div&gt;&lt;div&gt;rules:
&lt;/div&gt;&lt;div&gt;- apiGroups: [&quot;&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;resources: [&quot;secrets&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;verbs: [&quot;get&quot;]
&lt;/div&gt;&lt;div&gt;- apiGroups: [&quot;&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;resources: [&quot;endpoints&quot;]
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;verbs: [&quot;get&quot;, &quot;list&quot;, &quot;watch&quot;, &quot;create&quot;, &quot;update&quot;, &quot;patch&quot;]
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;---
&lt;/div&gt;&lt;div&gt;apiVersion: rbac.authorization.k8s.io/v1
&lt;/div&gt;&lt;div&gt;kind: RoleBinding
&lt;/div&gt;&lt;div&gt;metadata:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;name: rbd-provisioner
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;namespace: kube-system
&lt;/div&gt;&lt;div&gt;roleRef:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;apiGroup: rbac.authorization.k8s.io
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;kind: Role
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;name: rbd-provisioner
&lt;/div&gt;&lt;div&gt;subjects:
&lt;/div&gt;&lt;div&gt;- kind: ServiceAccount
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;name: rbd-provisioner
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;namespace: kube-system&amp;nbsp;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;#&amp;nbsp;kubectl create -f rbd-rbac.yaml&amp;nbsp;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;2. kube-system 네임스페이스로 admin secret 과 user secret 을&amp;nbsp;생성한다.&lt;/div&gt;&lt;div&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;-en-clipboard:true;&quot;&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;div&gt;# ceph auth get client.admin 2&amp;gt;&amp;amp;1 |grep &quot;key = &quot; |awk '{print&amp;nbsp;&amp;nbsp;$3'} |xargs echo -n &amp;gt; /tmp/secret.admin
&lt;/div&gt;&lt;div&gt;# kubectl create secret generic ceph-secret-admin --type=kubernetes.io/rbd --from-file=/tmp/secret.admin --namespace=kube-system
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;# ceph auth get-key client.kube &amp;gt; /tmp/secret.user
&lt;/div&gt;&lt;div&gt;# kubectl create secret generic ceph-secret-user --type=kubernetes.io/rbd --from-file=/tmp/secret.user --namespace=kube-system&amp;nbsp;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;3. rbd provisioner 가 사용할 storage class yaml 파일을 만듭니다.&lt;/div&gt;&lt;div&gt;pool 이름과 userId 를&amp;nbsp; 정확히 입력해야 합니다.&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;div&gt;# vi rbd-storageclass.yaml
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;---
&lt;/div&gt;&lt;div&gt;apiVersion: storage.k8s.io/v1beta1
&lt;/div&gt;&lt;div&gt;kind: StorageClass
&lt;/div&gt;&lt;div&gt;metadata:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;name: &quot;rbd&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;annotations:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;storageclass.beta.kubernetes.io/is-default-class: &quot;true&quot;
&lt;/div&gt;&lt;div&gt;provisioner: ceph.com/rbd
&lt;/div&gt;&lt;div&gt;reclaimPolicy: Delete
&lt;/div&gt;&lt;div&gt;parameters:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;monitors: &quot;192.168.30.23:6789,192.168.30.24:6789,192.168.30.25:6789&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;adminId: &quot;admin&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;adminSecretName: &quot;ceph-secret-admin&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;adminSecretNamespace: &quot;kube-system&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;pool: &quot;kubes&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;userId: &quot;kube&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;userSecretName: &quot;ceph-secret-user&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;userSecretNamespace: &quot;kube-system&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;imageFormat: &quot;2&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;imageFeatures: &quot;layering&quot;&amp;nbsp;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;# kubectl create -f&amp;nbsp;rbd-storageclass.yaml&amp;nbsp;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;4. rbd provisioner 를 deployment 타입 yaml 로 생성합니다.&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;div&gt;# vi&amp;nbsp;deployment-rbd-provisioner.yaml
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;---
&lt;/div&gt;&lt;div&gt;apiVersion: apps/v1
&lt;/div&gt;&lt;div&gt;kind: Deployment
&lt;/div&gt;&lt;div&gt;metadata:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;name: rbd-provisioner
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;namespace: kube-system
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;labels:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;app: rbd-provisioner
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: v2.1.1-k8s1.11
&lt;/div&gt;&lt;div&gt;spec:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;replicas: 2
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;strategy:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;type: Recreate
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;selector:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;matchLabels:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;app: rbd-provisioner
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: v2.1.1-k8s1.11
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;template:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;metadata:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;labels:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;app: rbd-provisioner
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;version: v2.1.1-k8s1.11
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;spec:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;priorityClassName: system-cluster-critical
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;serviceAccount: rbd-provisioner
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;containers:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: rbd-provisioner
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;image: quay.io/external_storage/rbd-provisioner:v2.1.1-k8s1.11
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;imagePullPolicy: IfNotPresent
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;env:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: PROVISIONER_NAME
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;value: ceph.com/rbd
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: POD_NAME
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;valueFrom:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;fieldRef:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;fieldPath: metadata.name
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;command:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- &quot;/usr/local/bin/rbd-provisioner&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;args:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- &quot;-id=${POD_NAME}&quot;&amp;nbsp;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;# kubectl create -f&amp;nbsp;deployment-rbd-provisioner.yaml&amp;nbsp;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;5. 이제 default 네임스페이스에 테스트를 해 보겠습니다.&lt;/div&gt;&lt;div&gt;먼저 default 네임스페이스에 user secret 을 생성합니다. (rbd provisioner 를 사용하고자 하는 네임스페이스에는 user secret 을 만들어 줘야 합니다.)&lt;/div&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;div&gt;# ceph auth get-key client.kube &amp;gt; /tmp/secret.user
&lt;/div&gt;&lt;div&gt;# kubectl create secret generic ceph-secret-user --type=kubernetes.io/rbd --from-file=/tmp/secret.user &lt;b&gt;--namespace=default&lt;/b&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;6. 테스트용 pod 생성.&lt;/div&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/p&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;div&gt;# vi rbd-test.yaml
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;---
&lt;/div&gt;&lt;div&gt;apiVersion: v1
&lt;/div&gt;&lt;div&gt;kind: PersistentVolumeClaim
&lt;/div&gt;&lt;div&gt;metadata:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;name: rbd-test
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;namespace: default&lt;/div&gt;&lt;div&gt;spec:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;accessModes:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- ReadWriteOnce
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;storageClassName: rbd
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;resources:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;requests:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;storage: 1Gi
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;---
&lt;/div&gt;&lt;div&gt;apiVersion: v1
&lt;/div&gt;&lt;div&gt;kind: Pod
&lt;/div&gt;&lt;div&gt;metadata:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;name: rbd-test
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;namespace: default
&lt;/div&gt;&lt;div&gt;spec:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;containers:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;- name: pod-test
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;image: gcr.io/google_containers/busybox:1.24
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;command:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- &quot;/bin/sh&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;args:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- &quot;-c&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- &quot;touch /mnt/SUCCESS &amp;amp;&amp;amp; exit 0 || exit 1&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;volumeMounts:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: pvc
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mountPath: &quot;/mnt&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;restartPolicy: &quot;Never&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;volumes:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;- name: pvc
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;persistentVolumeClaim:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;claimName: rbd-test&amp;nbsp;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;-en-clipboard:true;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/p&gt;&lt;div style=&quot;box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;&quot;&gt;# kubectl create -f rbd-test.yaml&amp;nbsp;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/248&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Kubernetes</category>
<category>ceph rbd provisioner</category>
<category>kubernetes</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/248</guid>
<comments>https://ahnseungkyu.com/248#entry248comment</comments>
<pubDate>Thu, 14 Feb 2019 23:57:32 +0900</pubDate>
</item>
<item>
<title>Kubernetes Aggregation API 보안 취약점 확인</title>
<link>https://ahnseungkyu.com/247</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;h3&gt;CVE-2018-1002105: proxy request handling in kube-apiserver can leave vulnerable TCP connections&lt;br /&gt;
&lt;/h3&gt;&lt;div&gt;&lt;a href=&quot;https://github.com/kubernetes/kubernetes/issues/71411&quot;&gt;https://github.com/kubernetes/kubernetes/issues/71411&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;h3&gt;&lt;b&gt;[ Enable API Aggregation ]&lt;/b&gt;&lt;/h3&gt;&lt;div&gt;&lt;a href=&quot;https://kubernetes.io/docs/tasks/access-kubernetes-api/configure-aggregation-layer/&quot;&gt;https://kubernetes.io/docs/tasks/access-kubernetes-api/configure-aggregation-layer/&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;## kube-apiserver 에 옵션에 다음과 같이 설정
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;--requestheader-client-ca-file=/etc/kubernetes/ssl/front-proxy-ca.crt
&lt;/div&gt;&lt;div&gt;--requestheader-allowed-names=front-proxy-client
&lt;/div&gt;&lt;div&gt;--requestheader-extra-headers-prefix=X-Remote-Extra-
&lt;/div&gt;&lt;div&gt;--requestheader-group-headers=X-Remote-Group
&lt;/div&gt;&lt;div&gt;--requestheader-username-headers=X-Remote-User
&lt;/div&gt;&lt;div&gt;--proxy-client-cert-file=/etc/kubernetes/ssl/front-proxy-client.crt
&lt;/div&gt;&lt;div&gt;--proxy-client-key-file=/etc/kubernetes/ssl/front-proxy-client.key
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;h3&gt;&lt;b&gt;[ Metrics API 서버 설치 ]&lt;/b&gt;&lt;/h3&gt;&lt;div&gt;$ mkdir -p ~/ahnsk/metric-server &amp;amp;&amp;amp; cd ~/ahnsk
&lt;/div&gt;&lt;div&gt;$ git clone &lt;a href=&quot;https://github.com/seungkyua/metrics-server.git&quot;&gt;https://github.com/seungkyua/metrics-server.git&lt;/a&gt;
&lt;/div&gt;&lt;div&gt;$ cd metrics-server
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;$ kubectl create -f deploy/1.8+/
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;$ kubectl -n kube-system get pods -l k8s-app=metrics-server
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;## metric-server 로그 보기
&lt;/div&gt;&lt;div&gt;kubectl -n kube-system logs $(kubectl get pods --namespace=kube-system -l k8s-app=metrics-server -o name)
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;## metric-server 가 hostname 을 알지 못한다는 로그가 나오면 metric-server 를 변경
&lt;/div&gt;&lt;div&gt;&lt;a href=&quot;https://github.com/kubernetes-incubator/metrics-server/issues/131&quot;&gt;https://github.com/kubernetes-incubator/metrics-server/issues/131&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;$ kubectl edit deployment metrics-server -n kube-system
&lt;/div&gt;&lt;div&gt;image: k8s.gcr.io/metrics-server-amd64:&lt;b&gt;v0.3.&lt;font color=&quot;#941100&quot;&gt;0&lt;/font&gt;&lt;/b&gt;
&lt;/div&gt;&lt;div&gt;&lt;b&gt;command:&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;- /metrics-server&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;- --kubelet-insecure-tls&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;- --kubelet-preferred-address-types=InternalIP&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;h3&gt;[ 취약점 확인 ]
&lt;/h3&gt;&lt;div&gt;## 1.12.2 버전에서는 metric-server 가 node 의 stats 을 가져오고 있음
&lt;/div&gt;&lt;div&gt;$ kubectl version
&lt;/div&gt;&lt;div&gt;Client Version: version.Info{Major:&quot;1&quot;, Minor:&quot;12&quot;, GitVersion:&quot;v1.12.2&quot;, GitCommit:&quot;17c77c7898218073f14c8d573582e8d2313dc740&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2018-10-24T06:43:59Z&quot;, GoVersion:&quot;go1.10.4&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;}
&lt;/div&gt;&lt;div&gt;Server Version: version.Info{Major:&quot;1&quot;, Minor:&quot;12&quot;, GitVersion:&quot;v1.12.2&quot;, GitCommit:&quot;17c77c7898218073f14c8d573582e8d2313dc740&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2018-10-24T06:43:59Z&quot;, GoVersion:&quot;go1.10.4&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;}
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;$ kubectl get --raw /apis/metrics.k8s.io/v1beta1/nodes
&lt;/div&gt;&lt;div&gt;{&quot;kind&quot;:&quot;NodeMetricsList&quot;,&quot;apiVersion&quot;:&quot;metrics.k8s.io/v1beta1&quot;,&quot;metadata&quot;:{&quot;selfLink&quot;:&quot;/apis/metrics.k8s.io/v1beta1/nodes&quot;},&quot;items&quot;:[{&quot;metadata&quot;:{&quot;name&quot;:&quot;k1-master01&quot;,&quot;selfLink&quot;:&quot;/apis/metrics.k8s.io/v1beta1/nodes/k1-master01&quot;,&quot;creationTimestamp&quot;:&quot;2018-12-05T08:38:13Z&quot;},&quot;timestamp&quot;:&quot;2018-12-05T08:37:09Z&quot;,&quot;window&quot;:&quot;30s&quot;,&quot;usage&quot;:{&quot;cpu&quot;:&quot;425054529n&quot;,&quot;memory&quot;:&quot;13992336Ki&quot;}},{&quot;metadata&quot;:{&quot;name&quot;:&quot;k1-master02&quot;,&quot;selfLink&quot;:&quot;/apis/metrics.k8s.io/v1beta1/nodes/k1-master02&quot;,&quot;creationTimestamp&quot;:&quot;2018-12-05T08:38:13Z&quot;},&quot;timestamp&quot;:&quot;2018-12-05T08:37:17Z&quot;,&quot;window&quot;:&quot;30s&quot;,&quot;usage&quot;:{&quot;cpu&quot;:&quot;174426537n&quot;,&quot;memory&quot;:&quot;10275528Ki&quot;}},{&quot;metadata&quot;:{&quot;name&quot;:&quot;k1-master03&quot;,&quot;selfLink&quot;:&quot;/apis/metrics.k8s.io/v1beta1/nodes/k1-master03&quot;,&quot;creationTimestamp&quot;:&quot;2018-12-05T08:38:13Z&quot;},&quot;timestamp&quot;:&quot;2018-12-05T08:37:15Z&quot;,&quot;window&quot;:&quot;30s&quot;,&quot;usage&quot;:{&quot;cpu&quot;:&quot;322881470n&quot;,&quot;memory&quot;:&quot;10741952Ki&quot;}},{&quot;metadata&quot;:{&quot;name&quot;:&quot;k1-node01&quot;,&quot;selfLink&quot;:&quot;/apis/metrics.k8s.io/v1beta1/nodes/k1-node01&quot;,&quot;creationTimestamp&quot;:&quot;2018-12-05T08:38:13Z&quot;},&quot;timestamp&quot;:&quot;2018-12-05T08:37:14Z&quot;,&quot;window&quot;:&quot;30s&quot;,&quot;usage&quot;:{&quot;cpu&quot;:&quot;309956501n&quot;,&quot;memory&quot;:&quot;14327216Ki&quot;}},{&quot;metadata&quot;:{&quot;name&quot;:&quot;k1-node02&quot;,&quot;selfLink&quot;:&quot;/apis/metrics.k8s.io/v1beta1/nodes/k1-node02&quot;,&quot;creationTimestamp&quot;:&quot;2018-12-05T08:38:13Z&quot;},&quot;timestamp&quot;:&quot;2018-12-05T08:37:12Z&quot;,&quot;window&quot;:&quot;30s&quot;,&quot;usage&quot;:{&quot;cpu&quot;:&quot;363826460n&quot;,&quot;memory&quot;:&quot;17359508Ki&quot;}},{&quot;metadata&quot;:{&quot;name&quot;:&quot;k1-node03&quot;,&quot;selfLink&quot;:&quot;/apis/metrics.k8s.io/v1beta1/nodes/k1-node03&quot;,&quot;creationTimestamp&quot;:&quot;2018-12-05T08:38:13Z&quot;},&quot;timestamp&quot;:&quot;2018-12-05T08:37:07Z&quot;,&quot;window&quot;:&quot;30s&quot;,&quot;usage&quot;:{&quot;cpu&quot;:&quot;256312214n&quot;,&quot;memory&quot;:&quot;15248572Ki&quot;}},{&quot;metadata&quot;:{&quot;name&quot;:&quot;k1-node04&quot;,&quot;selfLink&quot;:&quot;/apis/metrics.k8s.io/v1beta1/nodes/k1-node04&quot;,&quot;creationTimestamp&quot;:&quot;2018-12-05T08:38:13Z&quot;},&quot;timestamp&quot;:&quot;2018-12-05T08:37:13Z&quot;,&quot;window&quot;:&quot;30s&quot;,&quot;usage&quot;:{&quot;cpu&quot;:&quot;124689837n&quot;,&quot;memory&quot;:&quot;11814000Ki&quot;}},{&quot;metadata&quot;:{&quot;name&quot;:&quot;k1-node05&quot;,&quot;selfLink&quot;:&quot;/apis/metrics.k8s.io/v1beta1/nodes/k1-node05&quot;,&quot;creationTimestamp&quot;:&quot;2018-12-05T08:38:13Z&quot;},&quot;timestamp&quot;:&quot;2018-12-05T08:37:15Z&quot;,&quot;window&quot;:&quot;30s&quot;,&quot;usage&quot;:{&quot;cpu&quot;:&quot;114905912n&quot;,&quot;memory&quot;:&quot;8340284Ki&quot;}}]}
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;## 1.11.5 패치 적용된 버전에서는 metric-server 가 system:anonymous 계정으로 node 의 stats 을 가져오지 못함
&lt;/div&gt;&lt;div&gt;$ kubectl version
&lt;/div&gt;&lt;div&gt;Client Version: version.Info{Major:&quot;1&quot;, Minor:&quot;11&quot;, GitVersion:&quot;v1.11.3&quot;, GitCommit:&quot;a4529464e4629c21224b3d52edfe0ea91b072862&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2018-09-09T18:02:47Z&quot;, GoVersion:&quot;go1.10.3&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;}
&lt;/div&gt;&lt;div&gt;Server Version: version.Info{Major:&quot;1&quot;, Minor:&quot;11&quot;, GitVersion:&quot;v1.11.5&quot;, GitCommit:&quot;753b2dbc622f5cc417845f0ff8a77f539a4213ea&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2018-11-26T14:31:35Z&quot;, GoVersion:&quot;go1.10.3&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;}
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;$ kubectl get --raw /apis/metrics.k8s.io/v1beta1/nodes
&lt;/div&gt;&lt;div&gt;{&quot;kind&quot;:&quot;NodeMetricsList&quot;,&quot;apiVersion&quot;:&quot;metrics.k8s.io/v1beta1&quot;,&quot;metadata&quot;:{&quot;selfLink&quot;:&quot;/apis/metrics.k8s.io/v1beta1/nodes&quot;},&quot;items&quot;:[]}
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;$ kubectl logs metrics-server-695bdf6996-sg429 -n kube-system
&lt;/div&gt;&lt;div&gt;E1205 08:14:30.157105&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;1 manager.go:102] unable to fully collect metrics: unable to fully scrape metrics from source kubelet_summary:node1: unable to fetch metrics from Kubelet node1 (192.168.0.93): request failed - &quot;403 Forbidden&quot;, response:&quot;Forbidden (user=system:anonymous, verb=get, resource=nodes, subresource=stats)&quot;
&lt;/div&gt;&lt;div&gt;E1205 08:15:30.148565&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;1 manager.go:102] unable to fully collect metrics: unable to fully scrape metrics from source kubelet_summary:node1: unable to fetch metrics from Kubelet node1 (192.168.0.93): request failed - &quot;403 Forbidden&quot;, response:&quot;Forbidden (user=system:anonymous, verb=get, resource=nodes, subresource=stats)&quot;
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;h3&gt;&lt;b&gt;[ work around 로 해결하는 방법 ]&lt;/b&gt;&lt;/h3&gt;&lt;div&gt;&lt;a href=&quot;https://github.com/kubernetes/kubernetes/issues/71411&quot;&gt;https://github.com/kubernetes/kubernetes/issues/71411&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;h4&gt;1. kube-apiserver 옵션에 --anonymous-auth=false 를 넣는 방법 (default 는 true 임)&lt;/h4&gt;&lt;h4&gt;2. 아래 clusterrolebinding 의 system:basic-user 와 system:discovery 에 들어있는 system:unauthenticated Group 을 삭제
&lt;/h4&gt;&lt;div&gt;&lt;a href=&quot;https://kubernetes.io/docs/reference/access-authn-authz/rbac/#default-roles-and-role-bindings&quot;&gt;https://kubernetes.io/docs/reference/access-authn-authz/rbac/#default-roles-and-role-bindings&lt;/a&gt;&lt;/div&gt;&lt;div&gt;$ kubectl get clusterrolebindings system:basic-user -o yaml
&lt;/div&gt;&lt;div&gt;kubectl get clusterrolebindings system:basic-user -o yaml
&lt;/div&gt;&lt;div&gt;apiVersion: rbac.authorization.k8s.io/v1
&lt;/div&gt;&lt;div&gt;kind: ClusterRoleBinding
&lt;/div&gt;&lt;div&gt;metadata:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;annotations:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;rbac.authorization.kubernetes.io/autoupdate: &quot;true&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;creationTimestamp: 2018-11-21T08:44:59Z
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;labels:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;kubernetes.io/bootstrapping: rbac-defaults
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;name: system:basic-user
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;resourceVersion: &quot;113&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;selfLink: /apis/rbac.authorization.k8s.io/v1/clusterrolebindings/system%3Abasic-user
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;uid: bae78dd9-ed69-11e8-b322-3ca82a1c0c40
&lt;/div&gt;&lt;div&gt;roleRef:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;apiGroup: rbac.authorization.k8s.io
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;kind: ClusterRole
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;name: system:basic-user
&lt;/div&gt;&lt;div&gt;subjects:
&lt;/div&gt;&lt;div&gt;- apiGroup: rbac.authorization.k8s.io
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;kind: Group
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;name: system:authenticated
&lt;/div&gt;&lt;div&gt;- apiGroup: rbac.authorization.k8s.io
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;kind: Group
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;name: system:unauthenticated
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;h4&gt;그리고 clusterrole 의 system:basic-user 와 system:discovery 에 세팅된 auto repaired 를 false 로 변경
&lt;/h4&gt;&lt;div&gt;&lt;a href=&quot;https://kubernetes.io/docs/reference/access-authn-authz/rbac/#auto-reconciliation&quot;&gt;https://kubernetes.io/docs/reference/access-authn-authz/rbac/#auto-reconciliation&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;$ kubectl get clusterroles system:basic-user -o yaml
&lt;/div&gt;&lt;div&gt;apiVersion: rbac.authorization.k8s.io/v1
&lt;/div&gt;&lt;div&gt;kind: ClusterRole
&lt;/div&gt;&lt;div&gt;metadata:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;annotations:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;rbac.authorization.kubernetes.io/autoupdate: &quot;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;&lt;b&gt;true&lt;/b&gt;&lt;/span&gt;&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;creationTimestamp: 2018-11-21T08:44:59Z
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;labels:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;kubernetes.io/bootstrapping: rbac-defaults
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;name: system:basic-user
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;resourceVersion: &quot;58&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;selfLink: /apis/rbac.authorization.k8s.io/v1/clusterroles/system%3Abasic-user
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;uid: baae6ff5-ed69-11e8-b322-3ca82a1c0c40
&lt;/div&gt;&lt;div&gt;rules:
&lt;/div&gt;&lt;div&gt;- apiGroups:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;- authorization.k8s.io
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;resources:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;- selfsubjectaccessreviews
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;- selfsubjectrulesreviews
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;verbs:
&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp;- create
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/p&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/247&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Kubernetes</category>
<category>Aggregation API 보안취약점</category>
<category>Kubernetes metric-server</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/247</guid>
<comments>https://ahnseungkyu.com/247#entry247comment</comments>
<pubDate>Wed, 05 Dec 2018 17:52:13 +0900</pubDate>
</item>
<item>
<title>AWS re:Invent 2018 - Keynote with Werner Vogels (CTO) 키노트 요약</title>
<link>https://ahnseungkyu.com/246</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p style=&quot;margin-top: 10px; margin-right: 0px; margin-left: 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px; line-height: 1.3; overflow-wrap: break-word;&quot;&gt;처음에는 대충 볼려고 했는데 내용이 좋아서 끝까지 집중해서 봤네요. 전체 요약해 봤습니다.&lt;/p&gt;&lt;p style=&quot;margin-top: 10px; margin-right: 0px; margin-left: 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px; line-height: 1.3; overflow-wrap: break-word;&quot;&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=femopq3JWJg&quot; data-mce-href=&quot;https://www.youtube.com/watch?v=femopq3JWJg&quot; style=&quot;color: rgb(59, 115, 175) !important;&quot;&gt;AWS re:Invent 2018 - Keynote with Werner Vogels&lt;/a&gt;&lt;/p&gt;&lt;h3 style=&quot;margin: 30px 0px 0px; color: rgb(23, 43, 77); font-size: 16px; line-height: 1.5; font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica;&quot;&gt;2004-12-12 Amazon Oracle 장애 Lessons learned&lt;/h3&gt;&lt;ul data-mce-style=&quot;list-style-type: square;&quot; style=&quot;margin: 10px 0px 0px; list-style-type: square; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px;&quot;&gt;&lt;li&gt;SOA (Service Oriented Architecture) 로 서비스를 Flexible 하게 구성하였으나 Database Oracle의 로깅 코드 버그로 장애 발생, 12시간 동안 크리스마스 시즌 주문을 받지 못함&lt;/li&gt;&lt;li&gt;Oracle 은 SPOF (Single Point of Failure) 이고, Black Box 라 scale, reliability 를 높일 수 있는 방법이 없었음.&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;text-align: center; font-size: 13.3333px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/996FB74D5C0649260E&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws01-2004-12-12-Oracle RAC.png&quot; height=&quot;354&quot; style=&quot;text-align: center; font-size: 13.3333px;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;1차 변경: Sharding 을 통해 데이터를 분산하여 performance 와&amp;nbsp; reliability 를 높힘&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;text-align: center; font-size: 13.3333px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99E242495C06495416&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws02-sharding.png&quot; height=&quot;354&quot; style=&quot;text-align: center; font-size: 13.3333px;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;Reducing your&amp;nbsp;&lt;strong&gt;blast radius&lt;/strong&gt;&amp;nbsp;: 장애가 발생하면 모든 면에서 영향을 최소화 해라.&lt;/li&gt;&lt;li&gt;2차 변경: Cell based architectures 로 변경 (cell 단위 독립적으로 구성, 한 곳에 문제가 생겨도 영향도를 최소화함)&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;text-align: center; font-size: 13.3333px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/997C394D5C06496E0D&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws03-cell-based-architectures.png&quot; height=&quot;353&quot; style=&quot;text-align: center; font-size: 13.3333px;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Cell based Architectures&lt;/strong&gt;: AWS 는 모두 Cell 단위로 구성되어 있음 (심지어 AZ (Availability Zone) 안에서도 Cell 단위로 구성되어 영향도 최소화 했음)&amp;nbsp;→ 근데 왜 한국 Region 은 장애가....???)&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;text-align: center; font-size: 13.3333px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/999B1F445C06498734&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws04-zone.png&quot; height=&quot;355&quot; style=&quot;text-align: center; font-size: 13.3333px;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;text-align: center; font-size: 13.3333px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;text-align: center; font-size: 13.3333px;&quot;&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;AZ 서비스에서 DynamoDB 는 Cell 단위로 구성되어 DB 장애가 일어나도 최소화 됨.&lt;/li&gt;&lt;li&gt;Relational databases: not designed for the cloud (Sharding 을 하더라도 결국 Database 로 인해 서비스가 종속되게 됨)&lt;/li&gt;&lt;li&gt;Decompose the system into&amp;nbsp;&lt;strong&gt;fundamental building blocks&amp;nbsp;&lt;/strong&gt;-&amp;gt; 그래야 multi tenant, fault tolerant, self healing 서비스를 구현 가능&lt;/li&gt;&lt;/ul&gt;&lt;p style=&quot;margin-top: 10px; margin-right: 0px; margin-left: 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px; line-height: 1.3; overflow-wrap: break-word;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3 style=&quot;margin: 30px 0px 0px; color: rgb(23, 43, 77); font-size: 16px; line-height: 1.5; font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica;&quot;&gt;Amazon Aurora: Scaled-out distributed architecture (Database aware storage service)&lt;/h3&gt;&lt;p data-mce-style=&quot;margin-left: 30.0px;&quot; style=&quot;margin-top: 10px; margin-right: 0px; margin-left: 30px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px; line-height: 1.3; overflow-wrap: break-word; text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/999393425C0649C507&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws05-Aurora.png&quot; height=&quot;354&quot; style=&quot;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;ul style=&quot;margin: 10px 0px 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px;&quot;&gt;&lt;li&gt;AWS 에서 가장 빠르게 성장하는 서비스 중에 하나임&lt;/li&gt;&lt;li&gt;AZ 단위로 분산이 가능하고 Cell based Architectures 로 mission critical 한 서비스 구현이 가능&lt;/li&gt;&lt;li&gt;On&amp;nbsp;&lt;strong&gt;quorums&lt;/strong&gt;&amp;nbsp;and&amp;nbsp;&lt;strong&gt;failures&lt;/strong&gt;&amp;nbsp;를 적용하였기에 이런 서비스를 구현 가능했음 (AZ 단위로 분산)&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;text-align: center; font-size: 13.3333px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99F68A495C0649DF14&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws06-MTBF and MTTR.png&quot; height=&quot;354&quot; style=&quot;text-align: center; font-size: 13.3333px;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;text-align: center; font-size: 13.3333px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;text-align: center; font-size: 13.3333px;&quot;&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;AZ 마다 2개의 인스턴스를 띄우고 AZ 가 하나 죽고 다른 AZ 에서 인스턴스 1개가 죽어도 read 는 가능, 하지만 쓰기는 못함&lt;/li&gt;&lt;li&gt;10G 링크로 되어 있어 click 만으로 빠르게 복구되어 MTBF(Mean time between failures) 와 MTTR(Mean time to repair) 를 줄일 수 있음&lt;/li&gt;&lt;li&gt;Aurora 는 log 만 복사하기 때문에 복제 및 복구가 빠름 (storage node 에서 복사가 이루어짐)&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;text-align: center; font-size: 13.3333px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/9945944D5C0649FA36&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws07-log is the database.png&quot; height=&quot;354&quot; style=&quot;text-align: center; font-size: 13.3333px;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;AWS Aurora 는&lt;strong&gt;&amp;nbsp;Cloud native database as a foundation for innovation&amp;nbsp;&lt;/strong&gt;이다.&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;text-align: center; font-size: 13.3333px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/994AFC435C064A130A&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws08-cloud-native-database.png&quot; height=&quot;353&quot; style=&quot;text-align: center; font-size: 13.3333px;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;text-align: center; font-size: 13.3333px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;text-align: center; font-size: 13.3333px;&quot;&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;ASW 유형별 Databases 종류&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/995E314C5C064A2B08&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws09-Purpose-built databases.png&quot; height=&quot;354&quot; style=&quot;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;ul style=&quot;margin: 0px;&quot;&gt;&lt;li&gt;Relational - Amazon Aurora, Amazon RDS&lt;/li&gt;&lt;li&gt;Key Value - Amazon DynamoDB&lt;/li&gt;&lt;li&gt;Document - Amazon DynamoDB&lt;/li&gt;&lt;li&gt;In-Memory - Amazon ElasticCache&lt;/li&gt;&lt;li&gt;Graph - Amazon Neptune&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Time-Series (New) - Amazon Timestream&lt;/strong&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Ledger (New) - Amazon QLDB&lt;/strong&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 style=&quot;margin: 30px 0px 0px; color: rgb(23, 43, 77); font-size: 16px; line-height: 1.5; font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica;&quot;&gt;How to migrate Oracle to DynamoDB&lt;/h3&gt;&lt;ul style=&quot;margin: 10px 0px 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px;&quot;&gt;&lt;li&gt;Amazon item master service : sharding 된 Oracle databases 24개로 구성 (6,000억 레코드가 있으며, 50억 update 가 1day 에 일어남), 1년에 30~40% 정도 증가함&lt;/li&gt;&lt;/ul&gt;&lt;p data-mce-style=&quot;margin-left: 30.0px;&quot; style=&quot;margin-top: 10px; margin-right: 0px; margin-left: 30px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px; line-height: 1.3; overflow-wrap: break-word; text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99983B4A5C064A4006&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws10-item-offers-service.png&quot; height=&quot;354&quot; style=&quot;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;ul style=&quot;margin: 10px 0px 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px;&quot;&gt;&lt;li&gt;Oracle 을 DynamoDB 로 변경 (schema 변경 및 Database Migration 진행)&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;text-align: center; font-size: 13.3333px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/993D54485C064A5E09&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws11-oracle schema-dynamoDB schema.png&quot; height=&quot;355&quot; style=&quot;text-align: center; font-size: 13.3333px;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;text-align: center; font-size: 13.3333px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;text-align: center; font-size: 13.3333px;&quot;&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;Database Migration Service (6,000억 레코드 migration을 live 로 진행)&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;text-align: center; font-size: 13.3333px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99157B485C064A782F&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws12-database-migration-service.png&quot; height=&quot;353&quot; style=&quot;text-align: center; font-size: 13.3333px;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 style=&quot;margin: 30px 0px 0px; color: rgb(23, 43, 77); font-size: 16px; line-height: 1.5; font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica;&quot;&gt;AWS S3 - Mai-lan Tomsen Bukovec (Vice President, Amazon S3 and Glacier)&lt;/h3&gt;&lt;ul style=&quot;margin: 10px 0px 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px;&quot;&gt;&lt;li&gt;전체 10 Trillions objects 가 저장되어 있음&lt;/li&gt;&lt;li&gt;한개의 리전에서 최대 1초에 60 Terabytes 를 관리함&lt;/li&gt;&lt;li&gt;초기에 8개의 microservices 로 구성됨, 현재는 235개 이상의 분산 mircroservices 로 구성됨&lt;/li&gt;&lt;/ul&gt;&lt;h3 style=&quot;margin: 30px 0px 0px; color: rgb(23, 43, 77); font-size: 16px; line-height: 1.5; font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica;&quot;&gt;AWS Redshift&lt;/h3&gt;&lt;ul style=&quot;margin: 10px 0px 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px;&quot;&gt;&lt;li&gt;2018년 11월 1일 아주 큰 Oracle data warehouse 를 Redshift 로 옮김 (올해 가장 기쁜 순간)&lt;/li&gt;&lt;li&gt;성능 향상을 이룸&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;text-align: center; font-size: 13.3333px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/995C2B465C064A900A&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws13-increase performance Redshift.png&quot; height=&quot;355&quot; style=&quot;text-align: center; font-size: 13.3333px;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;text-align: center; font-size: 13.3333px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;text-align: center; font-size: 13.3333px;&quot;&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;지난주 (11월 4째주)&amp;nbsp;&lt;strong&gt;Redshift concurrency scaling&lt;/strong&gt;&amp;nbsp;기능 새로 소개&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;text-align: center; font-size: 13.3333px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99B122465C064AA805&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws14-Redshift concurrency scaling.png&quot; height=&quot;355&quot; style=&quot;text-align: center; font-size: 13.3333px;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 style=&quot;margin: 30px 0px 0px; color: rgb(23, 43, 77); font-size: 16px; line-height: 1.5; font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica;&quot;&gt;AWS Lambda&lt;/h3&gt;&lt;ul style=&quot;margin: 10px 0px 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px;&quot;&gt;&lt;li&gt;&lt;p&gt;고객들이 serverless 로 가려고 하는가?&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/992D11465C064ABB10&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws15-why flocking serverless.png&quot; height=&quot;354&quot; style=&quot;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;ul style=&quot;margin: 0px;&quot;&gt;&lt;li&gt;No Infrastructure provisioning, no management&lt;/li&gt;&lt;li&gt;Automatic scaling&lt;/li&gt;&lt;li&gt;Highly available and secure&lt;/li&gt;&lt;li&gt;Pay for value&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;2014년 Preview 공개 후 2015년 GA 로 오픈&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Worker:&amp;nbsp;&lt;/strong&gt;고객의 function 코드가 로딩되고 실행되는 환경&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;Firecracker (New)&lt;/strong&gt;: serverless computing을 위한 안전하고 빠른 microVMs&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/992A694F5C064ACF1B&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws16-Firecracker.png&quot; height=&quot;355&quot; style=&quot;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;ul style=&quot;margin: 0px;&quot;&gt;&lt;li&gt;KVM hardware virtualizations&lt;/li&gt;&lt;li&gt;실행되는데 125ms 소요 (1개의 호스트에서 1초에 150 microVMs 실행 가능)&lt;/li&gt;&lt;li&gt;1개의 microVM 당 5MB 메모리 사용 (1개의 호스트에 수천개의 microVM 을 띄울 수 있음)&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;Lambda runtime 환경&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;text-align: center; font-size: 13.3333px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/9969834C5C064B1608&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws17-lambda runtime.png&quot; height=&quot;355&quot; style=&quot;text-align: center; font-size: 13.3333px;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p style=&quot;margin-top: 10px; margin-right: 0px; margin-left: 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px; line-height: 1.3; overflow-wrap: break-word;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;margin-top: 10px; margin-right: 0px; margin-left: 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px; line-height: 1.3; overflow-wrap: break-word;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3 style=&quot;margin: 30px 0px 0px; color: rgb(23, 43, 77); font-size: 16px; line-height: 1.5; font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica;&quot;&gt;AWS 의 기능과 서비스의 95% 고객의 피드백으로 부터 개발된 것임&lt;/h3&gt;&lt;p style=&quot;margin-top: 10px; margin-right: 0px; margin-left: 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px; line-height: 1.3; overflow-wrap: break-word; text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/9908AC4C5C064B302D&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws17-2-IDEs-Langauges-ProgrammingModels-Workflows.png&quot; height=&quot;355&quot; style=&quot;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 13.3333px;&quot;&gt;&lt;/span&gt;&lt;/p&gt;&lt;h3 style=&quot;margin: 30px 0px 0px; color: rgb(23, 43, 77); font-size: 16px; line-height: 1.5; font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica;&quot;&gt;AWS Toolkits 새로운 IDEs&lt;/h3&gt;&lt;p data-mce-style=&quot;margin-left: 30.0px;&quot; style=&quot;margin-top: 10px; margin-right: 0px; margin-left: 30px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px; line-height: 1.3; overflow-wrap: break-word; text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99BCFE505C064B4504&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws18-new IDEs.png&quot; height=&quot;354&quot; style=&quot;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;ul style=&quot;margin: 10px 0px 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px;&quot;&gt;&lt;li&gt;PyCharm&lt;/li&gt;&lt;li&gt;IntelliJ&lt;/li&gt;&lt;li&gt;VS Code&lt;/li&gt;&lt;/ul&gt;&lt;h3 style=&quot;margin: 30px 0px 0px; color: rgb(23, 43, 77); font-size: 16px; line-height: 1.5; font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica;&quot;&gt;AWS Lambda 신규 기능&lt;/h3&gt;&lt;ul style=&quot;margin: 10px 0px 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px;&quot;&gt;&lt;li&gt;사실상 모든 언어 지원 가능해 졌음&lt;ul style=&quot;margin: 0px;&quot;&gt;&lt;li&gt;기존 지원 언어: NodeJS, JavaScript, Python, Java, .Net, Go&lt;/li&gt;&lt;li&gt;신규 지원 언어: Ruby&lt;/li&gt;&lt;li&gt;Lambda 에 Custom Runtime 적용 가능 (Ruby 도 그렇게 구현한 것으로 C++, Erlang 등 다른 언어 들도 적용하여 쓸 수 있음)&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;Lambda Layers: Lambda 를 라이브러리 형태의 함수로 만들어 재사용 가능&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;text-align: center; font-size: 13.3333px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/9985F4455C064B5B01&quot; filemime=&quot;image/jpeg&quot; filename=&quot;aws19-lambda layer.png&quot; height=&quot;353&quot; style=&quot;text-align: center; font-size: 13.3333px;&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;span style=&quot;text-align: center; font-size: 13.3333px;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;text-align: center; font-size: 13.3333px;&quot;&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Nested Applications using Serverless Application Repository (New)&lt;/strong&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 style=&quot;margin: 30px 0px 0px; color: rgb(23, 43, 77); font-size: 16px; line-height: 1.5; font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica;&quot;&gt;&lt;strong&gt;AWS Step Functions&amp;nbsp;&lt;/strong&gt;&lt;/h3&gt;&lt;ul style=&quot;margin: 10px 0px 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px;&quot;&gt;&lt;li&gt;기존에는 workflow 를 Sequential steps, Parallel steps, Branching steps 로 지원&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Step Functions service Integrations (New)&lt;/strong&gt;: Step Functions 을 AWS 의 8개 서비스와 함께 쓸 수 있게 지원&lt;ul style=&quot;margin: 0px;&quot;&gt;&lt;li&gt;Step Functions 함께 쓸 수 있는 AWS 8개 서비스: Batch, ECS, Fargate(컨테이너 배포 서비스), Glue(ETL서비스), DynamoDB, SNS, SQS, SageMaker&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 style=&quot;margin: 30px 0px 0px; color: rgb(23, 43, 77); font-size: 16px; line-height: 1.5; font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica;&quot;&gt;AWS API Gateway 에서 WebSocket 지원&amp;nbsp;&lt;/h3&gt;&lt;ul style=&quot;margin: 10px 0px 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px;&quot;&gt;&lt;li&gt;WebSocket 을 통해 Stateful 지원 가능&lt;/li&gt;&lt;/ul&gt;&lt;h3 style=&quot;margin: 30px 0px 0px; color: rgb(23, 43, 77); font-size: 16px; line-height: 1.5; font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica;&quot;&gt;AWS ALB 에서 Lambda 지원&lt;/h3&gt;&lt;ul style=&quot;margin: 10px 0px 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px;&quot;&gt;&lt;li&gt;ALB (Amazon Load Balancer) 뒷단에 Lambda 를 바로 연결 가능&amp;nbsp;&lt;/li&gt;&lt;/ul&gt;&lt;h3 style=&quot;margin: 30px 0px 0px; color: rgb(23, 43, 77); font-size: 16px; line-height: 1.5; font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica;&quot;&gt;Amazon Managed Streaming for Kafka&lt;/h3&gt;&lt;ul style=&quot;margin: 10px 0px 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px;&quot;&gt;&lt;li&gt;Fully managed and highly-available Apache Kafka service&lt;br /&gt;&lt;br /&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p style=&quot;margin-top: 10px; margin-right: 0px; margin-left: 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px; line-height: 1.3; overflow-wrap: break-word;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;margin-top: 10px; margin-right: 0px; margin-left: 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px; line-height: 1.3; overflow-wrap: break-word;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3 style=&quot;margin: 30px 0px 0px; color: rgb(23, 43, 77); font-size: 16px; line-height: 1.5; font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica;&quot;&gt;AWS Well-Architected site&lt;/h3&gt;&lt;p style=&quot;margin-top: 10px; margin-right: 0px; margin-left: 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px; line-height: 1.3; overflow-wrap: break-word;&quot;&gt;&lt;a href=&quot;https://aws.amazon.com/architecture/well-architected/&quot; data-mce-href=&quot;https://aws.amazon.com/architecture/well-architected/&quot; style=&quot;color: rgb(59, 115, 175) !important;&quot;&gt;Amazon Well-Architected&lt;/a&gt;&lt;/p&gt;&lt;p style=&quot;margin-top: 10px; margin-right: 0px; margin-left: 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px; line-height: 1.3; overflow-wrap: break-word;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;margin-top: 10px; margin-right: 0px; margin-left: 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px; line-height: 1.3; overflow-wrap: break-word;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3 style=&quot;margin: 30px 0px 0px; color: rgb(23, 43, 77); font-size: 16px; line-height: 1.5; font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica;&quot;&gt;AWS Well-Architected Tool&lt;/h3&gt;&lt;ul style=&quot;margin: 10px 0px 0px; color: rgb(85, 85, 85); font-family: &amp;quot;맑은 고딕&amp;quot;, seoul, arial, helvetica; font-size: 13.3333px;&quot;&gt;&lt;li&gt;Measure and improve your architecture using AWS Well-Architectured best practices&lt;/li&gt;&lt;li&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/246&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>AWS</category>
<category>AWS</category>
<category>AWS CTO</category>
<category>AWS re:Invent 2018</category>
<category>Keynote</category>
<category>Werner Vogels</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/246</guid>
<comments>https://ahnseungkyu.com/246#entry246comment</comments>
<pubDate>Tue, 04 Dec 2018 09:06:31 +0900</pubDate>
</item>
<item>
<title>docker container 활용 #5</title>
<link>https://ahnseungkyu.com/245</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;이번에는 docker 이미지 최적화에 대해서 설명하겠습니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;이미지 최적화를 위해서는 다음의 3가지를 잘 활용하면 됩니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;1. 레이어를 줄이기 위해서 다중 RUN 명령어는 하나의 RUN 명령어로 구성&lt;br /&gt;2. 파일 복사와 라이브러리 Install 은 순서가 중요&lt;br /&gt;3. 컴파일과 같은 작업은 Multistep build 를 이용&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;alpine linux 로 nginx 를 실행시기 위한 방법으로 다음과 같은 docker 이미지를 만들 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;먼저, nginx.conf 파일을 로컬 컴퓨터에 생성합니다.&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$ vi nginx.conf&lt;/p&gt;&lt;p&gt;user www;&lt;br /&gt;worker_processes auto;&lt;/p&gt;&lt;p&gt;error_log /var/log/nginx/error.log warn;&lt;br /&gt;pid /var/run/nginx.pid;&lt;/p&gt;&lt;p&gt;events {&lt;br /&gt;&amp;nbsp; &amp;nbsp; worker_connections 1024;&lt;br /&gt;}&lt;/p&gt;&lt;p&gt;http {&lt;br /&gt;&amp;nbsp; &amp;nbsp; include /etc/nginx/mime.types;&lt;br /&gt;&amp;nbsp; &amp;nbsp; default_type application/octet-stream;&lt;br /&gt;&amp;nbsp; &amp;nbsp; sendfile on;&lt;br /&gt;&amp;nbsp; &amp;nbsp; access_log /var/log/nginx/access.log;&lt;br /&gt;&amp;nbsp; &amp;nbsp; keepalive_timeout 3000;&lt;br /&gt;&amp;nbsp; &amp;nbsp; server {&lt;br /&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; listen 80;&lt;br /&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; root /www;&lt;br /&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; index index.html index.htm;&lt;br /&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; server_name localhost;&lt;br /&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; client_max_body_size 32m;&lt;br /&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; error_page 500 502 503 504 /50x.html;&lt;br /&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; location = /50x.html {&lt;br /&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; root /var/lib/nginx/html;&lt;br /&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; }&lt;br /&gt;&amp;nbsp; &amp;nbsp; }&lt;br /&gt;}&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;다음은 간단한 index.html 입니다.&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$ vi index.html&lt;/p&gt;&lt;p&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;br /&gt;&amp;lt;html lang=&quot;en&quot;&amp;gt;&lt;br /&gt;&amp;lt;head&amp;gt;&lt;br /&gt;&amp;nbsp; &amp;nbsp; &amp;lt;meta charset=&quot;utf-8&quot; /&amp;gt;&lt;br /&gt;&amp;nbsp; &amp;nbsp; &amp;lt;title&amp;gt;HTML5&amp;lt;/title&amp;gt;&lt;br /&gt;&amp;lt;/head&amp;gt;&lt;br /&gt;&amp;lt;body&amp;gt;&lt;br /&gt;&amp;nbsp; &amp;nbsp; Server is online&lt;br /&gt;&amp;lt;/body&amp;gt;&lt;br /&gt;&amp;lt;/html&amp;gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;이 두 파일을 활용한 Dockerfile 은 다음과 같습니다.&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$ vi Dockerfile&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;FROM alpine:3.8&lt;br /&gt;RUN apk update&lt;br /&gt;RUN apk add --no-cache nginx&lt;br /&gt;RUN adduser -D -g 'www' www&lt;br /&gt;RUN mkdir /www&lt;br /&gt;RUN chown -R www:www /var/lib/nginx&lt;br /&gt;RUN chown -R www:www /www&lt;/p&gt;&lt;p&gt;COPY nginx.conf /etc/nginx/nginx.conf&lt;br /&gt;COPY index.html /www/index.html&lt;/p&gt;&lt;p&gt;ENTRYPOINT [&quot;nginx&quot;]&lt;br /&gt;CMD [&quot;-g&quot;, &quot;daemon off;&quot;]&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;docker 이미지를 빌드하고 실행시키면 index.html 결과를 얻을 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$ sudo docker build -t seungkyua/nginx-alpine .&lt;/p&gt;&lt;p&gt;$ docker run -d -p 30080:80 --name nginx-alpine seungkyua/nginx-alpine&lt;/p&gt;&lt;p&gt;$ curl http://localhost:30080&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;h3&gt;하나의 RUN 명령어로 구성&lt;/h3&gt;&lt;p&gt;여기서 첫번째 이미지 최적화 포인트가 보입니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;앞의 Dockerfile 에서 하나의 RUN 은 하나의 이미지 레이어가 되므로 이것을 하나로 다음과 같이 줄일 수 있습니다.&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;RUN apk update &amp;amp;&amp;amp; \&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;apk add --no-cache nginx &amp;amp;&amp;amp; \&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;adduser -D -g 'www' www &amp;amp;&amp;amp; \&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;mkdir /www &amp;amp;&amp;amp; \&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;chown -R www:www /var/lib/nginx &amp;amp;&amp;amp; \&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;chown -R www:www /www&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;이번에는 nodejs docker 이미지를 만들어 보겠습니다.&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;$&amp;nbsp;package.json &lt;br /&gt;{&lt;br /&gt;&amp;nbsp; &amp;nbsp; &quot;name&quot;: &quot;docker_web_app&quot;,&lt;br /&gt;&amp;nbsp; &amp;nbsp; &quot;version&quot;: &quot;1.0.0&quot;,&lt;br /&gt;&amp;nbsp; &amp;nbsp; &quot;description&quot;: &quot;Node.js on Docker&quot;,&lt;br /&gt;&amp;nbsp; &amp;nbsp; &quot;private&quot;: true,&lt;br /&gt;&amp;nbsp; &amp;nbsp; &quot;author&quot;: &quot;Seungkyu Ahn &amp;lt;seungkyua@gmail.com&amp;gt;&quot;,&lt;br /&gt;&amp;nbsp; &amp;nbsp; &quot;main&quot;: &quot;server.js&quot;,&lt;br /&gt;&amp;nbsp; &amp;nbsp; &quot;scripts&quot;: {&lt;br /&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; &quot;start&quot;: &quot;node server.js&quot;&lt;br /&gt;&amp;nbsp; &amp;nbsp; },&lt;br /&gt;&amp;nbsp; &amp;nbsp; &quot;dependencies&quot;: {&lt;br /&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp; &amp;nbsp; &quot;express&quot;: &quot;^4.16.1&quot;&lt;br /&gt;&amp;nbsp; &amp;nbsp; }&lt;br /&gt;}&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$ vi server.js&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;'use strict';&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;const express = require('express');&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;const PORT = 8080;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;const HOST = '0.0.0.0';&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;const app = express();&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;app.get('/', (req, res) =&amp;gt; {&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &lt;/span&gt;res.send('Hello world\n');&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;});&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;app.listen(PORT, HOST);&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;console.log(`Running on http://${HOST}:${PORT}`);&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$ vi Dockerfile&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;FROM node:8&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;RUN mkdir -p /app&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;COPY package*.json /app/&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;WORKDIR /app&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;COPY . /app&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;s1&quot;&gt;RUN npm install --only=production&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;EXPOSE 8080&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;CMD [ &quot;npm&quot;, &quot;start&quot; ]&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;h3&gt;파일 COPY 와 관련 라이브러리 설치 순서가 중요&lt;/h3&gt;&lt;p&gt;위의 Dockerfile 의 경우 현재 디렉토리 소스를 COPY 한 후에 npm install 을 수행합니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;docker 이미지는 변경된 레이어만 build 되지만 연관된 하위 레이어까지 build 됩니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;여기서는 현재 디렉토리 소스가 변경되면 npm install 을 매번 다시 수행합니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;그러므로 일단 package 설치를 먼저하고 COPY 를 나중에 하면 package 설치 내용이 변경되지 않는다면 npm install 은 캐시를 바로 사용하여 설치하지 않습니다.&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;s1&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;s1&quot;&gt;RUN npm install --only=production&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;COPY . /app&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;마지막으로, 컴파일 하는 소스의 docker 이미지를 살펴보겠습니다.&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;$ vi hello.c&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;int main ()&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;{&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &lt;/span&gt;printf (&quot;Hello, world!\n&quot;);&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &lt;/span&gt;return 0;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$ vi Dockerfile&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;FROM alpine:3.8&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;RUN apk update &amp;amp;&amp;amp; \&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;apk add --update alpine-sdk&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;RUN mkdir -p /app&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;COPY . /tmp&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;WORKDIR /tmp&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;RUN gcc hello.c -o hello&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;ENTRYPOINT [&quot;/tmp/hello&quot;]&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;h3&gt;Multistep build 활용&lt;/h3&gt;&lt;p&gt;위의 경우에 c 컴파일을 하기 위해 c 컴파일로가 들어있는 sdk 패키지를 설치하고 바이너리 파일로 컴파일을 하므로 이미지 사이즈가 커집니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;여기서 build 단계를 활용하면 sdk 패키지는 제외하고 최종 바이너리 파일만 docker 이미지에 넣을 수 있습니다.&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;$ vi Dockerfile&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;FROM alpine:3.8 &lt;strong&gt;AS build&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;RUN apk update &amp;amp;&amp;amp; \&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;apk add --update alpine-sdk&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;RUN mkdir -p /app&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;COPY . /tmp&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;WORKDIR /tmp&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;RUN gcc hello.c -o hello&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;FROM alpine:3.8&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;COPY &lt;strong&gt;--from=build&lt;/strong&gt; /tmp/hello /app/hello&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;ENTRYPOINT [&quot;/app/hello&quot;]&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;아래 이미지 사이즈는 build 스텝을 활용하지 않은 파일 사이즈와 활용한 사이즈의 차이입니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;seungkyua/c-hello-world&amp;nbsp; &amp;nbsp; &amp;nbsp; 176MB&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;















































































































&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;seungkyua/c-hello-world&amp;nbsp; &amp;nbsp; &amp;nbsp; 4.42MB&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/245&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Container</category>
<category>docker</category>
<category>image최적화</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/245</guid>
<comments>https://ahnseungkyu.com/245#entry245comment</comments>
<pubDate>Thu, 01 Nov 2018 15:47:26 +0900</pubDate>
</item>
<item>
<title>docker container 활용 #4</title>
<link>https://ahnseungkyu.com/244</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;docker 이미지가 어떻게 구성되는지 이해하기 위해서는 Copy-on-write 정책을 이해해야 합니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;아래와 같은 Dockerfile 이 있고 이를 이미지로 만들었을 때 이미지가 차지하는 스토리지 구성은 다음과 같습니다.&lt;/p&gt;&lt;p&gt;(아래 Dockerfile 은 sample 파일로 make tool 까지 있다고 가정합니다.)&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ubuntu&lt;/span&gt;:&lt;span class=&quot;m&quot;&gt;15&lt;/span&gt;.&lt;span class=&quot;m&quot;&gt;04&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;COPY&lt;/span&gt; . /&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;RUN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;make&lt;/span&gt; /&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;CMD&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;python&lt;/span&gt; /&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;/&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;.&lt;span class=&quot;n&quot;&gt;py&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;https://docs.docker.com/v17.09/engine/userguide/storagedriver/images/container-layers.jpg&quot; alt=&quot;container-layers.jpg&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/p&gt;&lt;p&gt;이미지 출처:&amp;nbsp;https://docs.docker.com/v17.09/engine/userguide/storagedriver/images/container-layers.jpg&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;가장 아래 레이어 d3a1f33e8a5a 는 ubuntu:15.04 이미지 입니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;그 다음 바로 위의 c22013c84729 는 현재 디렉토리의 이하의 모든 소스를 /app 디렉토리 아래 복사한 이미지 레이어입니다. (COPY . /app 명령에 의한)&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;d74508fb6632 는 RUN make /app 가 실행된 이미지 레이어이고, 마지막으로 91e54dfb1179 는 CMD python /app/app.py 이미지 레이어입니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;Dockerfile 에서 하나의 명령어는 하나의 이미지 레이어 이며, 여기까지 이미지는 Read Only 이미지로 컨테이너가 실행되어도 바꿀 수 없습니다.&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;위의 Dockerfile 로 만든 이미지로 컨테이너가 실행되면 제일 상단의 Container Layer 로 Thin Read/Write 스토리지가 생기며, 여기에만 데이터 쓰기가 가능합니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;같은 이미지로 컨테이너 인스턴스를 여러 개 실행시켜도 이미지는 공유하며&amp;nbsp;Container Layer 만 각 인스턴스별로 생겨 자신의 쓰기 스토리지가 생기는 구조이며, 기본적으로 컨테이너가 실행되면서 생긴 스토리지는 실행된 컨테이너가 삭제될 때 같이 삭제됩니다.&amp;nbsp;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;위의 Dockerfile 에서 두번째 라인이 현재 디렉토리를 /app 아래로 복사는 명령어에서 현재 디렉토리에 있는 파일이 변경되었다고 가정해 봅시다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;

















&lt;/p&gt;&lt;p&gt;다시 이미지를 만들 경우 맨아래 d74508fb6632 이미지 레이어는 링크로 그대로 활용되고, c22013c84729 이미지 레이어를 먼저 복사하고(copy), 수정된 파일들을 /app 디렉토리 아래로 복사하는(write) 부분이 일어나며 그 이후의 이미지 레이어들은 계속 실행됩니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;Dockerfile 을 작성할 때 기본 예약 명령어는 다음과 같습니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;FROM nginx:alpine&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;nginx 이미지의 alpine 태그를 Base 이미지로 사용합니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;RUN mkdir -p /app&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;mkdir -p /app 명령을 실행합니다. shell 명령어를 쓸 때 사용합니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;ADD source.tar /app/&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;source.tar 를 /app 디렉토리 아래에 풉니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;ADD http://ahnseungkyu.com/release /data/&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;인터넷의 http://ahnseungkyu.com/release 파일을 /data 디렉토리 아래에 다운받습니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;COPY . /app&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;현재 디렉토리의 모든 파일과 하위 디렉토리를 /app 디렉토리 아래로 복사합니다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;COPY ./conf /app/conf&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;conf 디렉토리 아래의 모든 파일과 하위 디렉토리를 /app/conf 디렉토리 아래로 복사합니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;COPY ./*.js /app/&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;현재 디렉토리으 모든 js 파일을 /app 디렉토리 아래로 복사합니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;추가로 Dockerfile 을 작성할 때 가장 기본이 되는 CMD 와 ENTRYPOINT 의 차이에 대해서 알아보겠습니다.&lt;/p&gt;&lt;p&gt;Dockerifle 에서는 기본적으로 최소 하나의 CMD 혹은 ENTRYPOINT 가 있어야 하며, 둘 다 있을 수 도 있습니다.&lt;/p&gt;&lt;p&gt;즉, docker 를 실행할 때 CMD 로 호출하거나 ENTRYPOINT 로 호출 할 수 있습니다.&lt;/p&gt;&lt;p&gt;아래 alpine ping Dockerfile 을 예로 살펴보겠습니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;From alpine:latest&lt;/p&gt;&lt;p&gt;RUN apk update &amp;amp;&amp;amp; apk add --update iputils \&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;amp;&amp;amp; rm -rf /var/cache/apk/*&lt;/p&gt;&lt;p&gt;CMD [&quot;ping&quot;, &quot;-c&quot;, &quot;3&quot;, &quot;8.8.8.8&quot;]&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;여기서는 CMD 를 사용하여 ping -c 3 8.8.8.8 명령어를 실행했습니다.&lt;/p&gt;&lt;p&gt;docker 이미지를 만들고 실행해보면 결과가 잘 나옵니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$ sudo docker build -t seungkyua/alpine-sample .&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$ sudo docker run --name alipine-sample --rm -it seungkyua/alpine-sample&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;이것을 ENTRYPOINT 사용으로 바꾸면 다음과 같습니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;From alpine:latest&lt;/p&gt;&lt;p&gt;RUN apk update &amp;amp;&amp;amp; apk add --update iputils \&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;amp;&amp;amp; rm -rf /var/cache/apk/*&lt;/p&gt;&lt;p&gt;ENTRYPOINT [&quot;ping&quot;, &quot;-c&quot;, &quot;3&quot;, &quot;8.8.8.8&quot;]&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;똑같이 결과가 나타납니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;그럼 이 둘의 차이는 무엇일까요? 그건 둘 다 사용했을 때 알 수 있습니다. 다음과 같이 바꿔보겠습니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;From alpine:latest&lt;/p&gt;&lt;p&gt;RUN apk update &amp;amp;&amp;amp; apk add --update iputils \&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;amp;&amp;amp; rm -rf /var/cache/apk/*&lt;/p&gt;&lt;p&gt;ENTRYPOINT [&quot;ping&quot;]&lt;/p&gt;&lt;p&gt;CMD [&quot;-c&quot;, &quot;3&quot;, &quot;8.8.8.8&quot;]&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;결과가 똑같습니다. 하지만 여기서 아래와 같이 docker 를 실행할 때 8.8.8.8 을 맨 뒤에 추가하면 결과가 달라집니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$ sudo docker run --name alipine-sample --rm -it seungkyua/alpine-sample 8.8.8.8&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;마지막의 CMD 부분이 argument 로 처리 되는데 8.8.8.8 이라는 argument 가 override 되어 -c 3 8.8.8.8 부분이 8.8.8.8 로 되어 버립니다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;결과적으로 ENTRYPOINT 와 CMD 를 함께 쓰는 경우는 CMD argument 를 override 하고 싶을 때 사용할 수 있기 때문에 가능하면 둘 다 사용하는 방법을 추천드립니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/244&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Container</category>
<category>docker</category>
<category>Layer</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/244</guid>
<comments>https://ahnseungkyu.com/244#entry244comment</comments>
<pubDate>Tue, 30 Oct 2018 19:23:50 +0900</pubDate>
</item>
<item>
<title>docker container 활용 #3</title>
<link>https://ahnseungkyu.com/243</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;PID namespace 외에 Network namespace 를 알아보겠습니다.&lt;/p&gt;&lt;p&gt;처음 글을 시작한 의도는 docker 를 잘 활용하자는 의미였는데 하다보니 아직 그 내용은 들어가 보지도 못했네요.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;개발자나 운영자들은 잘 인식하지 못하지만 linux 의 Network 는 모두 namespace 구조하에 움직이고 있습니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;기본적으로 host 기반으로 사용하는 network 의 namespace 는 1 입니다. 그리고 docker 가 실행되면 docker process 에 대해서 내부적인 network 를 사용합니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;network namespace 와 network namespace 간의 연결은 virtual ethernet (veth) 를 사용하여 연결합니다. 즉, veth pair 를 만들어서 하나는 docker 내부에 다른 하나는 host 로 하여 서로 네트워크로 연결하고 host 에 있는 veth 는 host 의 bridge 로 연결하면 docker 내부에서 host 의 bridge 로 연결이 됩니다.&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;docker 컨테이너 (eth0)&amp;nbsp; &amp;lt;-&amp;gt; host veth&amp;nbsp; &amp;lt;-&amp;gt;&amp;nbsp; host bridge (docker0)&amp;nbsp; &amp;lt;-&amp;gt;&amp;nbsp; host network (&lt;span class=&quot;s1&quot;&gt;ens2f0&lt;/span&gt;)&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;먼저, host veth 의 리스트를 보겠습니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$ sudo ip addr show&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;15479: vethf5fa5c1@if15478: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc noqueue master docker0 state UP &lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;link/ether 32:83:61:96:55:4a brd ff:ff:ff:ff:ff:ff link-netnsid 1&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;15481: veth4667f7d@if15480: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc noqueue master docker0 state UP &lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;link/ether 56:39:6e:41:3d:50 brd ff:ff:ff:ff:ff:ff link-netnsid 0&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;15483: vethd61c546@if15482: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc noqueue master docker0 state UP &lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;link/ether b2:4a:88:71:d0:03 brd ff:ff:ff:ff:ff:ff link-netnsid 2&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;15489: vethbe5dd5b@if15488: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc noqueue master docker_gwbridge state UP &lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;link/ether fe:85:37:ac:ea:76 brd ff:ff:ff:ff:ff:ff link-netnsid 4&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;15493: veth66998b7@if15492: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc noqueue master docker0 state UP &lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;link/ether 42:5f:03:92:45:9d brd ff:ff:ff:ff:ff:ff link-netnsid 5&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;총 5개가 보이는데 이중 하나는 docker gateway bridge 로 연결되고 나머지 4개는 1:1 로 각각 docker 내부의 eth0 와 연결되어 있습니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;이를 좀 쉽게 찾기 위해서 veth.sh 파일을 만들었습니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: double; border-width: 3px; border-color: rgb(203, 203, 203); background-color: rgb(255, 255, 255); padding: 10px;&quot;&gt;&lt;p&gt;#!/bin/bash&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;VETHS=`ifconfig -a | grep veth | sed 's/ .*//g'`&lt;/p&gt;&lt;p&gt;DOCKERS=$(docker ps -a | grep Up | awk '{print $1}')&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;for VETH in $VETHS&lt;/p&gt;&lt;p&gt;do&lt;/p&gt;&lt;p&gt;&amp;nbsp; PEER_IFINDEX=`ethtool -S $VETH 2&amp;gt;/dev/null | grep peer_ifindex | sed 's/ *peer_ifindex: *//g'`&lt;/p&gt;&lt;p&gt;&amp;nbsp; for DOCKER in $DOCKERS&lt;/p&gt;&lt;p&gt;&amp;nbsp; do&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; PEER_IF=`docker exec $DOCKER ip link list 2&amp;gt;/dev/null | grep &quot;^$PEER_IFINDEX:&quot; | awk '{print $2}' | sed 's/:.*//g'`&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; if [ -z &quot;$PEER_IF&quot; ]; then&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; continue&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; else&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; printf &quot;%-10s is paired with %-10s on %-20s\n&quot; $VETH $PEER_IF $DOCKER&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; break&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; fi&lt;/p&gt;&lt;p&gt;&amp;nbsp; done&lt;/p&gt;&lt;p&gt;done&lt;br /&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;위 파일을 실행하면 아래와 같이 나옵니다.&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;veth4667f7d: is paired with eth0@if15481 on b75a945f84fa &lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;veth66998b7: is paired with eth0@if15493 on 67246d3e1c68 &lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;vethd61c546: is paired with eth0@if15483 on 87faa6bacbba &lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;vethf5fa5c1: is paired with eth0@if15479 on 0b4bc5ba78f9&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;마지막에 보이는 것은 docker id 입니다.&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;host 의 docker0 bridge 가 어떻게 연결되어 있는 지는 brctl 로 알 수 있습니다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$ sudo yum install -y bridge-utils&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$ sudo brctl show&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99F2FB445BD690C704&quot; filemime=&quot;image/png&quot; filename=&quot;btctl_show.png&quot; height=&quot;107&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;docker0 bridge 가 어떻게 host 의 외부 네트워크로 나가는 지는 iptables 와 routing 을 보면 알 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$ sudo iptables -t nat -S&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;-A POSTROUTING -s 172.17.0.0/16 ! -o docker0 -j MASQUERADE&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;source 가 docker 내부 ip 대역이고 host 입장에서 패킷이 나가는 인터페이스가&amp;nbsp; docker0 가 아니면 jump 를 하고 host의 ip 로 변경해서 (masquerade) 나가라고 되어 있습니다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$ netstat -rn&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;Destination &lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;Gateway &lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;Genmask &lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;Flags &lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &lt;/span&gt;MSS Window&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &lt;/span&gt;irtt Iface&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;0.0.0.0 &lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;/span&gt;192.168.30.1&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;0.0.0.0 &lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/span&gt;UG&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;0 0&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;0 ens2f0&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;172.17.0.0&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/span&gt;0.0.0.0 &lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;/span&gt;255.255.0.0 &lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;U &lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;0 0&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;0 docker0&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;172.18.0.0&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/span&gt;0.0.0.0 &lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&lt;/span&gt;255.255.0.0 &lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;U &lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;0 0&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;0 docker_gwbridge&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;그리고 위와 같이 외부로 나갈 때는 default gateway 로 외부로 나가게 됩니다.&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;



















































&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/243&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Container</category>
<category>docker</category>
<category>namespace</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/243</guid>
<comments>https://ahnseungkyu.com/243#entry243comment</comments>
<pubDate>Mon, 29 Oct 2018 13:53:48 +0900</pubDate>
</item>
<item>
<title>docker container 활용 #2</title>
<link>https://ahnseungkyu.com/242</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;컨테이너가 linux 의 cgroup 과 namespace 를 활용하여 동작하는 것은 이제 보편적으로 알려진 내용입니다. cgroup 은 자원의 활용에 사용하고 namespace 는 자원의 isolation 에 사용합니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;이 중에서 namespace 의 종류는 다음과 같습니다.&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;ipc : 프로세스간 양방향 통신&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt; mnt : 파일 시스템&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt; net : 네트워크&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt; pid : 프로세스 id&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt; user : 사용자 계정&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt; uts : Unix time sharing&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;위의 namespace를 기본으로 docker 의 프로세스 구조를 보면 다음과 같습니다.&lt;/p&gt;&lt;p&gt;먼저, pstree 명령어를 설치합니다.&amp;nbsp; 어떤 패키지인지 모르면 아래 명령어로 패키지명을 찾을 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$ sudo&amp;nbsp;&lt;span class=&quot;s1&quot;&gt;yum whatprovides pstree&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;psmisc-22.20-15.el7.x86_64 : Utilities for managing processes on your system&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;Repo&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;: base&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;Matched from:&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;Filename&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &lt;/span&gt;: /usr&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/bin/pstree&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;$ sudo yum install -y&amp;nbsp;&lt;span class=&quot;s1&quot;&gt;psmisc&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;이제 pstree 로 docker 의 패키지를 봅니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$&amp;nbsp;pstree -lSps $(pidof dockerd)&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/9939224F5BD57D981B&quot; filemime=&quot;image/png&quot; filename=&quot;pstree_dockerd_all.png&quot; height=&quot;175&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/wp-content/uploads/kboard_attached/78/201810/5bd5440b15fc87330783.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;() 안에 들어간 번호는 프로세스 id 입니다.&amp;nbsp; dockerd 프로세스는 15472 이고 이후의 프로세스 명이 잘려서 보이니 ps 로 프로세스 명을 보면 다음과 같습니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$ ps -ef | grep 15489&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99E742505BD57D9826&quot; filemime=&quot;image/png&quot; filename=&quot;pstree_docker-containerd.png&quot; height=&quot;39&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/wp-content/uploads/kboard_attached/78/201810/5bd5440b159ae1098555.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;15489 는 docker-containerd 입니다.&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;$&amp;nbsp;ps -ef | grep 15675&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99DCA7385BD57D9806&quot; filemime=&quot;image/png&quot; filename=&quot;pstree_docker-containerd-shim.png&quot; height=&quot;38&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/wp-content/uploads/kboard_attached/78/201810/5bd5440b15bc31615410.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;15675 는 docker-container-shim 입니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$ ps -ef | grep 15711&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99BDD7405BD57D9813&quot; filemime=&quot;image/png&quot; filename=&quot;pstree_docker-container.png&quot; height=&quot;12&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/wp-content/uploads/kboard_attached/78/201810/5bd5440b141a53075005.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;그리고 실제 컨테이너로 띄고 있는 minio 프로세스는 15711 입니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;위의 내용을 보면 docker 프로세스는 다음과 같은 구조로 되어 있습니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;dockerd (15472, docker 데몬)&amp;nbsp; &amp;nbsp;-&amp;gt;&amp;nbsp; &amp;nbsp;docker-containerd (15489, docker cotainerd) -&amp;gt; docker-container-shim (15675) -&amp;gt; minio (15711, 실행중인 docker 컨테이너)&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;docker-containerd 는 docker runtime 과 관련 있습니다. 컨테이너 실행은 runc 와 containerd 를 따릅니다. runc 는&amp;nbsp;Open Container Initiative(OCI) 에 의해 정의된 컨테이너를 실행시키는 부분으로 namespace 와 보안에 관한 표준입니다. containerd 는 runc 를 기반으로 컨테이너 이미지 관리, 스토리지, 실행 등의 기능을 확장한 것으로 CNCF 에 기부된 프로젝트 입니다.&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;docker-container-shim 은 docker 에서 자체적으로 추가한 것으로, 실행되는 컨테이너와 containerd 사이에서 컨테이너를 연결하여 containerd&amp;nbsp; 가 문제가 생기더라도 실행되는 컨테이너에는 여향을 주지 않기 위해서 만들었습니다. 그런데 사실 이게 왜 더 필요한지는 모르겠습니다. 괜히 관리 레이어만 하나 더 추가된 부분으로 보이긴 합니다.&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;PID namespace 를 docker 에서 어떻게 적용되는지 보겠습니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;앞에서 minio 컨테이너는 host 에서 보면 프로세스 id 가 15711 이고 그 부모 프로세스는 15675 인 docker-container-shim 인 것을 확인했습니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;이제 minio 컨테이너를 아래와 같이 확인 합니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;$ sudo docker (container) ls | grep minio&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;0b4bc5ba78f9&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;minio&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;minio&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt; &lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;minio&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt; server /export&quot; &lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &lt;/span&gt;18 months ago &lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;Up 4 hours&lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &lt;/span&gt;0.0.0.0:9000-&amp;gt;9000/tcp &lt;span class=&quot;Apple-converted-space&quot;&gt;&amp;nbsp; &lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;minio&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;그리고, minio 컨테이너 안으로 들어가 보겠습니다.&lt;/p&gt;&lt;p&gt;$&amp;nbsp;&lt;span class=&quot;s1&quot;&gt;sudo docker (container) exec -it 0b4bc5ba78f9 sh&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;프로세스를 조회해보면 다음과 같이 1번 프로세스로 minio 서버를 띄운 것이 보이고 (컨테이너 밖의 host 에서는 15711) 그 위의 부모 프로세스는 보이지 않습니다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:630px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/99827B4C5BD57D9827&quot; filemime=&quot;image/png&quot; filename=&quot;docker-container_ps.png&quot; height=&quot;108&quot; width=&quot;630&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;

























































&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/242&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Container</category>
<category>containerd</category>
<category>dockerd</category>
<category>namespace</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/242</guid>
<comments>https://ahnseungkyu.com/242#entry242comment</comments>
<pubDate>Sun, 28 Oct 2018 18:17:42 +0900</pubDate>
</item>
<item>
<title>docker container 활용 #1</title>
<link>https://ahnseungkyu.com/241</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;Kubernetes 는 여러 컨테이너를 관리할 수 있습니다. 그 이유는 kubernetes kubelet 과 컨테이너 데몬이 정해진 spec 에 따라 gRPC 통신을 하기 때문입니다.&amp;nbsp; Kubernetes 는 여러 컨테이너를 적용할 수 있는데 rkt, docker, CRI-O 등이 있습니다. 이중에서 가장 많이 사용하는 Docker 에 대해서 설명하고자 합니다.&lt;/p&gt;&lt;p&gt;앞서 kubespray 사용에 대해서 설명이&amp;nbsp;있는데, 여기를 보면 Production Level 로 사용 가능한 CentOS, RedHat, Ubuntu에 맞게 docker 를 쉽게 설치할 수 있습니다. 여기서는 Docker 를 이미 설치한 후에 어떻게 Docker 를 잘 활용할 수 있는지에 대해서 설명합니다.&lt;/p&gt;&lt;h2&gt;1. dockerd config option reload&lt;/h2&gt;&lt;p&gt;대부분의 Linux 는 이제 systemd 를 활용하고 있습니다. 그렇기 때문에 docker 데몬 실행은 systemd 에 설치된 docker.service 를 보면 됩니다. 디렉토리는 둘 중에 하나를 찾아보면 됩니다.&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;/etc/systemd/system/multi-user.target.wants/docker.service&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;s1&quot;&gt;/etc/systemd/system/docker.service&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;제 환경은 CentOS 로 이렇게 정의가 되어 있습니다.&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;MountFlags=shared&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;EnvironmentFile=-/etc/sysconfig/docker&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;ExecStart=/usr/bin/dockerd $DOCKER_OPTS&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;ExecReload=/bin/kill -s HUP $MAINPID&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;dockerd 의 환경 파일로&amp;nbsp;&lt;span class=&quot;s1&quot;&gt;/etc/sysconfig/docker 를 읽게 되어 있고 해당 파일은 아래 옵션으로 정의되어 있습니다.&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;DOCKER_OPTS=&quot;--storage-driver=overlay2 --insecure-registry docker-registry:5000 --insecure-registry oreo:5000&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;이 경우 systemctl restart docker.service 를 하면 dockerd 가 restart 되는데 문제는 이미 실행되고 있는 docker 컨테이너가 영향을 받아 stop 으로 빠집니다. (kubernetes 의 deployment, daemonset, statefulset 혹은 docker 의&amp;nbsp;--restart=always 가 아닌 경우) 그러므로, docker 옵션만 reload 해야 기존의 실행되고 있는 컨테이너가 영향을 받지 않습니다.&lt;/p&gt;&lt;p&gt;docker option reload 는 SIGHUP 을 보내면 됩니다.&amp;nbsp;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;$ sudo kill -SIGHUP $(pidof dockerd)&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;하지만, 지금의 세팅으로는 다시 올라오지 않습니다.&lt;/p&gt;&lt;p&gt;dockerd 로그를 보면 다음과 같습니다. 로그는 다음 명령어로 볼 수 있습니다.&lt;/p&gt;&lt;p&gt;$ sudo journalctl --no-pager -u docker.service&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;kube-deploy dockerd[16391]: time=&quot;2018-10-27T18:36:17.767207453+09:00&quot; level=info msg=&quot;Got signal to reload configuration, reloading from: /etc/docker/daemon.json&quot;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;kube-deploy dockerd[16391]: time=&quot;2018-10-27T18:36:17.767283042+09:00&quot; level=error msg=&quot;open /etc/docker/daemon.json: no such file or directory&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;디폴트로 dockerd 옵션은 /etc/docker/daemon.json 파일을 읽기 때문에 옵션&amp;nbsp; reload&amp;nbsp; 가 안되는 문제가 있습니다.&lt;/p&gt;&lt;p&gt;이를 해결하기 위해서 다음과 같이 변경해 보겠습니다.&lt;/p&gt;&lt;p&gt;docker.service 에 정의된&amp;nbsp;&lt;span class=&quot;s1&quot;&gt;EnvironmentFile 의 변수를 daemon.json 으로 옮기겠습니다.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;s1&quot;&gt;/etc/systemd/system/multi-user.target.wants/docker.service&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;s1&quot;&gt;EnvironmentFile=-&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;$ sudo mkdir -p /etc/docker&lt;/p&gt;&lt;p&gt;$ sudo vi /etc/docker/daemon.json&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;{&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&amp;nbsp; &amp;nbsp; &quot;storage-driver&quot;: &quot;overlay2&quot;,&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&amp;nbsp; &amp;nbsp; &quot;insecure-registries&quot;: [&quot;docker-registry:5000&quot;, &quot;oreo:5000&quot;]&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;docker.service 를 바꿨으니 어쩔 수 없이 한 번의 docker restart 는 해야 합니다.&lt;/p&gt;&lt;p&gt;$ sudo systemctl daemon-reload&lt;/p&gt;&lt;p&gt;$ systemctl restart docker.service&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;이제 현재의 dockerd option 이 어떤지 보겠습니다.&lt;/p&gt;&lt;p&gt;$ sudo docker system info&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;Storage Driver: overlay2&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;Insecure Registries:&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&amp;nbsp; docker-registry:5000&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; oreo:5000&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&amp;nbsp; 127.0.0.0/8&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;Insecure Registries 의 oreo:5000 을 제거하고 싶다면 다음과 같이 daemon.json 에서 변경하면 됩니다.&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;{&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&amp;nbsp; &amp;nbsp; &quot;storage-driver&quot;: &quot;overlay2&quot;,&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&amp;nbsp; &amp;nbsp; &quot;insecure-registries&quot;: [&quot;docker-registry:5000&quot;]&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;그리고 SIGHUP 을 보내서 option reload 를 하면 새로운 옵션이 적용됩니다.&lt;/p&gt;&lt;p&gt;$ sudo&amp;nbsp;kill -SIGHUP $(pidof dockerd)&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;dockerd 옵션에 oreo:5000 이 Insecure Registries 에서 빠져 있는 것을 볼 수 있습니다.&lt;/p&gt;&lt;p&gt;$ sudo docker system info&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;Storage Driver: overlay2&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;Insecure Registries:&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&amp;nbsp; docker-registry:5000&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;&amp;nbsp; 127.0.0.0/8&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/241&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Container</category>
<category>docker</category>
<category>dockerd</category>
<category>Option</category>
<category>reload</category>
<category>SIGHUP</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/241</guid>
<comments>https://ahnseungkyu.com/241#entry241comment</comments>
<pubDate>Sat, 27 Oct 2018 21:22:40 +0900</pubDate>
</item>
<item>
<title>Kubernetes dashboard 에 token 없이 접속하기</title>
<link>https://ahnseungkyu.com/240</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma;&quot;&gt;일반적으로 RBAC 으로 Kubernetes Dashboard 를 설치하면 service account 의 token 을 가지고 접속해야 합니다.&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;admin clusterrole 을 가진 secret 을 찾아서 해당 token 으로 접속합니다.&lt;/font&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: double; border-width: 3px; border-color: rgb(203, 203, 203); background-color: rgb(255, 255, 255); padding: 10px;&quot;&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;$ kubectl -n kube-system describe secret clusterrole-aggregation-controller-token-fmnfg&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;br /&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;Name:&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;clusterrole-aggregation-controller-token-fmnfg&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;Namespace:&amp;nbsp; &amp;nbsp; kube-system&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;Labels:&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;lt;none&amp;gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;Annotations:&amp;nbsp; kubernetes.io/service-account.name=clusterrole-aggregation-controller&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; kubernetes.io/service-account.uid=ccbaf065-8f01-11e8-80c8-3ca82a1ccfd4&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;br /&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;Type:&amp;nbsp; kubernetes.io/service-account-token&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;br /&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;Data&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;====&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;ca.crt:&amp;nbsp; &amp;nbsp; &amp;nbsp;1025 bytes&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;namespace:&amp;nbsp; 11 bytes&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;token:&amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;xxxxxxxxxxxxxxxxxxxxxxxxxxxx&lt;/span&gt;&lt;br /&gt;&lt;/font&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;br /&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;매번 이런 token 방식이 귀찮으면 아래와 같이 dashboard service account 에 admin clusterrole 을 지정하고 로그인 화면에서는 skip 을 클릭하여 넘어가면 됩니다.&lt;/font&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border-style: double; border-width: 3px; border-color: rgb(203, 203, 203); background-color: rgb(255, 255, 255); padding: 10px;&quot;&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;$ kubectl get serviceaccount -n kube-system | grep kubernetes-dashboard&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;kubernetes-dashboard&lt;/span&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;1&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;8d&amp;nbsp;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;br /&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;$&amp;nbsp;kubectl create clusterrolebinding kubernetes-dashboard-admin \&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;--clusterrole=cluster-admin \&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;--serviceaccount=&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;kube-system:kubernetes-dashboard&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;br /&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;br /&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;br /&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;br /&gt;&lt;/font&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/240&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Kubernetes</category>
<category>dashbard</category>
<category>kubernetes</category>
<category>token</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/240</guid>
<comments>https://ahnseungkyu.com/240#entry240comment</comments>
<pubDate>Wed, 01 Aug 2018 15:58:23 +0900</pubDate>
</item>
<item>
<title>Ingress Controller 와 Kubernetes dashboard ssl 연결</title>
<link>https://ahnseungkyu.com/239</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;Kubernetes dashboard 를 Ingress Controller 와 연결할 때 SSL 을 적용하고 싶으면 다음과 같이 Ingress 를 생성하면 된다.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;Kubernetes dashboard ingress&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;pre style=&quot;background-color:#2b2b2b;color:#a9b7c6;font-family:'Menlo';font-size:9.0pt;&quot;&gt;&lt;span style=&quot;color: rgb(204, 120, 50); font-weight: bold; font-size: 10pt;&quot;&gt;apiVersion: &lt;/span&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;extensions/v1beta1&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color: rgb(204, 120, 50); font-weight: bold; font-size: 10pt;&quot;&gt;kind: &lt;/span&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;Ingress&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;metadata:&lt;/span&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;  annotations:&lt;/span&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(204, 120, 50); font-weight: bold; font-size: 10pt;&quot;&gt;    kubernetes.io/ingress.class: &lt;/span&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;nginx&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: rgb(204, 120, 50); font-weight: bold; font-size: 10pt;&quot;&gt;nginx.ingress.kubernetes.io/secure-backends: &lt;/span&gt;&lt;span style=&quot;color:#6a8759;&quot;&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;&quot;true&quot;&lt;/span&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(106, 135, 89); font-size: 10pt;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: rgb(204, 120, 50); font-weight: bold; font-size: 10pt;&quot;&gt;ingress.kubernetes.io/ssl-passthrough: &lt;/span&gt;&lt;span style=&quot;color:#6a8759;&quot;&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;&quot;true&quot;&lt;/span&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(106, 135, 89); font-size: 10pt;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: rgb(204, 120, 50); font-weight: bold; font-size: 10pt;&quot;&gt;nginx.org/ssl-backend: &lt;/span&gt;&lt;span style=&quot;color:#6a8759;&quot;&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;&quot;kubernetes-dashboard&quot;&lt;/span&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(106, 135, 89); font-size: 10pt;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: rgb(204, 120, 50); font-weight: bold; font-size: 10pt;&quot;&gt;kubernetes.io/ingress.allow-http: &lt;/span&gt;&lt;span style=&quot;color:#6a8759;&quot;&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;&quot;false&quot;&lt;/span&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(106, 135, 89); font-size: 10pt;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: rgb(204, 120, 50); font-weight: bold; font-size: 10pt;&quot;&gt;nginx.ingress.kubernetes.io/rewrite-target: &lt;/span&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;/&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color: rgb(204, 120, 50); font-weight: bold; font-size: 10pt;&quot;&gt;nginx.ingress.kubernetes.io/proxy-body-size: &lt;/span&gt;&lt;span style=&quot;color:#6a8759;&quot;&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;&quot;100M&quot;&lt;/span&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(106, 135, 89); font-size: 10pt;&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: rgb(204, 120, 50); font-weight: bold; font-size: 10pt;&quot;&gt;name: &lt;/span&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;kubernetes-dashboard&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color: rgb(204, 120, 50); font-weight: bold; font-size: 10pt;&quot;&gt;namespace: &lt;/span&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;kube-system&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;spec:&lt;/span&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;  tls:&lt;/span&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(204, 120, 50); font-weight: bold; font-size: 10pt;&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;- &lt;/span&gt;&lt;span style=&quot;color: rgb(204, 120, 50); font-weight: bold; font-size: 10pt;&quot;&gt;secretName: &lt;/span&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;kubernetes-dashboard-certs&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;rules:&lt;/span&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(204, 120, 50); font-weight: bold; font-size: 10pt;&quot;&gt;  &lt;/span&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;- &lt;/span&gt;&lt;span style=&quot;color: rgb(204, 120, 50); font-weight: bold; font-size: 10pt;&quot;&gt;host: &lt;/span&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;dashboard.k8s.stage&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;http:&lt;/span&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;      paths:&lt;/span&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(204, 120, 50); font-weight: bold; font-size: 10pt;&quot;&gt;      &lt;/span&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;- &lt;/span&gt;&lt;span style=&quot;color: rgb(204, 120, 50); font-weight: bold; font-size: 10pt;&quot;&gt;path: &lt;/span&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;/&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;        &lt;/span&gt;&lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;backend:&lt;/span&gt;&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(204, 120, 50); font-weight: bold; font-size: 10pt;&quot;&gt;          serviceName: &lt;/span&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;kubernetes-dashboard&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;          &lt;/span&gt;&lt;span style=&quot;color: rgb(204, 120, 50); font-weight: bold; font-size: 10pt;&quot;&gt;servicePort: &lt;/span&gt;&lt;span style=&quot;font-size: 10pt;&quot;&gt;443&lt;/span&gt;&lt;/pre&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/239&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Kubernetes</category>
<category>Dashboard</category>
<category>ingress controller</category>
<category>kubernetes</category>
<category>SSL</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/239</guid>
<comments>https://ahnseungkyu.com/239#entry239comment</comments>
<pubDate>Tue, 31 Jul 2018 10:50:32 +0900</pubDate>
</item>
<item>
<title>Kubernetes pause infra container 코드 이해</title>
<link>https://ahnseungkyu.com/238</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;Kubernetes pause infra container 는 기존의 golang 에서 c 로 변경되었다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;main 함수를 보면 다음과 같다.&lt;/p&gt;&lt;pre style=&quot;background-color:#2b2b2b;color:#a9b7c6;font-family:'Menlo';font-size:9.0pt;&quot;&gt;&lt;span style=&quot;color:#cc7832;&quot;&gt;int &lt;/span&gt;main(&lt;span style=&quot;color:#cc7832;&quot;&gt;int &lt;/span&gt;argc, &lt;span style=&quot;color:#cc7832;&quot;&gt;char &lt;/span&gt;**argv) {&lt;br /&gt;  &lt;span style=&quot;color:#cc7832;&quot;&gt;int &lt;/span&gt;i;&lt;br /&gt;  &lt;span style=&quot;color:#cc7832;&quot;&gt;for &lt;/span&gt;(i = &lt;span style=&quot;color:#6897bb;&quot;&gt;1&lt;/span&gt;; i &amp;lt; argc; ++i) {&lt;br /&gt;    &lt;span style=&quot;color:#cc7832;&quot;&gt;if &lt;/span&gt;(!strcasecmp(argv[i], &lt;span style=&quot;color:#6a8759;&quot;&gt;&quot;-v&quot;&lt;/span&gt;)) {&lt;br /&gt;      printf(&lt;span style=&quot;color:#6a8759;&quot;&gt;&quot;pause.c %s&lt;/span&gt;&lt;span style=&quot;color:#4646f1;&quot;&gt;\n&lt;/span&gt;&lt;span style=&quot;color:#6a8759;&quot;&gt;&quot;&lt;/span&gt;, VERSION_STRING(VERSION));&lt;br /&gt;      &lt;span style=&quot;color:#cc7832;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color:#6897bb;&quot;&gt;0&lt;/span&gt;;&lt;br /&gt;    }&lt;br /&gt;  }&lt;br /&gt;&lt;br /&gt;  &lt;span style=&quot;color:#cc7832;&quot;&gt;if &lt;/span&gt;(getpid() != &lt;span style=&quot;color:#6897bb;&quot;&gt;1&lt;/span&gt;)&lt;br /&gt;    &lt;span style=&quot;color:#808080;&quot;&gt;/* Not an error because pause sees use outside of infra containers. */&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color:#808080;&quot;&gt;    &lt;/span&gt;fprintf(stderr, &lt;span style=&quot;color:#6a8759;&quot;&gt;&quot;Warning: pause should be the first process&lt;/span&gt;&lt;span style=&quot;color:#4646f1;&quot;&gt;\n&lt;/span&gt;&lt;span style=&quot;color:#6a8759;&quot;&gt;&quot;&lt;/span&gt;);&lt;br /&gt;&lt;br /&gt;  &lt;span style=&quot;color:#cc7832;&quot;&gt;if &lt;/span&gt;(sigaction(SIGINT, &amp;amp;(&lt;span style=&quot;color:#cc7832;&quot;&gt;struct &lt;/span&gt;sigaction){.sa_handler = sigdown}, NULL) &amp;lt; &lt;span style=&quot;color:#6897bb;&quot;&gt;0&lt;/span&gt;)&lt;br /&gt;    &lt;span style=&quot;color:#cc7832;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color:#6897bb;&quot;&gt;1&lt;/span&gt;;&lt;br /&gt;  &lt;span style=&quot;color:#cc7832;&quot;&gt;if &lt;/span&gt;(sigaction(SIGTERM, &amp;amp;(&lt;span style=&quot;color:#cc7832;&quot;&gt;struct &lt;/span&gt;sigaction){.sa_handler = sigdown}, NULL) &amp;lt; &lt;span style=&quot;color:#6897bb;&quot;&gt;0&lt;/span&gt;)&lt;br /&gt;    &lt;span style=&quot;color:#cc7832;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color:#6897bb;&quot;&gt;2&lt;/span&gt;;&lt;br /&gt;  &lt;span style=&quot;color:#cc7832;&quot;&gt;if &lt;/span&gt;(sigaction(SIGCHLD, &amp;amp;(&lt;span style=&quot;color:#cc7832;&quot;&gt;struct &lt;/span&gt;sigaction){.sa_handler = sigreap,&lt;br /&gt;                                             .sa_flags = SA_NOCLDSTOP},&lt;br /&gt;                NULL) &amp;lt; &lt;span style=&quot;color:#6897bb;&quot;&gt;0&lt;/span&gt;)&lt;br /&gt;    &lt;span style=&quot;color:#cc7832;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color:#6897bb;&quot;&gt;3&lt;/span&gt;;&lt;br /&gt;&lt;br /&gt;  &lt;span style=&quot;color:#cc7832;&quot;&gt;for &lt;/span&gt;(;;)&lt;br /&gt;    pause();&lt;br /&gt;  fprintf(stderr, &lt;span style=&quot;color:#6a8759;&quot;&gt;&quot;Error: infinite loop terminated&lt;/span&gt;&lt;span style=&quot;color:#4646f1;&quot;&gt;\n&lt;/span&gt;&lt;span style=&quot;color:#6a8759;&quot;&gt;&quot;&lt;/span&gt;);&lt;br /&gt;  &lt;span style=&quot;color:#cc7832;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color:#6897bb;&quot;&gt;42&lt;/span&gt;;&lt;br /&gt;}&lt;/pre&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;pause 는 infra container 이므로 getpid() 가 1 인 최상의 프로세스가 되는 것이 Security 측면에서 바람직하다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;sigaction 은 signal 이 SIGINT (키보드 ctrl + c 로 종료), SIGTERM (종료) 가 들어오면 sigdown 함수를 handler 로 등록해서 수행한다.&lt;/p&gt;&lt;p&gt;자식 프로세스가 종료되거나 정지/재시작 될 때&amp;nbsp;SIGCHLD signal 이 발생하는데, SA_NOCLDSTOP flag 는&amp;nbsp;자식 프로세스가 정지되는 4가지의 signal - SIGSTOP(프로세스 정지), SIGTSTP(키보드 ctrl + z 로 발생한 프로세스 정지), SIGTTIN(백그라운드에서 제어터미널 읽기를 시도해서 정지), SIGTTOU(백그라운드에서 제어터미널 쓰기를 시도해서 정지)&amp;nbsp;등을 받아서 정지되거나 CONTINUE signal 을 받아서 재시작되어도&amp;nbsp;이를 통지 받지 않겠다는 의미이다.&amp;nbsp;즉, pause 가 부모 프로세스가 이지만 SIGCHLD signal 을 통보받을 필요가 없다고 생각하는 것이다.&amp;nbsp; 하지만 그 나머지인 경우인&amp;nbsp;자식 프로세스가 종료되는 경우에는 signal 을 받을 수 밖에 없다. 이 때는 waitpid 함수를 통해서 혹시라도 자식 프로세스가 좀비가 되었을 때 좀비 프로세스를 제거할 수 있다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;sigaction 함수는 에러가 발생하면 -1 을 정상 처리되면 0을&amp;nbsp;리턴한다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;pre style=&quot;background-color:#2b2b2b;color:#a9b7c6;font-family:'Menlo';font-size:9.0pt;&quot;&gt;&lt;p&gt;&lt;span style=&quot;color:#cc7832;&quot;&gt;static void &lt;/span&gt;sigdown(&lt;span style=&quot;color:#cc7832;&quot;&gt;int &lt;/span&gt;signo) {&lt;br /&gt;  psignal(signo, &lt;span style=&quot;color:#6a8759;&quot;&gt;&quot;Shutting down, got signal&quot;&lt;/span&gt;);&lt;br /&gt;  exit(&lt;span style=&quot;color:#6897bb;&quot;&gt;0&lt;/span&gt;);&lt;br /&gt;}&lt;br /&gt;&lt;/p&gt;&lt;/pre&gt;&lt;p&gt;psignal 함수는 두번째 인자로 들어온 string 을 stderr 로 출력한다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;pre style=&quot;background-color:#2b2b2b;color:#a9b7c6;font-family:'Menlo';font-size:9.0pt;&quot;&gt;&lt;span style=&quot;color:#cc7832;&quot;&gt;static void &lt;/span&gt;sigreap(&lt;span style=&quot;color:#cc7832;&quot;&gt;int &lt;/span&gt;signo) {&lt;br /&gt;  &lt;span style=&quot;color:#cc7832;&quot;&gt;while &lt;/span&gt;(waitpid(-&lt;span style=&quot;color:#6897bb;&quot;&gt;1&lt;/span&gt;, NULL, WNOHANG) &amp;gt; &lt;span style=&quot;color:#6897bb;&quot;&gt;0&lt;/span&gt;)&lt;br /&gt;    ;&lt;br /&gt;}&lt;br /&gt;&lt;/pre&gt;&lt;p&gt;자식 프로세스가 왜 종료&amp;nbsp;되었는지는 관심이 없고 단순히 자식 프로세스가 종료될 때 좀비 프로세스를 막고자 한다면&amp;nbsp;waitpid 함수를 위와 같이 사용한다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;첫번재 인자로 전달된 pid 값이 -1 이면 모든 자식 프로세스가 종료될 때 까지 기다린다. 하지만 마지막 인자로 WNOHANG 이 입력되면 부모 프로세스는 기다리지 않고 바로 리턴된다. 하나의 SIGCHLD 에 대해서 while 문으로 처리한 이유는 여러 자식 프로세스가 종료될 수 있는 가능성이 있기 때문이다. 즉, SIGCHLD signal 이전에 좀비 프로세스가 있으면 그것을 처리한다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;그럼 결과적으로는 SIGCHLD signal 이 발생할 때 pause 프로세스는 아무것도 기다리지 않고 좀비 프로세스가 있으면 처리하고&amp;nbsp;바로 리턴한다.&lt;/p&gt;&lt;p&gt;그리고 마지막에 pause() 함수에 의해서&amp;nbsp;잠시 정지 상태가 된다.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;* 좀비 프로세스 : 자식 프로세스가 종료되어 사용하는 리소스는 모두 해제된 상태지만, 부모 프로세스가 자식 프로세스의&amp;nbsp;종료를 확인하지 못한 상태로 커널의 프로세스 테이블에는 관리되고 있는 상태&lt;/p&gt;&lt;p&gt;* 고아 프로세스 : 자식 프로세스 보다 부모 프로세스가 죽었을 경우 자식 프로세스가 pid 1 인 init 프로세스에 속하게 된 경우&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/238&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Kubernetes</category>
<category>infre container</category>
<category>kubernetes</category>
<category>pause</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/238</guid>
<comments>https://ahnseungkyu.com/238#entry238comment</comments>
<pubDate>Thu, 03 May 2018 17:39:10 +0900</pubDate>
</item>
<item>
<title>chat 프로그램에서 go channel 을 안정적으로 사용하기</title>
<link>https://ahnseungkyu.com/237</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;전쳬 에제 소스&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/seungkyua/hello-go&quot; target=&quot;_blank&quot; class=&quot;tx-link&quot;&gt;https://github.com/seungkyua/hello-go&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;Go 프로그램에서 channel 을 사용할 때 가장 중요한 부분은 channel 을 한 번만 닫아야 한다는 것이다. 그렇지 않고 닫힌 channel 을 중복해서 닫으려고 하면 panic 이 발생한다. 그래서 Discovery Go 책에서는 channel 에 값을&amp;nbsp;보내는 쪽에서 닫는 패턴을 추천한다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;프로젝트로 완성하는 Go 프로그래밍(Go Programming Blueprints Second Edition) 의 chat 예제를 보면 client 가 종료되어도 client 가 가지고 있는&amp;nbsp;채널을 닫지 않는 에러가 있어 이를 간단히 수정했다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;client.go 의 client struct 에 필요없는 room 변수는 삭제했다. (나중에 필요하면 추가할지도)&lt;/p&gt;&lt;p&gt;대신 read 메소드에 root 의 forward channel 을 인자로 받는다.&amp;nbsp;&lt;/p&gt;&lt;pre style=&quot;background-color:#2b2b2b;color:#a9b7c6;font-family:'Menlo';font-size:9.0pt;&quot;&gt;&lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;type &lt;/span&gt;client &lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;struct &lt;/span&gt;{&lt;br /&gt;   socket *websocket.Conn&lt;br /&gt;   send   &lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;chan &lt;/span&gt;[]&lt;span style=&quot;color:#769aa5;&quot;&gt;byte&lt;br /&gt;&lt;/span&gt;}&lt;/pre&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;read 메소드에는 socket close 하는 부분이 있는데 socket 에러가 나면 read 가 에러가 날 것이고 이 때 defer 로 channel 닫는 부분을 추가한다. write 메소드에는 중복을 피하기 위해서 channel 닫는 부분을 넣지 않았다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;pre style=&quot;background-color:#2b2b2b;color:#a9b7c6;font-family:'Menlo';font-size:9.0pt;&quot;&gt;&lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;func &lt;/span&gt;(c *&lt;span style=&quot;color:#769aa5;&quot;&gt;client&lt;/span&gt;) &lt;span style=&quot;color:#ffc66d;&quot;&gt;read&lt;/span&gt;(forward &lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;chan&lt;/span&gt;&amp;lt;- []&lt;span style=&quot;color:#769aa5;&quot;&gt;byte&lt;/span&gt;) {&lt;br /&gt;   &lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;defer func&lt;/span&gt;() {&lt;br /&gt;      c.socket.&lt;span style=&quot;color:#ffc66d;&quot;&gt;Close&lt;/span&gt;()&lt;br /&gt;      log.&lt;span style=&quot;color:#ffc66d;&quot;&gt;Println&lt;/span&gt;(&lt;span style=&quot;color:#6a8759;&quot;&gt;&quot;Client socker read closed.&quot;&lt;/span&gt;)&lt;br /&gt;      &lt;span style=&quot;color:#ffc66d;&quot;&gt;close&lt;/span&gt;(c.send)&lt;br /&gt;      log.&lt;span style=&quot;color:#ffc66d;&quot;&gt;Println&lt;/span&gt;(&lt;span style=&quot;color:#6a8759;&quot;&gt;&quot;Client send channel closed.&quot;&lt;/span&gt;)&lt;br /&gt;   }()&lt;br /&gt;   &lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;for &lt;/span&gt;{&lt;br /&gt;      _&lt;span style=&quot;color:#cc7832;&quot;&gt;, &lt;/span&gt;msg&lt;span style=&quot;color:#cc7832;&quot;&gt;, &lt;/span&gt;err := c.socket.&lt;span style=&quot;color:#ffc66d;&quot;&gt;ReadMessage&lt;/span&gt;()&lt;br /&gt;      &lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;if &lt;/span&gt;err != nil {&lt;br /&gt;         log.&lt;span style=&quot;color:#ffc66d;&quot;&gt;Println&lt;/span&gt;(&lt;span style=&quot;color:#6a8759;&quot;&gt;&quot;Client Socket ReadMaessage error&quot;&lt;/span&gt;)&lt;br /&gt;         &lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;return&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;      &lt;/span&gt;}&lt;br /&gt;      forward &amp;lt;- msg&lt;br /&gt;   }&lt;br /&gt;}&lt;/pre&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp;root.go 에서는 쓰이고 있지는 않지만 client 에 leave 할 경우&amp;nbsp;기존&amp;nbsp;client channel 닫는 소스 대신 client socket 을 닫는 부분으로 변경했다. range 로 모든 client channel 에 값을 보내고 있기 때문에 여기는 보내는 channel 이지만 channel 을 닫기가 어렵다. 그래서 client 에서 channel 을 닫는 로직을 추가했다.&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;root struct 에서 생성한 forward, join, leave channel 은 처리하지 않았다. 나중에 room 에 client 가 아무도 없을 때의 로직에 추가되면 그 때 닫는 부분을 추가해야 한다.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;pre style=&quot;background-color:#2b2b2b;color:#a9b7c6;font-family:'Menlo';font-size:9.0pt;&quot;&gt;&lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;func &lt;/span&gt;(r *&lt;span style=&quot;color:#769aa5;&quot;&gt;room&lt;/span&gt;) &lt;span style=&quot;color:#ffc66d;&quot;&gt;run&lt;/span&gt;() {&lt;br /&gt;   &lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;go func&lt;/span&gt;() {&lt;br /&gt;      &lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;for &lt;/span&gt;{&lt;br /&gt;         &lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;select &lt;/span&gt;{&lt;br /&gt;         &lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;case &lt;/span&gt;client := &amp;lt;-r.join:&lt;br /&gt;            r.clients[client] = &lt;span style=&quot;color:#9876aa;font-style:italic;&quot;&gt;true&lt;br /&gt;&lt;/span&gt;&lt;span style=&quot;color:#9876aa;font-style:italic;&quot;&gt;         &lt;/span&gt;&lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;case &lt;/span&gt;client := &amp;lt;-r.leave:&lt;br /&gt;            &lt;span style=&quot;color:#ffc66d;&quot;&gt;delete&lt;/span&gt;(r.clients&lt;span style=&quot;color:#cc7832;&quot;&gt;, &lt;/span&gt;client)&lt;br /&gt;            client.socket.&lt;span style=&quot;color:#ffc66d;&quot;&gt;Close&lt;/span&gt;()&lt;br /&gt;         &lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;case &lt;/span&gt;msg := &amp;lt;-r.forward:&lt;br /&gt;            &lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;for &lt;/span&gt;client := &lt;span style=&quot;color:#cc7832;font-weight:bold;&quot;&gt;range &lt;/span&gt;r.clients {&lt;br /&gt;               client.send &amp;lt;- msg&lt;br /&gt;            }&lt;br /&gt;         }&lt;br /&gt;      }&lt;br /&gt;   }()&lt;br /&gt;}&lt;/pre&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/237&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Go</category>
<category>channel</category>
<category>chat</category>
<category>golang</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/237</guid>
<comments>https://ahnseungkyu.com/237#entry237comment</comments>
<pubDate>Tue, 01 May 2018 19:32:11 +0900</pubDate>
</item>
<item>
<title>2018년 3월 26일(월) CNC &amp; Kubernetes Meetup 발표 자료</title>
<link>https://ahnseungkyu.com/236</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size:18pt;&quot;&gt;2018년 3월 26일 &lt;/span&gt;&lt;span style=&quot;font-size: 18pt;&quot;&gt;CNC &amp;amp; Kubernetes Meetup 발표 자료&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;•&lt;/span&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;facebook group :&amp;nbsp;&lt;a href=&quot;https://www.facebook.com/groups/k8skr/&quot; target=&quot;_blank&quot; class=&quot;tx-link&quot;&gt;https://www.facebook.com/groups/k8skr/&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;• 일시: 2018년 3월 26일(월) 오후 7시 30분 - 9시 30분&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;• 장소: 역삼역 7번 출구 GS타워 12층 AWS코리아 (강남구 논현로 508)&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;• 세션 내용:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;19:30-20:10 Kubernetes 를 이용한 Cloud native platform 개발 (어형부형)&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;20:10-20:50 Helm chart 를 활용한 App 배포 방법 (안승규)&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;margin-bottom:5px&quot;&gt; &lt;strong&gt; &lt;a href=&quot;//www.slideshare.net/skanddh/kubernetes-helm&quot; title=&quot;Kubernetes &amp;amp; helm 활용&quot; target=&quot;_blank&quot;&gt;&lt;span style=&quot;font-size: 18pt;&quot;&gt;Kubernetes &amp;amp; helm 활용&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;font-size: 18pt;&quot;&gt; &lt;/span&gt;&lt;/strong&gt;&lt;span style=&quot;font-size: 18pt;&quot;&gt; from &lt;/span&gt;&lt;strong&gt;&lt;a href=&quot;https://www.slideshare.net/skanddh&quot; target=&quot;_blank&quot;&gt;&lt;span style=&quot;font-size: 18pt;&quot;&gt;SK Telecom&lt;/span&gt;&lt;/a&gt;&lt;/strong&gt; &lt;/div&gt;&lt;p&gt;&lt;iframe src=&quot;//www.slideshare.net/slideshow/embed_code/key/334jamnEhHGI6t&quot; width=&quot;595&quot; height=&quot;485&quot; frameborder=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; style=&quot;border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;&quot; allowfullscreen=&quot;&quot;&gt; &lt;/iframe&gt; &lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/236&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Kubernetes</category>
<category>helm</category>
<category>kubernetes</category>
<category>Kubernetes Korea User Group</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/236</guid>
<comments>https://ahnseungkyu.com/236#entry236comment</comments>
<pubDate>Sat, 07 Apr 2018 10:20:25 +0900</pubDate>
</item>
<item>
<title>Helm chart</title>
<link>https://ahnseungkyu.com/235</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&lt;b&gt;# ingress.yaml&amp;nbsp;&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;images:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; tags:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; entrypoint: registry.cicd.stg.taco/kubernetes-entrypoint:v0.2.1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ingress: registry.cicd.stg.taco/nginx-ingress-controller:0.9.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; error_pages: registry.cicd.stg.taco/defaultbackend:1.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; dep_check: registry.cicd.stg.taco/kubernetes-entrypoint:v0.2.1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; pull_policy: Always&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; config:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; worker-processes: &quot;8&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; pod:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; replicas:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ingress: 1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; error_page: 1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&lt;b&gt;# openstack-ceph-config.yaml&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;images:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; tags:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ks_user: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ks_service: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ks_endpoints: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ceph_bootstrap: registry.cicd.stg.taco/ceph-daemon:tag-build-master-jewel-ubuntu-16.04&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; dep_check: registry.cicd.stg.taco/kubernetes-entrypoint:v0.2.1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ceph_daemon: registry.cicd.stg.taco/ceph-daemon:tag-build-master-jewel-ubuntu-16.04&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ceph_config_helper: registry.cicd.stg.taco/ceph-config-helper:v1.7.5&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ceph_rbd_provisioner: registry.cicd.stg.taco/rbd-provisioner:v0.1.1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ceph_cephfs_provisioner: registry.cicd.stg.taco/cephfs-provisioner:v0.1.1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; pull_policy: IfNotPresent&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; deployment:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; storage_secrets: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; client_secrets: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; rbd_provisioner: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; cephfs_provisioner: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; rgw_keystone_user_and_endpoints: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; conf:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; ceph:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; global:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; mon_host: 192.168.51.20&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; storageclass:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; rbd:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; provision_storage_class: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; user_id: cinder&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; admin_secret_namespace: openstack&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; cephfs:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; provision_storage_class: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; dmin_secret_namespace: openstack&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; manifests:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; configmap_bin_clients: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; configmap_bin_ks: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; configmap_bin: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; configmap_etc: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; configmap_templates: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; daemonset_mon: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; daemonset_osd: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; deployment_mds: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; deployment_moncheck: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; deployment_rbd_provisioner: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; deployment_cephfs_provisioner: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; deployment_rgw: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; deployment_mgr: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; job_bootstrap: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; job_cephfs_client_key: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; job_keyring: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; job_ks_endpoints: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; job_ks_service: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; job_ks_user: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; job_namespace_client_key_cleaner: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; job_namespace_client_key: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; job_rbd_pool: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; job_storage_admin_keys: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; secret_keystone_rgw: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; secret_keystone: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; service_mgr: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; service_mon: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; service_rgw: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; service_mon_discovery: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; storageclass: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; dependencies:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; rbd_provisioner:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; jobs:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; services:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&lt;b&gt;# mariadb.yaml&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;images:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; tags:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; mariadb: registry.cicd.stg.taco/mariadb:10.1.23&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; test: registry.cicd.stg.taco/ocata/ubuntu-source-kolla-toolbox:develop&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; pull_policy: Always&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; pod:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; replicas:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; server: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; volume:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; enabled: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; class_name: ceph&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&lt;b&gt;# etcd.yaml&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;images:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; tags:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; etcd: registry.cicd.stg.taco/etcd:v3.2.5&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; test: registry.cicd.stg.taco/ocata/ubuntu-source-kolla-toolbox:develop&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; pull_policy: IfNotPresent&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; pod:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; replicas:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; etcd: 1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&lt;b&gt;# rabbitmq.yaml&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;images:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; tags:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; rabbitmq: registry.cicd.stg.taco/rabbitmq:3.7&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; dep_check: registry.cicd.stg.taco/kubernetes-entrypoint:v0.2.1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; test: registry.cicd.stg.taco/ocata/ubuntu-source-keystone:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; pull_policy: IfNotPresent&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; pod:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; replicas:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; server: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; volume:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; class_name: ceph&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&lt;b&gt;# memcached.yaml&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;images:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; tags:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; dep_check: registry.cicd.stg.taco/kubernetes-entrypoint:v0.2.1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; memcached: registry.cicd.stg.taco/memcached:1.5.5&amp;nbsp;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; pull_policy: IfNotPresent&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; pod:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; replicas:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; server: 1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&lt;b&gt;# libvirt.yaml&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;images:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; tags:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; libvirt: registry.cicd.stg.taco/ocata/ubuntu-source-nova-libvirt:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; pull_policy: Always&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; ceph:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; enabled: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; cinder_user: &quot;cinder&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; cinder_keyring: &quot;xxxxx==&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; libvirt:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; listen_addr: 0.0.0.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; log_level: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; manifests:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; configmap_bin: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; configmap_etc: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; daemonset_libvirt: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;br /&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&lt;b&gt;# openvswitch.yaml&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;images:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; tags:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; openvswitch_db_server: registry.cicd.stg.taco/ocata/ubuntu-source-openvswitch-db-server:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; openvswitch_vswitchd: registry.cicd.stg.taco/ocata/ubuntu-source-openvswitch-vswitchd:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; pull_policy: Always&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; network:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; external_bridge: br-ex&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; interface:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; external: bond1.52&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; auto_bridge_add: {}&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&lt;b&gt;# keystone.yaml&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;images:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; tags:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; bootstrap: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; test: registry.cicd.stg.taco/ocata/ubuntu-source-rally:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; db_init: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; keystone_db_sync: registry.cicd.stg.taco/ocata/ubuntu-source-keystone:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; db_drop: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; keystone_fernet_setup: registry.cicd.stg.taco/ocata/ubuntu-source-keystone:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; keystone_fernet_rotate: registry.cicd.stg.taco/ocata/ubuntu-source-keystone:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; keystone_credential_setup: registry.cicd.stg.taco/ocata/ubuntu-source-keystone:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; keystone_credential_rotate: registry.cicd.stg.taco/ocata/ubuntu-source-keystone:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; keystone_api: registry.cicd.stg.taco/ocata/ubuntu-source-keystone:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; dep_check: registry.cicd.stg.taco/kubernetes-entrypoint:v0.2.1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; rabbit_init: registry.cicd.stg.taco/rabbitmq:3.7-management&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; pull_policy: Always&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; conf:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; keystone:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; DEFAULT:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; debug: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; pod:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; replicas:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; api: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&lt;b&gt;# glance.yaml&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;storage: rbd&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; images:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; tags:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; test: registry.cicd.stg.taco/ocata/ubuntu-source-rally:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; glance_storage_init: registry.cicd.stg.taco/ceph-daemon:tag-build-master-jewel-ubuntu-16.04&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; db_init: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; glance_db_sync: registry.cicd.stg.taco/ocata/ubuntu-source-glance-api:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; db_drop: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ks_user: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ks_service: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ks_endpoints: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; glance_api: registry.cicd.stg.taco/ocata/ubuntu-source-glance-api:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; glance_registry: registry.cicd.stg.taco/ocata/ubuntu-source-glance-registry:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; bootstrap: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; dep_check: registry.cicd.stg.taco/kubernetes-entrypoint:v0.2.1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; rabbit_init: registry.cicd.stg.taco/rabbitmq:3.7-management&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; pull_policy: Always&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; pod:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; replicas:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; api: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; registry: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; user:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; glance:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; uid: 42415&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; network:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; api:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ingress:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; proxy_body_size: 102400M&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; conf:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; ceph:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; monitors: [&quot;192.168.51.20&quot;]&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; admin_keyring: &quot;xxxx==&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; glance:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; glance_store:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; rbd_store_user: glance&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; rbd_store_pool: images&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; DEFAULT:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; show_image_direct_url: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; bootstrap:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; enabled: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; images:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; cirros:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; id: 201084fc-c276-4744-8504-cb974dbb3610&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; private: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&lt;b&gt;# nova.yaml&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;images:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; tags:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; bootstrap: registry.cicd.stg.taco/ocata/ubuntu-source-nova-api:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; db_init: registry.cicd.stg.taco/ocata/ubuntu-source-nova-api:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; db_drop: registry.cicd.stg.taco/ocata/ubuntu-source-nova-api:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; dep_check: registry.cicd.stg.taco/kubernetes-entrypoint:v0.2.1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; rabbit_init: registry.cicd.stg.taco/rabbitmq:3.7-management&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ks_user: registry.cicd.stg.taco/ocata/ubuntu-source-kolla-toolbox:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ks_service: registry.cicd.stg.taco/ocata/ubuntu-source-kolla-toolbox:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ks_endpoints: registry.cicd.stg.taco/ocata/ubuntu-source-kolla-toolbox:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; nova_api: registry.cicd.stg.taco/ocata/ubuntu-source-nova-api:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; nova_cell_setup: registry.cicd.stg.taco/ocata/ubuntu-source-nova-api:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; nova_compute: registry.cicd.stg.taco/ocata/ubuntu-source-nova-compute:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; nova_compute_ironic: registry.cicd.stg.taco/ocata/ubuntu-source-nova-compute-ironic:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; nova_compute_ssh: registry.cicd.stg.taco/ocata/ubuntu-source-nova-ssh:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; nova_conductor: registry.cicd.stg.taco/ocata/ubuntu-source-nova-conductor:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; nova_consoleauth: registry.cicd.stg.taco/ocata/ubuntu-source-nova-consoleauth:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; nova_db_sync: registry.cicd.stg.taco/ocata/ubuntu-source-nova-api:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; nova_novncproxy: registry.cicd.stg.taco/ocata/ubuntu-source-nova-novncproxy:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; nova_novncproxy_assets: registry.cicd.stg.taco/ocata/ubuntu-source-nova-novncproxy:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; nova_placement: registry.cicd.stg.taco/ocata/ubuntu-source-nova-placement-api:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; nova_scheduler: registry.cicd.stg.taco/ocata/ubuntu-source-nova-scheduler:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; nova_spiceproxy: registry.cicd.stg.taco/ocata/ubuntu-source-nova-spicehtml5proxy:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; nova_spiceproxy_assets: registry.cicd.stg.taco/ocata/ubuntu-source-nova-spicehtml5proxy:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; test: registry.cicd.stg.taco/ocata/ubuntu-source-rally:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; pull_policy: Always&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; bootstrap:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; enabled: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; flavors:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; m1_tiny:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; id: 0c84e220-a258-439f-a6ff-f8e9fd980025&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; network:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; novncproxy:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; name: &quot;nova-novncproxy&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; node_port:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; enabled: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; port: 30608&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; port: 6080&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; targetPort: 6080&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; ceph:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; enabled: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; cinder_user: &quot;cinder&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; cinder_keyring: &quot;xxxx==&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; secret_uuid: &quot;582393ff-9a5c-4a2e-ae0d-86ec18c36afc&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; conf:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; nova:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; DEFAULT:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; force_config_drive: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; scheduler_default_filters: &quot;RetryFilter,AvailabilityZoneFilter,RamFilter,ComputeFilter,ComputeCapabilitiesFilter,ImagePropertiesFilter,ServerGroupAntiAffinityFilter,ServerGroupAffinityFilter&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; debug: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; vnc:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; novncproxy_base_url: http://ctrl01-stg:30608/vnc_auto.html&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; libvirt:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; rbd_user: &quot;cinder&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; rbd_secret_uuid: &quot;582393ff-9a5c-4a2e-ae0d-86ec18c36afc&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; scheduler:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; discover_hosts_in_cells_interval: 60&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; endpoints:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; oslo_db_cell0:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; path: /nova_cell0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; pod:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; user:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; nova:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; uid: 42436&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; replicas:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; api_metadata: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; osapi: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; conductor: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; consoleauth: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; scheduler: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; novncproxy: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;# neutron.yaml&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;images:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; tags:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; bootstrap: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; neutron_test: registry.cicd.stg.taco/ocata/ubuntu-source-rally:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; db_init: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; neutron_db_sync: registry.cicd.stg.taco/ocata/ubuntu-source-neutron-server:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; db_drop: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ks_user: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ks_service: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ks_endpoints: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; neutron_server: registry.cicd.stg.taco/ocata/ubuntu-source-neutron-server:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; neutron_dhcp: registry.cicd.stg.taco/ocata/ubuntu-source-neutron-dhcp-agent:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; neutron_metadata: registry.cicd.stg.taco/ocata/ubuntu-source-neutron-metadata-agent:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; neutron_l3: registry.cicd.stg.taco/ocata/ubuntu-source-neutron-l3-agent:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; neutron_openvswitch_agent: registry.cicd.stg.taco/ocata/ubuntu-source-neutron-openvswitch-agent:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; neutron_linuxbridge_agent: registry.cicd.stg.taco/ocata/ubuntu-source-neutron-linuxbridge-agent:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; dep_check: registry.cicd.stg.taco/kubernetes-entrypoint:v0.2.1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; rabbit_init: registry.cicd.stg.taco/rabbitmq:3.7-management&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; pull_policy: Always&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; pod:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; replicas:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; server: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; user:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; neutron:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; uid: 42435&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; labels:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; agent:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; dhcp:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; node_selector_key: openstack-network-node&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; l3:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; node_selector_key: openstack-network-node&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; manifests:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; daemonset_metadata_agent: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; daemonset_ovs_agent: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; daemonset_lb_agent: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; network:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; backend: ovs&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; external_bridge: br-ex&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; interface:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; tunnel: bond1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; conf:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; neutron_sudoers:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; override: |&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; # This sudoers file supports rootwrap-daemon for both Kolla and LOCI Images.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; Defaults !requiretty&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; Defaults secure_path=&quot;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin:/var/lib/openstack/bin:/var/lib/kolla/venv/bin&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; neutron ALL = (root) NOPASSWD: /var/lib/kolla/venv/bin/neutron-rootwrap /etc/neutron/rootwrap.conf *, /var/lib/openstack/bin/neutron-rootwrap /etc/neutron/rootwrap.conf *, /var/lib/kolla/venv/bin/neutron-rootwrap-daemon /etc/neutron/rootwrap.conf, /var/lib/openstack/bin/neutron-rootwrap-daemon /etc/neutron/rootwrap.conf&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; neutron:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; DEFAULT:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; debug: True&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; core_plugin: ml2&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; l3_ha: True&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; global_physnet_mtu: 9000&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; service_plugins: router&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; interface_driver: openvswitch&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; agent:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; root_helper_daemon: sudo neutron-rootwrap-daemon /etc/neutron/rootwrap.conf&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; plugins:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ml2_conf:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ml2:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; mechanism_drivers: openvswitch,l2population&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; type_drivers: flat, vlan, vxlan&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; tenant_network_types: vxlan&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; openvswitch_agent:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; agent:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; tunnel_types: vxlan&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; l2_population: True&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; arp_responder: True&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ovs:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; bridge_mappings: &quot;external:br-ex&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; securitygroup:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; firewall_driver: openvswitch&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&lt;b&gt;# cinder.yaml&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;images:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; tags:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; test: registry.cicd.stg.taco/ocata/ubuntu-source-rally:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; db_init: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; cinder_db_sync: registry.cicd.stg.taco/ocata/ubuntu-source-cinder-api:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; db_drop: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ks_user: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ks_service: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ks_endpoints: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; cinder_api: registry.cicd.stg.taco/ocata/ubuntu-source-cinder-api:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; bootstrap: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; cinder_scheduler: registry.cicd.stg.taco/ocata/ubuntu-source-cinder-scheduler:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; cinder_volume: registry.cicd.stg.taco/ocata/ubuntu-source-cinder-volume:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; cinder_volume_usage_audit: registry.cicd.stg.taco/ocata/ubuntu-source-cinder-volume:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; cinder_storage_init: registry.cicd.stg.taco/ceph-daemon:tag-build-master-jewel-ubuntu-16.04&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; cinder_backup: registry.cicd.stg.taco/ocata/ubuntu-source-cinder-backup:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; cinder_backup_storage_init: registry.cicd.stg.taco/ceph-daemon:tag-build-master-jewel-ubuntu-16.04&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; dep_check: registry.cicd.stg.taco/kubernetes-entrypoint:v0.2.1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; rabbit_init: registry.cicd.stg.taco/rabbitmq:3.7-management&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; pull_policy: Always&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; pod:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; user:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; cinder:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; uid: 42407&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; replicas:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; api: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; backup: 1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; scheduler: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; volume: 1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; conf:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; ceph:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; admin_keyring: &quot;xxxxx==&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; monitors: [&quot;192.168.51.20&quot;]&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; cinder:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; DEFAULT:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; debug: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; backup_ceph_user: &quot;cinder&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; backup_ceph_pool: &quot;backups&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; backends:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; rbd1:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; volume_driver: cinder.volume.drivers.rbd.RBDDriver&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; volume_backend_name: rbd1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; rbd_ceph_conf: &quot;/etc/ceph/ceph.conf&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; rbd_flatten_volume_from_snapshot: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; rbd_max_clone_depth: 5&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; rbd_store_chunk_size: 4&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; rados_connect_timeout: -1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; rbd_user: &quot;cinder&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; rbd_pool: &quot;volumes&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&lt;b&gt;# heat.yaml&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;images:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; tags:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; bootstrap: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; db_init: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; heat_db_sync: registry.cicd.stg.taco/ocata/ubuntu-source-heat-api:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; db_drop: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ks_user: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ks_service: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ks_endpoints: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; heat_api: registry.cicd.stg.taco/ocata/ubuntu-source-heat-api:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; heat_cfn: registry.cicd.stg.taco/ocata/ubuntu-source-heat-api:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; heat_cloudwatch: registry.cicd.stg.taco/ocata/ubuntu-source-heat-api:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; heat_engine: registry.cicd.stg.taco/ocata/ubuntu-source-heat-engine:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; dep_check: registry.cicd.stg.taco/kubernetes-entrypoint:v0.2.1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; rabbit_init: registry.cicd.stg.taco/rabbitmq:3.7-management&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; pull_policy: Always&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; pod:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; user:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; heat:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; uid: 42418&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; replicas:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; api: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; cfn: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; cloudwatch: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; engine: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&lt;b&gt;# horizon.yaml&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;images:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; tags:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; db_init: registry.cicd.stg.taco/ocata/ubuntu-source-horizon:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; horizon_db_sync: registry.cicd.stg.taco/ocata/ubuntu-source-horizon:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; horizon: registry.cicd.stg.taco/ocata/ubuntu-source-horizon:2.2.0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; dep_check: registry.cicd.stg.taco/kubernetes-entrypoint:v0.2.1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; test: registry.cicd.stg.taco/ocata/ubuntu-source-horizon:develop&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; pull_policy: Always&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; pod:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; replicas:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; server: 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; network:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; external_policy_local: false&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; node_port:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; enabled: true&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; port: 32000&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; local_settings:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; openstack_neutron_network:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; enable_router: &quot;True&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; enable_quotas: &quot;True&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; enable_ipv6: &quot;False&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; enable_distributed_router: &quot;False&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; enable_ha_router: &quot;True&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; enable_lb: &quot;True&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; enable_firewall: &quot;False&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; enable_vpn: &quot;False&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; enable_fip_topology_check: &quot;True&quot;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Helvetica; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/235&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>OpenStack</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/235</guid>
<comments>https://ahnseungkyu.com/235#entry235comment</comments>
<pubDate>Fri, 23 Mar 2018 10:33:55 +0900</pubDate>
</item>
<item>
<title>From Kubernetes to OpenStack in Sydney, 2017</title>
<link>https://ahnseungkyu.com/234</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;OpenStack 발표자료 (From Kubernetes to OpenStack)&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;margin-bottom:5px&quot;&gt; &lt;strong&gt; &lt;a href=&quot;//www.slideshare.net/skanddh/from-kubernetes-to-openstack-in-sydney&quot; title=&quot;From Kubernetes to OpenStack in Sydney&quot; target=&quot;_blank&quot;&gt;From Kubernetes to OpenStack in Sydney&lt;/a&gt; &lt;/strong&gt; from &lt;strong&gt;&lt;a href=&quot;https://www.slideshare.net/skanddh&quot; target=&quot;_blank&quot;&gt;SK Telecom&lt;/a&gt;&lt;/strong&gt; &lt;/div&gt;&lt;p&gt;&lt;iframe src=&quot;//www.slideshare.net/slideshow/embed_code/key/tqw6RXCfulz5x&quot; width=&quot;595&quot; height=&quot;485&quot; frameborder=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; style=&quot;border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;&quot; allowfullscreen=&quot;&quot;&gt; &lt;/iframe&gt; &lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/234&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Design Summit</category>
<category>helm</category>
<category>kubernetes</category>
<category>OpenStack</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/234</guid>
<comments>https://ahnseungkyu.com/234#entry234comment</comments>
<pubDate>Sun, 25 Feb 2018 23:51:35 +0900</pubDate>
</item>
<item>
<title>mariadb with galera setting</title>
<link>https://ahnseungkyu.com/233</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: bold;&quot;&gt;## /etc/mysql/my.cnf 설정 파일&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;[mysqld]
&lt;/div&gt;&lt;div&gt;# base directory
&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;datadir=/var/lib/mysql&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;tmpdir=/tmp&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;# Charset
&lt;/div&gt;&lt;div&gt;character_set_server=utf8
&lt;/div&gt;&lt;div&gt;collation_server=utf8_unicode_ci
&lt;/div&gt;&lt;div&gt;skip-character-set-client-handshake
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;# Logging
&lt;/div&gt;&lt;div&gt;slow_query_log=on
&lt;/div&gt;&lt;div&gt;slow_query_log_file=/var/log/mysql/mariadb-slow.log
&lt;/div&gt;&lt;div&gt;log_warnings=2
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;# General logging has huge performance penalty therefore is disabled by default
&lt;/div&gt;&lt;div&gt;general_log=off
&lt;/div&gt;&lt;div&gt;general_log_file=/var/log/mysql/mariadb-error.log
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;long_query_time=3
&lt;/div&gt;&lt;div&gt;log_queries_not_using_indexes=on
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;# Networking
&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;bind_address=0.0.0.0&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;port=3306&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;# When a client connects, the server will perform hostname resolution,
&lt;/div&gt;&lt;div&gt;# and when DNS is slow, establishing the connection will become slow as well.
&lt;/div&gt;&lt;div&gt;# It is therefore recommended to start the server with skip-name-resolve to
&lt;/div&gt;&lt;div&gt;# disable all DNS lookups. The only limitation is that the GRANT statements
&lt;/div&gt;&lt;div&gt;# must then use IP addresses only.
&lt;/div&gt;&lt;div&gt;skip_name_resolve
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;# Tuning
&lt;/div&gt;&lt;div&gt;user=mysql
&lt;/div&gt;&lt;div&gt;max_allowed_packet=256M
&lt;/div&gt;&lt;div&gt;open_files_limit=10240
&lt;/div&gt;&lt;div&gt;max_connections=8192
&lt;/div&gt;&lt;div&gt;max-connect-errors=1000000
&lt;/div&gt;&lt;div&gt;join_buffer_size = 192K
&lt;/div&gt;&lt;div&gt;tmp_table_size = 16M
&lt;/div&gt;&lt;div&gt;max_heap_table_size = 16M
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;## Generally, it is unwise to set the query cache to be larger than 64-128M
&lt;/div&gt;&lt;div&gt;## as the costs associated with maintaining the cache outweigh the performance
&lt;/div&gt;&lt;div&gt;## gains.
&lt;/div&gt;&lt;div&gt;## The query cache is a well known bottleneck that can be seen even when
&lt;/div&gt;&lt;div&gt;## concurrency is moderate. The best option is to disable it from day 1
&lt;/div&gt;&lt;div&gt;## by setting query_cache_size=0 (now the default on MySQL 5.6)
&lt;/div&gt;&lt;div&gt;## and to use other ways to speed up read queries: good indexing, adding
&lt;/div&gt;&lt;div&gt;## replicas to spread the read load or using an external cache.
&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;query_cache_size=0&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;query_cache_type=0&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;sync_binlog=0
&lt;/div&gt;&lt;div&gt;thread_cache_size=16
&lt;/div&gt;&lt;div&gt;table_open_cache=2048
&lt;/div&gt;&lt;div&gt;table_definition_cache=1024
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;#
&lt;/div&gt;&lt;div&gt;# InnoDB
&lt;/div&gt;&lt;div&gt;#
&lt;/div&gt;&lt;div&gt;# The buffer pool is where data and indexes are cached: having it as large as possible
&lt;/div&gt;&lt;div&gt;# will ensure you use memory and not disks for most read operations.
&lt;/div&gt;&lt;div&gt;# Typical values are 50..75% of available RAM.
&lt;/div&gt;&lt;div&gt;# TODO(tomasz.paszkowski): This needs to by dynamic based on available RAM.
&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;innodb_buffer_pool_size=10G&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;innodb_log_file_size=128M&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;innodb_file_per_table=1&lt;/span&gt;&lt;/div&gt;&lt;div&gt;innodb_doublewrite=0
&lt;/div&gt;&lt;div&gt;innodb_file_format=Barracuda
&lt;/div&gt;&lt;div&gt;innodb_flush_method=O_DIRECT
&lt;/div&gt;&lt;div&gt;innodb_io_capacity=500
&lt;/div&gt;&lt;div&gt;innodb_old_blocks_time=1000
&lt;/div&gt;&lt;div&gt;innodb_read_io_threads=8
&lt;/div&gt;&lt;div&gt;innodb_write_io_threads=8
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;# Clustering
&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;binlog_format=ROW&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;default-storage-engine=InnoDB&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;innodb_autoinc_lock_mode=2&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;innodb_flush_log_at_trx_commit=2&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;innodb_locks_unsafe_for_binlog=1&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_provider=/usr/lib/galera/libgalera_smm.so&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_cluster_name=mariadb&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_node_name=mariadb-0.mariadb-discovery&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_node_address=172.16.10.252&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_cluster_address=&quot;gcomm://mariadb-1.mariadb-discovery:4567,mariadb-2.mariadb-discovery:4567&quot;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_sst_method=xtrabackup-v2&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_sst_auth=root:password&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_provider_options=&quot;gcache.size=512M; gcache.name=/tmp/galera.cache; gcache.page_size=128M; gmcast.listen_addr=tcp://0.0.0.0:4567&quot;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_slave_threads=16&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_on=1&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;[mysqldump]
&lt;/div&gt;&lt;div&gt;max-allowed-packet=16M
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;[client]
&lt;/div&gt;&lt;div&gt;default_character_set=utf8
&lt;/div&gt;&lt;div&gt;protocol=tcp
&lt;/div&gt;&lt;div&gt;port=3306
&lt;/div&gt;&lt;div&gt;connect_timeout=10
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;## sync 상태 보기 (각 mariadb 서버에서)&lt;/b&gt;&lt;/div&gt;&lt;div&gt;MariaDB [(none)]&amp;gt; show status like 'wsrep_%';
&lt;/div&gt;&lt;div&gt;+------------------------------+-------------------------------------------------------------+
&lt;/div&gt;&lt;div&gt;| Variable_name&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| Value&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;+------------------------------+-------------------------------------------------------------+
&lt;/div&gt;&lt;div&gt;| wsrep_apply_oooe&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0.007694&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_apply_oool&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0.000000&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_apply_window&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 1.014445&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_causal_reads&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_cert_deps_distance&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 25.653383&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_cert_index_size&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 67&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_cert_interval&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0.007814&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| &lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_cluster_conf_id&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| &lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;3&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| &lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_cluster_size&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| &lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;3&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| &lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_cluster_state_uuid&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| &lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;86cf6166-d00b-11e7-92f6-bf254b8a19b3&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| &lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_cluster_status&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| &lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;Primary&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_commit_oooe&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0.000000&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_commit_oool&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0.000000&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_commit_window&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 1.006594&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| &lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_connected&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| &lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;ON&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_desync_count&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_evs_delayed&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_evs_evict_list&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_evs_repl_latency&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0.000495221/0.000788639/0.00164732/0.00034555/19&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_evs_state&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| OPERATIONAL&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_flow_control_paused&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0.000000&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_flow_control_paused_ns | 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_flow_control_recv&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_flow_control_sent&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_gcomm_uuid&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| f14761b1-d026-11e7-a9c6-43e9a12bd841&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| &lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_incoming_addresses&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| &lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;192.168.236.97:3306,192.168.28.197:3306,192.168.105.20:3306&lt;/span&gt; |
&lt;/div&gt;&lt;div&gt;| wsrep_last_committed&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 12525&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_local_bf_aborts&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_local_cached_downto&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 6127&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_local_cert_failures&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_local_commits&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 970&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_local_index&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 2&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_local_recv_queue&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_local_recv_queue_avg&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0.143574&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_local_recv_queue_max&amp;nbsp;&amp;nbsp;&amp;nbsp;| 40&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_local_recv_queue_min&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_local_replays&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_local_send_queue&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_local_send_queue_avg&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0.000978&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_local_send_queue_max&amp;nbsp;&amp;nbsp;&amp;nbsp;| 2&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_local_send_queue_min&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_local_state&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 4&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| &lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_local_state_comment&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| &lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;Synced&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_local_state_uuid&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 86cf6166-d00b-11e7-92f6-bf254b8a19b3&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_protocol_version&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 7&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_provider_name&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| Galera&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_provider_vendor&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| Codership Oy &amp;lt;&lt;a href=&quot;mailto:info@codership.com&quot;&gt;info@codership.com&lt;/a&gt;&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_provider_version&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 25.3.20(r3703)&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| &lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_ready&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| &lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;ON&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_received&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 5579&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_received_bytes&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 4241688&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_repl_data_bytes&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 441822&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_repl_keys&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 4283&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_repl_keys_bytes&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 56574&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_repl_other_bytes&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_replicated&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 970&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_replicated_bytes&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 560476&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;div&gt;| wsrep_thread_count&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| 13&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|
&lt;/div&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;/p&gt;&lt;div&gt;+------------------------------+-------------------------------------------------------------+&amp;nbsp;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_cluster_conf_id :&amp;nbsp;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;모든 db 에 똑같은 id 로 설정되어야 함&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_cluster_size : &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;클러스터의 노드 갯수&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_cluster_state_uuid : &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;고유 클러스터 ID 로 클러스터의 노드는 같은 값을 가져야 함&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_cluster_status : &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;노드의 역할&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_incoming_addresses : &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;클러스터 멤버의 ip&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_local_state_comment : &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;해당 노드가 &lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;클러스터의 멤버인지를 확인&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(148, 17, 0);&quot;&gt;wsrep_ready : &lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;노드가 준비된 상태&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;## docker 내에서 &lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;클러스터 시작 (첫번째 클러스터)&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;$&amp;nbsp;sed -i 's/^safe_to_bootstrap:.*/safe_to_bootstrap: 1/' /var/lib/mysql/grastate.dat || :&lt;/p&gt;&lt;p&gt;$&amp;nbsp;docker-entrypoint.sh mysqld&amp;nbsp;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;--wsrep-new-cluster&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;## docker 내에서&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;클러스터 시작 (두번째, 세번째 클러스터)&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;$&amp;nbsp;sed -i 's/^safe_to_bootstrap:.*/safe_to_bootstrap: 1/' /var/lib/mysql/grastate.dat || :&lt;/p&gt;&lt;p&gt;$&amp;nbsp;docker-entrypoint.sh mysqld&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/233&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>MySQL</category>
<category>auto recovery</category>
<category>galera</category>
<category>MariaDB</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/233</guid>
<comments>https://ahnseungkyu.com/233#entry233comment</comments>
<pubDate>Fri, 24 Nov 2017 16:41:33 +0900</pubDate>
</item>
<item>
<title>Tedx : How I'm fighting bias in algorithms</title>
<link>https://ahnseungkyu.com/232</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;https://www.ted.com/talks/joy_buolamwini_how_i_m_fighting_bias_in_algorithms?utm_campaign=tedspread--b&amp;amp;utm_medium=referral&amp;amp;utm_source=tedcomshare&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;max-width:854px&quot;&gt;&lt;div style=&quot;position:relative;height:0;padding-bottom:56.25%&quot;&gt;&lt;iframe src=&quot;https://embed.ted.com/talks/joy_buolamwini_how_i_m_fighting_bias_in_algorithms&quot; width=&quot;854&quot; height=&quot;480&quot; style=&quot;position:absolute;left:0;top:0;width:100%;height:100%&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;00:12&lt;/p&gt;&lt;p&gt;안녕하세요. 코드의 시인, 조이&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;입니다&lt;/span&gt;. 저는 보이지 않는 힘이 일어나는 것을 막기 위한 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;사명을 &lt;/span&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;띠고 있어&lt;/span&gt;요. 제가 '코드화된 시선'이라 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;부르는&lt;/span&gt; 힘인데요. 다른 사람은 알고리즘의 편견이라 부르죠.&lt;/p&gt;&lt;p&gt;Hello, I'&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;m&lt;/span&gt; Joy, a poet of code, &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;on&lt;/span&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt; a mission&lt;/span&gt; to stop an unseen force that's rising, a force that I &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;called&lt;/span&gt; &quot;the coded gaze,&quot; my term for algorithmic bias.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;00:27&lt;/p&gt;&lt;p&gt;알고리즘의 편견은 인간의 편견처럼 불평등을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;초래하지&lt;/span&gt;만 알고리즘은 바이러스처럼 대규모의 편견을 빠른 속도로 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;퍼뜨릴 수 있어요&lt;/span&gt;. 또한, 알고리즘의 편견은 자신이 배제되는 경험이나 차별적인 대우로 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;이어질 수 있어요.&lt;/span&gt; 자세히 설명해 드리죠.&lt;/p&gt;&lt;p&gt;Algorithmic bias, like human bias, &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;results in&lt;/span&gt; unfairness. However, algorithms, like viruses, can &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;spread&lt;/span&gt; bias on a massive scale at a rapid pace. Algorithmic bias can also &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;lead to&lt;/span&gt; exclusionary experiences and discriminatory practices. Let me show you what I mean.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;00:48&lt;/p&gt;&lt;p&gt;(비디오) 안녕, 카메라야. 이게 내 얼굴&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;이야&lt;/span&gt;. 내 얼굴이 보이니? 안경을 벗으면 보이니? 이 친구의 얼굴은 보이잖아. 내 얼굴은 보여? 그럼 가면을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;쓸게&lt;/span&gt;. 내 가면이 보이니?&lt;/p&gt;&lt;p&gt;(Video) Hi, camera. I&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;'ve got&lt;/span&gt; a face. Can you see my face? No-glasses face? You can see her face. What about my face? I&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;'ve got&lt;/span&gt; a mask. Can you see my mask?&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;01:08&lt;/p&gt;&lt;p&gt;이런 일이 왜 일어난 걸까요? 제가 왜 컴퓨터 앞에 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;앉아서&lt;/span&gt; 하얀 가면을 쓰고 싸구려 웹캠에 인식이 되도록 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;노력하고 있을&lt;/span&gt;까요? 제가 코드의 시인으로서 '코드화된 시선'과 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;싸우기&lt;/span&gt; 전에 저는 MIT 미디어랩의 대학원생&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;이었어요&lt;/span&gt;. 그곳에서 많은 기발한 프로젝트에 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;참여할 수 있었&lt;/span&gt;는데 염원의 거울도 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;있었습니다&lt;/span&gt;. 제가 참여한 프로젝트로, 거울에 비친 제 모습에 디지털 가면을 씌우는 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;프로젝트였죠&lt;/span&gt;. 아침에 힘찬 느낌을 원하면 사자 가면을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;씌울 수 있고&lt;/span&gt; 희망찬 느낌을 받고 싶다면 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;명언을 띄울 수 있었&lt;/span&gt;죠. 저는 일반적인 얼굴 인식 소프트웨어를 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;사용하&lt;/span&gt;여 시스템을 만들었지만 제가 흰 가면을 쓰지 않으면 굉장히 테스트하기 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;어려웠어요&lt;/span&gt;.&lt;/p&gt;&lt;p&gt;So how did this happen? Why &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;am&lt;/span&gt; I &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;sitting&lt;/span&gt; in front of a computer in a white mask, &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;trying to&lt;/span&gt; be detected by a cheap webcam? Well, when I'&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;m&lt;/span&gt; not &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;fighting&lt;/span&gt; the coded gaze as a poet of code, I&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;'m&lt;/span&gt; a graduate student at the MIT Media Lab, and there I &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;have the opportunity &lt;span style=&quot;color: rgb(33, 33, 33);&quot;&gt;to&lt;/span&gt;&lt;/span&gt; work on all sorts of whimsical projects, &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;including&lt;/span&gt; the Aspire Mirror, a project I did so I could &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;project&lt;/span&gt; digital masks onto my reflection. So in the morning, if I wanted to feel powerful, I could &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;put&lt;/span&gt; on a lion. If I wanted to be uplifted, I might &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;have a quote&lt;/span&gt;. So I &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;used&lt;/span&gt; generic facial recognition software to build the system, but found it &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;was&lt;/span&gt; really &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;hard to&lt;/span&gt; test it unless I wore a white mask.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;01:56&lt;/p&gt;&lt;p&gt;불행하게도, 저는 전에도 이런 문제에 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;부딪힌 적이 있어&lt;/span&gt;요. 제가 조지아 공대에서 컴퓨터 공학 전공생&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;이었을&lt;/span&gt; 때 저는 사회적 로봇을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;연구했어요&lt;/span&gt;. 과제들 중 하나는 까꿍놀이하는 로봇을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;만들기였죠&lt;/span&gt;. 간단한 순서 교대 게임으로, 얼굴을 가렸다가 보이며 &quot;까꿍!&quot;이라고 말하는 게임이죠. 문제는, 까꿍 놀이는 제가 여러분의 얼굴을 볼 수 있어야 하는데 로봇이 저를 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;보지 못했어&lt;/span&gt;요. 하지만 저는 룸메이트의 얼굴을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;빌려서&lt;/span&gt; 프로젝트를 끝냈고 과제를 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;제출한&lt;/span&gt; 다음 다른 누군가가 이 문제를 해결하겠지 라고 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;생각했어요.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;Unfortunately, I'&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;ve run into&lt;/span&gt; this issue before. When I &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;was&lt;/span&gt; an undergraduate at Georgia Tech studying computer science, I &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;used to work&lt;/span&gt; on social robots, and one of my tasks &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;was to get&lt;/span&gt; a robot to play peek-a-boo, a simple turn-taking game where partners cover their face and then uncover it saying, &quot;Peek-a-boo!&quot; The problem is, peek-a-boo doesn't really work if I can't see you, and my robot &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;couldn't see&lt;/span&gt; me. But I &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;borrowed&lt;/span&gt; my roommate's face to get the project done, &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;submitted&lt;/span&gt; the assignment, and &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;figured&lt;/span&gt;, you know what, somebody else will solve this problem.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;02:33&lt;/p&gt;&lt;p&gt;그로부터 오래 지나지 않아 창업 대회 참가를 위해 홍콩에 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;갔어요&lt;/span&gt;. 주최 측은 참여자들이 그 지역의 스타트업 기업들을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;방문하도록 했어요&lt;/span&gt;. 한 스타트업에 사회적 로봇이 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;있었고&lt;/span&gt; 시범을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;보여주기로 했어요&lt;/span&gt;. 로봇은 모두에게 잘 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;작동했죠&lt;/span&gt;. 저만 빼고요. 아마 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;짐작하셨을&lt;/span&gt; 거예요. 제 얼굴을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;인식하지 못했어요&lt;/span&gt;. 저는 개발자들에게 무슨 일이냐고 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;물었고&lt;/span&gt; 제가 썼던 그 얼굴 인식 소프트웨어를 쓴 게 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;문제였어요&lt;/span&gt;. 지구 반대편에서 저는 알고리즘의 편견이 인터넷에서 파일을 다운로드받는 것처럼 빠르게 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;퍼질 수 있다&lt;/span&gt;는 걸 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;알았어요&lt;/span&gt;.&lt;/p&gt;&lt;p&gt;Not too long after, I &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;was&lt;/span&gt; in Hong Kong for an entrepreneurship competition. The organizers &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;decided to take participants on&lt;/span&gt; a tour of local start-ups. One of the start-ups &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;had&lt;/span&gt; a social robot, and they &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;decided to do&lt;/span&gt; a demo. The demo &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;worked on&lt;/span&gt; everybody until it got to me, and you can probably &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;guess&lt;/span&gt; it. It &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;couldn't detect&lt;/span&gt; my face. I &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;asked&lt;/span&gt; the developers what was going on, and it &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;turned out&lt;/span&gt; we had used the same generic facial recognition software. Halfway around the world, I &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;learned&lt;/span&gt; that algorithmic bias &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;can travel&lt;/span&gt; as quickly as it takes to download some files off of the internet.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;03:15&lt;/p&gt;&lt;p&gt;어떻게 된 걸까요? 왜 제 얼굴은 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;인식되지 않죠&lt;/span&gt;? 자, 우리가 어떻게 기계가 볼 수 있게 하는지 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;알아보세요&lt;/span&gt;. 컴퓨터의 시야는 머신 러닝 기술을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;사용해&lt;/span&gt; 얼굴을 인식해요. 우리는 여러 예시 얼굴들로 이루어진 연습 세트를 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;만들어 놓죠&lt;/span&gt;. 이건 얼굴이다. 이건 얼굴이다. 이건 얼굴이 아니다. 그리고 시간이 지나면, 컴퓨터에게 얼굴 인식을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;가르칠 수 있어요&lt;/span&gt;. 하지만, 연습 세트가 그렇게 다양하지 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;않다면&lt;/span&gt; 규정된 표준에서 너무 &lt;span style=&quot;color: rgb(33, 33, 33);&quot;&gt;벗어나는&lt;/span&gt; 얼굴들은 인식하기 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;어려울 거예요&lt;/span&gt;. 저한테 일어났던 일과 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;같죠&lt;/span&gt;.&lt;/p&gt;&lt;p&gt;So what's going on? Why &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;isn't&lt;/span&gt; my face &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;being detected&lt;/span&gt;? Well, we &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;have to look&lt;/span&gt; at how we give machines sight. Computer vision &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;uses&lt;/span&gt; machine learning techniques to do facial recognition. So how this works is, you &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;create&lt;/span&gt; a training set with examples of faces. This is a face. This is a face. This is not a face. And over time, you &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;can teach&lt;/span&gt; a computer how to recognize other faces. However, if the training sets &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;aren't&lt;/span&gt; really that diverse, any face that deviates too much from the established norm &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;will be harder to&lt;/span&gt; detect, which &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;is&lt;/span&gt; what was happening to me.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;03:49&lt;/p&gt;&lt;p&gt;하지만 걱정하지 마세요. 좋은 소식도 있어요. 연습 세트는 하늘에서 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;뚝 떨어지지&lt;/span&gt; 않아요. 우리가 직접 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;만들 수 있죠&lt;/span&gt;. 따라서 전 영역을 아울러 다양한 인류의 얼굴을 반영하는 연습 세트를 만들 기회가 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;있어요&lt;/span&gt;.&lt;/p&gt;&lt;p&gt;But don't worry -- there's some good news. Training sets don't just &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;materialize&lt;/span&gt; out of nowhere. We actually &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;can create&lt;/span&gt; them. So there&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;'s&lt;/span&gt; an opportunity to create full-spectrum training sets that reflect a richer portrait of humanity.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;04:04&lt;/p&gt;&lt;p&gt;여러분은 방금 사회적 로봇이 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;어떤지&lt;/span&gt; 제가 어떻게 알고리즘의 편견에 의한 배제에 대해 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;알게되었는지&lt;/span&gt; &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;보셨어요&lt;/span&gt;. 하지만 알고리즘의 편견은 차별적 관행으로 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;이어질 수도 있습니다&lt;/span&gt;. 미국 전역에서 경찰서들이 범죄 근절의 무기로 얼굴 인식 소프트웨어를 사용하기 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;시작했어요&lt;/span&gt;. 조지타운대 법학센터에 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;따르면&lt;/span&gt; 총 1억1천7백만명에 달하는 미국 성인 둘 중 한 명의 얼굴이 얼굴 인식 네트워크에 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;올려져 있어요&lt;/span&gt;. 경찰은 현재 이 네트워크를 제한 없이 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;살펴볼 수 있어요&lt;/span&gt;. 정확성이 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;검증되지 않은&lt;/span&gt; 알고리즘을 사용하면서요. 우리는 얼굴 인식이 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;잘못될 수 있다&lt;/span&gt;는 것을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;알고 있고&lt;/span&gt; 얼굴을 일관되게 표시하는 것은 과제로 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;남아있어요&lt;/span&gt;. 아마 페이스북에서 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;보셨을 거예요&lt;/span&gt;. 저와 제 친구들은 다른 사람의 이름이 우리 사진에 표시된 것을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;보고&lt;/span&gt; 매번 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;웃어요&lt;/span&gt;. 하지만 범죄 용의자를 잘못 파악하는 것은 웃을 일이 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;아니며&lt;/span&gt; 시민의 자유를 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;침해하죠&lt;/span&gt;.&lt;/p&gt;&lt;p&gt;Now you&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;'ve seen&lt;/span&gt; in my examples how social robots &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;was&lt;/span&gt; how I &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;found out&lt;/span&gt; about exclusion with algorithmic bias. But algorithmic bias &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;can&lt;/span&gt; also &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;lead to&lt;/span&gt; discriminatory practices. Across the US, police departments &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;are starting to&lt;/span&gt; use facial recognition software in their crime-fighting arsenal. Georgetown Law &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;published&lt;/span&gt; a report showing that one in two adults in the US -- that's 117 million people -- &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;have&lt;/span&gt; their faces in facial recognition networks. Police departments &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;can&lt;/span&gt; currently &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;look at&lt;/span&gt; these networks unregulated, using algorithms that &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;have not been audited&lt;/span&gt; for accuracy. Yet we &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;know&lt;/span&gt; facial recognition &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;is not fail proof&lt;/span&gt;, and labeling faces consistently &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;remains&lt;/span&gt; a challenge. You might &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;have seen&lt;/span&gt; this on Facebook. My friends and I &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;laugh&lt;/span&gt; all the time when we &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;see&lt;/span&gt; other people mislabeled in our photos. But misidentifying a suspected criminal &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;is no&lt;/span&gt; laughing matter, nor &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;is breaching&lt;/span&gt; civil liberties.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;05:12&lt;/p&gt;&lt;p&gt;머신러닝은 현재 얼굴인식에 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;사용되지만&lt;/span&gt; 컴퓨터 시각을 넘어선 곳까지 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;확장되고 있어요&lt;/span&gt;. '대량살상무기 (WMD)'라는 책에서 데이터 과학자 캐시 오닐은 새로운 대량살상무기에 대해서 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;말해요&lt;/span&gt;. 널리 퍼진, 알 수 없는 파괴적인 알고리즘이죠. 이들은 우리 삶에 큰 영향을 미치는 선택에 점점 많이 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;사용되고 있어요&lt;/span&gt;. 누가 고용&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;되고&lt;/span&gt; 누가 해고&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;되는가&lt;/span&gt;? 빚을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;질까&lt;/span&gt;? 보험에 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;가입할까&lt;/span&gt;? 원하는 대학에 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;합격하는가&lt;/span&gt;? 여러분과 당신이 같은 상품에 대해서 같은 가격을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;지불하는가&lt;/span&gt;?&lt;/p&gt;&lt;p&gt;Machine learning &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;is being used&lt;/span&gt; for facial recognition, but it&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;'s&lt;/span&gt; also &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;extending&lt;/span&gt; beyond the realm of computer vision. In her book, &quot;Weapons of Math Destruction,&quot; data scientist Cathy O'Neil &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;talks&lt;/span&gt; about the rising new WMDs -- widespread, mysterious and destructive algorithms that are increasingly &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;being used&lt;/span&gt; to make decisions that impact more aspects of our lives. So who &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;gets&lt;/span&gt; hired or fired? Do you &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;get&lt;/span&gt; that loan? Do you &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;get&lt;/span&gt; insurance? &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;Are&lt;/span&gt; you &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;admitted&lt;/span&gt; into the college you wanted to get into? Do you and I &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;pay&lt;/span&gt; the same price for the same product purchased on the same platform?&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;05:55&lt;/p&gt;&lt;p&gt;법 집행에서도 예방적 치안을 위해 머신 러닝 사용을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;시작했어요&lt;/span&gt;. 몇몇 판사들은 기계가 만든 위험 점수를 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;사용하여&lt;/span&gt; 사람들의 형량을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;결정하기도 해요&lt;/span&gt;. 그래서 우린 이런 선택에 대해 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;생각해 봐야 해요&lt;/span&gt;. 이 선택이 공정&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;한가&lt;/span&gt;? 게다가 우리는 알고리즘의 선택이 매번 공정하지는 않다는 걸 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;봤어요&lt;/span&gt;.&lt;/p&gt;&lt;p&gt;Law enforcement &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;is&lt;/span&gt; also &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;starting&lt;/span&gt; to use machine learning for predictive policing. Some judges &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;use&lt;/span&gt; machine-generated risk scores to &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;determine&lt;/span&gt; how long an individual is going to spend in prison. So we really &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;have to think&lt;/span&gt; about these decisions. &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;Are&lt;/span&gt; they fair? And we&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;'ve seen&lt;/span&gt; that algorithmic bias doesn't necessarily always lead to fair outcomes.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;06:19&lt;/p&gt;&lt;p&gt;그럼 어떻게 해야 할까요? 우리는 포괄적인 코드를 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;만들고&lt;/span&gt; 포괄적인 코딩 선례를 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;도입해야&lt;/span&gt; &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;해요&lt;/span&gt;. 이것은 사람들로부터 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;시작됩니다&lt;/span&gt;. 따라서, 누가 코딩을 하는지가 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;중요하죠&lt;/span&gt;. 우리는 지금 다양한 개인들로 이루어져 서로의 맹점을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;볼 수 있는&lt;/span&gt; 팀을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;만들고 있나요&lt;/span&gt;? 기술적인 면에서 우리가 어떻게 코딩을 하는지가 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;중요해요&lt;/span&gt;. 지금 우리는 시스템을 개발하면서 공정함을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;염두에 두고&lt;/span&gt; &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;있나요&lt;/span&gt;? 마지막으로, 우리가 왜 코딩을 하는지가 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;중요해요&lt;/span&gt;. 우리는 엄청난 부를 위하여 컴퓨터를 도구로 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;사용했어요&lt;/span&gt;. 이제 우리에겐 더 큰 평등을 얻을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;기회가 &lt;/span&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;있어요&lt;/span&gt;. 우리가 사회적 변화를 미루지 않고 우선순위에 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;둔다면요&lt;/span&gt;. 이 세 가지 요소가 '인코딩' 운동을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;구성합니다&lt;/span&gt;. 누가 코딩을 하는지 어떻게 코딩을 하는지 왜 코딩을 하는지가 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;중요해요&lt;/span&gt;.&lt;/p&gt;&lt;p&gt;So what can we do about it? Well, we &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;can start&lt;/span&gt; thinking about how we &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;create&lt;/span&gt; more inclusive code and &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;employ&lt;/span&gt; inclusive coding practices. It really &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;starts with&lt;/span&gt; people. So who codes &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;matters&lt;/span&gt;. &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;Are&lt;/span&gt; we &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;creating&lt;/span&gt; full-spectrum teams with diverse individuals who &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;can check&lt;/span&gt; each other's blind spots? On the technical side, how we code &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;matters&lt;/span&gt;. &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;Are&lt;/span&gt; we &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;factoring&lt;/span&gt; &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;in&lt;/span&gt; fairness as we're developing systems? And finally, why we code &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;matters&lt;/span&gt;. We'&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;ve used&lt;/span&gt; tools of computational creation to unlock immense wealth. We now &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;have the opportunity&lt;/span&gt; to unlock even greater equality if we &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;make&lt;/span&gt; social change a priority and not an afterthought. And so these are the three tenets that will &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;make up&lt;/span&gt; the &quot;incoding&quot; movement. Who codes &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;matters&lt;/span&gt;, how we code &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;matters&lt;/span&gt; and why we code &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;matters&lt;/span&gt;.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;07:15&lt;/p&gt;&lt;p&gt;그리고 인코딩을 향해 가며 우리는 편견을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;분별하는&lt;/span&gt; 플랫폼을 구축할 수 있어요. 제가 공유한 것과 같은 다른 사람들의 경험을 모으고 현존하는 소프트웨어를 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;검사하면서&lt;/span&gt; 말이죠. 우리는 또한 더욱 포용적인 연습 세트를 만들기 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;시작할 수 있어요&lt;/span&gt;. &quot;포괄적인 셀카&quot; 캠페인을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;상상해 보세요&lt;/span&gt;. 여러분과 제가 더욱 포용적인 연습 세트를 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;만드는 데&lt;/span&gt; 셀카를 보내면서 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;도움을 줄 수 있는&lt;/span&gt; 거예요. 그리고 우리가 개발하는 기술의 사회적 영향에 대해 보다 양심적으로 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;생각할 수 있어요&lt;/span&gt;.&lt;/p&gt;&lt;p&gt;So to go towards incoding, we can start thinking about building platforms that &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;can identify&lt;/span&gt; bias by collecting people's experiences like the ones I shared, but also &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;auditing&lt;/span&gt; existing software. We &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;can&lt;/span&gt; also &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;start to&lt;/span&gt; create more inclusive training sets. &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;Imagine&lt;/span&gt; a &quot;Selfies for Inclusion&quot; campaign where you and I &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;can help&lt;/span&gt; developers test and &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;create&lt;/span&gt; more inclusive training sets. And we &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;can&lt;/span&gt; also &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;start thinkin&lt;/span&gt;g more conscientiously about the social impact of the technology that we're developing.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;07:49&lt;/p&gt;&lt;p&gt;인코딩 운동을 시작하기 위해서 저는 알고리즘 정의 연합을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;창설했어요&lt;/span&gt;. 공정함을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;중요시 여기는&lt;/span&gt; 사람 누구든 '코딩된 시선'에 맞서 싸우는 걸 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;도와줍니다&lt;/span&gt;. codedgaze.com에서 편견을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;보고하거나&lt;/span&gt; 검사를 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;요청하거나&lt;/span&gt; 테스터가 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;될 수 있으며&lt;/span&gt; 진행되는 대화에 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;참여할 수도 있어요&lt;/span&gt;. 해시태그 codedgaze입니다.&lt;/p&gt;&lt;p&gt;To get the incoding movement started, I'&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;ve launched&lt;/span&gt; the Algorithmic Justice League, where anyone who &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;cares about&lt;/span&gt; fairness &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;can help&lt;/span&gt; fight the coded gaze. On codedgaze.com, you can &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;report&lt;/span&gt; bias, &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;request&lt;/span&gt; audits, &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;become&lt;/span&gt; a tester and &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;join&lt;/span&gt; the ongoing conversation, #codedgaze.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;08:12&lt;/p&gt;&lt;p&gt;그래서 저는 여러분이 저와 함께 기술이 일부만이 아닌 모두를 위해 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;쓰이는&lt;/span&gt; 세상을 포용성을 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;중요시여기고&lt;/span&gt; 사회적 변화를 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;중시하는&lt;/span&gt; 세상을 &lt;span style=&quot;color: rgb(33, 33, 33);&quot;&gt;만드는데&lt;/span&gt; &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;동참하셨으면&lt;/span&gt; &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;합니다&lt;/span&gt;.&lt;/p&gt;&lt;p&gt;So I &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;invite&lt;/span&gt; you to &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;join&lt;/span&gt; me in creating a world where technology &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;works&lt;/span&gt; for all of us, not just some of us, a world where we &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;value&lt;/span&gt; inclusion and center social change.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;08:25&lt;/p&gt;&lt;p&gt;감사합니다.&lt;/p&gt;&lt;p&gt;Thank you.&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;08:26&lt;/p&gt;&lt;p&gt;(박수)&lt;/p&gt;&lt;p&gt;(Applause)&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;08:32&lt;/p&gt;&lt;p&gt;하지만 여러분에게 질문이 하나 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;있어요&lt;/span&gt;. 여러분은 이 싸움에 &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;동참하실&lt;/span&gt; 건가요?&lt;/p&gt;&lt;p&gt;But I &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;have&lt;/span&gt; one question: Will you &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;join&lt;/span&gt; me in the fight?&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;08:37&lt;/p&gt;&lt;p&gt;(웃음)&lt;/p&gt;&lt;p&gt;(Laughter)&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;08:38&lt;/p&gt;&lt;p&gt;(박수)&lt;/p&gt;&lt;p&gt;(Applause)&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/232&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>연설</category>
<category>English</category>
<category>TED</category>
<category>영어</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/232</guid>
<comments>https://ahnseungkyu.com/232#entry232comment</comments>
<pubDate>Sun, 12 Nov 2017 13:59:04 +0900</pubDate>
</item>
<item>
<title>kubernetes 에서 ceph rbd storageclass 활용법</title>
<link>https://ahnseungkyu.com/231</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;-en-clipboard:true;&quot;&gt;&lt;span style=&quot;font-weight: bold; color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;[ dynamic volume 사용법 ]&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;1. pvc 에 storageclass 를 지정하여 pvc 만 생성하면 pv 가 다이너믹하게 생성되고 pvc 도 생성된다.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;2. 이 때 rbd 이미지도 자동으로 생성된다.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ vi jenkins-pvc.yaml
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;apiVersion: v1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;kind: PersistentVolumeClaim
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;name: jenkins
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;namespace: ci-infra
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;spec:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;accessModes:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;- ReadWriteMany
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;resources:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;requests:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;storage: 100Gi
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;storageClassName: ceph&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-weight: bold; font-family: Tahoma; font-size: 12pt;&quot;&gt;[ static volume 사용법 ]&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;1. rbd 이미지를 수동으로 생성해야 한다.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;2. pv 에 storageclass 와 rbd 값을 모두 넣어야 한다.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; pv 에 pvc 에서 pv 를 selector 로 찾을 수 있게 label 값을 넣어야 한다.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; (keyring 값은 안넣어도 됨, storageclass의 secret 이용)
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;3. pvc 에 storageclass 와 selector 나 volumeName 둘 중에 하나를 사용하여 pv 와 연결한다.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; (storageclass 는 값은 없어도 됨. &amp;nbsp;없으면 default 인 storageclass 값을 활용함)
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ vi jenkins-pv.yaml
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;apiVersion: v1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;kind: PersistentVolume
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;name: jenkins
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;labels:&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;app: jenkins&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;spec:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;capacity:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;storage: 100Gi
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;accessModes:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;- ReadWriteMany
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;persistentVolumeReclaimPolicy: Retain
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;storageClassName: ceph&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;rbd:&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;image: jenkins&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;monitors:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- 192.168.30.23:6789&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- 192.168.30.24:6789&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- 192.168.30.25:6789&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pool: kubes&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;secretRef:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;name: ceph-secret-user&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;user: kube&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ vi jenkins-pvc.yaml
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;apiVersion: v1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;kind: PersistentVolumeClaim
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;name: jenkins
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;namespace: ci-infra
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;spec:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;accessModes:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;- ReadWriteMany
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;resources:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;requests:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;storage: 100Gi
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;storageClassName: ceph&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;selector:&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;matchLabels:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;app: jenkins&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;# volumeName: jenkins&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ vi&amp;nbsp;jenkins-deployment.yaml
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;apiVersion: extensions/v1beta1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;kind: Deployment
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;name: jenkins
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;namespace: ci-infra
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;labels:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;app: jenkins
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;spec:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;replicas: 1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;strategy:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;type: Recreate
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;template:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;labels:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;app: jenkins
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;spec:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;affinity:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;nodeAffinity:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;requiredDuringSchedulingIgnoredDuringExecution:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;nodeSelectorTerms:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- matchExpressions:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- key: cicd-services
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;operator: In
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;values:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- enabled
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;securityContext:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;runAsUser: 1000
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;fsGroup: 1000
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;containers:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: master
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;env:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: JENKINS_OPTS
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;value: &quot;--httpsPort=0 --http2Port=0&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: JAVA_OPTS
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;value: &quot;-Xms8G -Xmx8G -XX:+UseG1GC -XX:+ExplicitGCInvokesConcurrent -XX:+ParallelRefProcEnabled -XX:+UseStringDeduplication -XX:+UnlockExperimentalVMOptions -XX:G1NewSizePercent=20 -XX:+UnlockDiagnosticVMOptions -XX:G1SummarizeRSetStatsPeriod=1 -Dorg.apache.commons.jelly.tags.fmt.timeZone=Asia/Seoul&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;image: jenkins/jenkins:latest
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;imagePullPolicy: Always
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ports:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- containerPort: 8080
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;name: http
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;protocol: TCP
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- containerPort: 50000
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;name: jnlp
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;protocol: TCP
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;readinessProbe:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;httpGet:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;path: /login
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;port: 8080
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;periodSeconds: 10
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;timeoutSeconds: 5
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;successThreshold: 2
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;failureThreshold: 5
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;volumeMounts:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- mountPath: /var/jenkins_home
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;name: jenkins
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;#&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;resources:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;#&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;limits:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;#&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cpu: 4000m
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;#&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;memory: 8000Mi
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;#&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;requests:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;#&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cpu: 1000m
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;#&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;memory: 8000Mi
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;volumes:&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- name: jenkins&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;persistentVolumeClaim:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;claimName: jenkins&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## 생성&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ rbd create kubes/jenkins -s 100G
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ kubectl create -f jenkins-pv.yaml
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ kubectl create -f jenkins-pvc.yaml
&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;/p&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ kubectl create -f jenkins-deployment.yaml&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/231&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Kubernetes</category>
<category>ceph</category>
<category>kubernetes</category>
<category>pv</category>
<category>PVC</category>
<category>RBD</category>
<category>storageclass</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/231</guid>
<comments>https://ahnseungkyu.com/231#entry231comment</comments>
<pubDate>Fri, 20 Oct 2017 17:43:14 +0900</pubDate>
</item>
<item>
<title>OpenVPN 설치 및 vpn을 통한 사설 DNS 설정</title>
<link>https://ahnseungkyu.com/230</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt; font-weight: bold;&quot;&gt;##&amp;nbsp;Install OpenVPN&lt;/span&gt;&lt;/p&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# apt-get update
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# apt-get install openvpn easy-rsa
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: bold; font-size: 12pt; font-family: Tahoma;&quot;&gt;##&amp;nbsp;Set Up the CA Directory (using easy-rsa)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;make-cadir /etc/openvpn/ease-rsa
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# cd&amp;nbsp;/etc/openvpn/ease-rsa
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: bold; font-size: 12pt; font-family: Tahoma;&quot;&gt;##&amp;nbsp;Configure the CA Variables&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# vi vars
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;export KEY_COUNTRY=&quot;KR&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;export KEY_PROVINCE=&quot;Seoul&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;export KEY_CITY=&quot;Jongno&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;export KEY_ORG=&quot;&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;OpenStackKR&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;export KEY_EMAIL=&quot;root@localhost&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;export KEY_OU=&quot;&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;OpenStack KR&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;export KEY_NAME=&quot;server&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: bold; font-size: 12pt; font-family: Tahoma;&quot;&gt;##&amp;nbsp;Build the Certificate Authority&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;source vars
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# ./clean-all
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# ./build-ca
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Generating a 2048 bit RSA private key
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;.....................................................+++
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;...................+++
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;writing new private key to 'ca.key'
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;-----
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Country Name (2 letter code) [KR]:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;State or Province Name (full name) [Seoul]:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Locality Name (eg, city) [Jongno]:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Organization Name (eg, company) [&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;OpenStack&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;KR&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;]:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Organizational Unit Name (eg, section) [&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;OpenStack&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;KR&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;]:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Common Name (eg, your name or your server's hostname) [&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;OpenStack&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;KR&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&amp;nbsp;CA]:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Name [server]:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Email Address [root@localhost]:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: bold; font-size: 12pt; font-family: Tahoma;&quot;&gt;##&amp;nbsp;Create the Server Certificate, Key, and Encryption Files&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;./build-key-server server
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;A challenge password []: &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; --&amp;gt; 그냥 엔터
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Sign the certificate? [y/n]:&lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-weight: bold; font-size: 12pt; font-family: Tahoma;&quot;&gt;y&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;1 out of 1 certificate requests certified, commit? [y/n]&lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-weight: bold; font-size: 12pt; font-family: Tahoma;&quot;&gt;y&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Write out database with 1 new entries
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Data Base Updated
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# ./build-dh
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# openvpn --genkey --secret keys/ta.key
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: bold; font-size: 12pt; font-family: Tahoma;&quot;&gt;##&amp;nbsp;Generate a Client Certificate and Key Pair&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# cd&amp;nbsp;/etc/openvpn/ease-rsa
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;source vars
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-size: 12pt; font-family: Tahoma;&quot;&gt;./build-key&amp;nbsp;seungkyua&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Generating a 2048 bit RSA private key
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;.....+++
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;.................+++
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;writing new private key to 'seungkyua.key'
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;-----
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;You are about to be asked to enter information that will be incorporated
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;into your certificate request.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;What you are about to enter is what is called a Distinguished Name or a DN.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;There are quite a few fields but you can leave some blank
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;For some fields there will be a default value,
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;If you enter '.', the field will be left blank.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;-----
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Country Name (2 letter code) [KR]:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;State or Province Name (full name) [Seoul]:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Locality Name (eg, city) [Jongno]:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Organization Name (eg, company) [&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;OpenStack&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;KR&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;]:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Organizational Unit Name (eg, section) [&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;OpenStack&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;KR&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;]:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Common Name (eg, your name or your server's hostname) [seungkyua]:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Name [server]:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Email Address [root@localhost]:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Please enter the following 'extra' attributes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;to be sent with your certificate request
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;A challenge password []:&lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-weight: bold; font-size: 12pt; font-family: Tahoma;&quot;&gt;password&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;An optional company name []:&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;&amp;nbsp;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;&lt;b&gt;OpenStack&lt;/b&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px; color: rgb(152, 0, 0);&quot;&gt;&lt;b&gt;KR&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Using configuration from /etc/openvpn/easy-rsa/openssl-1.0.0.cnf
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Check that the request matches the signature
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Signature ok
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;The Subject's Distinguished Name is as follows
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;countryName&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;:PRINTABLE:'KR'
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;stateOrProvinceName&amp;nbsp;&amp;nbsp;&amp;nbsp;:PRINTABLE:'Seoul'
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;localityName&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;:PRINTABLE:'Jongno'
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;organizationName&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;:PRINTABLE:'&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;OpenStack&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;KR&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;'
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;organizationalUnitName:PRINTABLE:'&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;OpenStack&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;KR&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;'
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;commonName&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;:PRINTABLE:'seungkyua'
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;name&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;:PRINTABLE:'server'
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;emailAddress&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;:IA5STRING:'root@localhost'
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Certificate is to be certified until Aug 29 01:42:22 2027 GMT (3650 days)
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Sign the certificate? [y/n]:&lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-weight: bold; font-size: 12pt; font-family: Tahoma;&quot;&gt;y&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;1 out of 1 certificate requests certified, commit? [y/n]&lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-weight: bold; font-size: 12pt; font-family: Tahoma;&quot;&gt;y&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Write out database with 1 new entries
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;Data Base Updated
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: bold; font-size: 12pt; font-family: Tahoma;&quot;&gt;##&amp;nbsp;Configure the OpenVPN Service&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# cd&amp;nbsp;/etc/openvpn/ease-rsa/keys
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;cp ca.crt ca.key server.crt server.key ta.key dh2048.pem /etc/openvpn
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;gunzip -c /usr/share/doc/openvpn/examples/sample-config-files/server.conf.gz | sudo tee /etc/openvpn/server.conf
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# vi&amp;nbsp;/etc/openvpn/server.conf
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;32 port 1194
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;35 proto tcp
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;78 ca ca.crt
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;79 cert server.crt
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;80 key server.key
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;141 push &quot;route 192.168.30.0 255.255.255.0&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;142 push &quot;route 192.168.230.0 255.255.255.0&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;143 push &quot;route 192.168.130.0 255.255.255.0&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;144 push &quot;route 192.168.49.0 255.255.255.0&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;145 push &quot;route 192.168.51.0 255.255.255.0&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;146 push &quot;route 192.168.54.0 255.255.255.0&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;205 push &quot;dhcp-option DNS 192.168.30.26&quot;&amp;nbsp; &amp;nbsp; &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;# 사설 DNS 서버가 설치될 서버 IP&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;206 push &quot;dhcp-option DNS 8.8.8.8&quot;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;208 push &quot;dhcp-option DOMAIN cicd.seungkyua&quot;&amp;nbsp; &amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(152, 0, 0); font-family: Tahoma; font-size: 16px;&quot;&gt;# 사설 DNS 도메인&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;250 tls-auth ta.key 0
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;256 cipher AES-128-CBC&amp;nbsp;&amp;nbsp;&amp;nbsp;# AES
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;259 auth SHA256
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;275 user nobody
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;276 group nogroup
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: bold; font-size: 12pt; font-family: Tahoma;&quot;&gt;##&amp;nbsp;Adjust the Server Networking Configuration&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# vi&amp;nbsp;/etc/sysctl.conf
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;28 net.ipv4.ip_forward=1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;sysctl -p
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;ip route | grep default
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# iptables -t nat -A POSTROUTING -s 10.8.0.0/8 -o &lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-size: 12pt; font-family: Tahoma;&quot;&gt;br-ex&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt; -j MASQUERADE
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: bold; font-size: 12pt; font-family: Tahoma;&quot;&gt;##&amp;nbsp;Start and Enable the OpenVPN Service&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;systemctl start openvpn@server
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;systemctl status openvpn@server
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;systemctl enable openvpn@server
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: bold; font-size: 12pt; font-family: Tahoma;&quot;&gt;##&amp;nbsp;Create Client Configuration Infrastructure&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# cd&amp;nbsp;/etc/openvpn
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;mkdir -p /etc/openvpn/client-configs/files
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;chmod 700 /etc/openvpn/client-configs/files
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;cp /usr/share/doc/openvpn/examples/sample-config-files/client.conf /etc/openvpn/client-configs/base.conf
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;vi client-configs/base.conf
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;36 proto tcp
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;42 remote &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;server_ip&lt;/span&gt;&amp;nbsp;1194
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;61 user nobody
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;62 group nogroup
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;88 &lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-size: 12pt; font-family: Tahoma;&quot;&gt;#&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;ca ca.crt
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;89 &lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-size: 12pt; font-family: Tahoma;&quot;&gt;#&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;cert client.crt
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;90 &lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-size: 12pt; font-family: Tahoma;&quot;&gt;#&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;key client.key
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;113 cipher AES-128-CBC
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;114 auth SHA256
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;115&amp;nbsp;key-direction 1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# vi&amp;nbsp;client-configs/make_config.sh
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#!/bin/bash
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# First argument: Client identifier
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;KEY_DIR=/etc/openvpn/ease-rsa/keys
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;OUTPUT_DIR=/etc/openvpn/client-configs/files
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;BASE_CONFIG=/etc/openvpn/client-configs/base.conf
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;cat ${BASE_CONFIG} \
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;(echo -e '&amp;lt;ca&amp;gt;') \
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;${KEY_DIR}/ca.crt \
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;(echo -e '&amp;lt;/ca&amp;gt;\n&amp;lt;cert&amp;gt;') \
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;${KEY_DIR}/${1}.crt \
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;(echo -e '&amp;lt;/cert&amp;gt;\n&amp;lt;key&amp;gt;') \
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;${KEY_DIR}/${1}.key \
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;(echo -e '&amp;lt;/key&amp;gt;\n&amp;lt;tls-auth&amp;gt;') \
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;${KEY_DIR}/ta.key \
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;(echo -e '&amp;lt;/tls-auth&amp;gt;') \
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;gt; ${OUTPUT_DIR}/${1}.ovpn
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;chmod 700 client-configs/make_config.sh
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# cd&amp;nbsp;/etc/openvpn/client-configs
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;## seungkyua.ovpn 파일이&amp;nbsp;/etc/openvpn/client-configs/files 디렉토리 밑에 생성됨
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# &lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-size: 12pt; font-family: Tahoma;&quot;&gt;./make_config.sh seungkyua&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-weight: bold; font-size: 12pt; font-family: Tahoma;&quot;&gt;## 사용자 추가 시 클라이언트 파일 만드는 법&lt;/span&gt;&lt;/p&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# cd&amp;nbsp;/etc/openvpn/ease-rsa&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;source vars&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;./build-key&amp;nbsp;seungkyua&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# cd&amp;nbsp;/etc/openvpn/client-configs&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# ./make_config.sh seungkyua&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-weight: bold; font-size: 12pt; font-family: Tahoma;&quot;&gt;## server reboot 시&amp;nbsp;체크&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;#&amp;nbsp;ip route | grep default&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;/p&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;# iptables -t nat -A POSTROUTING -s 10.8.0.0/8 -o br-ex -j MASQUERADE&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

출처 :&amp;nbsp;&lt;a href=&quot;https://www.digitalocean.com/community/tutorials/how-to-set-up-an-openvpn-server-on-ubuntu-16-04&quot;&gt;https://www.digitalocean.com/community/tutorials/how-to-set-up-an-openvpn-server-on-ubuntu-16-04&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;-en-clipboard:true;&quot;&gt;&lt;span style=&quot;font-weight: bold; font-family: Tahoma; font-size: 12pt;&quot;&gt;##&amp;nbsp;Install Bind on the DNS Server&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;#&amp;nbsp;sudo apt-get update
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;# apt-get install unbound
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: bold; font-family: Tahoma; font-size: 12pt;&quot;&gt;## config 설정&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;#&amp;nbsp;cd /etc/unbound
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;# vi unbound.conf.d/root-auto-trust-anchor-file.conf
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;server:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;verbosity: 1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;statistics-interval: 0
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;statistics-cumulative: no
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;extended-statistics: yes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;num-threads: 2
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;interface: 192.168.30.26&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;interface: 127.0.0.1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outgoing-range: 4096
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;outgoing-port-permit: 40000-44096
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;cache-max-ttl: 3600
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;do-ip4: yes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;do-ip6: no
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;access-control: 10.8.0.0/24 allow&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;access-control: 192.168.30.0/24 allow&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;access-control: 192.168.54.0/24 allow&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;chroot: &quot;&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;username: &quot;unbound&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;directory: &quot;/etc/unbound&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;log-time-ascii: yes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;pidfile: &quot;/var/run/unbound/unbound.pid&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;hide-identity: yes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;hide-version: yes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;harden-short-bufsize: yes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;harden-large-queries: yes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;harden-glue: yes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;harden-dnssec-stripped: yes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;harden-below-nxdomain: yes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;harden-referral-path: yes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;use-caps-for-id: yes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;unwanted-reply-threshold: 10000000
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;prefetch: yes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;prefetch-key: yes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;rrset-roundrobin: yes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;minimal-responses: yes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;# &amp;nbsp; &amp;nbsp;trusted-keys-file: /etc/unbound/keys.d/*.key
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;auto-trust-anchor-file: &quot;/var/lib/unbound/root.key&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;val-clean-additional: yes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;val-permissive-mode: no
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;val-log-level: 1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;key-cache-size: 512m
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;include: /etc/unbound/local.d/*.conf&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;# Remote control config section.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;remote-control:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;control-enable: yes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;server-key-file: &quot;/etc/unbound/unbound_server.key&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;server-cert-file: &quot;/etc/unbound/unbound_server.pem&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;control-key-file: &quot;/etc/unbound/unbound_control.key&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;control-cert-file: &quot;/etc/unbound/unbound_control.pem&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;# Stub and Forward zones
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;# include: /etc/unbound/conf.d/*.conf
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: bold; font-family: Tahoma; font-size: 12pt;&quot;&gt;## dns 설정&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;# mkdir -p local.d
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;# vi local.d/&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;cicd.seungkyua&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;.conf
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;local-zone: &quot;cicd.stg.taco.&quot; static
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;local-data: &quot;master01.cicd.&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;seungkyua&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;. IN A 192.168.30.13&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;local-data: &quot;node01.cicd.&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;seungkyua&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;. IN A 192.168.30.12&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;local-data: &quot;node02.cicd.&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;seungkyua&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;. IN A 192.168.30.17&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;local-data: &quot;node03.cicd.&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;seungkyua&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;. IN A 192.168.30.18&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;local-data: &quot;node04.cicd.&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;seungkyua&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;. IN A 192.168.30.21&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;local-data: &quot;centos-repo.cicd.&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;seungkyua&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;. IN A 192.168.30.12&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;local-data: &quot;dashboard.cicd.&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;seungkyua&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;. IN A 192.168.30.12&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;local-data: &quot;grafana.cicd.&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;seungkyua&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;. IN A 192.168.30.12&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;local-data: &quot;horizon.cicd.&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;seungkyua&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;. IN A 192.168.30.12&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;local-data: &quot;jenkins.cicd.&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;seungkyua&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;. IN A 192.168.30.12&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;local-data: &quot;keystone.cicd.&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;seungkyua&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;. IN A 192.168.30.12&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;local-data: &quot;kibana.cicd.&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;seungkyua&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;. IN A 192.168.30.12&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;local-data: &quot;minio.&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;seungkyua&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;. IN A 192.168.30.12&quot;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;local-data: &quot;pypi-repo.cicd.&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;seungkyua&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;. IN A 192.168.30.12&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;local-data: &quot;registry.cicd.&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;seungkyua&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;. IN A 192.168.30.12&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;local-data: &quot;scope.cicd.&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;seungkyua&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;. IN A 192.168.30.12&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;local-data: &quot;prometheus.cicd.&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;seungkyua&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;. IN A 192.168.30.12&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;local-data: &quot;ubuntu-repo.cicd.&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 16px;&quot;&gt;seungkyua&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;. IN A 192.168.30.12&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-weight: bold; font-family: Tahoma; font-size: 12pt;&quot;&gt;## start unbound&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;# systemctl restart unbound.service
&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;/p&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;#&amp;nbsp;systemctl enable unbound.service&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;출처 :&amp;nbsp;&lt;a href=&quot;https://calomel.org/unbound_dns.html&quot; style=&quot;color: rgb(0, 0, 238); text-decoration-line: underline;&quot;&gt;https://calomel.org/unbound_dns.html&lt;/a&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?--&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;b&gt;## reload unbound server with new configuration&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;# &lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;unbound-control reload&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/230&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Ubuntu</category>
<category>OpenVPN</category>
<category>unbound</category>
<category>사설DNS</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/230</guid>
<comments>https://ahnseungkyu.com/230#entry230comment</comments>
<pubDate>Thu, 19 Oct 2017 10:04:39 +0900</pubDate>
</item>
<item>
<title>Havard Speech - James Ryan</title>
<link>https://ahnseungkyu.com/229</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Dotum, 돋움;&quot;&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=6WFF_7X5JpY&amp;amp;list=PL8pIiPkgexmkfMmpeiaNFQJOlz0IOk8qk&amp;amp;index=5&amp;amp;t=147s&quot; target=&quot;_blank&quot; class=&quot;tx-link&quot;&gt;Youtube 동영상&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Dotum, 돋움;&quot;&gt;&lt;a href=&quot;https://www.gse.harvard.edu/news/16/05/good-questions&quot; target=&quot;_blank&quot; class=&quot;tx-link&quot;&gt;영문 스트립트&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;지금부터 나와 주변 사람들에게 물어야 할 인생의 다섯 가지 중요한 질문을 소개합니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;My final suggestion is that there are five truly essential questions that you should regularly ask yourself and others.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;거창할지 모르지만 이해해주길 바랍니다. 졸업 축사이니까.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;My claim is that, this is slightly outlandish as a claim but this is a graduation speech.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;이 질문을 하는 습관을 들이면 성공적이고 행복한 삶을 살며 마지막의 보너스 질문에 '네'라고 자신 있게 답할 수 있습니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;if you get in the habit of asking these questions, you have a very good chance of being both successful and happy,&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;and you will be in a good position to answer “I did” to the bonus question at the end.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;1.잠깐만요, 뭐라고요? (Wait, What?)&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;첫 번째 질문은 우리 아이가 좋아하는 질문이자 십대들이 특히 자주 하고 우리들도 곧잘 하는 질문입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;The first is a question my own kids are fond of asking, and it’s one you may have heard other teenagers pose — or maybe you still pose it yourself.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;질문이 고전적입니다. '잠깐만요, 뭐라고요?'&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;The question is the classic, 'Wait, what?'&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;'잠깐만, 뭐라고?' 또는 '잠깐만요, 뭐?'라고 하기도 합니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;It could be asked is 'Wait, What?' or 'Wait, What?' (둘의 억양이 다름)&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;우리 아이들은 보통 내가 집안일을 시키려 할 때 이 질문을 합니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;My kids typically pose this question when I get to the point in a conversation where I’m asking them to do a chore or two.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;아이들 입장에선 내 말이 이렇게 들립니다. &quot;어쩌구... 저쩌구... 내일 아침에 방 좀 치워라!&quot;&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;From their perspective, they hear me saying something like: &quot;blah, blah, blah, blah, and then I’d like you to clean your room.&quot;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;바로 그 순간에 아이들은 묻습니다. &quot;잠깐만요, 뭐라고요, 뭘 치우라고요?&quot;&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;And at that precise moment, the question inevitably comes: &quot;Wait, what? Clean what?&quot;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;'잠깐만, 뭐라고?'는 사실 무언가를 명확히 하기위한 매우 효과적인 질문으로, 이해를 위해 필수적입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&quot;Wait what&quot; is actually a very effective way of asking for clarification, which is crucial to understanding.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;결론을 내리기 전과 결정을 하기 전에 물어야만 하는 질문입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;It’s the question you should ask before drawing conclusions or before making a decision.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;하바드 학장인 라케시 쿠라나는 훌륭한 마스터클래스를 진행하며 지지에 앞서 질의의 중요성을 강조했습니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;The Dean of Harvard College, Rakesh Khurana, gave a great master class this year, where he emphasized the importance of inquiry before advocacy.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;어떤 의견을 반대하거나 지지하기 전에 상황과 개념을 이해하는 것이 중요합니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;It’s important to understand an idea before you advocate for or against it.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;'뭐라고요?' 전에 오는 '잠깐만요'는 진정으로 이해할 수 있도록 잠시 시간을 갖게 하는 좋은 알람입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;The wait, which precedes the what, is also a good reminder that it pays to slow down to make sure you truly understand.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;2. 나는 궁금한데요? (I wonder...)&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;두 번째 질문은 '나는 궁금한데요?'입니다. 이 질문은 왜 그런지(wonder why)와 할 수 있는지(wonder if)가 이어집니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;The second question is &quot;I wonder&quot; which can be followed by &quot;why&quot; or &quot;if&quot;. So I wonder why, or I wonder if.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;'왜 그런지'라는 질문은 이 세상에 호기심을 갖게 합니다. '할 수 있는지'라는 질문은 세상이 더 나아지도록 하는 방법을 생각하게 합니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;Asking 'I wonder why' is the way to remain curious about the world, and asking 'I wonder if' is the way to start thinking about how you might improve the world.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;다음과 같이, 나는 왜 미국의 학교가 인종적으로 분리되어 있는지 궁금했습니다. 우리가 이 상황을 바꿀 수 있을 지 궁금했습니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;As in, I wonder why our schools are so segregated, and I wonder if we could change this?&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;나는 왜 학생들이 학교생활을 지루해 하는지 궁금했습니다. 학생들이 집중할 수 있는 수업을 만들 수 있는지 궁금했습니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;Or I wonder why students often seem bored in school, and I wonder if we could make their classes more engaging?&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;3. 적어도... 할 수 있지 않을까? (Couldn't we at least?)&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;세 번째 질문은 '적어도... 할 수 있지 않을까요?'입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;The third question is: &quot;Couldn’t we at least...?&quot;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;이 질문은 보통 우리가 꽉 막힌 곳에서 빠져나올 때 유용합니다. 의견 차를 넘어 합의에 도달할 때 유용합니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;This is the question to ask that will enable you to get unstuck, as they say. It’s what enables you to get past disagreement to some consensus,&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;다음과 같이, 우리가 주장하는 교육 전략은 다르다 해도 학생들의 복지가 최우선이라는 건 동의하지 않나요?&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;as in, couldn’t we at least agree that we all care about the welfare of students, even if we disagree about strategy?&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;또한 일의 결과를 확신하지 못하더라도 일단 무언가를 시작할 때 유용합니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;It’s also a way to get started when you’re not entirely sure where you will finish,&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;다음과 같이, 적어도 모든 학생들이 잘 먹고 건강하게 학교에 다닐 수 있는 기회를 주는 것을 시작해야 하지 않나요?&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;as in, couldn’t we at least begin by making sure that all kids have the chance to come to school healthy and well-fed?&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;4. 내가 어떻게 도울까? (How can I help?)&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;내 번째 질문은 '내가 어떻게 도울까?'입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;The fourth question is: &quot;How can I help?&quot;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;여러분은 누군가를 돕고 싶어 교육대학원에 들어왔을 겁니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;You are at HGSE, I presume, because you are interested in helping others.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;하지만 여기서 구원자 증후군, 당신이 누군가를 구원하는 전문가이고 영웅이라는 태도에 대해 인식하게 되었을 겁니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;But you also know, from your time here, to be aware of the savior complex, of the stance where you are the expert or hero who swoops in to save others.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;우리는 구원자 증후군 때문에 가장 인간적인 본능인 타인에게 손을 내미는 본능을 버려서는 안 됩니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;We shouldn’t let the real pitfalls of the savior complex extinguish one of the most humane instincts there is — the instinct to lend a hand.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;하지만 어떻게 돕느냐가 더 중요할 수 있습니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;But how we help matters as much as that we do help,&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;&quot;어떻게 도울까?&quot;라고 묻는 것은 도움의 방향을 겸손하게 묻는 것이며,&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;and if you ask &quot;how you can help&quot;, you are asking, with humility, for direction.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;그들이 자기 삶의 전문가이자 당신이 돕는 만큼 그들도 당신을 도울 수 있다는 사실을 깨닫게 합니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;And you are recognizing that others are experts in their own lives and that they will likely help you as much as you help them.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;5. 무엇이 가장 중요한가? (What truly matters?)&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;다섯 번째 질문은 '무엇이 가장 중요한가?'입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;The fifth question is this: &quot;What truly matters?&quot;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;여러분도 적절한 질문이라 생각할 것입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;You can tack on &quot;to me&quot; as appropriate.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;이 질문은 문제의 핵심과 믿음과 신념의 핵심으로 들어가게 해주는 질문입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;This is the question that forces you to get to the heart of issues and to the heart of your own beliefs and convictions.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;매년 새해 결심에 추가하거나 대신할 수도 있는 질문입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;Indeed, it’s a question that you might add to, or substitute for, New Year’s resolutions.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;새해 첫날 내게 무엇이 진정 중요한가 물을 수 있습니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;You might ask yourself, in other words, at least every new year: what truly matters to me?&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;이것이 다섯 개의 중요한 필수 질문입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;So these are the five essential questions.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;'잠깐만요, 뭐라고요?'는 모든 이해의 근원입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&quot;Wait, what&quot; is at the root of all understanding.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;'궁금해'는 모든 호기심의 근원입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&quot;I wonder&quot; is at the heart of all curiosity.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;'우리가 적어도... 할 수 있지 않을까?'는 모든 진전의 시작입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&quot;Couldn’t we at least&quot; is the beginning of all progress.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;'어떻게 도울 수 있을까?'는 모든 좋은 관계의 기본입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&quot;How can I help&quot; is at the base of all good relationships.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;'무엇이 가장 중요한가?'는 삶의 핵심으로 들어가게 해줍니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;And &quot;what really matters&quot; gets you to the heart of life.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;이 질문을 정기적으로, 특히 마지막 질문을 자주 한다면 보너스 질문에 답할 좋은 위치에 서게 됩니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;If you ask these questions regularly, especially the last one, you will be in a great position to answer the bonus question,&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;이것은 생의 마지막에서 여러분이 만나게 될 가장 중요한 질문입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;which is, at the end of the day, the most important question you’ll ever face.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;이 보너스 질문은 여러 버전이 있으며, 이전에 한 버전은 확실히 들었을 것입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;This bonus question is posed in many ways, and you have surely heard a version of it before.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;나에게 가장 강렬한 한 문장으로 다가온 것은 레이먼드 카버의 시 &amp;lt;만년의 조각글&amp;gt;에서 였습니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;To me, the single best phrasing of this question is in a poem by Raymond Carver, called &quot;Late Fragments&quot;.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;그가 쓴 마지막 시입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;It’s one of the last poems he wrote.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;지난 9월 나의 법대 동기이자 가장 사랑하는 친구였던 더그 켄들의 장례식에서 이 문장을 만났습니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;I came across it recently on the very sad occasion of a memorial service for one of my dearest and closest friends, my former law school roommate Doug Kendall,&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;51세라는 너무 젊은 나이에 세상을 떠난 친구입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;who died in September at the far too young age of 51.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;이 시는 그의 장례식 식순 뒤에 적혀 있었습니다. 시는 질문으로 시작하는데 이것이 바로 나의 보너스 질문에 해당합니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;The poem was printed on the back of the program for his memorial and it starts with this question, what I’m calling the bonus question.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;'그럼에도 불구하고 당신은 이 삶에서 원하는 것을 얻었습니까?'&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&quot;And did you get what you wanted out of life, even so?&quot;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;그럼에도 불구하고 이 부분이, 나에게는, 긴 인생과 삶의 희망에서 피할 수 없는 고통과 실망을 완벽하게 잡아냈다고 생각합니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;The &quot;even so&quot; part of this, to me, captures perfectly the recognition of the pain and disappointment that inevitably make up a full life, but also the hope that life,&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;또한 '그럼에도 불구하고' 우리 인생에 행복과 만족의 가능성이 함께 함을 이야기합니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;even so, offers the possibility of joy and contentment.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;당신이 '잠깐만요, 뭐라고요?, 나는 궁금한데요?, 적어도 할 수 있지 않을까?, 어떻게 도울까?, 무엇이 가장 중요한가?' 이 질문을 주기적으로 한다면,&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;My claim is that if you regularly ask: wait, what, I wonder, couldn’t we at least, how can I help, and what really matters,&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;'마지막 그럼에도 불구하고 당신은 삶에서 원하는 것을 얻었는가?'라는 질문에 '네'라고 대답할 수 있을 것입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;when it comes time to ask yourself &quot;And did you get what you wanted out of life, even so&quot;, your answer will be &quot;I did&quot;.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;이 시는 '그럼에도 불구하고 원하는 것을 얻었는가?'라는 질문에 '그렇다'라고,&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;So the poem asks &quot;And did you get what you wanted out of life, even so&quot;,&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;또 &quot;당신은 무엇을 원했습니까?&quot;에 &quot;이 지상에서, 나를 사랑받는 사람이라 부를 수 있고, 사랑받고 있다고 느끼는 것&quot;이라고 답합니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;and then continues: &quot;I did. And what did you want?&quot;, &quot;To call myself beloved. To feel beloved on the earth.&quot;.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;사랑을 받는다는 건 지극히 사랑받는다는 것 뿐 아니라 소중히 여겨지고 존경받는 것입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;The word &quot;beloved&quot; is important here as it not only means dearly loved, but also cherished and respected.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;이제 나의 축사가 거의 끝나가고 있으니 한 가지만 당부합니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;And while I promise I’m very near the end of my speech, let me just say that&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;이 시를 읽으며 학생들을 생각할 수밖에 없었습니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;when I read these lines, it’s hard for me not to think about students.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;우리는 이곳은 물론 다른 곳에서 우리가 가르치는 학생들의 실력을 어떻게 향상시킬까를 항상 고민해야 합니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;We spend a lot of time, here and elsewhere, thinking about how we might improve student performance, which is how it should be.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;학생들이 공부를 잘할 뿐만 아니라 사랑받고 있다고 느낀다면 모든 학교와 이 세상은 보다 나은 곳이 될 것입니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;Yet I can’t help but think that schools, and indeed, the world, would be better places if students didn’t simply perform well but also felt beloved&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;모든 학생들은 선생님께 사랑받고 친구들에게 사랑받아야 합니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;- beloved by their teachers and by their fellow classmates.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;이제 축사를 마무리하며 여러분에게 마지막 인사를 전합니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;To tie this all together into one slightly misshapen package, and to bid you a final farewell.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;이제 대학원을 떠나 여러분을 절실히 필요로 하는 넓은 세상에 나아갈 여러분에게 나의 소망과 신념을 꼭 전하고 싶습니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;As you leave Appian Way and head into a world that desperately needs you, let me express my sincere hope and belief that&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;좋은 질문을 하고, 듣기를 멈추지 않는다면 여러분 자신이 이 지상에서 사랑받고 있다고 느낄 것이며,&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;if you never stop asking and listening for good questions, you will feel beloved on this earth,&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;마찬가지로, 다른 사람들 특히 여러분의 학생들이 사랑받는다고 느끼게 해줄 수 있습니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;and, just as importantly, you will help others, especially students, feel the same.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;감사합니다.&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;font face=&quot;Dotum, 돋움&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;Thank you very much.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;div style=&quot;line-height: 1.5;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 1.5;&quot;&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/229&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>연설</category>
<category>Havard Speech</category>
<category>James Ryan</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/229</guid>
<comments>https://ahnseungkyu.com/229#entry229comment</comments>
<pubDate>Sun, 20 Aug 2017 17:40:13 +0900</pubDate>
</item>
<item>
<title>음성인식으로 OpenStack 을 Kubernetes에 배포하기</title>
<link>https://ahnseungkyu.com/228</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/0_7_l5PvkgY&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/228&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Kubernetes</category>
<category>AI</category>
<category>deploy</category>
<category>kubernetes</category>
<category>OpenStack</category>
<category>openstack-helm</category>
<category>음성인식</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/228</guid>
<comments>https://ahnseungkyu.com/228#entry228comment</comments>
<pubDate>Tue, 18 Jul 2017 16:17:11 +0900</pubDate>
</item>
<item>
<title>Kubernetes and OpenStack-Helm</title>
<link>https://ahnseungkyu.com/227</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;h1&gt;OpenStack Day Korea 2017 에서 발표한 자료&lt;/h1&gt;&lt;div style=&quot;margin-bottom:5px&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;margin-bottom:5px&quot;&gt; &lt;strong&gt; &lt;a href=&quot;//www.slideshare.net/skanddh/2017-k8s-and-openstackhelm&quot; title=&quot;2017 k8s and OpenStack-Helm&quot; target=&quot;_blank&quot;&gt;2017 k8s and OpenStack-Helm&lt;/a&gt; &lt;/strong&gt; from &lt;strong&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://www.slideshare.net/skanddh&quot;&gt;OpenStack Korea Community&lt;/a&gt;&lt;/strong&gt; &lt;/div&gt;&lt;p&gt;&lt;iframe src=&quot;//www.slideshare.net/slideshow/embed_code/key/I65ls9Hb1tp5Oh&quot; width=&quot;595&quot; height=&quot;485&quot; frameborder=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot; style=&quot;border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;&quot; allowfullscreen=&quot;&quot;&gt; &lt;/iframe&gt; &lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/227&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>OpenStack</category>
<category>helm</category>
<category>kubernetes</category>
<category>OpenStack</category>
<category>openstack-helm</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/227</guid>
<comments>https://ahnseungkyu.com/227#entry227comment</comments>
<pubDate>Tue, 18 Jul 2017 16:00:36 +0900</pubDate>
</item>
<item>
<title>OpenStack Contribution 설정</title>
<link>https://ahnseungkyu.com/226</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## OpenStack Foundation 사용자 등록&lt;/span&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?--&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;div&gt;&lt;a href=&quot;https://www.openstack.org/join/register/?membership-type=foundation&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;https://www.openstack.org/join/register/?membership-type=foundation&lt;/span&gt;&lt;/a&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## launchpad 에 사용자 등록 (OpenStack Foundation email 과 동일해야 함)
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;a href=&quot;https://login.launchpad.net/+login&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;https://login.launchpad.net/+login&lt;/span&gt;&lt;/a&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## &lt;/span&gt;&lt;a href=&quot;http://launchpad.net&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;launchpad.net&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;사용자 id 확인 (자신의 id 로 조회되는지 확인)
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;https://launchpad.net/&lt;/span&gt;&lt;font color=&quot;#941751&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;~seungkyua&lt;/span&gt;&lt;/font&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## review 사이트에 사용자 등록
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;a href=&quot;https://review.openstack.org/#/register/&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;https://review.openstack.org/#/register/&lt;/span&gt;&lt;/a&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## review 사이트에서 필요한 정보 등록
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;a href=&quot;https://review.openstack.org/#/settings/&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;https://review.openstack.org/#/settings/&lt;/span&gt;&lt;/a&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;1. Profile 메뉴에서 Username 등록
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;2. Contact Information 에서 아래 처럼 날짜 업데이트 되었는지 확인 (안되어 있으면 정보 입력)
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp;Contact information last updated on May 25, 2015 at 12:51 PM.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;3. SSH Public Keys 등록
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp;$ cat ~/.ssh/id_rsa.pub
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;4. Agreements 서명
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[&amp;nbsp;stackalytics 에 추가 ]&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ mkdir -p ~/Documents/git &amp;amp;&amp;amp;&amp;nbsp;cd&amp;nbsp;~/Documents/git
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;git clone ssh://&lt;/span&gt;&lt;font color=&quot;#941751&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;seungkyu&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;@review.openstack.org:29418/openstack/stackalytics
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ cd&amp;nbsp;stackalytics
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## git 및 git-review 설치
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ brew install git git-review
&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## 환경 설정 (gitreview.username 은 review 사이트의 Profile Username 임)
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ git config --add gitreview.username &quot;&lt;/span&gt;&lt;font color=&quot;#941751&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;seungkyu&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&quot;&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;git config --add user.name &quot;&lt;/span&gt;&lt;font color=&quot;#941751&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;Seungkyu Ahn&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&quot;
&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;git config --add user.email &quot;&lt;/span&gt;&lt;font color=&quot;#941751&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;seungkyua@gmail.com&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## 접속 테스트 및 commit-msg hook 다운로드&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ git review -s
&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## 개인 추가 (launchpad_id 의 abc 순), end_date: null 은 하나 밖에 못씀&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## launchpad_id 만 필수, 나머지 id 는 옵션&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;git checkout -b seungkyua
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;vi etc/default_data.json&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;launchpad_id&quot;: &quot;seungkyua&quot;,
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;gerrit_id&quot;: &quot;seungkyu&quot;,
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;github_id&quot;: &quot;seungkyua&quot;,
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;companies&quot;: [
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;company_name&quot;: &quot;Samsung SDS&quot;,
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;end_date&quot;: &quot;2015-Feb-28&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;},
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;company_name&quot;: &quot;OpenStack Korea User Group&quot;,
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;end_date&quot;: &quot;2016-Dec-31&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;},
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;company_name&quot;: &quot;SK telecom&quot;,
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;end_date&quot;: null
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;],
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;user_name&quot;: &quot;Seungkyu Ahn&quot;,
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;emails&quot;: [&quot;ahnsk@sk.com&quot;, &quot;seungkyua@gmail.com&quot;]
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;},&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## companies 항목에 &lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;회사명이 없을 때는 추가해야 함&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;25785&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;/span&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;25786&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;domains&quot;: [&quot;sktelecom.com&quot;],
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;25787&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;company_name&quot;: &quot;SK telecom&quot;,
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;25788&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;aliases&quot;: [&quot;SKT&quot;, &quot;SKTelecom&quot;]
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;25789&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;},&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;git commit -a
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## commit message 는 아래와 같이
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;modify personal info about seungkyua&lt;/span&gt;&lt;br /&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## commit message 작성법
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;첫번째 라인은 50자 이내로 간단히 요약을 쓴다.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[공백라인]
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;설명을 적되 라인은 72자가 넘어가면 다음 라인에 쓴다.
&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## review 올리기&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ git review
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## git review 시 Change-Id 세팅 에러가 나면 화면 에러 대로 수행&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;gitdir=$(git rev-parse --git-dir); scp -p -P 29418 &lt;/span&gt;&lt;font color=&quot;#941751&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;seungkyu&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;@review.openstack.org:hooks/commit-msg ${gitdir}/hooks/
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;git commit --amend
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ git review
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## 확인
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;a href=&quot;https://review.openstack.org/#/q/project:openstack/stackalytics&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;https://review.openstack.org/#/q/project:openstack/stackalytics&lt;/span&gt;&lt;/a&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/226&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>OpenStack</category>
<category>Contribution</category>
<category>gerrit</category>
<category>OpenStack</category>
<category>OpenStack Contribution</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/226</guid>
<comments>https://ahnseungkyu.com/226#entry226comment</comments>
<pubDate>Wed, 15 Mar 2017 09:24:27 +0900</pubDate>
</item>
<item>
<title>ip link 를 활용한 device namespace 로 보내고 원복하기</title>
<link>https://ahnseungkyu.com/225</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?--&gt;

&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&lt;p style=&quot;text-align: left; clear: none; float: none;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;ip link 로 device 를 namespace 로 보내면 Host 에서 해당 device 는 볼 수 가 없다.&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;이를 다시 Host 로 원복하는 방법&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## Host 서버의 eno2 를 qrouter namespace 에 넣고 ip 세팅&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ sudo ip netns
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;qrouter-68cfc511-7e75-4b85-a1ca-d8a09c489ccc
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;qdhcp-03a6de58-9693-4c41-9577-9307c8750141
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;## eno2 를 네임스페이스로 보내기&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ sudo ip link set eno2 netns qrouter-68cfc511-7e75-4b85-a1ca-d8a09c489ccc
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ sudo ip netns exec qrouter-68cfc511-7e75-4b85-a1ca-d8a09c489ccc ip a
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;4: eno2: &amp;lt;BROADCAST,MULTICAST&amp;gt; mtu 1500 qdisc noop state DOWN group default qlen 1000
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; link/ether 3c:a8:2a:20:ed:d1 brd ff:ff:ff:ff:ff:ff
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ sudo ip netns exec qrouter-68cfc511-7e75-4b85-a1ca-d8a09c489ccc ip addr add 192.168.130.100/24 dev eno2
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ sudo ip netns exec qrouter-68cfc511-7e75-4b85-a1ca-d8a09c489ccc ifconfig eno2 up
&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## qrouter namespace 에 있는 eno2 를 Host 로 다시 돌려 보내기&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;ip netns exec qrouter-68cfc511-7e75-4b85-a1ca-d8a09c489ccc ip link set eno2 netns 1&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center; clear: none; float: none;&quot;&gt;&lt;span class=&quot;imageblock&quot; style=&quot;display:inline-block;width:315px;width: 315px; height: 560px;;height:auto;max-width:100%&quot;&gt;&lt;img src=&quot;https://t1.daumcdn.net/cfile/tistory/264D7743585B282104&quot; filemime=&quot;image/jpeg&quot; filename=&quot;20161028_Familia_BCN_small.jpg&quot; height=&quot;560&quot; original=&quot;no&quot; style=&quot;width: 315px; height: 560px;&quot; width=&quot;315&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/225&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Linux</category>
<category>i; link 원복</category>
<category>ip link set</category>
<category>namespace</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/225</guid>
<comments>https://ahnseungkyu.com/225#entry225comment</comments>
<pubDate>Thu, 24 Nov 2016 13:29:19 +0900</pubDate>
</item>
<item>
<title>Kubernetes 와 Ceph rbd 연결하기</title>
<link>https://ahnseungkyu.com/224</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## https://github.com/kubernetes/kubernetes/tree/master/examples/volumes/cephfs
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[ ceph-admin 노드에서 ]&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ ssh ceph@192.168.30.22
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## kubes Pool 생성
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ ceph osd pool create kubes 128
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## kube user 생성
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ ceph auth get-or-create client.kube mon 'allow r' \
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;osd 'allow class-read object_prefix rbd_children, allow rwx pool=kubes'
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[client.kube]
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; key = AQCt/BpYigJ7MRAA5vy+cl39EsKpY3C+tXEGrA==
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## kube user 에 대한 secret key 생성 및 조회
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ ceph auth get-or-create client.kube
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;AQCt/BpYigJ7MRAA5vy+cl39EsKpY3C+tXEGrA==&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## kube-node01, kube-node02 서버에 kube key 와 ceph.conf 추가
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ ssh stack@192.168.30.15 sudo mkdir -p /etc/ceph
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ ceph auth get-or-create client.kube | ssh stack@192.168.30.15 sudo tee /etc/ceph/ceph.client.kube.keyring
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ cat /etc/ceph/ceph.conf | ssh stack@192.168.30.15 sudo tee /etc/ceph/ceph.conf
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ ssh stack@192.168.30.15 sudo chown -R stack.stack /etc/ceph
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ ssh stack@192.168.30.16 sudo mkdir -p /etc/ceph
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ ceph auth get-or-create client.kube | ssh stack@192.168.30.16 sudo tee /etc/ceph/ceph.client.kube.keyring
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ cat /etc/ceph/ceph.conf | ssh stack@192.168.30.16 sudo tee /etc/ceph/ceph.conf
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ ssh stack@192.168.30.16 sudo chown -R stack.stack /etc/ceph
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;[ kube-node01, kube-node02 에 접속 ]&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## ceph rbd client (ceph-common) 와 ceph fs client 설치 (ceph-fs-common)&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ sudo apt-get -y install ceph-common ceph-fs-common&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;########################################&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;## ceph rbd 로 연결하는 방식&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;########################################&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## https://github.com/kubernetes/kubernetes/tree/master/examples/volumes/rbd
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## https://github.com/ceph/ceph-docker/tree/master/examples/kubernetes
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;[ ceph-admin 노드에서 ]&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## kube keyring 파일 넣기
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ sudo vi /etc/ceph/ceph.client.kube.keyring
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[client.kube]
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; key = AQCt/BpYigJ7MRAA5vy+cl39EsKpY3C+tXEGrA==
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## rbd 이미지 생성
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## http://karan-mj.blogspot.kr/2013/12/ceph-installation-part-3.html
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ rbd create ceph-rbd-test --pool kubes --name client.kube --size 1G -k /etc/ceph/ceph.client.kube.keyring
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ rbd list --pool kubes --name client.kube -k /etc/ceph/ceph.client.kube.keyring
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ rbd -p kubes ls
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## Jewel 의 새기능은 현재 대부분의 OS 에서 mount 문제가 있어 image 기능을 제거 해야 함
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ rbd feature disable ceph-rbd-test fast-diff --pool kubes --name client.kube -k /etc/ceph/ceph.client.kube.keyring
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ rbd feature disable ceph-rbd-test deep-flatten --pool kubes --name client.kube -k /etc/ceph/ceph.client.kube.keyring
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ rbd feature disable ceph-rbd-test object-map --pool kubes --name client.kube -k /etc/ceph/ceph.client.kube.keyring
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ rbd feature disable ceph-rbd-test exclusive-lock --pool kubes --name client.kube -k /etc/ceph/ceph.client.kube.keyring
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ rbd info ceph-rbd-test --pool kubes --name client.kube -k /etc/ceph/ceph.client.kube.keyring
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ rbd --image ceph-rbd-test -p kubes info
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ rbd remove ceph-rbd-test --pool kubes --name client.kube -k /etc/ceph/ceph.client.kube.keyring
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## secret yaml 을 만들기 위해 key 를 base64 로 인코딩 함
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ grep key /etc/ceph/ceph.client.kube.keyring |awk '{printf &quot;%s&quot;, $NF}'|base64
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;QVFDdC9CcFlpZ0o3TVJBQTV2eStjbDM5RXNLcFkzQyt0WEVHckE9PQ==
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;[ kube-deploy 접속 ]&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## secret key 를 pod 로 생성하여 접속
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ vi ~/kube/ceph-secret.yaml
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;apiVersion: v1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;kind: Secret
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; name: ceph-secret
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;data:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; key: QVFDdC9CcFlpZ0o3TVJBQTV2eStjbDM5RXNLcFkzQyt0WEVHckE9PQ==
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ scp ~/kube/ceph-secret.yaml kube-master01:~/kube/.
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ ssh kube-master01 &quot;kubectl create -f ~/kube/ceph-secret.yaml&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ kubectl -s http://kube-master01:8080 get secrets
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## rbd-with-secret pod 생성해서 rbd 활용
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ vi ~/kube/rbd-with-secret.yml
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;apiVersion: v1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;kind: Pod
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; name: rbd2
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;spec:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; containers:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; - image: gcr.io/google_containers/busybox
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; command:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; - sleep
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; - &quot;3600&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; imagePullPolicy: IfNotPresent
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; name: rbd-rw-busybox
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; volumeMounts:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; - mountPath: &quot;/mnt/rbd&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; name: rbdpd
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; volumes:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; - name: rbdpd
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; rbd:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; monitors:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; - 192.168.30.23:6789
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; - 192.168.30.24:6789
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; - 192.168.30.25:6789
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; pool: kubes
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; image: ceph-rbd-test
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; user: kube
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; keyring: /etc/ceph/ceph.client.kube.keyring
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; secretRef:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; name: ceph-secret
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; fsType: ext4
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; readOnly: false
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ scp ~/kube/rbd-with-secret.yml kube-master01:~/kube/.
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ ssh kube-master01 &quot;kubectl create -f ~/kube/rbd-with-secret.yml&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ kubectl -s http://kube-master01:8080 get pods
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## rbd 연결 확인
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ kubectl -s http://kube-master01:8080 describe pods rbd2
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ kubectl -s http://kube-master01:8080 exec -it rbd2 -- df -h
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;[ kube-node02 접속하여 ]&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ docker ps
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ docker inspect --format '{{ .Mounts }}' 4c4070a1393b
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## 혹은
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ mount |grep kub
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;/dev/rbd0 on /var/lib/kubelet/plugins/kubernetes.io/rbd/rbd/kubes-image-ceph-rbd-test type ext4 (rw,relatime,stripe=1024,data=ordered)
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;/dev/rbd0 on /var/lib/kubelet/pods/061973fc-a265-11e6-940f-5cb9018c67dc/volumes/kubernetes.io~rbd/rbdpd type ext4 (rw,relatime,stripe=1024,data=ordered)
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(148, 23, 81); font-family: Tahoma; font-size: 12pt;&quot;&gt;[ kube-deploy 접속해서 ]&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## secret key pod 를 사용하지 않고 keyring 으로만 rbd pod 생성
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ vi ~/kube/rbd.yml
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;apiVersion: v1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;kind: Pod
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; name: rbd
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;spec:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; containers:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; - image: gcr.io/google_containers/busybox
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; command:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; - sleep
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; - &quot;3600&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; imagePullPolicy: IfNotPresent
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; name: rbd-rw-busybox
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; volumeMounts:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; - mountPath: &quot;/mnt/rbd&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; name: rbdpd
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; volumes:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; - name: rbdpd
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; rbd:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; monitors:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; - 192.168.30.23:6789
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; - 192.168.30.24:6789
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; - 192.168.30.25:6789
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; pool: kubes
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; image: ceph-rbd-test
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; user: kube
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; keyring: /etc/ceph/ceph.client.kube.keyring
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; fsType: ext4
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; readOnly: false
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ scp ~/kube/rbd.yml kube-master01:~/kube/.
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ ssh kube-master01 &quot;kubectl create -f ~/kube/rbd.yml&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ kubectl -s http://kube-master01:8080 get pods
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## rbd 연결 확인
&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?--&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ kubectl -s http://kube-master01:8080 exec -it rbd -- df -h&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/224&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Container</category>
<category>ceph</category>
<category>kubernetes</category>
<category>RBD</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/224</guid>
<comments>https://ahnseungkyu.com/224#entry224comment</comments>
<pubDate>Fri, 04 Nov 2016 18:11:26 +0900</pubDate>
</item>
<item>
<title>T-Fabric 소개 동영상</title>
<link>https://ahnseungkyu.com/223</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;&lt;iframe width=&quot;624&quot; height=&quot;351&quot;
				src=&quot;//play-tv.kakao.com/embed/player/cliplink/v4f07Qd6Lx60lTdPLoQoJPJ@my?service=daum_tistory&quot;
				frameborder=&quot;0&quot; scrolling=&quot;no&quot; allowfullscreen&gt;&lt;/iframe&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/223&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Miscellaneous</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/223</guid>
<comments>https://ahnseungkyu.com/223#entry223comment</comments>
<pubDate>Tue, 18 Oct 2016 09:11:17 +0900</pubDate>
</item>
<item>
<title>Kubernetes Authentication and Authorization 설정</title>
<link>https://ahnseungkyu.com/222</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;kubernetes 의 Authentication 과 Authorization 활용&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[ Authentication ]&lt;/span&gt;&lt;/p&gt;&lt;ul style=&quot;list-style-type: square;&quot;&gt;&lt;li&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;client-ca-file 로 접속&lt;/span&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;static password file 사용&lt;/span&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;static token file 사용&lt;/span&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;OpenStack Keystone 사용&lt;/span&gt;&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;먼저 client-ca-file 은 Authorization 을 사용할 수 없으니 제외&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;static password 도 잘됨, 그러나 Authorization 을 연동해 보지는 않았음.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;OpenStack Keystone 연계는 아직 알파버전이고 수정이 자주 일어나서 아직 소스까지 볼 단계는 아니라 생략.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;static token 방식은 Authorization 과도 잘 연동되므로 이걸 활용&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## uuid generate&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ cat /proc/sys/kernel/random/uuid&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## {{uuid}} 는 위에서 제너레이션 된 값으로 대치&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo vi /etc/default/kube-token&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&lt;b&gt;{{uuid}}&lt;/b&gt;&lt;/span&gt;,admin,1&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;{{uuid}}&lt;/b&gt;,ahnsk,2,&quot;tfabric,group1&quot;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;{{uuid}}&lt;/b&gt;,stack,3,tfabric&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## api 서버에 token file 옵션 추가&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo chown stack.root /etc/default/kube-token&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;--token-auth-file=/etc/default/kube-token \&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo systemctl restart kube-apiserver.service&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ kubectl -s https://kube-master01:6443 --token=&lt;b&gt;{{&lt;/b&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&lt;b&gt;uuid}}&lt;/b&gt;&lt;/span&gt;&amp;nbsp;get node&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;[ Authorization ]&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;ul style=&quot;list-style-type: square;&quot;&gt;&lt;li&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;ABAC Mode&lt;/span&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;RBAC Mode&lt;/span&gt;&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;RBAC 는 아직 알파라 베타인 ABAC 를 활용&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## 전체 admin : admin, &amp;nbsp; tfabric admin : ahnsk, &amp;nbsp; &amp;nbsp; &amp;nbsp;tfabric readOnly user : stack&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;kubectl 이 api version 을 체크하기 때문에 무조건&amp;nbsp;&lt;b&gt;nonResourcePath&lt;/b&gt; 도 all 로 지정해야 함&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;div&gt;$ sudo vi /etc/default/kube-rbac.json&lt;/div&gt;&lt;div&gt;{&quot;apiVersion&quot;:&quot;abac.authorization.kubernetes.io/v1beta1&quot;,&quot;kind&quot;:&quot;Policy&quot;,&quot;spec&quot;:{&quot;user&quot;:&quot;system:serviceaccount:kube-system:default&quot;,&quot;namespace&quot;:&quot;*&quot;,&quot;resource&quot;:&quot;*&quot;,&quot;apiGroup&quot;:&quot;*&quot;, &quot;nonResourcePath&quot;: &quot;*&quot;}}&lt;/div&gt;&lt;div&gt;{&quot;apiVersion&quot;: &quot;abac.authorization.kubernetes.io/v1beta1&quot;, &quot;kind&quot;: &quot;Policy&quot;, &quot;spec&quot;: {&quot;user&quot;:&quot;admin&quot;, &quot;namespace&quot;: &quot;*&quot;, &quot;resource&quot;: &quot;*&quot;, &quot;apiGroup&quot;: &quot;*&quot;, &quot;nonResourcePath&quot;: &quot;*&quot; }}&lt;/div&gt;&lt;div&gt;{&quot;apiVersion&quot;: &quot;abac.authorization.kubernetes.io/v1beta1&quot;, &quot;kind&quot;: &quot;Policy&quot;, &quot;spec&quot;: {&quot;user&quot;:&quot;ahnsk&quot;, &quot;namespace&quot;: &quot;tfabric&quot;, &quot;resource&quot;: &quot;*&quot;, &quot;apiGroup&quot;: &quot;*&quot;, &quot;nonResourcePath&quot;: &quot;*&quot; }}&lt;/div&gt;&lt;div&gt;{&quot;apiVersion&quot;: &quot;abac.authorization.kubernetes.io/v1beta1&quot;, &quot;kind&quot;: &quot;Policy&quot;, &quot;spec&quot;: {&quot;user&quot;:&quot;stack&quot;, &quot;namespace&quot;: &quot;tfabric&quot;, &quot;resource&quot;: &quot;*&quot;, &quot;apiGroup&quot;: &quot;*&quot;, &quot;readonly&quot;: true, &quot;nonResourcePath&quot;: &quot;*&quot;}}&lt;/div&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;kube-system 이 kube-apiserver 에 접근하기 위해서는 1라인이 반드시 있어야 함&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo vi /etc/default/kube-apiserver&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;--authorization-mode=ABAC \&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;--authorization-policy-file=/etc/default/kube-rbac.json \&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo systemctl restart kube-apiserver.service&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ cd ~/kube&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ vi busybox-tfabric.yaml&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;apiVersion: v1&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;kind: Pod&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;metadata:&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; name: busybox&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; namespace: tfabric&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;spec:&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; containers:&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; - image: gcr.io/google_containers/busybox&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &amp;nbsp; command:&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; - sleep&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; - &quot;3600&quot;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &amp;nbsp; imagePullPolicy: IfNotPresent&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &amp;nbsp; name: busybox&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; restartPolicy: Always&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ kubectl -s https://kube-master01:6443&amp;nbsp;--token=&lt;b&gt;{{uuid}}&lt;/b&gt;&amp;nbsp;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;font-size: 16px; font-family: Tahoma;&quot;&gt;--v=8 version&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 16px; font-family: Tahoma;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 16px; font-family: Tahoma;&quot;&gt;token 지정을 매번 하기 귀찮으니 config context 를 활용하는 것이 좋음.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 16px; font-family: Tahoma;&quot;&gt;이건 다음에....&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/222&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Container</category>
<category>Authentication</category>
<category>Authorization</category>
<category>kubernetes</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/222</guid>
<comments>https://ahnseungkyu.com/222#entry222comment</comments>
<pubDate>Mon, 10 Oct 2016 18:28:00 +0900</pubDate>
</item>
<item>
<title>Kubernetes CPU 할당 방법 이해하기</title>
<link>https://ahnseungkyu.com/221</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;##&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;https://www.kernel.org/doc/Documentation/scheduler/sched-bwc.txt&quot; style=&quot;font-family: Tahoma; font-size: 14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;https://www.kernel.org/doc/Documentation/scheduler/sched-bwc.txt&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?--&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;보통&amp;nbsp;cpu.cfs_period_us 는&amp;nbsp;cpu.cfs_quota 와 같이 사용되어 계산되는데 계산법은 다음과 같다. (단위 : microsecond)
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;1 CPU 사용률 =&amp;nbsp;cpu.cfs_quota_us /&amp;nbsp;cpu.cfs_period_us * 100
&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;cgoup에서 1cpu 의 20% 를 사용한다면 아래와 세팅하면 된다.
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# echo 10000 &amp;gt; cpu.cfs_quota_us /* quota = 10ms */
&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# echo 50000 &amp;gt; cpu.cfs_period_us /* period = 50ms */
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;Kubernetes 에선 limit resources 로 cpu 와 memory 를 다음과 같이 할당하다.
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;--limits='cpu=200m,memory=512Mi'
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;cpu 는 200m 로 할당하였는데 이는&amp;nbsp;cpu.cfs_period_us 값으로 1 sec (1000 millisecond) 기준당 0.2 sec 를 할당한다는 의미이다. (최대값은 1sec == 1000000&amp;nbsp;microsecond 이므로 1000000 임)
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;보통 cgroup의 디폴트 값은&amp;nbsp;cpu.cfs_quota=-1 이므로 위의 같은 경우는 20% 의 cpu를 할당하는 의미이다.&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/221&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Container</category>
<category>cpu</category>
<category>kubernetes</category>
<category>limits</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/221</guid>
<comments>https://ahnseungkyu.com/221#entry221comment</comments>
<pubDate>Thu, 06 Oct 2016 16:30:55 +0900</pubDate>
</item>
<item>
<title>Kubernetes 에 kube-dns 설치하기, kubectl 사용법, glusterFS 연결</title>
<link>https://ahnseungkyu.com/220</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?--&gt;

&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;###################################&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;##&amp;nbsp;&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;kube-dns (skydns) 설치, dashboard 설치&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;###################################&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;##&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://stackoverflow.com/search?q=%5Bkubernetes%5D+kubedns&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;http://stackoverflow.com/search?q=%5Bkubernetes%5D+kubedns&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## 검색창에&amp;nbsp;[kubernetes] 을 넣고 검색을 하면 됨
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;##&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;https://github.com/kubernetes/kubernetes/tree/master/cluster/addons/dns&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;https://github.com/kubernetes/kubernetes/tree/master/cluster/addons/dns&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ cd&amp;nbsp;~/kube
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ export KUBE_ROOT=/home/ubuntu/go_workspace/src/k8s.io/kubernetes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ export DNS_REPLICAS=1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ export DNS_DOMAIN=cluster.local
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ export&amp;nbsp;DNS_SERVER_IP=&lt;/span&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;192.168.30.200&lt;/span&gt;&lt;/b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;sed -e &quot;s/\\\$DNS_REPLICAS/${DNS_REPLICAS}/g;\
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;s/\\\$DNS_DOMAIN/${DNS_DOMAIN}/g;&quot; \
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&quot;${KUBE_ROOT}/cluster/addons/dns/skydns-rc.yaml.sed&quot; &amp;gt; skydns-rc.yaml
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## skydns-rc.yaml 에 kube-master-url 추가&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ vi skydns-rc.yaml
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;81&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;- --kube-master-url=http://192.168.30.13:8080
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;sed -e &quot;s/\\\$DNS_SERVER_IP/${DNS_SERVER_IP}/g&quot; \
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&quot;${KUBE_ROOT}/cluster/addons/dns/skydns-svc.yaml.sed&quot; &amp;gt; skydns-svc.yaml
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;cat &amp;lt;&amp;lt;EOF &amp;gt;namespace.yaml
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;apiVersion: v1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;kind: Namespace
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&amp;nbsp; name: kube-system
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;EOF
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ cp ~/go_workspace/src/k8s.io/kubernetes/cluster/addons/dashboard/dashboard-controller.yaml ~/kube/.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ cp ~/go_workspace/src/k8s.io/kubernetes/cluster/addons/dashboard/dashboard-service.yaml ~/kube/.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?--&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## kube-master01 에 복사
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ ssh kube-master01 &quot;mkdir -p kube&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ scp ~/kube/skydns-rc.yaml kube-master01:~/kube/.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ scp ~/kube/skydns-svc.yaml kube-master01:~/kube/.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;scp ~/kube/namespace.yaml kube-master01:~/kube/.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;scp ~/kube/dashboard-controller.yaml kube-master01:~/kube/.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ scp&amp;nbsp;~/kube/dashboard-service.yaml kube-master01:~/kube/.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ ssh kube-master01 &quot;kubectl create -f ~/kube/namespace.yaml&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ ssh kube-master01 &quot;kubectl --namespace=kube-system create -f ~/kube/skydns-rc.yaml&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ ssh kube-master01 &quot;kubectl --namespace=kube-system create -f ~/kube/skydns-svc.yaml&quot;
&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## dashboard 설치&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ cd ~/kube
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ wget&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;https://rawgit.com/kubernetes/dashboard/master/src/deploy/kubernetes-dashboard.yaml&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;https://rawgit.com/kubernetes/dashboard/master/src/deploy/kubernetes-dashboard.yaml&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## master api 에 접속할 수 있게 정보를 추가
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;vi kubernetes-dashboard.yaml
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;47&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;- --apiserver-host=http://192.168.30.13:8080
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;scp ~/kube/kubernetes-dashboard.yaml kube-master01:~/kube/.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ ssh kube-master01 &quot;kubectl create -f ~/kube/kubernetes-dashboard.yaml&quot;&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## skydns 설치 확인&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;vi ~/kube/busybox.yaml
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;apiVersion: v1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;kind: Pod
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;metadata:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&amp;nbsp; name: busybox
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&amp;nbsp; namespace: default
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;spec:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&amp;nbsp; containers:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&amp;nbsp; - image:&amp;nbsp;gcr.io/google_containers/busybox
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; command:
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; - sleep
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; - &quot;3600&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; imagePullPolicy: IfNotPresent
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; name: busybox
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&amp;nbsp; restartPolicy: Always
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ scp ~/kube/busybox.yaml kube-master01:~/kube/.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ ssh kube-master01 &quot;kubectl create -f ~/kube/busybox.yaml&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## -s 옵션으로 api 서버 지정 가능&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ kubectl -s http://kube-master01:8080 get pods --all-namespaces -o wide
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ kubectl -s http://kube-master01:8080 describe pod kube-dns-v19-d1tse --namespace=kube-system
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 get pods busybox -o wide
&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 exec busybox -- nslookup kubernetes.default
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;###################################&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;##&amp;nbsp;&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;kubectl 사용법&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;###################################&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;##&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://kubernetes.io/docs/user-guide/kubectl-cheatsheet/&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;http://kubernetes.io/docs/user-guide/kubectl-cheatsheet/&lt;/span&gt;&lt;/a&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;##&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://kubernetes.io/docs/user-guide/quick-start/&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;http://kubernetes.io/docs/user-guide/quick-start/&lt;/span&gt;&lt;/a&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## nginx pod 생성 &amp;nbsp;(replication controller 대신 replica set 이 생겼음)&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 run nginx --image=nginx (--replicas=2) --port=80
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 get pods
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ kubectl -s http://kube-master01:8080 get pods -o wide
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 get pod -l run=nginx
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## nginx scaling
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 scale deployment/nginx --replicas=1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## nginx auto scaling
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 autoscale deployment/nginx --min=1 --max=3
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## nginx rc 조회
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ kubectl&amp;nbsp;-s http://kube-master01:8080 get rs
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## 서비스 멈춤없이 이미지 버전 올리기 (edit 로 파일 수정하면 됨)
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ kubectl -s&amp;nbsp;http://kube-master01:8080 edit&amp;nbsp;deployment/nginx
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## nginx service 생성 (port : host에 노출되는 port, &amp;nbsp; target-port : docker 내부에서 뜨는 port)
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 expose deployment nginx --port=8080&amp;nbsp;--target-port=80 (--type=LoadBalancer) --name=nginx
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 get services
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## nginx pod 삭제
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 get deployment (nginx)
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 delete deployment nginx
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## nginx service 삭제
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ kubectl -s http://kube-master01:8080 delete service nginx
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## nginx pod, service 동시 삭제
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ kubectl -s http://kube-master01:8080 delete deployment,service nginx
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 delete deployments/nginx services/nginx
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## nginx pod, service 동시 삭제 (label 활용 : -l or --selector)
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 delete deployment,services -l app=nginx
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## nginx replication controller 삭제 (디폴트는 pod 도 삭제됨, --cascade=false : rc 만 삭제)&amp;nbsp;&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 delete rc nginx-rc
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 delete rc nginx-rc &lt;/span&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;--cascade=false&lt;/span&gt;&lt;/b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## nginx 안으로 들어가기
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ kubectl -s http://kube-master01:8080 &lt;/span&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;exec -it&lt;/span&gt;&lt;/b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt; nginx-3449338310-sl1ou &lt;/span&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;--&lt;/span&gt;&lt;/b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt; /bin/bash
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## pod 내의 컨테이너 로그 보기
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ kubectl -s http://kube-master01:8080 logs -f nginx-3449338310-sl1ou
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ kubectl -s http://kube-master01:8080 logs --tail=20 nginx-3449338310-sl1ou
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ kubectl -s http://kube-master01:8080 logs --since=1m nginx-3449338310-sl1ou
&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;div&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## Guestbook (redis-master, redis-slave, frontend) 샘플&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;##&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;https://github.com/kubernetes/kubernetes/tree/master/examples/guestbook&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;https://github.com/kubernetes/kubernetes/tree/master/examples/guestbook&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;##&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://kubernetes.io/docs/user-guide/services/&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;http://kubernetes.io/docs/user-guide/services/&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ ~/go_workspace/src/k8s.io/kubernetes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ kubectl -s http://kube-master01:8080 create -f examples/guestbook/
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## Service &amp;nbsp;frontend 타입을 ClusterIP 에서 NodePort 로 변경
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ kubectl -s http://kube-master01:8080 edit services/frontend
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;28&amp;nbsp; &amp;nbsp;type: NodePort
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## json format 으로 output 보기
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;##&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://kubernetes.io/docs/user-guide/jsonpath/&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;http://kubernetes.io/docs/user-guide/jsonpath/&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;##&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://www.jsoneditoronline.org/&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;http://www.jsoneditoronline.org/&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 get svc frontend -o json
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 get svc frontend -o &quot;jsonpath={.spec.ports[0].nodePort}{&quot;\n&quot;}&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## Guestbook 삭제
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 delete deployments,services -l &quot;app in (redis, guestbook)&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## 명령어로 pod 생성하는 방법&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 run frontend --image=gcr.io/google-samples/gb-frontend:v4 \
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;--env=&quot;GET_HOSTS_FROM=dns&quot; --port=80 --replicas=3 \
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;--limits=&quot;cpu=100m,memory=100Mi&quot; \
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;--labels=&quot;app=guestbook,tier=frontend&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## Service frontend 를 명령어로 NodePort 타입으로 생성
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 expose deployment frontend \
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;--port=80 --target-port=80 --name=frontend &lt;/span&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;--type=NodePort&lt;/span&gt;&lt;/b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&amp;nbsp;\
&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;--labels=app=guestbook,tier=frontend --selector=app=guestbook,tier=frontend
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;###################################&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## glusterFS 설치 및 Kubernetes 에서 활용&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;###################################&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## glusterFS 설치&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;##&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://gluster.readthedocs.io/en/latest/Quick-Start-Guide/Quickstart/&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;http://gluster.readthedocs.io/en/latest/Quick-Start-Guide/Quickstart/&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## gluster01 과 gluster02 모두 수행
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# vi /etc/hosts
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;192.168.30.15&amp;nbsp; &amp;nbsp;kube-node01 gluster01
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;192.168.30.16&amp;nbsp; &amp;nbsp;kube-node02 gluster02
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;#&amp;nbsp;mkfs.xfs -f /dev/sdb
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;#&amp;nbsp;mkdir -p /data/gluster/brick1 &amp;amp;&amp;amp; chmod -R 777 /data
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;#&amp;nbsp;echo '/dev/sdb /data/gluster/brick1 xfs defaults 1 2' &amp;gt;&amp;gt; /etc/fstab
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;#&amp;nbsp;mount -a &amp;amp;&amp;amp; mount
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# apt-get install -y glusterfs-server glusterfs-client
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;#&amp;nbsp;service glusterfs-server start
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## gluster01 에서
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;#&amp;nbsp;gluster peer probe gluster02
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## gluster02 에서
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;#&amp;nbsp;gluster peer probe gluster01
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## gluster01 과 gluster02 모두 수행
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# mkdir -p /data/gluster/brick1/gv0 &amp;amp;&amp;amp;&amp;nbsp;chmod -R 777 /data
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# mkdir -p /data/gluster/brick1/gv1 &amp;amp;&amp;amp; chmod -R 777 /data/gluster/brick1/gv1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## gluster01 에서 수행 (gv1 은 pod 에서 glusterfs 연결할 때 사용할 디스크)
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;#&amp;nbsp;gluster volume create gv0 replica 2 gluster01:/data/gluster/brick1/gv0 gluster02:/data/gluster/brick1/gv0
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;#&amp;nbsp;gluster volume start gv0
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;#&amp;nbsp;gluster volume create gv1 replica 2 gluster01:/data/gluster/brick1/gv1 gluster02:/data/gluster/brick1/gv1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;#&amp;nbsp;gluster volume start gv1
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## gluster01 과 gluster02 모두 수행
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# mkdir -p /ext &amp;amp;&amp;amp; chmod 777 -R /ext
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;#&amp;nbsp;mount -t glusterfs gluster01:/gv0 /ext
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## kubernetes 와 glusterFS 테스트&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;##&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;https://github.com/kubernetes/kubernetes/tree/master/examples/volumes/glusterfs&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;https://github.com/kubernetes/kubernetes/tree/master/examples/volumes/glusterfs&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ cd ~/go_workspace/src/k8s.io/kubernetes
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;cp examples/volumes/glusterfs/*.json ~/kube &amp;amp;&amp;amp; cd ~/kube
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ vi&amp;nbsp;glusterfs-endpoints.json
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;11&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&quot;ip&quot;: &quot;192.168.30.15&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;23&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&quot;ip&quot;: &quot;192.168.30.16&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ vi&amp;nbsp;glusterfs-pod.json
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;11&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&quot;image&quot;: &quot;nginx&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;25&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&quot;path&quot;: &quot;gv1&quot;,
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;26&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&quot;readOnly&quot;: false
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ ssh kube-master01 &quot;mkdir -p kube&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ scp ~/kube/glusterfs-endpoints.json kube-master01:~/kube/.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ scp ~/kube/glusterfs-service.json kube-master01:~/kube/.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ scp ~/kube/glusterfs-pod.json kube-master01:~/kube/.
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ ssh kube-master01 &quot;kubectl create -f ~/kube/glusterfs-endpoints.json&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ ssh kube-master01 &quot;kubectl create -f ~/kube/glusterfs-service.json&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$ ssh kube-master01 &quot;kubectl create -f ~/kube/glusterfs-pod.json&quot;
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;$&amp;nbsp;kubectl -s http://kube-master01:8080 get pods glusterfs -o jsonpath='{.status.hostIP}{&quot;\n&quot;}'
&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ ssh kube-node01 &quot;mount | grep gv1&quot;&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/220&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Container</category>
<category>glusterfs</category>
<category>kube-dns</category>
<category>kubectl</category>
<category>skydns</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/220</guid>
<comments>https://ahnseungkyu.com/220#entry220comment</comments>
<pubDate>Mon, 03 Oct 2016 23:48:58 +0900</pubDate>
</item>
<item>
<title>Zookeeper 와 Kafka 설치</title>
<link>https://ahnseungkyu.com/219</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;10.0.0.171 &amp;nbsp; &amp;nbsp;kafka01 zookeeper01&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;10.0.0.172 &amp;nbsp; &amp;nbsp;kafka02 zookeeper02&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;10.0.0.173 &amp;nbsp; &amp;nbsp;kafka03 zookeeper03&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;192.168.30.171 &amp;nbsp; &amp;nbsp;kafka01 zookeeper01&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;192.168.30.172 &amp;nbsp; &amp;nbsp;kafka02 zookeeper02&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;192.168.30.173 &amp;nbsp; &amp;nbsp;kafka03 zookeeper03&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## kafka vm 생성&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ openstack flavor create --id ka1 --ram 8192 --disk 160 --vcpus 2 kafka&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ openstack server create --image 7498cf9d-bd2e-4401-9ae9-ca72120272ed \&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;--flavor ka1 &amp;nbsp;--nic net-id=03a6de58-9693-4c41-9577-9307c8750141,v4-fixed-ip=10.0.0.171 \&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;--key-name magnum-key --security-group default kafka01&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ openstack ip floating create --floating-ip-address 192.168.30.171 public&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ openstack ip floating add 192.168.30.171 kafka01&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px; color: rgb(152, 0, 0);&quot;&gt;&lt;b&gt;## Oracle Java 8 설치&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo add-apt-repository ppa:webupd8team/java&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo apt-get update&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo apt-get install oracle-java8-installer&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## 여러 버전을 Java 를 설치했을 때 관리&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo update-alternatives --config java&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px; color: rgb(152, 0, 0);&quot;&gt;&lt;b&gt;## zookeeper 설치&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## https://zookeeper.apache.org/doc/r3.4.9/zookeeperStarted.html&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## http://apache.mirror.cdnetworks.com/zookeeper/zookeeper-3.4.9/&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ mkdir -p downloads &amp;amp;&amp;amp; cd downloads&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ wget http://apache.mirror.cdnetworks.com/zookeeper/zookeeper-3.4.9/zookeeper-3.4.9.tar.gz&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo tar -C /usr/local -xzvf zookeeper-3.4.9.tar.gz&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ cd /usr/local&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo ln -s zookeeper-3.4.9/ zookeeper&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ vi /usr/local/zookeeper/conf/zoo.cfg&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;tickTime=2000&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;dataDir=/var/lib/zookeeper&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;clientPort=2181&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;initLimit=5&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;syncLimit=2&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;server.1=zookeeper01:2888:3888&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;server.2=zookeeper02:2888:3888&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;server.3=zookeeper03:2888:3888&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ vi /usr/local/zookeeper/bin/zkEnv.sh&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;56 &amp;nbsp; &amp;nbsp; ZOO_LOG_DIR=&quot;/var/log/zookeeper&quot;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo mkdir -p /var/log/zookeeper &amp;amp;&amp;amp; sudo chown -R stack.stack /var/log/zookeeper&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## zookeeper myid 는 서버마다 지정&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo mkdir -p /var/lib/zookeeper &amp;amp;&amp;amp; sudo chown -R stack.stack /var/lib/zookeeper&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ vi /var/lib/zookeeper/myid&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;1&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ vi ~/.bashrc&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;export JAVA_HOME=/usr/lib/jvm/java-8-oracle&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;export ZOOKEEPER_HOME=/usr/local/zookeeper&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;PATH=$PATH:$ZOOKEEPER_HOME/bin&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ . ~/.bashrc&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ zkServer.sh start&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## zookeeper 설치 확인&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ zkCli.sh -server zookeeper01:2181&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt; color: rgb(152, 0, 0);&quot;&gt;&lt;b&gt;## Kafka 설치&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## https://www.digitalocean.com/community/tutorials/how-to-install-apache-kafka-on-ubuntu-14-04&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## https://kafka.apache.org/downloads.html&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## https://kafka.apache.org/documentation.html&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ cd downloads&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ wget http://apache.mirror.cdnetworks.com/kafka/0.10.0.1/kafka_2.11-0.10.0.1.tgz&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo tar -C /usr/local -xzvf kafka_2.11-0.10.0.1.tgz&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ cd /usr/local &amp;amp;&amp;amp; sudo chown -R stack.stack kafka_2.11-0.10.0.1&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo ln -s kafka_2.11-0.10.0.1/ kafka&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## broker id 는 서버마다 고유하게 줘야 함&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ vi /usr/local/kafka/config/server.properties&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;20 broker.id=0&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;56 log.dirs=/var/lib/kafka&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;112 zookeeper.connect=zookeeper01:2181,zookeeper02:2181,zookeeper03:2181&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;117 delete.topic.enable = true&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo mkdir -p /var/lib/kafka &amp;amp;&amp;amp; sudo chown -R stack.stack /var/lib/kafka&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo mkdir -p /var/log/kafka &amp;amp;&amp;amp; sudo chown -R stack.stack /var/log/kafka&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ vi ~/.bashrc&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;export KAFKA_HOME=/usr/local/kafka&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;PATH=$PATH:$KAFKA_HOME/bin&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ . ~/.bashrc&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ nohup kafka-server-start.sh $KAFKA_HOME/config/server.properties &amp;gt; /var/log/kafka/kafka.log 2&amp;gt;&amp;amp;1 &amp;amp;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## kafkaT : kafka cluster 관리&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo apt-get -y install ruby ruby-dev build-essential&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo gem install kafkat --source https://rubygems.org --no-ri --no-rdoc&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ vi ~/.kafkatcfg&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;{&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &quot;kafka_path&quot;: &quot;/usr/local/kafka&quot;,&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &quot;log_path&quot;: &quot;/var/lib/kafka&quot;,&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &quot;zk_path&quot;: &quot;zookeeper01:2181,zookeeper02:2181,zookeeper03:2181&quot;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;}&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## kafka partition 보기&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ kafkat partitions&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## kafka data 테스트&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ echo &quot;Hello, World&quot; | kafka-console-producer.sh --broker-list kafka01:9092,kafka02:9092,kafka03:9092 --topic TutorialTopic &amp;gt; /dev/null&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ kafka-console-consumer.sh --zookeeper zookeeper01:2181,zookeeper02:2181,zookeeper03:2181 --topic TutorialTopic --from-beginning&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ kafka-topics.sh --list --zookeeper localhost:2181&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ kafka-console-producer.sh --broker-list localhost:9092 --topic test&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;This is a message&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;This is another message&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ kafka-console-consumer.sh --zookeeper localhost:2181 --topic test --from-beginning&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## Replica 3 테스트&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 3 --partitions 1 --topic my-replicated-topic&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ kafka-topics.sh --describe --zookeeper localhost:2181 --topic my-replicated-topic&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;Topic:my-replicated-topic &amp;nbsp; &amp;nbsp;PartitionCount:1 &amp;nbsp; &amp;nbsp;ReplicationFactor:3 &amp;nbsp; &amp;nbsp;Configs:&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &amp;nbsp; Topic: my-replicated-topic &amp;nbsp; &amp;nbsp;Partition: 0 &amp;nbsp; &amp;nbsp;Leader: 0 &amp;nbsp; &amp;nbsp;Replicas: 0,2,1 &amp;nbsp; &amp;nbsp;Isr: 0,2,1&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ kafka-console-producer.sh --broker-list localhost:9092 --topic my-replicated-topic&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;my test message 1&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;my test message 2&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;^C&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ kafka-console-consumer.sh --zookeeper localhost:2181 --from-beginning --topic my-replicated-topic&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## 서버 한대 다운&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ kafka-server-stop.sh&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ kafka-topics.sh --describe --zookeeper localhost:2181 --topic my-replicated-topic&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;Topic:my-replicated-topic &amp;nbsp; &amp;nbsp;PartitionCount:1 &amp;nbsp; &amp;nbsp;ReplicationFactor:3 &amp;nbsp; &amp;nbsp;Configs:&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; &amp;nbsp; Topic: my-replicated-topic &amp;nbsp; &amp;nbsp;Partition: 0 &amp;nbsp; &amp;nbsp;Leader: 0 &amp;nbsp; &amp;nbsp;Replicas: 0,2,1 &amp;nbsp; &amp;nbsp;Isr: 0,1&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ kafka-console-consumer.sh --zookeeper localhost:2181 --from-beginning --topic my-replicated-topic&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## 토픽 삭제&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ kafka-topics.sh --delete --zookeeper localhost:2181 --topic my-replicated-topic&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ kafka-topics.sh --delete --zookeeper localhost:2181 --topic TutorialTopic&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/219&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Hadoop</category>
<category>kafka</category>
<category>zookeeper</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/219</guid>
<comments>https://ahnseungkyu.com/219#entry219comment</comments>
<pubDate>Wed, 28 Sep 2016 01:08:45 +0900</pubDate>
</item>
<item>
<title>OpenStack Prompt 사용</title>
<link>https://ahnseungkyu.com/218</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## OpenStack CLI 를 사용할 때 현재 어떤 프로젝트와 사용자인지를 알려주는 Prompt 만들기&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## 오픈스택 사용자를 위한 프롬프트 설정 &amp;nbsp;(project:user) 로 표시됨&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border: 3px double rgb(203, 203, 203); padding: 10px; background-color: rgb(255, 255, 255);&quot;&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;font-size: 16px; font-family: Tahoma;&quot;&gt;$ vi ~/.bashrc&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;openstack_user() {&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&amp;nbsp; env | grep -E 'OS_USERNAME|OS_PROJECT_NAME' 2&amp;gt; /dev/null | sed -e 's/OS_PROJECT_NAME=\(.*\)/(\1/' -e 's/OS_USERNAME=\(.*\)/\1)/' | paste -sd &quot;:&quot;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;}&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;&lt;b&gt;$(openstack_user)&lt;/b&gt;&lt;/span&gt;\$ '&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ . demo/demo-openrc&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;(demo:demo)&lt;/b&gt;$&lt;/span&gt;&lt;/font&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt; openstack server list&lt;/span&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/218&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>OpenStack</category>
<category>OpenStack</category>
<category>prompt</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/218</guid>
<comments>https://ahnseungkyu.com/218#entry218comment</comments>
<pubDate>Tue, 13 Sep 2016 23:12:47 +0900</pubDate>
</item>
<item>
<title>Ansible 로 kubernetes 설치하기 - ubuntu 16.04 LTS 기준</title>
<link>https://ahnseungkyu.com/217</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;b&gt;## ansbile 스크립트 만들 때 참고 명령어&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;b style=&quot;font-family: Tahoma; font-size: 14px;&quot;&gt;## 변수 보기&lt;/b&gt;&lt;/p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?--&gt;

&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ ansible -i hosts -m debug -a &quot;var=hostvars['kube-master01']&quot; localhost
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$&amp;nbsp;ansible -i hosts -m debug -a &quot;var=groups['kube-masters']&quot; localhost
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;## 하나의 task 만 수행 (restart flannel)&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ ansible-playbook -i hosts --start-at-task='restart flannel'&amp;nbsp;03-flannel.yml
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;## task 조회&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ ansible-playbook -i hosts 03-flannel.yml --list-tasks&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-size: 14pt;&quot;&gt;## 모든 소스는 github 에 ...&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;&lt;b&gt;&lt;a href=&quot;https://github.com/seungkyua/kubernetes-ansible&quot; target=&quot;_top&quot; class=&quot;tx-link&quot;&gt;&lt;span style=&quot;color: rgb(152, 0, 0); font-size: 14pt;&quot;&gt;https://github.com/seungkyua/kubernetes-ansible&lt;/span&gt;&lt;/a&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?--&gt;

&lt;div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;[ 모든 node 에서 수행 ]&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;$ sudo su -
&lt;/div&gt;&lt;div&gt;#&amp;nbsp;vi /etc/ssh/sshd_config
&lt;/div&gt;&lt;div&gt;28 PermitRootLogin yes
&lt;/div&gt;&lt;div&gt;52 PasswordAuthentication yes
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;# systemctl restart sshd
&lt;/div&gt;&lt;div&gt;# passwd
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;# passwd stack
&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;$ &lt;b&gt;sudo apt-get install python2.7&amp;nbsp;python-minimal&lt;/b&gt;
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;$ sudo apt-get update
&lt;/div&gt;&lt;div&gt;$&amp;nbsp;sudo apt-get install -y ansible
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;## ntp ntpdate 패키지를 설치해서 ntp 를 세팅해야 함
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;[ git init 설정 후 github 에 올리기 ]&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;$ cd ~/kubernetes-ansible
&lt;/div&gt;&lt;div&gt;$ git init
&lt;/div&gt;&lt;div&gt;$ git remote add origin https://github.com/seungkyua/kubernetes-ansible.git
&lt;/div&gt;&lt;div&gt;$ git pull origin master
&lt;/div&gt;&lt;div&gt;$ git config user.name &quot;Seungkyu Ahn&quot;
&lt;/div&gt;&lt;div&gt;$ git config user.email &quot;seungkyua@gmail.com&quot;
&lt;/div&gt;&lt;div&gt;$ git add -A
&lt;/div&gt;&lt;div&gt;$ git commit -a -m &quot;Intial commit&quot;
&lt;/div&gt;&lt;div&gt;$ git push --set-upstream origin master
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;[ Prerequisite ]&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;$ vi README.md
&lt;/div&gt;&lt;div&gt;# Prerequisite #
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;- This ansible-playbook is tested in Ubuntu 16.04 LTS
&lt;/div&gt;&lt;div&gt;&amp;nbsp;- Need one Kubernetes deploy node (a.k.a kube-deploy)
&lt;/div&gt;&lt;div&gt;&amp;nbsp;- Login from kube-deploy to all Kubernetes nodes by `root` user without password using hostname
&lt;/div&gt;&lt;div&gt;&amp;nbsp;- kube-deploy should have swap memory over 2G byte
&lt;/div&gt;&lt;div&gt;&amp;nbsp;- Every work should be executed by `stack` user at kube-deploy
&lt;/div&gt;&lt;div&gt;&amp;nbsp;- Every nodes should be installed ansible and python packages
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;```
&lt;/div&gt;&lt;div&gt;$ sudo apt-get update
&lt;/div&gt;&lt;div&gt;$ sudo apt-get install -y ansible&amp;nbsp;python2.7 python-minimal
&lt;/div&gt;&lt;div&gt;```
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;- Group names and node names can not be changed in `hosts` file
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;```
&lt;/div&gt;&lt;div&gt;&lt;div&gt;[kube-deploy]
&lt;/div&gt;&lt;div&gt;kube-deploy
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;[kube-masters]
&lt;/div&gt;&lt;div&gt;kube-master01
&lt;/div&gt;&lt;div&gt;kube-master02
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;[kube-nodes]
&lt;/div&gt;&lt;div&gt;kube-node01
&lt;/div&gt;&lt;div&gt;kube-node02
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;[kube-masters:vars]
&lt;/div&gt;&lt;div&gt;kube-master01-iface=eno49
&lt;/div&gt;&lt;div&gt;kube-master01-ip=192.168.30.13
&lt;/div&gt;&lt;div&gt;kube-master02-iface=ens2f0
&lt;/div&gt;&lt;div&gt;kube-master02-ip=192.168.30.14
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;[kube-nodes:vars]
&lt;/div&gt;&lt;div&gt;kube-node01-iface=eno49
&lt;/div&gt;&lt;div&gt;kube-node01-ip=192.168.30.15
&lt;/div&gt;&lt;div&gt;kube-node02-iface=ens2f0
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;kube-node02-ip=192.168.30.16
&lt;/div&gt;&lt;div&gt;```
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;- Have to changed your own password at `add_user_password` field in `group_vars/all` file
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;## Tips ##
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;An encrypted password can figure out following command
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;```
&lt;/div&gt;&lt;div&gt;$ sudo apt-get install -y whois
&lt;/div&gt;&lt;div&gt;$ mkpasswd --method=SHA-512
&lt;/div&gt;&lt;div&gt;[ input password and enter]
&lt;/div&gt;&lt;div&gt;```
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;## Execute order ##
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;```
&lt;/div&gt;&lt;div&gt;$ sudo ansible-playbook -i hosts 00-create-user.yml
&lt;/div&gt;&lt;div&gt;$ sudo ansible-playbook -i hosts 00-install-package.yml
&lt;/div&gt;&lt;div&gt;$ sudo&amp;nbsp;ansible-playbook -i hosts&amp;nbsp;01-install-docker.yml
&lt;/div&gt;&lt;div&gt;$ sudo chown -R stack.stack ~/.ansible
&lt;/div&gt;&lt;div&gt;$ ansible-playbook -i hosts 02-etcd.yml
&lt;/div&gt;&lt;div&gt;$ ansible-playbook -i hosts 03-flannel.yml
&lt;/div&gt;&lt;div&gt;$ ansible-playbook -i hosts 04-kubernetes.yml
&lt;/div&gt;&lt;div&gt;```
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;## restart service ##
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;- restart docker
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;```
&lt;/div&gt;&lt;div&gt;$ sudo ansible-playbook -i hosts --tags=&quot;restart docker&quot; 01-install-docker.yml
&lt;/div&gt;&lt;div&gt;```
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;- restart etcd
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;```
&lt;/div&gt;&lt;div&gt;$ ansible-playbook -i hosts --tags=&quot;restart etcd&quot; 02-etcd.yml
&lt;/div&gt;&lt;div&gt;```
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;- restart flannel
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;```
&lt;/div&gt;&lt;div&gt;$ ansible-playbook -i hosts --tags=&quot;restart flannel&quot; 03-flannel.yml
&lt;/div&gt;&lt;div&gt;```
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&amp;nbsp;- restart kubernetes
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;```
&lt;/div&gt;&lt;div&gt;$ ansible-playbook -i hosts --tags=&quot;restart kube-apiserver,restart kube-controller-manager,restart kube-scheduler,restart kube-proxy,restart kubelet&quot; 04-kubernetes.yml
&lt;/div&gt;&lt;div&gt;```
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;[ kube-deploy node 에서 수행 ]&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;## kube-deploy node 접속
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;$&amp;nbsp;ssh -i ~/magnum-key.pem stack@192.168.30.138
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;$ ssh-keygen -t rsa
&lt;/div&gt;&lt;div&gt;$ sudo su -
&lt;/div&gt;&lt;div&gt;# ssh-keygen -t rsa
&lt;/div&gt;&lt;div&gt;&lt;b&gt;# ssh-copy-id&lt;/b&gt; kube-deploy
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;# ssh-copy-id kube-master01
&lt;/div&gt;&lt;div&gt;# ssh-copy-id kube-master02
&lt;/div&gt;&lt;div&gt;# ssh-copy-id kube-node01
&lt;/div&gt;&lt;div&gt;# ssh-copy-id kube-node02
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;$ mkdir -p ~/kubernetes-ansible &amp;amp;&amp;amp; cd ~/kubernetes-ansible
&lt;/div&gt;&lt;div&gt;$ vi hosts
&lt;/div&gt;&lt;div&gt;[kube-deploy]
&lt;/div&gt;&lt;div&gt;kube-deploy
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;[kube-masters]
&lt;/div&gt;&lt;div&gt;kube-master01
&lt;/div&gt;&lt;div&gt;kube-master02
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;[kube-nodes]
&lt;/div&gt;&lt;div&gt;kube-node01
&lt;/div&gt;&lt;div&gt;kube-node02
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;[kube-masters:vars]
&lt;/div&gt;&lt;div&gt;kube-master01-iface=eno49
&lt;/div&gt;&lt;div&gt;kube-master01-ip=192.168.30.13
&lt;/div&gt;&lt;div&gt;kube-master02-iface=ens2f0
&lt;/div&gt;&lt;div&gt;kube-master02-ip=192.168.30.14
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;[kube-nodes:vars]
&lt;/div&gt;&lt;div&gt;kube-node01-iface=eno49
&lt;/div&gt;&lt;div&gt;kube-node01-ip=192.168.30.15
&lt;/div&gt;&lt;div&gt;kube-node02-iface=ens2f0
&lt;/div&gt;&lt;div&gt;kube-node02-ip=192.168.30.16
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;$&amp;nbsp;vi ansible.cfg
&lt;/div&gt;&lt;div&gt;[defaults]
&lt;/div&gt;&lt;div&gt;host_key_checking = False
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;## password encrypt 값을 알아냄&lt;/b&gt;&lt;/div&gt;&lt;div&gt;$ sudo apt-get install -y whois
&lt;/div&gt;&lt;div&gt;$&amp;nbsp;mkpasswd --method=SHA-512&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?--&gt;

&lt;div&gt;&lt;b&gt;## 환경 변수 세팅&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;$ mkdir -p&amp;nbsp;group_vars &amp;amp;&amp;amp; vi group_vars/all&lt;/b&gt;&lt;/div&gt;&lt;div&gt;ansible_dir: &quot;kubernetes-ansible&quot;
&lt;/div&gt;&lt;div&gt;gopath_dir: &quot;go_workspace&quot;
&lt;/div&gt;&lt;div&gt;add_user: &quot;stack&quot;
&lt;/div&gt;&lt;div&gt;add_user_password: &quot;&lt;b&gt;gernerated password here !&lt;/b&gt;&quot;
&lt;/div&gt;&lt;div&gt;ubuntu_release: &quot;xenial&quot;
&lt;/div&gt;&lt;div&gt;kube_deploy_uname_r: &quot;4.4.0-22-generic&quot;
&lt;/div&gt;&lt;div&gt;uname_r: &quot;4.4.0-21-generic&quot;
&lt;/div&gt;&lt;div&gt;etcd_data_dir: &quot;/ext/data/etcd&quot;
&lt;/div&gt;&lt;div&gt;flannel_version: &quot;v0.6.1&quot;
&lt;/div&gt;&lt;div&gt;flannel_net: &quot;172.16.0.0/16&quot;
&lt;/div&gt;&lt;div&gt;mtu_size: &quot;1500&quot;
&lt;/div&gt;&lt;div&gt;kube_version: &quot;release-1.4&lt;b&gt;&quot;&lt;/b&gt;
&lt;/div&gt;&lt;div&gt;kube_api_ip: &quot;192.168.30.13&quot;
&lt;/div&gt;&lt;div&gt;service_cluster_ip_range: &quot;192.168.30.192/26&quot;
&lt;/div&gt;&lt;div&gt;service_node_port_range: &quot;30000-32767&quot;
&lt;/div&gt;&lt;div&gt;cluster_dns: &quot;192.168.30.200&quot;
&lt;/div&gt;&lt;div&gt;cluster_domain: &quot;cluster.local&quot;&amp;nbsp;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ mkdir -p files &amp;amp;&amp;amp; vi files/hosts
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;127.0.0.1&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;localhost
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;# The following lines are desirable for IPv6 capable hosts
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;::1&amp;nbsp; &amp;nbsp; &amp;nbsp;localhost ip6-localhost ip6-loopback
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;fe00::0 ip6-localnet
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;ff00::0 ip6-mcastprefix
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;ff02::1 ip6-allnodes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;ff02::2 ip6-allrouters
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;ff02::3 ip6-allhosts
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;10.0.0.18 &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; kube-depoly
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;192.168.30.138&amp;nbsp; kube-deploy
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;192.168.30.13 &amp;nbsp; &amp;nbsp;kube-master01
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;192.168.30.14 &amp;nbsp; &amp;nbsp;kube-master02
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;192.168.30.15 &amp;nbsp; &amp;nbsp;kube-node01
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;192.168.30.16 &amp;nbsp; &amp;nbsp;kube-node02
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;## user 생성 (stack), key 자동 복사,&amp;nbsp;&lt;/b&gt;&lt;b&gt;sudo user 등록, 환경변수 세팅,&amp;nbsp;&lt;/b&gt;&lt;b&gt;host 파일 복사&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;$&amp;nbsp;00-create-user.yml&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;---
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: create the user
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; hosts: all
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; remote_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; tasks:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; - include_vars: group_vars/all
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; - name: Add the {{ add_user }} user
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; user: name={{ add_user }} groups=sudo createhome=yes shell=/bin/bash
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; password={{ add_user_password }} append=yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; generate_ssh_key=yes ssh_key_bits=2048 ssh_key_file=.ssh/id_rsa
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; - name: Set up authorized_keys for the {{ add_user }}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; authorized_key: user={{ add_user }} key=&quot;{{ lookup('file', '/home/{{ add_user }}/.ssh/id_rsa.pub') }}&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; - name: sudo&amp;nbsp;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; lineinfile:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &quot;dest=/etc/sudoers state=present regexp='^{{ add_user }} ALL='
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;line='{{ add_user }} ALL=(ALL) NOPASSWD:ALL' validate='visudo -cf %s'&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; - name: export GOPATH
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; lineinfile:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &quot;dest=/home/{{ add_user }}/.bashrc state=present regexp='^export GOPATH' line='export GOPATH=$HOME/{{ gopath_dir }}:$HOME/{{ gopath_dir }}/src/k8s.io/kubernetes/Godeps/_workspace'&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; - name: export PATH
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; lineinfile:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &quot;dest=/home/{{ add_user }}/.bashrc state=present regexp='^export PATH'
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;line='export PATH=$HOME/{{ gopath_dir }}/bin:$PATH'&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; - name: export KUBE_ROOT
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; lineinfile:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &quot;dest=/home/{{ add_user }}/.bashrc state=present regexp='^export KUBE_ROOT'
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;line='export KUBE_ROOT=$HOME/{{ gopath_dir }}/src/k8s.io/kubernetes'&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; - name: Copy hosts file
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; copy:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; src: &quot;files/hosts&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; dest: &quot;/etc&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$&amp;nbsp;&lt;b&gt;sudo&lt;/b&gt; ansible-playbook -i hosts 00-create-user.yml
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;## apt-get package 설치&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;$ vi&amp;nbsp;00-install-package.yml&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;---
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: install package
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; hosts: kube-deploy kube-masters kube-nodes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; remote_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; tasks:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; - include_vars: group_vars/all
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; - name: Install apt packages
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; apt: name={{ item }}&amp;nbsp; update_cache=yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; with_items:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; - bridge-utils
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; - linux-libc-dev
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; - golang
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; - gcc
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; - curl
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; - git
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$&amp;nbsp;&lt;b&gt;sudo&lt;/b&gt; ansible-playbook -i hosts 00-install-package.yml
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;## docker install&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;$ vi 01-install-docker.yml&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;---
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;# This playbook setup docker package
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- hosts: kube-deploy kube-masters kube-nodes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; remote_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; roles:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; - docker
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$&amp;nbsp;mkdir -p roles/docker/files &amp;amp;&amp;amp; vi roles/docker/files/docker.xenial.list
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;deb https://apt.dockerproject.org/repo ubuntu-xenial main
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$&amp;nbsp;vi roles/docker/files/docker.service
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;[Unit]
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Description=Docker Application Container Engine
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Documentation=https://docs.docker.com
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;After=network.target docker.socket
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Requires=docker.socket
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;[Service]
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Type=notify
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;# the default is not to use systemd for cgroups because the delegate issues still
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;# exists and systemd currently does not support the cgroup feature set required
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;# for containers run by docker
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;EnvironmentFile=/etc/default/docker
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;ExecStart=/usr/bin/docker daemon $DOCKER_OPTS
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;ExecReload=/bin/kill -s HUP $MAINPID
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;# Having non-zero Limit*s causes performance problems due to accounting overhead
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;# in the kernel. We recommend using cgroups to do container-local accounting.
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;LimitNOFILE=infinity
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;LimitNPROC=infinity
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;LimitCORE=infinity
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;# Uncomment TasksMax if your systemd version supports it.
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;# Only systemd 226 and above support this version.
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;TasksMax=infinity
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;TimeoutStartSec=0
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;# set delegate yes so that systemd does not reset the cgroups of docker containers
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Delegate=yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;# kill only the docker process, not all processes in the cgroup
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;KillMode=process
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;[Install]
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;WantedBy=multi-user.target
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ vi roles/docker/files/docker
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;DOCKER_OPTS=&quot; -H tcp://127.0.0.1:4243 -H unix:///var/run/docker.sock&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$&amp;nbsp;mkdir -p roles/docker/tasks &amp;amp;&amp;amp; vi roles/docker/tasks/main.yml
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;---
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: install&amp;nbsp;apt-transport-https&amp;nbsp;ca-certificates
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; apt: name={{ item }}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; with_items:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; - apt-transport-https
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; - ca-certificates
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: add GPG key
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; apt_key: keyserver=hkp://p80.pool.sks-keyservers.net:80 \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;id=58118E89F3A912897C070ADBF76221572C52609D
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: add docker.list
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; copy:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; src: &quot;docker.{{ ubuntu_release }}.list&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; dest: &quot;/etc/apt/sources.list.d&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; owner: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: apt-get update
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; apt: update_cache=yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: install linux-image-extra kube-deploy
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; apt: name=linux-image-extra-{{ kube_depoloy_uname_r }}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-deploy' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: install linux-image-extra kube-masters kube-nodes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; apt: name=linux-image-extra-{{ uname_r }}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;('kube-masters' in group_names) or ('kube-nodes' in group_names)&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;#- name: restart servers
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;# &amp;nbsp;shell: sleep 2 &amp;amp;&amp;amp; shutdown -r now
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;# &amp;nbsp;async: 0
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;# &amp;nbsp;poll: 0
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;# &amp;nbsp;ignore_errors: true
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;#- name: Waiting for server to come back
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;# &amp;nbsp;local_action: wait_for host={{ inventory_hostname }} \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;# &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;state=started port=22 delay=10 timeout=300
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;#- name: Update apt
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;# &amp;nbsp;apt: update_cache=yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: install docker
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; apt: name=docker-engine
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: add docker group
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; user: name={{ add_user }} group=docker
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy docker config
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; copy:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; src: &quot;docker&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; dest: &quot;/etc/default&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; mode: 0755
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; owner: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy docker.service
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; copy:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; src: &quot;docker.service&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; dest: &quot;/lib/systemd/system&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; mode: 0644
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; owner: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: reload systemd
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; shell: systemctl daemon-reload
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: restart docker
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; service: name=docker state=restarted enabled=yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; tags:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; - restart docker
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: export DOCKER_HOST
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; lineinfile:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &quot;dest=/home/{{ add_user }}/.bashrc state=present regexp='^export DOCKER_HOST'
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;line='export DOCKER_HOST=127.0.0.1:4243'&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ &lt;b&gt;sudo&lt;/b&gt; ansible-playbook -i hosts 01-install-docker.yml
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;[ etcd 설치 ]&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;a href=&quot;https://coreos.com/etcd/docs/latest/clustering.html&quot;&gt;https://coreos.com/etcd/docs/latest/clustering.html&lt;/a&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;a href=&quot;https://coreos.com/etcd/docs/latest/runtime-configuration.html&quot;&gt;https://coreos.com/etcd/docs/latest/runtime-configuration.html&lt;/a&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;a href=&quot;https://coreos.com/etcd/docs/latest/etcd-live-cluster-reconfiguration.html&quot;&gt;https://coreos.com/etcd/docs/latest/etcd-live-cluster-reconfiguration.html&lt;/a&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$&amp;nbsp;&lt;b&gt;sudo chown -R stack.stack ~/.ansible&lt;/b&gt;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$&amp;nbsp;vi 02-etcd.yml
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;---
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;# This playbook installs etcd cluster.
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: Setup etcd
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; hosts: kube-masters
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; remote_user: &quot;{{add_user}}&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: true
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; roles:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; - etcd
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;##&amp;nbsp;--listen-peer-urls 과&amp;nbsp;--listen-client-urls 은 0.0.0.0 주소로 줄 수 있음&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ mkdir -p&amp;nbsp;roles/etcd/templates &amp;amp;&amp;amp; vi&amp;nbsp;roles/etcd/templates/etcd.conf.j2
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;DAEMON_ARGS=&quot;--name {{ inventory_hostname }} \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--data-dir={{ etcd_data_dir }} \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--initial-advertise-peer-urls http://{{ hostvars[inventory_hostname][inventory_hostname + '-ip'] }}:2380 \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;--listen-peer-urls&lt;/b&gt; http://{{&amp;nbsp;hostvars[inventory_hostname][inventory_hostname + '-ip'] }}:2380 \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;--listen-client-urls&lt;/b&gt; http://{{&amp;nbsp;hostvars[inventory_hostname][inventory_hostname + '-ip'] }}:2379,http://127.0.0.1:2379,\
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;http://{{&amp;nbsp;hostvars[inventory_hostname][inventory_hostname + '-ip'] }}:4001,http://127.0.0.1:4001 \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--advertise-client-urls http://{{&amp;nbsp;hostvars[inventory_hostname][inventory_hostname + '-ip'] }}:2379 \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--initial-cluster-token etcd-cluster-1 \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;{% for host in groups['kube-masters'] %}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;{% if host == groups['kube-masters']|first %}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--initial-cluster {{ host }}=http://{{ hostvars[host][host + '-ip'] }}:2380{% else %},{{ host }}=http://{{ hostvars[host][host + '-ip'] }}:2380{% endif %}{% endfor %} \
&lt;/div&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?--&gt;

&lt;/p&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--initial-cluster-state new&quot;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?--&gt;

&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ mkdir -p roles/etcd/tasks &amp;amp;&amp;amp; vi roles/etcd/tasks/main.yml
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;---
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: install etcd
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; apt: name=etcd update_cache=yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy etcd config
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; template: src=etcd.conf.j2 dest=/etc/default/etcd
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: enable etcd systemd
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; service: name=etcd enabled=yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: restart etcd
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; service: name=etcd state=restarted
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; tags:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; - restart etcd
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;$ ansible-playbook -i hosts 02-etcd.yml&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;## 특정 task 만 돌릴 경우
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ ansible-playbook -i hosts &lt;b&gt;--start-at-task=&quot;Restart etcd&quot;&lt;/b&gt; 02-etcd.yml
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;## etcd 멤버 조회 (2개가 나와야 함)
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$&amp;nbsp;etcdctl member list
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;## etcd 테스트
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$&amp;nbsp;etcdctl --endpoint http://192.168.30.13:2379 set /test &quot;hello&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$&amp;nbsp;etcdctl --endpoint http://192.168.30.14:2379 get /test
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$&amp;nbsp;etcdctl --endpoint http://192.168.30.13:2379 rm /test
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$&amp;nbsp;etcdctl --no-sync --endpoint http://kube-master01:2379 --debug ls / -recursive
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;[ flannel 설치 ]&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;##&amp;nbsp;&lt;/b&gt;&lt;a href=&quot;https://github.com/coreos/flannel&quot;&gt;https://github.com/coreos/flannel&lt;/a&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;## flannel 데이터를 etcd 입력 및 설치&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ vi 03-flannel.yml
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;---
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: Setup flannel
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; hosts: kube-deploy kube-masters kube-nodes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; remote_user: &quot;{{add_user}}&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: true
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; roles:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; - flannel
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;## flannel 을 위한 네트워크 값을 &amp;nbsp;etcd 에 등록하는 스트립트&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ mkdir -p roles/flannel/templates &amp;amp;&amp;amp; vi roles/flannel/templates/config-flannel.sh.j2
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;#!/bin/bash
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;exec curl -s -L http://{{ hostvars[inventory_hostname][inventory_hostname + '-ip'] }}:4001/v2/keys/coreos.com/network/config \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;-XPUT -d value='{&quot;Network&quot;: &quot;{{ flannel_net }}&quot;, &quot;SubnetLen&quot;: 24, &quot;Backend&quot;: {&quot;Type&quot;: &quot;vxlan&quot;}}'
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;## 좀 무식한 방식임&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;{% if inventory_hostname == 'kube-master01' %}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;div&gt;exec curl -s -L http://{{ groups['kube-masters'][0] }}:4001/v2/keys/coreos.com/network/config \
&lt;/div&gt;&lt;div&gt;-XPUT -d value='{&quot;Network&quot;: &quot;{{ flannel_net }}&quot;, &quot;SubnetLen&quot;: 24, &quot;Backend&quot;: {&quot;Type&quot;: &quot;vxlan&quot;}}'
&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;{% endif %}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;## flannel 을 다운 받아서 build 하는 스크립트&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$&amp;nbsp;vi roles/flannel/templates/download-flannel.sh.j2
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;#!/bin/bash
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;FLANNEL_DIR=${HOME}/github/flannel
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;FLANNEL_VERSION=&quot;{{ flannel_version }}&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;ANSIBLE_HOME=${HOME}/{{ ansible_dir }}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;function chdir() {
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; cd $1
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;if [ ! -d ${FLANNEL_DIR} ]; then
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; mkdir -p ${HOME}/github
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; chdir ${HOME}/github
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; git clone https://github.com/coreos/flannel.git
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; chdir ${FLANNEL_DIR}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; git checkout -b ${FLANNEL_VERSION} tags/${FLANNEL_VERSION}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;fi
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;chdir ${FLANNEL_DIR}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;if [ ! -f build ]; then
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;cat &amp;lt;&amp;lt;EOF &amp;gt;build
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;#!/bin/bash -e
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;ORG_PATH=&quot;github.com/coreos&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;REPO_PATH=&quot;\${ORG_PATH}/flannel&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;if [ ! -h gopath/src/\${REPO_PATH} ]; then
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; mkdir -p gopath/src/\${ORG_PATH}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; ln -s ../../../.. gopath/src/\${REPO_PATH} || exit 255
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;fi
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;export GOBIN=\${PWD}/bin
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;export GOPATH=\${PWD}/gopath
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;eval \$(go env)
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;if [ \${GOOS} = &quot;linux&quot; ]; then
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; echo &quot;Building flanneld...&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; go build -o \${GOBIN}/flanneld \${REPO_PATH}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;else
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; echo &quot;Not on Linux - skipping flanneld build&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;fi
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;EOF
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;fi
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;chmod 755 build
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;./build
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;mkdir -p ${ANSIBLE_HOME}/roles/flannel/files
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;cp bin/flanneld ${ANSIBLE_HOME}/roles/flannel/files&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?--&gt;

&lt;div&gt;&lt;b&gt;## flannel.service 파일&lt;/b&gt;&lt;/div&gt;&lt;div&gt;$ mkdir -p roles/flannel/templates &amp;amp;&amp;amp; vi&amp;nbsp;roles/flannel/templates/flanneld.service.j2
&lt;/div&gt;&lt;div&gt;[Unit]
&lt;/div&gt;&lt;div&gt;Description=flanneld Service
&lt;/div&gt;&lt;div&gt;#After=etcd.service
&lt;/div&gt;&lt;div&gt;#Requires=etcd.service
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;[Service]
&lt;/div&gt;&lt;div&gt;EnvironmentFile=/etc/default/flanneld
&lt;/div&gt;&lt;div&gt;PermissionsStartOnly=true
&lt;/div&gt;&lt;div&gt;User=root
&lt;/div&gt;&lt;div&gt;ExecStart=/usr/bin/flanneld -etcd-endpoints=${FLANNEL_ETCD} $FLANNEL_OPTIONS
&lt;/div&gt;&lt;div&gt;Restart=always
&lt;/div&gt;&lt;div&gt;RestartSec=10s
&lt;/div&gt;&lt;div&gt;RemainAfterExit=yes
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;[Install]
&lt;/div&gt;&lt;div&gt;WantedBy=multi-user.target
&lt;/div&gt;&lt;div&gt;Alias=flanneld.service
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;## flannel config 파일&lt;/b&gt;&lt;/div&gt;&lt;div&gt;$ vi&amp;nbsp;roles/flannel/templates/flanneld.j2
&lt;/div&gt;&lt;div&gt;FLANNEL_ETCD=&quot;http://{{ groups['kube-masters'][0] }}:4001&quot;
&lt;/div&gt;&lt;div&gt;FLANNEL_OPTIONS=&quot;-v 0&quot;
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;## flannel 과 연계된 docker 설정 파일&lt;/b&gt;&lt;/div&gt;&lt;div&gt;$ mkdir -p roles/flannel/templates &amp;amp;&amp;amp; vi roles/flannel/templates/docker-config.sh.j2
&lt;/div&gt;&lt;div&gt;#! /bin/bash
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;ip link set dev docker0 down
&lt;/div&gt;&lt;div&gt;brctl delbr docker0
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;source /run/flannel/subnet.env
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;echo DOCKER_OPTS=\&quot;${DOCKER_OPTS} -H tcp://127.0.0.1:4243 \
&lt;/div&gt;&lt;div&gt;-H unix:///var/run/docker.sock \
&lt;/div&gt;&lt;div&gt;--bip=${FLANNEL_SUBNET} \
&lt;/div&gt;&lt;div&gt;--mtu=${FLANNEL_MTU}\&quot; &amp;gt; /etc/default/docker&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?--&gt;

&lt;div&gt;&lt;b&gt;## flannel ansible 설치 로직&lt;/b&gt;&lt;/div&gt;&lt;div&gt;$ mkdir -p roles/flannel/tasks &amp;amp;&amp;amp; vi roles/flannel/tasks/main.yml
&lt;/div&gt;&lt;div&gt;---
&lt;/div&gt;&lt;div&gt;# set flannel data into etcd
&lt;/div&gt;&lt;div&gt;- name: copy config-flannel
&lt;/div&gt;&lt;div&gt;&amp;nbsp; template: src=config-flannel.sh.j2 dest=~/config-flannel.sh mode=755
&lt;/div&gt;&lt;div&gt;&amp;nbsp; when: inventory_hostname == 'kube-master01'
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;- name: run config-flannel
&lt;/div&gt;&lt;div&gt;&amp;nbsp; command: ~/config-flannel.sh
&lt;/div&gt;&lt;div&gt;&amp;nbsp; when: inventory_hostname == 'kube-master01'
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;- name: remove config-flannel
&lt;/div&gt;&lt;div&gt;&amp;nbsp; file: name=~/config-flannel.sh state=absent
&lt;/div&gt;&lt;div&gt;&amp;nbsp; when: inventory_hostname == 'kube-master01'
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;# flannel download, build, install
&lt;/div&gt;&lt;div&gt;- name: copy download-flannel
&lt;/div&gt;&lt;div&gt;&amp;nbsp; template: src=download-flannel.sh.j2 dest=~/download-flannel.sh
&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner={{ add_user }} mode=755
&lt;/div&gt;&lt;div&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div&gt;&amp;nbsp; become_user: &quot;{{ add_user }}&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp; when: &quot;'kube-deploy' in group_names&quot;
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;- name: run&amp;nbsp;download-flannel
&lt;/div&gt;&lt;div&gt;&amp;nbsp; command: ~/download-flannel.sh owner={{ add_user }}
&lt;/div&gt;&lt;div&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div&gt;&amp;nbsp; become_user: &quot;{{ add_user }}&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp; when: &quot;'kube-deploy' in group_names&quot;
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;- name: remove&amp;nbsp;download-flannel
&lt;/div&gt;&lt;div&gt;&amp;nbsp; file: name=~/download-flannel.sh owner={{ add_user }} state=absent
&lt;/div&gt;&lt;div&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div&gt;&amp;nbsp; become_user: &quot;{{ add_user }}&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp; when: &quot;'kube-deploy' in group_names&quot;
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;- name: copy flanneld
&lt;/div&gt;&lt;div&gt;&amp;nbsp; copy: src=flanneld dest=/usr/bin/flanneld owner=root mode=0755
&lt;/div&gt;&lt;div&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;- name: copy flanneld.service
&lt;/div&gt;&lt;div&gt;&amp;nbsp; template: src=flanneld.service.j2 dest=/lib/systemd/system/flanneld.service
&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner=root mode=0644
&lt;/div&gt;&lt;div&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;- name: resize MTU
&lt;/div&gt;&lt;div&gt;&amp;nbsp; command: ip link set dev {{ hostvars[item][item + '-iface'] }} mtu {{ mtu_size }}
&lt;/div&gt;&lt;div&gt;&amp;nbsp; with_items: groups['kube-nodes']
&lt;/div&gt;&lt;div&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;- name: copy flanneld config
&lt;/div&gt;&lt;div&gt;&amp;nbsp; template: src=flanneld.j2 dest=/etc/default/flanneld
&lt;/div&gt;&lt;div&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;- name: reload systemd
&lt;/div&gt;&lt;div&gt;&amp;nbsp; shell: systemctl daemon-reload
&lt;/div&gt;&lt;div&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;- name: restart flannel
&lt;/div&gt;&lt;div&gt;&amp;nbsp; service: name=flanneld state=restarted enabled=yes
&lt;/div&gt;&lt;div&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;div&gt;&amp;nbsp; tags:
&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; - restart flannel
&lt;/div&gt;&lt;div&gt;&amp;nbsp; notify:
&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; -&amp;nbsp;restart flannel
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;## handler 는 task 의 notify 로 호출됨&lt;/b&gt;&lt;/div&gt;&lt;div&gt;$ mkdir -p roles/flannel/handlers &amp;amp;&amp;amp; vi&amp;nbsp;roles/flannel/handlers/main.yml
&lt;/div&gt;&lt;div&gt;---
&lt;/div&gt;&lt;div&gt;- name: restart flannel
&lt;/div&gt;&lt;div&gt;&amp;nbsp; service: name=flanneld state=restarted
&lt;/div&gt;&lt;div&gt;&amp;nbsp; notify:
&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; - stop docker
&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; - delete docker0
&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; -&amp;nbsp;copy docker-config
&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; -&amp;nbsp;run docker-config
&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; -&amp;nbsp;remove docker-config
&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; - start docker
&lt;/div&gt;&lt;div&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;- name: stop docker
&lt;/div&gt;&lt;div&gt;&amp;nbsp; service: name=docker state=stopped
&lt;/div&gt;&lt;div&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;- name: delete docker0
&lt;/div&gt;&lt;div&gt;&amp;nbsp; command: ip link delete docker0
&lt;/div&gt;&lt;div&gt;&amp;nbsp; ignore_errors: yes
&lt;/div&gt;&lt;div&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;- name: copy docker-config
&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp; template: src=docker-config.sh.j2 dest=~/docker-config.sh mode=755
&lt;/div&gt;&lt;div&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;- name: run docker-config
&lt;/div&gt;&lt;div&gt;&lt;div&gt;&amp;nbsp; command: ~/docker-config.sh
&lt;/div&gt;&lt;div&gt;&amp;nbsp; ignore_errors: true
&lt;/div&gt;&lt;div&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;- name: remove docker-config
&lt;/div&gt;&lt;div&gt;&amp;nbsp; file: name=~/docker-config.sh state=absent
&lt;/div&gt;&lt;div&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;- name: start docker
&lt;/div&gt;&lt;div&gt;&amp;nbsp; service: name=docker state=started
&lt;/div&gt;&lt;div&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?--&gt;

&lt;div&gt;$ &lt;b&gt;ansible-playbook -i hosts&amp;nbsp;03-flannel.yml&lt;/b&gt;&amp;nbsp;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp;&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;###################################&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;## k8s 소스 다운로드 및 make &amp;nbsp;(ansible)&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;###################################&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;## cert 파일 만들기&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;## https://github.com/kubernetes/kubernetes/blob/master/cluster/saltbase/salt/generate-cert/make-cert.sh&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;## https://github.com/kubernetes/kubernetes/blob/master/cluster/saltbase/salt/generate-cert/make-ca-cert.sh&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;## kubernetes 다운로드 및 설치&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ vi 04-kubernetes.yml
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;---
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: Setup kubernetes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; hosts: kube-deploy kube-masters kube-nodes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; remote_user: &quot;{{add_user}}&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: true
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; roles:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; - kubernetes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;## k8s 을 다운 받아서 build 하는 스크립트 (GOPATH 와 PATH 가 중요)&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ mkdir -p roles/kubernetes/templates &amp;amp;&amp;amp; vi roles/kubernetes/templates/download-kubernetes.sh.j2
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;#!/bin/bash
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;GO_HOME=${HOME}/{{ gopath_dir }}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;KUBE_HOME=${GO_HOME}/src/k8s.io/kubernetes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;KUBE_VERSION=&quot;{{ kube_version }}&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;ANSIBLE_HOME=${HOME}/{{ ansible_dir }}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;export GOPATH=${GO_HOME}:${KUBE_HOME}/Godeps/_workspace&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;export PATH=${GO_HOME}/bin:$PATH&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;function chdir() {
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; cd $1
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;if [ ! -d ${KUBE_HOME} ]; then
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; mkdir -p ${GO_HOME}/src/k8s.io
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; chdir ${GO_HOME}/src/k8s.io
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; go get -u github.com/jteeuwen/go-bindata/go-bindata
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; git clone https://github.com/kubernetes/kubernetes.git
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; chdir ${KUBE_HOME}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; git checkout -b ${KUBE_VERSION} origin/${KUBE_VERSION}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;fi
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;chdir ${KUBE_HOME}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;if [ ! -d ${KUBE_HOME}/_output ]; then
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; make all
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;fi
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;mkdir -p ${ANSIBLE_HOME}/roles/kubernetes/files
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;cp _output/local/bin/linux/amd64/kube* ${ANSIBLE_HOME}/roles/kubernetes/files
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;## Kubernetes config 파일&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ vi&amp;nbsp;roles/kubernetes/templates/kube-apiserver.conf.j2
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;KUBE_APISERVER_OPTS=&quot;--insecure-bind-address=0.0.0.0 \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--insecure-port=8080 \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--etcd-servers=http://127.0.0.1:4001 \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--logtostderr=true \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--service-cluster-ip-range={{ service_cluster_ip_range }} \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--admission-control=NamespaceLifecycle,LimitRanger,ServiceAccount,\
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;ResourceQuota,DenyEscalatingExec,SecurityContextDeny \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--service-node-port-range={{ service_node_port_range }} \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--client-ca-file=/srv/kubernetes/ca.crt \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--tls-cert-file=/srv/kubernetes/server.cert \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--tls-private-key-file=/srv/kubernetes/server.key&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ vi roles/kubernetes/templates/kube-apiserver.service.j2
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;[Unit]
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Description=Kubernetes API Server
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;After=syslog.target network.target
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;[Service]
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Type=simple
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;User=root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;EnvironmentFile=-/etc/default/kube-apiserver
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;ExecStart=/usr/local/bin/kube-apiserver $KUBE_APISERVER_OPTS
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Restart=on-failure
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;[Install]
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;WantedBy=multi-user.target
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$&amp;nbsp;vi roles/kubernetes/templates/kube-controller-manager.conf.j2
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;KUBE_CONTROLLER_MANAGER_OPTS=&quot;--master=127.0.0.1:8080 \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--root-ca-file=/srv/kubernetes/ca.crt \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--service-account-private-key-file=/srv/kubernetes/server.key \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--logtostderr=true&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ vi roles/kubernetes/templates/kube-controller-manager.service.j2
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;[Unit]
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Description=Kubernetes Controller Manager
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;After=syslog.target network.target
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;[Service]
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Type=simple
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;User=root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;EnvironmentFile=-/etc/default/kube-controller-manager
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;ExecStart=/usr/local/bin/kube-controller-manager $KUBE_CONTROLLER_MANAGER_OPTS
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Restart=on-failure
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;[Install]
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;WantedBy=multi-user.target
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$&amp;nbsp;vi roles/kubernetes/templates/kube-scheduler.conf.j2
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;KUBE_SCHEDULER_OPTS=&quot;--logtostderr=true \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--master=127.0.0.1:8080&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ vi roles/kubernetes/templates/kube-scheduler.service.j2
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;[Unit]
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Description=Kubernetes Scheduler
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;After=syslog.target network.target
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;[Service]
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Type=simple
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;User=root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;EnvironmentFile=-/etc/default/kube-scheduler
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;ExecStart=/usr/local/bin/kube-scheduler $KUBE_SCHEDULER_OPTS
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Restart=on-failure
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;[Install]
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;WantedBy=multi-user.target
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ vi roles/kubernetes/templates/kubelet.conf.j2
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;KUBELET_OPTS=&quot;--address=0.0.0.0 \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--port=10250 \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--hostname-override={{ hostvars[inventory_hostname][inventory_hostname + '-ip'] }} \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--api-servers=http://{{ kube_api_ip }}:8080 \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--logtostderr=true \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--cluster-dns={{ cluster_dns }} \
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;--cluster-domain={{ cluster_domain }}&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ vi roles/kubernetes/templates/kubelet.service.j2
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;[Unit]
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Description=Kubernetes Kubelet
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;After=syslog.target network.target
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;[Service]
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Type=simple
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;User=root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;EnvironmentFile=-/etc/default/kubelet
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;ExecStart=/usr/local/bin/kubelet $KUBELET_OPTS
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Restart=on-failure
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;[Install]
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;WantedBy=multi-user.target
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ vi roles/kubernetes/templates/kube-proxy.conf.j2
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;KUBE_PROXY_OPTS=&quot;--master=http://{{ kube_api_ip }}:8080 --logtostderr=true&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ vi roles/kubernetes/templates/kube-proxy.service.j2
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;[Unit]
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Description=Kubernetes Proxy Server
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;After=syslog.target network.target
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;[Service]
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Type=simple
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;User=root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;EnvironmentFile=-/etc/default/kube-proxy
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;ExecStart=/usr/local/bin/kube-proxy $KUBE_PROXY_OPTS
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;Restart=on-failure
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;[Install]
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;WantedBy=multi-user.target
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;## kubernetes ansible 설치 로직&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$ mkdir -p roles/kubernetes/tasks &amp;amp;&amp;amp; vi roles/kubernetes/tasks/main.yml
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;---
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy download-kubernetes.sh
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; template: src=download-kubernetes.sh.j2 dest=~/download-kubernetes.sh
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner={{ add_user }} mode=755
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: &quot;{{ add_user }}&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-deploy' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: run download-kubernetes.sh
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; command: ~/download-kubernetes.sh owner={{ add_user }}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: &quot;{{ add_user }}&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-deploy' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: remove download-kubernetes.sh
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; file: name=~/download-kubernetes.sh owner={{ add_user }} state=absent
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: &quot;{{ add_user }}&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-deploy' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: add kube-cert group
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; group: name=kube-cert state=present
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: make cert
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; command: /home/{{ add_user }}/{{ gopath_dir }}/src/k8s.io/kubernetes/cluster/saltbase/salt/generate-cert/make-cert.sh
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-deploy' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: make ca-cert
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; command: /home/{{ add_user }}/{{ gopath_dir }}/src/k8s.io/kubernetes/cluster/saltbase/salt/generate-cert/make-ca-cert.sh {{ kube_api_ip }}
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-deploy' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: change mod cert
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; file:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; path: /srv/kubernetes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; mode: 0755
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; recurse: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-deploy' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: create cert directory
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; file: path=/srv/kubernetes state=directory owner=root mode=0755
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy&amp;nbsp;server.cert
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; copy: src=/srv/kubernetes/server.cert dest=/srv/kubernetes/server.cert
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner=root mode=0600
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy&amp;nbsp;server.key
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; copy: src=/srv/kubernetes/server.key dest=/srv/kubernetes/server.key
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner=root mode=0600
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy&amp;nbsp;ca.crt
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; copy: src=/srv/kubernetes/ca.crt dest=/srv/kubernetes/ca.crt
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner=root mode=0600
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy&amp;nbsp;kubectl
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; copy: src=kubectl dest=/usr/local/bin/kubectl
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner=root mode=0755
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-masters' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy kube-apiserver
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; copy: src=kube-apiserver dest=/usr/local/bin/kube-apiserver
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner=root mode=0755
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-masters' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy kube-controller-manager
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; copy: src=kube-controller-manager dest=/usr/local/bin/kube-controller-manager
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner=root mode=0755
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-masters' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy kube-scheduler
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; copy: src=kube-scheduler dest=/usr/local/bin/kube-scheduler
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner=root mode=0755
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-masters' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy kubelet
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; copy: src=kubelet dest=/usr/local/bin/kubelet
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner=root mode=0755
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy kube-proxy
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; copy: src=kube-proxy dest=/usr/local/bin/kube-proxy
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner=root mode=0755
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy kube-apiserver config
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; template: src=kube-apiserver.conf.j2 dest=/etc/default/kube-apiserver
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner={{ add_user }} mode=755
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-masters' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy kube-apiserver.service
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; template: src=kube-apiserver.service.j2 dest=/lib/systemd/system/kube-apiserver.service
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner=root mode=0644
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-masters' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy kube-controller-manager config
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; template: src=kube-controller-manager.conf.j2 dest=/etc/default/kube-controller-manager
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner={{ add_user }} mode=755
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-masters' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy kube-controller-manager.service
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; template: src=kube-controller-manager.service.j2 dest=/lib/systemd/system/kube-controller-manager.service
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner=root mode=0644
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-masters' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy kube-scheduler config
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; template: src=kube-scheduler.conf.j2 dest=/etc/default/kube-scheduler
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner={{ add_user }} mode=755
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-masters' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy kube-scheduler.service
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; template: src=kube-scheduler.service.j2 dest=/lib/systemd/system/kube-scheduler.service
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner=root mode=0644
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-masters' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy kubelet config
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; template: src=kubelet.conf.j2 dest=/etc/default/kubelet
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner={{ add_user }} mode=755
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy kubelet.service
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; template: src=kubelet.service.j2 dest=/lib/systemd/system/kubelet.service
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner=root mode=0644
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy kube-proxy config
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; template: src=kube-proxy.conf.j2 dest=/etc/default/kube-proxy
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner={{ add_user }} mode=755
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become: yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; become_user: root
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: copy kube-proxy.service
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; template: src=kube-proxy.service.j2 dest=/lib/systemd/system/kube-proxy.service
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; owner=root mode=0644
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: reload systemd
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; shell: systemctl daemon-reload
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-masters' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: restart kube-apiserver
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; service: name=kube-apiserver state=restarted enabled=yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-masters' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; tags:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; -&amp;nbsp;restart kube-apiserver
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: restart kube-controller-manager
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; service: name=kube-controller-manager state=restarted enabled=yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-masters' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; tags:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; -&amp;nbsp;restart kube-controller-manager
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: restart kube-scheduler
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; service: name=kube-scheduler state=restarted enabled=yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-masters' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; tags:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; - restart kube-scheduler
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: restart kubelet
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; service: name=kubelet state=restarted enabled=yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; tags:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; -&amp;nbsp;restart kubelet
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;- name: restart kube-proxy
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; service: name=kube-proxy state=restarted enabled=yes
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; when: &quot;'kube-nodes' in group_names&quot;
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; tags:
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&amp;nbsp; &amp;nbsp; -&amp;nbsp;restart kube-proxy
&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?--&gt;

&lt;/p&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;$&amp;nbsp;&lt;b&gt;ansible-playbook -i hosts 04-kubernetes.yml&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;b&gt;&lt;br /&gt;&lt;/b&gt;&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/217&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Ansible</category>
<category>Ansible</category>
<category>kubernetes</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/217</guid>
<comments>https://ahnseungkyu.com/217#entry217comment</comments>
<pubDate>Mon, 12 Sep 2016 10:43:18 +0900</pubDate>
</item>
<item>
<title>qemu, libvirt 테스트 툴 Avocado Ubuntu 16.04 에 설치하기</title>
<link>https://ahnseungkyu.com/216</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?--&gt;

&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;##&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;http://avocado-vt.readthedocs.io/en/latest/GetStartedGuide.html&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;http://avocado-vt.readthedocs.io/en/latest/GetStartedGuide.html&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## root 계정으로 수행해야 함
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# apt-get update
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# apt-get install -y gcc make
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# apt-get install -y python-pip&amp;nbsp;python-dev&amp;nbsp;python3-dev libevent-dev \
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; vlan libvirt-bin bridge-utils&amp;nbsp;lvm2&amp;nbsp;openvswitch-switch \
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; python-libvirt&amp;nbsp;nbd-client&amp;nbsp;ipset ntp&amp;nbsp;python-lzma \
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; p7zip-full&amp;nbsp;arping&amp;nbsp;qemu-kvm
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# apt-get install -y python-tox&amp;nbsp;libmysqlclient-dev&amp;nbsp;libpq-dev \
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp; libxml2-dev&amp;nbsp;libxslt1-dev&amp;nbsp;libvirt-dev&amp;nbsp;libffi-dev
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# apt-get install -y virtinst libsemanage1-dev python-semanage \
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; attr policycoreutils
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## avocado 설치
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# cd ~
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# mkdir avocado &amp;amp;&amp;amp; cd avocado
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# git clone git://github.com/avocado-framework/avocado.git
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# cd avocado
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# make requirements
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# python setup.py install
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## &amp;nbsp;avocado plugin 설치 (avocado-vt)
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# cd ~/avocado
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# git clone&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;https://github.com/avocado-framework/avocado-vt.git&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;https://github.com/avocado-framework/avocado-vt.git&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# cd avocado
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# make requirements-plugins
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# make link
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# vi ~/.config/avocado/avocado.conf
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;[datadir.paths]
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;base_dir = /root/avocado/avocado
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;test_dir = /root/avocado/avocado/examples/tests
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;data_dir = /usr/share/avocado/data
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;logs_dir = /root/avocado/avocado/job-results
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## Bootstrapping Avocado-VT (vt-type : qemu, libvirt .....)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# ./scripts/avocado vt-bootstrap --vt-type libvirt&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## Avocado plugins list 보기
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# ./scripts/avocado plugins
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## vt-type 별 test list 보기&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;(vt-type : qemu, libvirt .....)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# ./scripts/avocado list --vt-type libvirt --verbose
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## libvirt&amp;nbsp;test case 한개 돌리기
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;# ./scripts/avocado run&amp;nbsp;&lt;/span&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;type_specific.io-github-autotest-qemu.driver_load.with_balloon&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## 결과 보기
&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;# cd&amp;nbsp;&lt;/span&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;/root/avocado/avocado/job-results/job-2016-08-31T09.17-1daa785/\&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;html/results.html&lt;/span&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;## 전체 테스트 돌리기
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Tahoma';font-size:14px;&quot;&gt;&lt;span style=&quot;font-size: 12pt;&quot;&gt;# ./scripts/avocado run type_specific&lt;/span&gt;&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 11pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 11pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 11pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 11pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 11pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 11pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 11pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 11pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 11pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/216&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>OpenStack</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/216</guid>
<comments>https://ahnseungkyu.com/216#entry216comment</comments>
<pubDate>Wed, 31 Aug 2016 09:18:45 +0900</pubDate>
</item>
<item>
<title>Machine Learning Canopy 설치 및 실습</title>
<link>https://ahnseungkyu.com/215</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;1. python 라이브러리&lt;/span&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border: 3px double rgb(203, 203, 203); padding: 10px; background-color: rgb(255, 255, 255);&quot;&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;NumPy : 벡터, 행렬을 다루는 수치계산&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;SciPy : 과학 계산&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;Matplotlib: 그래프 그리기&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;Pandas: R과 유사한 데이터 프레임을 제공&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;PIL: 이미지 데이터를 다루는 라이브러리&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;Scikit-learn: 머신러닝&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;IPython: 대화형 cli&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;2. Enthought Canopy :&amp;nbsp;python GUI 통합 분석 환경 설치&lt;/span&gt;&lt;/p&gt;&lt;div class=&quot;txc-textbox&quot; style=&quot;border: 3px double rgb(203, 203, 203); padding: 10px; background-color: rgb(255, 255, 255);&quot;&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;##&amp;nbsp;&lt;/span&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;https://www.enthought.com/products/canopy/&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## 다운로드&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;##&amp;nbsp;https://store.enthought.com/downloads/#default&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## 예제소스 다운로드&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ cd ~/Documents/github&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ git clone&amp;nbsp;https://github.com/enakai00/ml4se.git&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ cd ml4se&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ unzip ml4se.zip&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ source ./ml4se/config_mac.sh&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;/div&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/215&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Machine Learning</category>
<category>canopy</category>
<category>Machine learning</category>
<category>ML</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/215</guid>
<comments>https://ahnseungkyu.com/215#entry215comment</comments>
<pubDate>Fri, 22 Jul 2016 09:56:11 +0900</pubDate>
</item>
<item>
<title>DPDK in docker</title>
<link>https://ahnseungkyu.com/214</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;[ DPDK install on Host&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(152, 0, 0);&quot;&gt;]&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## http://dpdk.org/doc/guides/linux_gsg/build_dpdk.html&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## http://dannykim.me/danny/openflow/86417&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## https://github.com/bisdn/dpdk-dev/blob/master/tools/setup.sh&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## High Precision Timer(HPET) set 확인&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ grep hpet /proc/timer_list&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## hugepage 세팅&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;# echo 256 &amp;gt; /sys/kernel/mm/hugepages/hugepages-2048kB/nr_hugepages&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## Using Hugepages with the DPDK&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;# mkdir -p /mnt/huge&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;# mount -t hugetlbfs nodev /mnt/huge&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;# vi /etc/fstab&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;nodev /mnt/huge hugetlbfs defaults 0 0&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## dpdk download&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## http://dpdk.org/browse/dpdk/&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ mkdir -p dpdk &amp;amp;&amp;amp; cd dpdk&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ curl -OL http://dpdk.org/browse/dpdk/snapshot/dpdk-16.04.tar.gz&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ tar xzvf dpdk-16.04.tar.gz&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ cd dpdk-16.04&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## Installation of DPDK Target Environments&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo yum update&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo yum install -y sudo gcc libhugetlbfs-utils libpcap-devel \&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;kernel kernel-devel kernel-headers&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ make config T=x86_64-native-linuxapp-gcc&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ make&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## Loading Modules to Enable Userspace IO for DPDK&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo modprobe uio_pci_generic&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo insmod build/kmod/igb_uio.ko&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ lsmod | grep igb_uio&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## Loading VFIO Module&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo modprobe vfio-pci&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ vi ~/.bashrc&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;export RTE_SDK=$HOME/dpdk/dpdk-16.04&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;export RTE_TARGET=build&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ source ~/.bashrc&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ env | grep RTE&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ cd examples/helloworld&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ make&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ cd build/app&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo ./helloworld -c 3 -n 3&lt;/span&gt;&lt;/font&gt;&lt;br /&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt; color: rgb(152, 0, 0);&quot;&gt;&lt;b&gt;[ DPDK install in docker ]&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## Host 에 미리 세팅&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## hugepage 세팅&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;# echo 256 &amp;gt; /sys/kernel/mm/hugepages/hugepages-2048kB/nr_hugepages&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## Using Hugepages with the DPDK&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;# mkdir -p /mnt/huge&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;# mount -t hugetlbfs nodev /mnt/huge&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;# vi /etc/fstab&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;nodev /mnt/huge hugetlbfs defaults 0 0&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ mkdir -p github&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ cd github&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ git clone https://github.com/seungkyua/dpdk-docker-helloworld.git&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ cd dpdk-docker-helloworld&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ cp -R /lib/modules .&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ cp -R /usr/src/kernels/ .&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ vi Dockerfile&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;FROM centos:7.2.1511&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;MAINTAINER Seungkyu Ahn &amp;lt;seungkyua@gmail.com&amp;gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;ENV REFRESHED_AT 2016-07-13&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;LABEL docker run --rm -it --privileged \&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;-v /sys/bus/pci/devices:/sys/bus/pci/devices \&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;-v /sys/kernel/mm/hugepages:/sys/kernel/mm/hugepages \&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;-v /sys/devices/system/node:/sys/devices/system/node \&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;-v /dev:/dev \&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;-v /mnt/huge:/mnt/huge \&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;--name dpdk-docker dpdk-docker-helloworld&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;ENV DPDK_VERSION=16.04&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;ENV RTE_SDK=/root/dpdk-${DPDK_VERSION}&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;ENV RTE_TARGET=build&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;USER root&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;# yum update&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;RUN yum -y update&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;RUN yum install -y deltarpm gcc make libhugetlbfs-utils libpcap-devel; yum clean all&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;RUN yum install -y kernel kernel-devel kernel-headers; yum clean all&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;# dpdk download&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;COPY modules /lib/modules&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;COPY kernels /usr/src/kernels&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;WORKDIR /root&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;RUN curl -OL http://dpdk.org/browse/dpdk/snapshot/dpdk-${DPDK_VERSION}.tar.gz&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;RUN tar xzf dpdk-${DPDK_VERSION}.tar.gz&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;WORKDIR /root/dpdk-${DPDK_VERSION}&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;RUN make config T=x86_64-native-linuxapp-gcc&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;RUN make&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;# Loading Modules to Enable Userspace IO for DPDK&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;RUN modprobe uio_pci_generic&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;RUN modprobe vfio-pci&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;WORKDIR examples/helloworld&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;RUN make&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;WORKDIR build/app&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;ENTRYPOINT [ &quot;./helloworld&quot; ]&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;CMD [ &quot;-c&quot;, &quot; 3&quot;, &quot;-n&quot;, &quot;3&quot; ]&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ docker build -t dpdk-docker-helloworld .&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ docker run --rm -it --privileged \&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;-v /sys/bus/pci/devices:/sys/bus/pci/devices \&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;-v /sys/kernel/mm/hugepages:/sys/kernel/mm/hugepages \&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;-v /sys/devices/system/node:/sys/devices/system/node \&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;-v /dev:/dev \&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;-v /mnt/huge:/mnt/huge \&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;--name dpdk-docker dpdk-docker-helloworld&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## 에러 날 때 패키지 찾아서 설치&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;yum provides '*/applydeltarpm'&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;yum install deltarpm&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;## 아래 패키지 에러 날 때 해결책&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;Rpmdb checksum is invalid: dCDPT(pkg checksums): perl-HTTP-Tiny.noarch 0:0.033-3.el7 - u&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;font face=&quot;Tahoma&quot;&gt;&lt;span style=&quot;font-size: 16px;&quot;&gt;$ sudo yum provides '*/perl-HTTP-Tiny'&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/214&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Container</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/214</guid>
<comments>https://ahnseungkyu.com/214#entry214comment</comments>
<pubDate>Tue, 12 Jul 2016 01:17:09 +0900</pubDate>
</item>
<item>
<title>Mesos 설치하기</title>
<link>https://ahnseungkyu.com/213</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[ 서버 리스트 ]&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;mesos-master1 &amp;nbsp; 10.0.0.14 &amp;nbsp; &amp;nbsp; &amp;nbsp;192.168.30.134
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;mesos-agent1 &amp;nbsp; &amp;nbsp; 10.0.0.15 &amp;nbsp; &amp;nbsp; &amp;nbsp;192.168.30.135
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;mesos-bootstrap 10.0.0.16 &amp;nbsp; &amp;nbsp; &amp;nbsp;192.168.30.136
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;mesos-agent2 &amp;nbsp; &amp;nbsp; 10.0.0.17 &amp;nbsp; &amp;nbsp; &amp;nbsp;192.168.30.137
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[ OpenStack 에 CentOS 7 다운 및 image 설치 ]&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ . ~/admin/admin-openrc
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ wget http://cloud.centos.org/centos/7/images/CentOS-7-x86_64-GenericCloud.qcow2
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ openstack image create \
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; --file CentOS-7-x86_64-GenericCloud.qcow2 \
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; --disk-format qcow2 --container-format bare \
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; --public centos-7
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ openstack image list
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## Flavor 생성
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;openstack flavor create --id mm1 --ram 32768 --disk 160 --vcpus 4 mesos.master
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;openstack flavor create --id ma1 --ram 16384 --disk 100 --vcpus 2 mesos.agent
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## quota 조회
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ tenant=$(openstack project list | awk '/demo/ {print $2}')
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ nova quota-show --tenant $tenant
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ cinder quota-show $tenant
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ openstack stack show $tenant
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## quota 업데이트
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;nova quota-update --ram -1 $tenant
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ nova quota-update --cores -1 $tenant
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ nova quota-update --instances -1 $tenant
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ nova quota-update --floating-ips -1 $tenant
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ nova quota-show --tenant $tenant
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ cinder quota-update --volumes -1 $tenant
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ cinder quota-update --snapshots -1 $tenant
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ cinder quota-update --backups -1 $tenant
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ cinder quota-update --gigabytes -1 $tenant
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ cinder quota-update --backup-gigabytes -1 $tenant
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ cinder quota-show --tenant $tenant
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## nova boot&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ . ~/demo/demo-openrc
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ openstack server create --image&amp;nbsp;615962cd-4905-4be8-a442-b8ca9b75e720 \
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;--flavor mm1 --nic net-id=03a6de58-9693-4c41-9577-9307c8750141 \
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;--key-name magnum-key --security-group default mesos-master1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ openstack server create --image&amp;nbsp;615962cd-4905-4be8-a442-b8ca9b75e720 \
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;--flavor ma1 --nic net-id=03a6de58-9693-4c41-9577-9307c8750141 \
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;--key-name magnum-key --security-group default mesos-agent1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ openstack server create --image&amp;nbsp;615962cd-4905-4be8-a442-b8ca9b75e720 \
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;--flavor ma1 --nic net-id=03a6de58-9693-4c41-9577-9307c8750141 \
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;--key-name magnum-key --security-group default mesos-bootstrap
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## 접속 테스트
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ sudo ip netns exec qrouter-68cfc511-7e75-4b85-a1ca-d8a09c489ccc \
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;ssh -i ~/magnum-key centos@10.0.0.14
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;div&gt;&lt;br /&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## floating ip 생성
&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ openstack ip floating create public
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ openstack ip floating list
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ openstack ip floating add 192.168.30.134&amp;nbsp;mesos-master1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ openstack ip floating add 192.168.30.135 mesos-agent1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ openstack ip floating add 192.168.30.136 mesos-bootstrap
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ openstack ip floating add 192.168.30.137 mesos-agent2
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[ Bootstrap node 에서 ssh 복사 ]
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ ssh-keygen -t rsa
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;ssh-copy-id 10.0.0.14
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ ssh-copy-id 10.0.0.15
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ ssh-copy-id 10.0.0.17
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ sudo su -
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;# ssh-keygen -t rsa
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;# ssh-copy-id 10.0.0.14
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;# ssh-copy-id 10.0.0.15
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;# ssh-copy-id 10.0.0.17
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[ Bootstrap, Master Node, Agent Node 공통 ]&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ sudo yum update
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ sudo yum upgrade -y
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;sudo systemctl stop firewalld &amp;amp;&amp;amp; sudo systemctl disable firewalld
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## CentOS 7.2 Upgrade
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ sudo yum upgrade --assumeyes --tolerant
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ sudo yum update --assumeyes
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ uname -r
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;3.10&lt;/span&gt;&lt;/b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;.0-327.18.2.el7.x86_64
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## Docker 에서 OverlayFS 사용&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;sudo tee /etc/modules-load.d/overlay.conf &amp;lt;&amp;lt;-'EOF'
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;overlay
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;EOF
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## reboot
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ reboot
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## OverlayFS 확인&amp;nbsp;
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;lsmod | grep overlay
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## Docker yum Repo
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;sudo tee /etc/yum.repos.d/docker.repo &amp;lt;&amp;lt;-'EOF'
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[dockerrepo]
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;name=Docker Repository
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;baseurl=https://yum.dockerproject.org/repo/main/centos/$releasever/
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;enabled=1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;gpgcheck=1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;gpgkey=https://yum.dockerproject.org/gpg
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;EOF
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## Docker Daemon with OverlayFS
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ sudo mkdir -p /etc/systemd/system/docker.service.d &amp;amp;&amp;amp; sudo tee /etc/systemd/system/docker.service.d/override.conf &amp;lt;&amp;lt;- EOF
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[Service]
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;ExecStart=
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;ExecStart=/usr/bin/docker daemon --storage-driver=overlay -H fd://
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;EOF
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## Install Docker engin, daemon and service
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;sudo yum install --assumeyes --tolerant docker-engine
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;sudo systemctl start docker
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;sudo systemctl enable docker
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## Test docker
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;sudo docker ps
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;color: rgb(148, 23, 81);&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[ DC/OS 설치 ]&lt;/span&gt;&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[ Bootstrap Node ]&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;##&amp;nbsp;&lt;/span&gt;&lt;a href=&quot;https://dcos.io/docs/1.7/administration/installing/custom/gui/&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;https://dcos.io/docs/1.7/administration/installing/custom/gui/&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## DC/OS installer download&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ mkdir -p installer
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ cd installer
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;curl -O &lt;/span&gt;&lt;a href=&quot;https://downloads.dcos.io/dcos/EarlyAccess/dcos_generate_config.sh&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;https://downloads.dcos.io/dcos/EarlyAccess/dcos_generate_config.sh&lt;/span&gt;&lt;/a&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[ WEB 으로 설치 ]&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## start web installer (9000 port)
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;sudo bash dcos_generate_config.sh --web -v
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## web 으로 접속
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## ip detect script&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ vi ip_detect.sh
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;#!/bin/bash
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;IP=$(ip addr show eth0 | awk '/inet /{print substr($2,0,9)}')
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;echo $IP
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[ GUI 로 설치하고 나서 다시 설치할려면 아래 삭제 필요 ]&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## 모든 클러스터 노드
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ sudo rm -rf /opt/mesosphere
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## bootstrap 노드
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ sudo rm -rf /var/lib/zookeeper
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[ CLI 로 설치 ]&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ cd installer
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ mkdir -p genconf &amp;amp;&amp;amp; cd genconf
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ sudo vi config.yaml
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;---
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;agent_list:&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;- 10.0.0.15&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;- 10.0.0.17&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;#bootstrap_url: file:///opt/dcos_install_tmp
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;bootstrap_url: http://192.168.30.136:80&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;cluster_name: DCOS
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;exhibitor_storage_backend: static
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;ip_detect_filename: /genconf/ip-detect
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;master_discovery: static
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;master_list:&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;- 10.0.0.14&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;process_timeout: 10000
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;resolvers:
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;- 8.8.8.8
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;- 8.8.4.4
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;ssh_port: 22
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;ssh_user: centos
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ vi ip-detect
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;#!/bin/bash
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;IP=$(ip addr show eth0 | awk '/inet /{print substr($2,0,9)}')
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;echo $IP
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ cd ..
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ sudo bash dcos_generate_config.sh
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ sudo docker run -d -p 80:80 -v $PWD/genconf/serve:/usr/share/nginx/html:ro nginx
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[ 모든 Master Node 에서 실행 ]&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ mkdir /tmp/dcos &amp;amp;&amp;amp; cd /tmp/dcos
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ curl -O http://10.0.0.16:80/dcos_install.sh
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ sudo bash dcos_install.sh master
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[ 모든 Agent Node 에서 실행 ]&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ sudo yum install -y ipset unzip
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;sudo groupadd nogroup
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ mkdir /tmp/dcos &amp;amp;&amp;amp; cd /tmp/dcos
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ curl -O http://10.0.0.16:80/dcos_install.sh
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ sudo bash dcos_install.sh slave
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## Master Node 설치 상황 보기&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;http://192.168.30.134:8181/exhibitor/v1/ui/index.html
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[ CLI 설치 ]&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## pip 설치
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ curl -O https://bootstrap.pypa.io/get-pip.py
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ sudo python get-pip.py
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;sudo pip install virtualenv
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;mkdir ~/dcos &amp;amp;&amp;amp; cd ~/dcos
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;curl -O https://downloads.dcos.io/dcos-cli/install.sh
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ bash install.sh . http://192.168.30.134&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## dcos 명령어를 사용할려면 아래와 같이 실행
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;&lt;/span&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;source /home/centos/dcos/bin/env-setup&lt;/span&gt;&lt;/b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;## 다음의 파일 값을 보여줌 &amp;nbsp; : &amp;nbsp; ~/./dcos/dcos.toml&amp;nbsp;
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;dcos config show
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;[ package 조회 및 서비스 설치 ]&lt;/span&gt;&lt;/b&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$&amp;nbsp;dcos package search
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;arangodb&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 0.3.0
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;cassandra&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;1.0.5-2.2.5
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;chronos&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;2.4.0
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;jenkins&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;0.2.3
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;kafka&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;1.0.9-0.10.0.0
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;marathon&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 1.1.1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;spark&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;1.0.0-1.6.1-2
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;avi&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;16.2
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;calico&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 0.1.0
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;concord&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;0.3.16.4
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;confluent&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;1.0.3-3.0.0
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;crate&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;0.1.0
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;datadog&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;5.4.3
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;elasticsearch&amp;nbsp; &amp;nbsp; &amp;nbsp;0.7.0
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;etcd&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 0.0.3
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;exhibitor&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;1.0.0
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;hdfs&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 2.5.2-0.1.9
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;hue&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;0.0.1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;kafka-manager&amp;nbsp; &amp;nbsp; &amp;nbsp;1.3.0.8
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;linkerd&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;0.6.0-0.1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;marathon-lb&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;1.2.2
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;memsql&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 0.0.1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;mr-redis&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 0.0.1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;mysql&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;5.7.12
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;namerd&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 0.6.0-0.1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;nginx&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;1.8.1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;openvpn&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;0.0.0-0.1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;openvpn-admin&amp;nbsp; &amp;nbsp; &amp;nbsp;0.0.0-0.1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;quobyte&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;1.2.1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;riak&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 0.1.1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;ruxit&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;0.1
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;spark-notebook&amp;nbsp; &amp;nbsp; 0.1.0
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;storm&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;0.1.0
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;vamp&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 0.8.5
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;weavescope&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 0.15.0 &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;weavescope-probe&amp;nbsp; 0.15.0
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;zeppelin&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 0.6.0
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ dcos package install zeppelin
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;$ dcos package install spark
&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;&lt;br /&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;p&gt;&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?--&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;/div&gt;&lt;/p&gt;&lt;div style=&quot;font-family:'Helvetica';font-size:14px;&quot;&gt;&lt;br /&gt;&lt;/div&gt;&lt;p&gt;&lt;br /&gt;&lt;/p&gt;&lt;div style=&quot;text-align:center;margin:10px 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;div style=&quot;text-align:left; padding-top:10px;clear:both&quot;&gt;
&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=https://ahnseungkyu.com/213&amp;amp;layout=standard&amp;amp;show_faces=true&amp;amp;width=310&amp;amp;action=like&amp;amp;font=tahoma&amp;amp;colorscheme=light&amp;amp;height=65&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; style=&quot;border:none; overflow:hidden; width:310px; height:65px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;
</description>
<category>Container</category>
<author>Kubernetes Korea co-leader seungkyua@gmail.com</author>
<guid>https://ahnseungkyu.com/213</guid>
<comments>https://ahnseungkyu.com/213#entry213comment</comments>
<pubDate>Sun, 19 Jun 2016 22:38:18 +0900</pubDate>
</item>
<item>
<title>localconf</title>
<link>https://ahnseungkyu.com/212</link>
<description>&lt;div style=&quot;text-align:center;margin:0 0 10px 0;&quot;&gt;&lt;script async src=&quot;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&quot;&gt;&lt;/script&gt;
&lt;ins class=&quot;adsbygoogle&quot;
     style=&quot;display:inline-block;width:728px;height:90px&quot;
     data-ad-client=&quot;ca-pub-6292884203190541&quot;
     data-ad-slot=&quot;8864253314&quot;
        &gt;
&lt;/ins&gt;
&lt;script&gt;(adsbygoogle = window.adsbygoogle || []).push({});&lt;/script&gt;
&lt;/div&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;[[&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;local|localrc&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;]]&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;ADMIN_PASSWORD=secret&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;DATABASE_PASSWORD=$ADMIN_PASSWORD&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;RABBIT_PASSWORD=$ADMIN_PASSWORD&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;SERVICE_PASSWORD=$ADMIN_PASSWORD&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;HOST_IP=&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: red; font-weight: bold;&quot;&gt;10.40.102.84
// VM IP&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: red; font-weight: bold;&quot;&gt;로 변경&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;# Do not use Nova-Network&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;disable_service&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;
n-net&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;# Enable Neutron&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;ENABLED_SERVICES+=,q-svc,q-dhcp,q-meta,q-agt,q-l3&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;## Neutron options&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;Q_USE_SECGROUP=True&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;FLOATING_RANGE=&quot;10.40.102.0/24&quot;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;FIXED_RANGE=&quot;10.0.0.0/24&quot;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;Q_FLOATING_ALLOCATION_POOL=start=10.40.102.250,end=10.40.102.254&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;PUBLIC_NETWORK_GATEWAY=&quot;10.40.102.1&quot;&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;PUBLIC_INTERFACE=eth0&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;# Open &lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;vSwitch&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;
&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;provider
&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;networking
configuration&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;Q_USE_PROVIDERNET_FOR_PUBLIC=True&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;OVS_PHYSICAL_BRIDGE=&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;br&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;-ex&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;PUBLIC_BRIDGE=&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;br&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;-ex&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;OVS_BRIDGE_MAPPINGS=&lt;/span&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;public:br-ex&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;/p&gt;&lt;p style=&quot;margin-top:0pt;margin-bottom:0pt;margin-left:0in;text-align:left;
direction:ltr;unicode-bidi:embed;mso-line-break-override:none;word-break:break-all;
punctuation-wrap:hanging&quot;&gt;&lt;span style=&quot;font-size: 12pt; font-family: Tahoma; color: black;&quot;&gt;# Disable Identity v2&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;
&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;



&lt;/span&gt;&lt;!--StartFragment--&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: Tahoma; font-size: 12pt;&quot;&gt;

&lt;/span&gt;&lt;span style=&quot;font-family: 