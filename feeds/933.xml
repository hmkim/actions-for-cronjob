<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Dreaming for the Future</title>
	<atom:link href="http://www.chidoo.me/index.php/feed/" rel="self" type="application/rss+xml" />
	<link>http://www.chidoo.me</link>
	<description>영원한 개발자를 향해서.</description>
	<lastBuildDate>일, 24 2월 2019 10:28:45 +0000</lastBuildDate>
	<language>ko-KR</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.7</generator>
<site xmlns="com-wordpress:feed-additions:1">108384747</site>	<item>
		<title>Thoughts after reading Start with WHY and Leaders eat last</title>
		<link>http://www.chidoo.me/index.php/2019/02/06/thoughts-after-reading-start-with-why-and-leaders-eat-last/</link>
		<pubDate>Wed, 06 Feb 2019 06:22:59 +0000</pubDate>
		<dc:creator><![CDATA[chidoo]]></dc:creator>
				<category><![CDATA[일하기]]></category>
		<category><![CDATA[책읽기]]></category>
		<category><![CDATA[simon sinek]]></category>

		<guid isPermaLink="false">http://www.chidoo.me/?p=640</guid>
		<description><![CDATA[책(Leaders eat last)에서 인간의 기본 심리를 4가지 호르몬의 동작으로 정의한다. 엔돌핀(Endorphins) &#8211; 생존에 대한 두려움 혹은 살아야 한다고 느꼈을 때. 어느 글에서는 이게 좋은 호르몬이라고 이야기를 했던 것 같지만 결국 두려움이 이 호르몬을 만들어낸다. 도파민(Dorphamins) &#8211; 성취. 혹은 다른 사람을 이겼다고 느꼈을 때. 새로토닌(Serotonins) &#8211; 다른 사람을 돌보고, 이들을 위해 희생하고자 함. 대표적으로 리더 성격을 가진 사람들이 많이 ...</p><p><a href="http://www.chidoo.me/index.php/2019/02/06/thoughts-after-reading-start-with-why-and-leaders-eat-last/" class="more-link">Continue reading &#8216;Thoughts after reading Start with WHY and Leaders eat last&#8217; &#187;</a>]]></description>
				<content:encoded><![CDATA[<p>책(Leaders eat last)에서 인간의 기본 심리를 4가지 호르몬의 동작으로 정의한다.</p>
<ul>
<li><strong>엔돌핀(Endorphins)</strong> &#8211; 생존에 대한 두려움 혹은 살아야 한다고 느꼈을 때. 어느 글에서는 이게 좋은 호르몬이라고 이야기를 했던 것 같지만 결국 두려움이 이 호르몬을 만들어낸다.</li>
<li><strong>도파민(Dorphamins)</strong> &#8211; 성취. 혹은 다른 사람을 이겼다고 느꼈을 때.</li>
<li><strong>새로토닌(Serotonins)</strong> &#8211; 다른 사람을 돌보고, 이들을 위해 희생하고자 함. 대표적으로 리더 성격을 가진 사람들이 많이 이런 호르몬을 가진다.</li>
<li><strong>옥시토신(Oxytocins)</strong> &#8211; 타인에 대해 사랑을 베풀고, 그 자체에서 기쁨을 얻는다.</li>
</ul>
<p>인간이라는 동물로써 차별성을 가지는 가장 큰 부분은 사회성이다. 조직안에 있을 때 편안함을 느끼는 이유는 생존에 대한 두려움을 덜 수 있기 때문이다. 하지만 경쟁 사회에서 우리는 개인주의를 강요받는다. 특히 이런 개인주의의 팽배는 한국의 경우, 1990년대 말 IMF 시대를 거치면서 보편화됐다. 미국의 경우에도 레이건 정부를 거치면서 이런 정책이 일반화됐다. 자본주의의 팽배가 결국 사람을 사람으로 보는 것이 아니라 물건으로 보기 시작하고 하나의 숫자로써 개인을 취급하면서 보편화되었다.</p>
<p>선사시대 이후로 작던 크던 조직내에 소속된 개인을 돌보는 문화가 하나의 숫자로써 여기지는 시대로 변화되었다. 사회의 가치보다는 개인의 성취 혹은 성공이 더 우선시하는 개인주의가 기본 패러다임이 되었다. 이런 변화는 단순히 자본주의 때문이라기보다는 풍요로움이 기여한 바가 크다고 할 수 있다. 1,2차 세계 대전이라는 고난의 시대를 거치면서 세상은 급속하게 풍요의 시대를 맞았다. 한국의 경우에도 한국 전쟁을 거치면서 소위 베이비부머라 불리는 세대가 나타났으며 70년대 베트남 전쟁과 한강의 기적이라는 산업적 변혁을 맞이하면서 더 이상 배고프지 않는 시대에 진입했다. 80년대 90년대를 초반을 거치면서 “개천에서 용나는” 시대를 관통했다. 당시의 부모 세대는 평생 직장이라는 울타리에서 자신의 자녀 세대들은 자신에게는 거친 기억이 없는 풍요로움을 줄 수 있었으며, 또한 “용”이 되어주었으면 하는 희망으로 자녀의 교육에 최선을 다했다. 다른 사람보다는 내가 우선이었으며, 이런 사회 풍토는 미국과 마찬가지로 경쟁 사회로의 진입을 부추켰다. 90년대 IMF 이후로 이런 기조는 더욱 더 남을 돌아보기보다는 자신의 앞을 보고 더욱 더 채찍질 하는 사회를 고착화시켰다.</p>
<p>이런 사회적인 풍토에 제대로 일격을 가한 대표적인 사건이 바로 엔론(Elon)사태고, 2008년 모기지 사태로 촉발된 미국 금융 위기다. 자신들만의 세상(Inner Circle)의 이익을 최우선하기 위해 장부를 조작했으며, 단일 회사 수준이 아니라 누구도 예측못했던 글로벌 위기를 촉발했으며 미국뿐만 아니라 전세계의 많은 사람들이 직업을 잃고 거리를 헤매게 만들었다. 이들 Inner Circle 그룹은 조직의 다른 사람들은 단순히 숫자에 불과했으며, 사람 혹은 동료가 아니라 수단에 불과했던 것이다. 이에 대한 반성이 미국 사회에서는 조금씩 생겨나기 시작했고, 주주우선주의가 아니라 구성원 우선주의가 서서히 자리잡고 있다. Google, Facebook을 포함한 IT 기업들(Amazon은 글쎄???)이 이런 흐름에 동참하고 있고, 가장 대표적인 기업으로 Southwest Airline과 국내에도 있는 Costco가 칭송받고 있다.</p>
<p>한국의 경우에는 어떨까? 기업들의 Moral Hazard로 촉발되어 베이비부머 세대 수십만을 길거리로 내몬 IMF 사태 이후, 과도한 인력 유동성을 확보한 기업들은 더욱 더 자기반성없이 성과지상주의로 개인들을 초 경쟁사회로 내몰고 있다. 이제 도구로써의 역할을 다하지 못한 기업의 40, 50대들은 언제 해고될지 모르는 두려움이 떨고 있다. 생존을 위해서는 어찌되었든 옆자리의 동료을 이겨야하고, 더 좋은 라인을 타기 위해서 사내정치에 몰두한다. 그리고 승리의 보담으로 인센티브라는 단물을 챙긴다. 부모 세대들의 10, 20, 30대 자녀들은 어떨까? 그들은 풍요와 경쟁의 한 가운데에 있다. 언제까지나 피말리는 경쟁을 버텨내는 것은 싫지만 지금까지 누려왔던 풍요로움을 포기하기는 싫다. 결국 그들의 선택지는 공무원 혹은 대기업이다. 부모 세대의 경쟁은 점진적이었다. 이에 반해 이들의 경쟁은 바늘구멍같은 좁은 자리를 향해 경쟁해야한다. 결국 경쟁은 일상회되고, 사회는 피로사회로 전환된다. 스카이캐슬은 그들만의 문제가 아니라 사회의 문제이자 시스템의 문제다.</p>
<p>현재의 자본주의 시대는 인센티브의 시대다. 엔돌핀과 도파민의 시대다. 회사라는 조직에 있는 사람들은 언제 짤릴지 모르는 두려움(엔돌핀)을 안고 있다. 그리고 옆자리에 앉은 동료, 팀, 혹은 다른 회사와 경쟁한다. 그들의 경쟁은 몇 개의 숫자로 정의된다. 그 숫자가 맞춰지면 인센티브(도파민)가 지급된다. 이 숫자를 달성하지 못한 사람은 언제 닥칠지 모르는 상실의 두려움에 떤다. 한국의 대표적인 리더들은 항상 숫자를 우선에 둔다. 매출 목표, 수익 목표. 그 숫자들은 출근길에 쓰러진 부하 직원과 스트레스에 회사를 떠난 직원들을 패배자로 규정시킬 수 있도록 리더에게 당위성을 부여한다. Inner Circle에 충성해야하고, Inner Circle이 지정한 숫자에 충성해야 한다. 고객은 숫자이며, 직원은 숫자를 채우는 수단에 불과하다.</p>
<p>우리는 왜 일하는가? 회사와 같은 인위적인 공동체에 개인은 소속의 이유를 갖는다. 공동체의 리더는 조직의 존재 이유를 대변하고, 이 가치를 실현하기 위해 노력해야 한다. 공통체의 일원인 우리는 그 가치에 동의하고 그 가치를 실현하는데 동참하기 원한다. 하지만 이상은 이상이고, 현실은 현실이다. 그리고 공동체의 가치를 설파하고, 실현시키기 위해 노력한 리더도 대부분 이상론으로 존재할 뿐 현실에서는 찾아보기 정말 어렵다. 세상을 혁신하겠다는 스티브 잡스나 세상사람들에게 컴퓨터라는 동일한 권력을 쥐어주겠다는 빌 게이츠가 이런 대표적인 리더이다. 이들이 현업에 있던 당시에 함께 일했던 애플과 마이크로소프트의 직원들은 아마도 이런 생각에 깊이 동감했을 것 같다. 하지만 지금의 이들이 떠나버린 애플이나 마이크로소스프트에 이런 생각에 동의하면서 일하는 구성원들이 얼마나 될까?</p>
<p>하지만 새롭게 생겨나는 대부분의 회사들이 단순히 돈을 벌기위해서 만들어지는 건 아니다. 나름대로 그들이 정의하는 공동체를 위한 목적을 가지고 있으며, 회사의 구성원들 모두 그 목적을 실현하기 위해 다들 노력하고 있다. (혹은 노력하고 있다고 믿고 싶다.) 현실론으로 단순히 돈을 벌기 위해 그 안에 있다는 것 자체는 너무 슬프지 않은가?</p>
<p>이 관점에서 나는 어떤 목표와 목적을 가지고 왜 아침에 일터로 향하는가? 내가 현재의 회사에 조인한 이유는 명확하다.</p>
<blockquote><p><strong>고객들에게 의미있는 서비스를 만들고 싶고, 그 서비스를 통해 고객들과 공감하고 싶다. </strong></p></blockquote>
<p>나는 여전히 이 목표에 충실한가 라는 질문에 지금까지는 “예” 라고 답할 수 있다. 그리고 최근에 이야기된 <a href="https://www.riotgames.com/en/who-we-are/values">회사의 가치</a> 역시 이에 부합한다고 생각한다.</p>
<p>&nbsp;</p>
<p><img class=" wp-image-632 alignleft" src="http://www.chidoo.me/wp-content/uploads/2018/12/riotgames.png" alt="" width="218" height="169" srcset="http://www.chidoo.me/wp-content/uploads/2018/12/riotgames.png 151w, http://www.chidoo.me/wp-content/uploads/2018/12/riotgames-150x117.png 150w" sizes="(max-width: 218px) 100vw, 218px" /></p>
<blockquote><p><strong>Player experience first</strong><br />
<strong>Dare to dream</strong><br />
<strong>Thrive together</strong><br />
<strong>Execute with excellence</strong><br />
<strong>Stay humble; stay hungry</strong></p></blockquote>
<p>&nbsp;</p>
<p>숫자 혹은 성과를 위해 하는 것이 아닌 것은 분명하다.</p>
<p>개발을 포함해 모든 일이 마찬가지지만 개인 혼자서 할 수 있는 일이 아니고 팀 혹은 구성원들과 함께 하는 공동의 작업이다. 따라서 개발의 리더로써 내가 해야할 일은 명확하다. 조직의 목표와 비전을 명확하게 함께하는 동료들에게 인지시켜야 한다. 함께 일을 하는데 있어서 동감은 반드시 전제되어야 한다. 동감되지 않는 리더의 비전은 그 사람의 &#8220;꿈&#8221;에 지나지 않는다. 꿈이 아니라 현실에서 이를 실현하기 위해서는 구성원들의 지원이 필요하며, 이를 위해 동감은 반드시 필요하다.</p>
<p>동감을 통해 우리가 추구해야할 가치는 구성원간의 신뢰다. 공통체가 공동체로써 존재할 수 있는 가장 큰 근간은 신뢰 혹은 상대방에 대한 이해다. 신뢰가 무너지면 조직의 근간이 흔들린다. 사람의 진실성(Integrity)에 대해 의문을 품는 순간, 신뢰에는 금이 간다. 신뢰를 만들어나가는 과정은 쉽지않다. 하지만 무너지는 것은 일순간이다. 특히 요즘과 같이 카톡이나 페이스북 메신저가 일상화된 현실에서 온라인 상에서만 이뤄지는 대화는 우리가 생각하는 신뢰라는 것에 대한 착각을 불러일으키기 십상이다. 텍스트보다는 얼굴을 보고 이야기할 때 오히려 사람사이의 진실함을 파악할 수 있다. 특히나 같은 공간을 함께하는 동료라면 그 사람의 책상으로 가서 이야기를 하는 것이 훨씬 더 효과적이다. 밀레니엄 세대는 이런 오프라인 대화를 부담스러워한다고 이야기를 하지만 자연스럽게 얼굴보고 이야기할 수 있는 기회를 만들고 활용할 수 있도록 하는 것이 필요하다.</p>
<p>비전을 통해 나아가야 할 방향이 정해지고, 이에 대한 공감과 같이 하는 동료간의 신뢰가 바탕된다면 이제 여정을 떠날 수 있다. 이 여정에는 가장 필요한 요소는 헌신(옥시토신)과 배려(세로토닌)이다. 여정을 통해 실현해나가는 과정에서 팀과 개인은 그에 따르는 성취를 이뤄야 한다. 물론 성취의 기본 개념은 일을 완성해나가고 있다는 것이다. 하지만 다른 관점에서 성취의 또 다른 면으로 중요시하는 것은 배움이다. 과정이 항상 성공적일 수만은 없다. 여정에서 잘못된 길로 들어설 수 있으며, 이 과정에서 왔던 길을 되돌아 나와야 하는 경우도 있다. 이 과정에서 배움이 있었다면 이 또한 성취의 또 다른 면이라고 할 수 있다. 이런 경험들이 모두 모여 우리가 이루고자하는 비전을 달성할 수 있다.</p>
<p>성취는 개인의 성장을 위해 반드시 필요하고 이럴 때 느끼는 도파민은 값지다. 어려움을 극복하거나 새로운 배움을 통한 성취는 개인의 성장에 큰 도움이 된다. 그리고 이런 도움이 팀의 작업에 도움이 되고, 다른 사람들의 성장을 자극한다면 더할 나위없다. 하지만 성취가 성과라는 단어와 만났을 때, 그리고 그것을 개인 혼자만의 것으로 만들려고 하는 경우에는 큰 문제가 된다. 이런 사람이 많아지면 많아질 수록 &#8220;우리&#8221; 보다는 &#8220;나&#8221; 가 우선시된다. 특히나 이런 분위기를 리더가 조장하거나 방임하게 되면 구성원들은 단기 성과에만 매달린다. 시작은 도파민이었지만, 이후에는 엔돌핀이 구성원들을 지배한다.</p>
<p>회사 혹은 조직의 문화에 따라 이런 도파민과 엔돌핀을 무기로 구성원들을 다루는 경우가 있다. 소위 당근과 채찍이라는 이름으로 성과를 강요한다. 이러면 구성원들은 위기감을 느끼고 뭔가를 보여줘야만 스스로의 생존을 담보할 수 있다고 느끼게 된다. 이건 사람이라는 동물적인 유전자를 가지고 있기 때문이지 개개인이 잘못이 아니다. 하지만 이런 병폐가 지속되면 자본의 논리가 조직의 논리가 된다. 사람을 물질화시키고, 투입 대비 효율이라는 가치 명제가 횡횡하게 된다. 구성원이 더 이상 그 효용이 다하면 버려도 되는 재화(Commodity)가 되어 버린다.</p>
<p>조직의 리더가 어떤 방식으로 조직을 이끌고, 이에 구성원들이 동의하는가에 따라 그 조직의 문화가 결정된다. 자본의 논리에 따른 각자 도생의 문화를 가질 것인지 서로 뒤를 봐주는 공생의 문화를 가질 것인지가 결정된다. 조직장의 스타일이 큰 역할을 담당하겠지만, 이를 실행하기 위한 구성원들이 이에 동감하고 함께하는지도 중요한 역할이다. 결론적으로 내가 추구하는 조직은서로가 서로를 보살피는 문화를 가진 조직이다. 우리는 우리가 해야할 목표가 있고, 이걸 달성하고 성장하면서 오래 함께 할 수 있는 조직을 이루고 싶기 때문이다.</p>
<p>중간 리더는 상당히 어정쩡한 존재다. 모든 것을 결정할 수 있는 충분한 권한(Authority)가 있는 것이 아니고 책임을 지고 싶어도 질 수 있는 위치가 아닌 경우가 태반이다. 결정을 해야할 때 빠른 결정을 내리는 것도 좋은 자질 가운데 하나일 수 있다. 하지만 한국 조직은 수직, 계층 조직이다. 각 조직별로 나름의 사일로(Silo)를 가지고 있으며, 이 영역을 영역밖의 사람이 들어갈려고 했을 때 받는 이물감은 상당하다. 인위적으로 이런 형국을 초래하기보다는 중간 지점에서 접점을 만들고 서로 얼굴 맞대고 최선의 결론이 도출될 수 있도록 기회를 만드는 것이 중간계의 리더가 해야 할 일이 아닐까 싶다. 그럼에도 결론이 안된다면 사일로의 최상단이 서로 논의할 수 있는 관련된 정보를 제공하는 수준에서 마무리하는 것이 최선이 아닐까?</p>
<p>궁극적으로 구성원들 개개인이 심리적으로 Circle of Safey 안에 존재한다는 믿음이 생기도록 만들어야 한다. 준다고 해서 덥석 생겨나는 것도 아니다. 한두달 열심히 한다고 해서 생겨나는 것도 아니다.일상을 통해 체감될 수 있도록 리더와 구성원들이 서로 노력해야한다. 그 결과가 문화로 정착되야 한다. 결론은 문화다.</p>
<p>&#8211; 끝 &#8211;</p>
<p>&nbsp;</p>
<div class = 'socialMediaOnEveryPost'><div id="sgmbShare1-2" class="sgmbShare jssocials-theme-classic sgmbWidget1-2"></div><div class="dropdownWrapper dropdownWrapper1 dropdownWrapper-for-widget " id="dropdownWrapper-for-widget">
						<div class="dropdownLabel" id="dropdownLabel-share-list"><span class="sgmbButtonListLabel1">Share List</span></div>
						<div class="dropdownPanel dropdownPanel1-2">
						</div>
					</div><script>  SGMB_URL = "http://www.chidoo.me/wp-content/plugins/social-media-builder/"; jQuery(".dropdownWrapper").hide(); SGMB_GOOGLE_ACOUNT = ""; </script><script type="text/javascript">
		jQuery(document).ready(function($){var widget = new SGMBWidget();widget.show({"id":"1","title":"common socials","options":{"currentUrl":"0","url":"","fontSize":"14","theme":"classic","buttonsPosition":"","socialTheme":"","icon":"default","buttonsPanelEffect":"No Effect","buttonsEffect":"No Effect","iconsEffect":"No Effect","buttons":"{\"facebook\":{\"label\":\"Share\",\"icon\":\"default-facebook\"},\"linkedin\":{\"label\":\"Share\",\"icon\":\"default-linkedin\"},\"twitter\":{\"label\":\"Tweet\",\"icon\":\"default-twitter\",\"via\":\"\",\"hashtags\":\"\"},\"googleplus\":{\"label\":\"+1\",\"icon\":\"default-googleplus\"}}","roundButton":"","showLabels":"on","showCounts":"","showButtonsAsList":"","setButtonsPosition":"","sgmbDropdownColor":"","sgmbDropdownLabelFontSize":"14","sgmbDropdownLabelColor":"","showButtonsOnEveryPost":"on","sgmbPostionOnEveryPost":"Left","textOnEveryPost":"","showButtonsOnMobileDirect":"on"},"buttonOptions":{"facebook":{"label":"Share","icon":"default-facebook"},"linkedin":{"label":"Share","icon":"default-linkedin"},"twitter":{"label":"Tweet","icon":"default-twitter","via":"","hashtags":""},"googleplus":{"label":"+1","icon":"default-googleplus"}},"button":["facebook","linkedin","twitter","googleplus"]}, 2, '', 'http://www.chidoo.me/wp-content/uploads/2018/12/riotgames.png', '', 'http://www.chidoo.me/index.php/2019/02/06/thoughts-after-reading-start-with-why-and-leaders-eat-last/'); });</script></div><script> jQuery(".socialMediaOnEveryPost").addClass("sgmb-left") </script>]]></content:encoded>
		<post-id xmlns="com-wordpress:feed-additions:1">640</post-id>	</item>
		<item>
		<title>개발자에게 좋은 직장 혹은 좋은 환경</title>
		<link>http://www.chidoo.me/index.php/2018/12/31/good-company-or-good-environment-for-a-developer/</link>
		<pubDate>Sun, 30 Dec 2018 15:04:25 +0000</pubDate>
		<dc:creator><![CDATA[chidoo]]></dc:creator>
				<category><![CDATA[개발자]]></category>
		<category><![CDATA[일하기]]></category>
		<category><![CDATA[프로그래밍]]></category>
		<category><![CDATA[Engineer]]></category>
		<category><![CDATA[growth]]></category>
		<category><![CDATA[RiotGames Korea]]></category>

		<guid isPermaLink="false">http://www.chidoo.me/?p=627</guid>
		<description><![CDATA[직업이 뭐냐고 물어보면 &#8220;개발자&#8221;라고 서슴없이 이야기한다. 개발하는 직장인으로써 &#8220;행복하십니까?&#8221; 라고 질문한다면 나의 답은 &#8220;행복합니다.&#8221; 이다. 하지만 &#8220;행복&#8221;이라는 단어에 고민이 있다. 나는 직장인으로써 행복한 것인지 아니면 개발자로써 행복한 것인지. 혹은 둘다에서 모두 만족과 행복을 얻고 있는 것인지. 전 직장인 네이버에서 일할때도 초반에는 이런 행복이라는 단어를 이야기했다. 그때도 개발자로 시작을 했지만, 성과를 인정받고 일을 리딩하는 팀장이 됐다. ...</p><p><a href="http://www.chidoo.me/index.php/2018/12/31/good-company-or-good-environment-for-a-developer/" class="more-link">Continue reading &#8216;개발자에게 좋은 직장 혹은 좋은 환경&#8217; &#187;</a>]]></description>
				<content:encoded><![CDATA[<p>직업이 뭐냐고 물어보면 &#8220;개발자&#8221;라고 서슴없이 이야기한다. 개발하는 직장인으로써 &#8220;행복하십니까?&#8221; 라고 질문한다면 나의 답은 &#8220;행복합니다.&#8221; 이다. 하지만 &#8220;행복&#8221;이라는 단어에 고민이 있다. 나는 직장인으로써 행복한 것인지 아니면 개발자로써 행복한 것인지. 혹은 둘다에서 모두 만족과 행복을 얻고 있는 것인지.</p>
<p><img class="alignnone " src="data:image/png;base64,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" width="262" height="47" /></p>
<p>전 직장인 네이버에서 일할때도 초반에는 이런 행복이라는 단어를 이야기했다. 그때도 개발자로 시작을 했지만, 성과를 인정받고 일을 리딩하는 팀장이 됐다. 리더는 이럴 것이다라는 나의 자화상과 팀원들의 기대를 섞은 형상이 되기 위해 최선을 다했다. 결론적으로 행복하지 못했다. 팀장, 리더라는 직책을 가진 직장인으로 행복하지 못했고, 개발할 시간을 1도 갖지 못한 개발자로써 행복하지 못했다. 더욱 심각한 문제는 나만 행복하지 못한게 아니라 함께 일하는 팀원들도 행복하지 못했다. 그리고 3년 반전에 현재의 라이엇 게임즈로 이직했다.</p>
<p><img class="alignnone wp-image-632" src="http://www.chidoo.me/wp-content/uploads/2018/12/riotgames.png" alt="" width="250" height="194" srcset="http://www.chidoo.me/wp-content/uploads/2018/12/riotgames.png 151w, http://www.chidoo.me/wp-content/uploads/2018/12/riotgames-150x117.png 150w" sizes="(max-width: 250px) 100vw, 250px" /></p>
<p>이직 후 현재까지 개발자로써 행복하다. 물론 라이엇 게임즈에서도 개발 리더의 역할을 하고 있다. 그리고 앞서 이야기한 것처럼 행복하다. 이 나이에 실제 코딩을 하고 있고, 과정에서 미처 몰랐던 것들, 새로운 것들을 계속 배우는 즐거움이 있다. 그리고 나이먹었다고 굳이 봐주지 않는 까칠한 동료들이 있다. 나는 내 기술과 경험과 코딩으로 사용자들이 실제 사용하는 시스템을 만들고 있고, 좋은 동료들의 도움으로 발전하고 있다. 더구나 새로움에 도전한다고 뭐라하는 말도안되는 거버넌스 같은 것들이 없다. 개발자에게 이만큰 좋은 환경이 있을까? 이렇든 저렇든 코딩을 직접하는 회사에서 이만큼의 행복한 조건을 찾을 수 있을까? 내가 보기에 감히 개발자에게 최고의 환경이다.</p>
<p>라이엇이 좋다고는 했지만 그럼 개발자에게 행복한 직장 환경은 뭘까?</p>
<h2>개발이라는 직군(Discipline) 관점에서 살펴보자.</h2>
<ul>
<li><span style="color: #ff0000;"><strong>능력이 아닌 실제 코딩</strong></span> &#8211; 어떤 직책(Role)에 있던 개발 직군에 있는 사람은 코딩을 해야한다. 중요한 점은 할줄 아는 능력이 아니다. 실제로 코딩을 해야한다. 자, 먼저 여러분들의 주변을 둘러보자. 코딩보다는 문서를 만들고 있거나, 회의를 하고 있는건 아닌가? 혹은 의미없는 이메일 놀이? 본인의 시간을 코딩하는데 쓸 수 있어야 코딩을 할 수 있다. 그리고 코드를 통해 본인의 존재감을 인정해줄 수 있는 조직 문화가 있어야 한다. 회의에서 한마디 말을 하거나 문서/이메일 쓰레드에 자신의 필력을 발휘해야만 존재감을 인정받는다는 생각을 하는 소위 관료주의적 문화가 있다. 이런 문화는 개발자가 코드로 기여하기보다는 정치질하기 쉽다. 코드짤 시간도 인정하지 않고, 회의에서 말 한마디 못한다고 갈구는 분위기이고, 본인은 개발자로 남길 원한다면 그 조직에 오래 남을 이유는 없을 것 같다.</li>
<li><span style="color: #ff0000;"><strong>피드백 줄 수 있는 동료</strong></span> &#8211; 코딩은 글쓰기랑 비슷하다. 글쓰기 능력을 높이는 좋은 방법은 2가지 다. 첫번째는 많이 써보는 것이고, 두번째는 쓴 글을 다른 사람들과 돌려 읽는 것이다. 다른 관점에서 살펴본 피드백은 좋든 안좋든 본인이 작성한 내용을 뒤돌아보게 만든다. 코딩도 마찬가지로 피드백이 있을 때 더 빠르게 발전할 수 있다. 코딩의 피드백을 가장 잘 줄 수 있는 사람은 같은 일을 하는 개발자다. 같은 일을 하고 있기 때문에 코드의 목적을 공유하고 있고, 다른 관점에서 제대로 코드의 문맥이 제대로 읽히는지 봐줄 수 있다. 개발 시간은 3개월이더라도 완성된 코드는 6개월, 1년 혹은 몇년 동안 운영된다. 과정에서 변경은 필수이고, 변경할려면 제대로 읽혀야 한다. 제대로 읽히는지 피드백을 주는 동료가 있다면 그만큼 읽힐 수 있는 코드, 품질 높은 코드를 작성할 기회가 더 많아진다. 자신보다 잘하든 못하든 상관없이 진심으로 읽고 주는 피드백은 충분히 값어치를 한다.</li>
<li><span style="color: #ff0000;"><strong>도전</strong></span> &#8211; IT 환경만큼 빠르게 변화하는 세상이 없다. 개발 환경 뿐만 아니라 사용자 환경도 마찬가지다. A 기능이면 만족하던 사용자들이 AAAAA 기능이 아니면 안된다고 하루 아침에 돌변한다. 바뀐 환경에 대응할려면, 본인이 가지고 있던 밥그릇을 버려야 할 때도 있다. 어떻게 해야할까? 개발자라면 도전해야한다. 밥그릇이 아닌 접시를 원한다면 이제 접시를 만들러 가자. 새로움에 도전하는 사람이 있다면 응원과 관심이 필요하다. 성공하든 깨지든 과정의 경험은 도전한 사람에게 값진 경험으로 남는다. 도전이 일상이 될 때 혁신이 이뤄지고, 조직은 더욱 발전한다. 개인의 도전을 장려하고, 그 과정 혹은 결과를 조직 발전의 밑거름으로 삼으려는 조직에 있어야 개발자로써 더 나아갈 수 있다.</li>
<li><span style="color: #ff0000;"><strong>성장</strong></span> &#8211; 개발이라는 분야만큼 빠르게 변하는 동네는 없다. 자고나면 새로운 기술과 언어 그리고 프레임웍이 등장한다. 한국에서는 자바(Java)랑 스프링만 해도 충분해&#8230; 라는 생각을 가진 개발자들이 현실적으로 많다. 사실 그닥 틀린 말은 아니다. 하지만 이런 마인드가 ActiveX를 욕하면서 아직도 걷어내지 못하고 있는 것이다. Frontend와 Backend의 분리, Microservice Architecture, Cloud 등등이 최신 기술이라고 이야기하던 때는 이미 1~2년 전에 지났다. 프로토콜 관점에서도 세상은 이미 HTTP/2를 향해 나아가고 있고, Serverless와 AI, Machine Learning을 현실과 어떻게 접목할 것인가를 고민하는 시점이다. Java 언어 자체도 Imperative feature보다는 lambda를 필두로 functional language 관점이 주요 발전 뱡향으로 자리잡았다. 또 9 버전 이후 module 방식의 packaging 방식의 변화를 가져오고 있다. 이것들을 종합해보면 Concurrent 환경의 안전한 코딩과 빠른 실행을 담보하기 위한 체계로 전환해야 한다고 이야기하고 있다. 그럼에도 불구하고 당신의 조직이 &#8220;이걸로도 충분해&#8221; 라고 안주하고 있나? 성장하는 조직이라면 새로움에 대한 탐색과 이를 도전적으로 적용해보고 그 값어치에 대해 논의할 수 있는 것을 장려해야 한다. 이런 논의가 없다면 고인물이 되고, 시간이 흐르면 썩어버린다. 썩은 물은 두말할 필요없이 주변을 오염시킨다.</li>
</ul>
<p>팀장이나 아키텍트라는 타이틀을 가진 사람들이 흔히 &#8220;내가 옛날에 해봤는데 말이야&#8230;&#8221; 라는 말을 내뱉는다. 옛날 언제? CPU가 1 Core였던 호랑이 담배피던 시절에? 혹은 &#8220;오라클 DB면 다 되네..&#8221; 라고 감탄하던 시절에? 바뀐 환경과 바뀐 프로그래밍 패러다임을 이해하지 못하는 사람과 함께 일하는 건 불행이다. 넓은 식견과 경험을 변화된 환경에 최적화된 코딩으로 녹여내기 위해 노력해야한다.</p>
<p>우리는 이런 노력이 결실을 맺기 위해 피드백을 주고, 시간을 줄 수 있어야 한다. 이 과정을 통해 성장한 사람이 결국 조직 구성원들에 영감을 준다. 이런 한 사람 한 사람의 노력이 모여 개발자 조직의 성장을 이끈다.</p>
<h2>개발자라는 직장인 관점에서 행복한 직장 환경은 뭘까?</h2>
<h3>Good</h3>
<ul>
<li><span style="color: #0000ff;"><strong>실행 가능한 비전과 목표</strong></span> &#8211; 뜬구름잡는 듯한 구호는 의미가 없다. 비전과 목표는 실행 가능한 아젠다를 도출할 수 있어야 하거나, 무엇을 실행할지에 대한 지침이 되어야 한다.</li>
<li><span style="color: #0000ff;"><strong>공유</strong></span> &#8211; 무언가를 실행할 때 기술적이든 업무적이든 정보가 필요하다. 이런 정보가 투명하게 공개되고, 원할 때 찾아볼 수 있는 형태로 존재해야 한다. 그리고 다른 사람들에게도 이런 정보가 있음을 알려줘야 한다. 그래야 혼선을 최소화할 수 있고, 빠른 업무 진행이 가능하다.</li>
<li><span style="color: #0000ff;"><strong>성취와 축하(Celebration)</strong></span> &#8211; 어떤 일이 됐든 방점이 없는 일은 사람을 지치게 만든다. 반드시 우리가 이 목표를 달성했다라는 성취감을 느낄 수 있어야 한다. 이 성취감을 통해 다음번 고지를 향해 나아갈 수 있는 자신감을 얻을 수 있다. 그리고 그 성취를 모두가 함께 축해해줘야 한다. 개인의 성취보다는 우리 혹은 팀의 성취가 되어야 하고, 그 성취를 조직의 모든 사람들이 다 같이 축하해줄 수 있어야 한다. 이런 시점에 회식은 꿀맛이다.</li>
<li><span style="color: #0000ff;"><strong>실패</strong></span> &#8211; 2보 전진을 위한 1보 후퇴다. 누구나 실패할 수 있다. 하지만 실패를 통해 배운 교훈이 있고, 이 교훈이 다음번 일을 하는 발판이 되어야 한다. 가장 어이없는 건 실패를 실패 자체로 비난하는 것이다. 이러면 누구도 두려워 일을 못한다. 아마도 성공할만한 일만 골라서 하지 않을까? 실패에서 팀이 어떤 Lesson and Learn이 있었는지, 그리고 같은 실수를 두번 되풀이하지 않기 위해 어떤 방식으로 다음번 일을 준비하는지를 봐야한다.</li>
</ul>
<h3>Bad</h3>
<ul>
<li><span style="color: #ff0000;"><strong>경쟁 혹은 사내 정치</strong></span> &#8211; 누구를 위한 경쟁인가? 아이러니컬하게도 사람은 3명 이상만 모이면 정치질이라는 걸 하게 되있다. 성과 중심적인 직장내에서는 특히나 이런 정치질이 심각하다. 내가 남보다 잘해서 성과를 받기 보다는 남을 깍아내려 상대적인 우위를 점하기 위해 이런 짓을 하는 경우가 심심치않다. 일에 대한 값어치는 &#8220;고객, 동료&#8221;들에게 평가받아야 하지만, 의도적인 깍아내림은 조직을 좀먹는다.</li>
<li><span style="color: #ff0000;"><strong>단기성 금전적 인센티브</strong></span> &#8211; 성과에 대한 보상으로 인센티를 왕창주면 어떻게 될까? 그리고 다음번 평가시에 이만큼의 인센티브를 받지 못하게 되면 어떻게 생각할까? 그리고 왕창 인센티브를 받지 못한 다른 팀 혹은 구성원은 어떤 생각을 가지게 될까? 결국 인센티브를 받을만한 일들만 골라서 구성원들이 할려고 든다. 왕창받지 못한 사람은 저성과자라는 인식을 스스로 하게 되거나, 혹은 성과 불평등에 대해 이야기하기 시작한다. 그리고 자신만이 높은 성과를 받기 위해 인위적으로 정보를 숨기거나 협업을 말 그대로 방해한다.</li>
<li><span style="color: #ff0000;"><strong>회의(Meeting)</strong></span> &#8211; 회의는 말 그대로 여러 사람이 같이 머리를 맞대고 논의하기 위한 자리이다. 그리고 그 자리에선 대부분 결론이 도출되야 한다. 하지만 본인의 존재감을 드러내기 위해 회의에 들어온다. 하지만 그닥 참여한 의미는 없다. 되려 회의 시간만 길어진다. 최악의 회의 결론은 다음번 회의를 하자라는 것이다. 이런 회의가 비일비재하다. 회의가 소집되었다면 회의록이 있어야 하고 결론이 도출되어야 한다. 그리고 관심있는 사람들에게 회의록이 공유되면 된다. 본인의 소중한 1시간을 허비할 필요는 없이, 관심있다면 회의록을 살펴보면 된다.</li>
</ul>
<p>불행한 직장인은 누구일까? 아마도 매일 매순간을 성과에 얽매여 두려움에 사는게 아닐까 싶다. 성과라는 것을 아예 고민하지 않을 수는 없다. 개인적인 주관이지만 개발직군에 있는 직장인으로써 이런 성과에 직접적으로 연연하기보다는 본인의 성장이 성과와 자연스럽게 연결될 수 있는게 최선이 아닐까 싶다.</p>
<p>본인 성장을 이룬 다는건 주변의 협조없이는 불가능하다. 그리고 조직내에서 이런 협조는 조직의 문화와 직접적으로 관련되어 있다. 그리고 궁긍적으로 이런 문화가 유지되고 발전되는건 그만큼 조직장 혹은 리더의 역할이 중요하다. 다행스럽게도 라이엇게임즈 코리아에는 이를 강력하게 지원해주는 리더십이 있다. 물론 이런 리더십을 뒷배경으로 각 개인이 열심히 하는 부분들이 있기 때문에 문화가 유지 발전되는게 아닐까 싶다.</p>
<p>새로운 2019년이 시작되었고, 앞으로도 기술 및 개발 조직 문화가 발전될 수 있는 환경이 되도록 일조해야겠다.</p>
<div class = 'socialMediaOnEveryPost'><div id="sgmbShare1-4" class="sgmbShare jssocials-theme-classic sgmbWidget1-4"></div><div class="dropdownWrapper dropdownWrapper1 dropdownWrapper-for-widget " id="dropdownWrapper-for-widget">
						<div class="dropdownLabel" id="dropdownLabel-share-list"><span class="sgmbButtonListLabel1">Share List</span></div>
						<div class="dropdownPanel dropdownPanel1-4">
						</div>
					</div><script>  SGMB_URL = "http://www.chidoo.me/wp-content/plugins/social-media-builder/"; jQuery(".dropdownWrapper").hide(); SGMB_GOOGLE_ACOUNT = ""; </script><script type="text/javascript">
		jQuery(document).ready(function($){var widget = new SGMBWidget();widget.show({"id":"1","title":"common socials","options":{"currentUrl":"0","url":"","fontSize":"14","theme":"classic","buttonsPosition":"","socialTheme":"","icon":"default","buttonsPanelEffect":"No Effect","buttonsEffect":"No Effect","iconsEffect":"No Effect","buttons":"{\"facebook\":{\"label\":\"Share\",\"icon\":\"default-facebook\"},\"linkedin\":{\"label\":\"Share\",\"icon\":\"default-linkedin\"},\"twitter\":{\"label\":\"Tweet\",\"icon\":\"default-twitter\",\"via\":\"\",\"hashtags\":\"\"},\"googleplus\":{\"label\":\"+1\",\"icon\":\"default-googleplus\"}}","roundButton":"","showLabels":"on","showCounts":"","showButtonsAsList":"","setButtonsPosition":"","sgmbDropdownColor":"","sgmbDropdownLabelFontSize":"14","sgmbDropdownLabelColor":"","showButtonsOnEveryPost":"on","sgmbPostionOnEveryPost":"Left","textOnEveryPost":"","showButtonsOnMobileDirect":"on"},"buttonOptions":{"facebook":{"label":"Share","icon":"default-facebook"},"linkedin":{"label":"Share","icon":"default-linkedin"},"twitter":{"label":"Tweet","icon":"default-twitter","via":"","hashtags":""},"googleplus":{"label":"+1","icon":"default-googleplus"}},"button":["facebook","linkedin","twitter","googleplus"]}, 4, '', 'data:image/png;base64,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', '', 'http://www.chidoo.me/index.php/2018/12/31/good-company-or-good-environment-for-a-developer/'); });</script></div><script> jQuery(".socialMediaOnEveryPost").addClass("sgmb-left") </script>]]></content:encoded>
		<post-id xmlns="com-wordpress:feed-additions:1">627</post-id>	</item>
		<item>
		<title>Kafka broker memory leak in 0.10.x version</title>
		<link>http://www.chidoo.me/index.php/2018/12/27/kafka-broker-memory-leak-in-0-10-x-version/</link>
		<pubDate>Thu, 27 Dec 2018 14:54:47 +0000</pubDate>
		<dc:creator><![CDATA[chidoo]]></dc:creator>
				<category><![CDATA[개발자]]></category>
		<category><![CDATA[도구들]]></category>
		<category><![CDATA[일하기]]></category>
		<category><![CDATA[0.10.x]]></category>
		<category><![CDATA[Kafka]]></category>
		<category><![CDATA[maintenance]]></category>
		<category><![CDATA[OOM]]></category>
		<category><![CDATA[system operation]]></category>

		<guid isPermaLink="false">http://www.chidoo.me/?p=620</guid>
		<description><![CDATA[Kafka 클러스터를 한국 개발팀에서 운영한지도 한 2년 넘은 것 같다. 메시징 시스템이라고 하면 뭔가 대단한 것 같았는데, 실제로 시스템을 디자인하고 운영하다보니 별거 없더라는&#8230; 라고 뭉개고 싶지만 사실 숨기고 싶은 진실이 하나 있었다. 개발 과정에서는 이 문제를 찾을 수 없었는데, 운영을 하면서 나타난 문제점이 있었다. 카프카라는 메시지 큐가 실제로 Business Logic이라는 걸 처리하는게 없다. 또 저장하는 ...</p><p><a href="http://www.chidoo.me/index.php/2018/12/27/kafka-broker-memory-leak-in-0-10-x-version/" class="more-link">Continue reading &#8216;Kafka broker memory leak in 0.10.x version&#8217; &#187;</a>]]></description>
				<content:encoded><![CDATA[<p>Kafka 클러스터를 한국 개발팀에서 운영한지도 한 2년 넘은 것 같다. 메시징 시스템이라고 하면 뭔가 대단한 것 같았는데, 실제로 시스템을 디자인하고 운영하다보니 별거 없더라는&#8230; 라고 뭉개고 싶지만 사실 숨기고 싶은 진실이 하나 있었다.</p>
<p>개발 과정에서는 이 문제를 찾을 수 없었는데, 운영을 하면서 나타난 문제점이 있었다. 카프카라는 메시지 큐가 실제로 Business Logic이라는 걸 처리하는게 없다. 또 저장하는 데이터의 보관 주기 역시 그닥 크지 않다. 그런데&#8230; 왜&#8230; 아무리 Heap Memory의 크기를 늘려줘도 Full GC 이후에 카프카의 Java 어플리케이션의 메모리가 반환되지 않고 CPU는 미친듯이 날뛸까? 최초에는 넘 메모리를 적게 줘서 발생한 문제점인가 싶어서 메모리를 2G부터 9G까지 꾸준히 늘려갔다. 재시작 후 OOM을 외치는 시점이 좀 늘어나긴 했지만, 변함없이 찾아온다. 별수 없이 매번  Kafka Broker Application을 내렸다가 올려야 한다. 올리면 잘 돌아간다. 하지만 매번 해야한다. 시스템은 돌아가야 하니까&#8230;</p>
<p><img class="alignnone " src=" http://politicalcritique.org/file/2017/05/pexels-photo-1.jpg" width="430" height="292" /></p>
<p>해외 Conference에서 들었던 사례들은 무시무시한 수량의 노드들을 운영하고, 아무것도 거칠것이 없었다. 하지만 내가 만든 이 간단한 물건은 뭐가 문제길래 매번 CPU 혹은 Health Check Alarm을 걸어두고 알람이 올때마다 매번 내렸다가 올리는 작업들을 해야만 하는걸까? Kafka에 데이터를 보내고 받아오는 코드들을 이리저리 살펴봤지만 그닥 큰 문제점들이 보이지는 않는다. 그럼에도 OOM의 Root Cause를 확인할 방법이 뾰족히 보이지 않는다. 결국 취할 수 있는 방법은???</p>
<p><img class="alignnone " src="https://cdn0.tnwcdn.com/wp-content/blogs.dir/1/files/2018/07/Restarting-hed-796x420.jpg" width="455" height="240" /></p>
<p>별 수 있나. 하루에 한번씩 내렸다가 올리는게 가장 안전한 방법이다! 쪽팔리지만 내가 작성한 코드 수준에서 해결할 수 없는 방법이지만 운영은 되어야 하기 때문에 이 방법을 취했다.</p>
<p>그리고 2주 전까지는 잘 살아왔다. 2주 전쯤에 보안 강화를 위해 기존에 데이터를 받던 방법을 개선했다. 개선하면서 제대로 데이터가 들어오게 됐다. 와우~~</p>
<p>그런데 데이터가 많이 들어와도 너무 많이 들어온다. 정말 너무 많이 들어왔다. ㅠㅠ 하루에 한번씩 OOM을 내던 놈이 이제는 24시간을 버티질 못하네. 이런&#8230; 이제 12시간마다 한번씩 내렸다 올려야 하나?? 완전 닭짓인데, 이게 운영인가? 근데 데이터가 너무 많이 들어는데 이 데이터를 살펴봐야하지 않을까? 따지고 보니 데이터를 수집하는 시스템을 잘못 이해하는 바람에 데이터가 비정상적으로 많이 들어왔다. 이 부분을 정리하고 났더니 전반적인 데이터 처리는 줄었지만 여전히 이전에 비해서 처리하는 데이터는 확연히 많다. 여전히 24시간을 버티지는 못한다. 역시 같은 질문! 이게 운영인가?</p>
<p>Kafka broker application이 돌아가는 EC2 Instance를 높은 사양으로 변경도 해보고, broker configuration도 이리저리 바꿔봐도 약간의 차이는 있지만 OOM은 매번 발생한다. 이럴리가 없는데&#8230;</p>
<p>그래 이건 Kafka Bug다. 사용하던 버전이 0.10.1.0 이었다. 0.10.X 버전에서 발생하는 메모리 관련된 내용들을 구글링해보니 이것저것 많이 나온다. 이런 제길&#8230;  그래 버그가 있긴하구나.</p>
<blockquote data-secret="UpnEfTzkR2" class="wp-embedded-content"><p><a href="https://punchplatform.io/index.php/2018/04/24/pp-1841-kafka-memory-leak/">(PP-1841) Kafka memory leak</a></p></blockquote>
<p><iframe class="wp-embedded-content" sandbox="allow-scripts" security="restricted" src="https://punchplatform.io/index.php/2018/04/24/pp-1841-kafka-memory-leak/embed/#?secret=UpnEfTzkR2" data-secret="UpnEfTzkR2" width="600" height="338" title="&#8220;(PP-1841) Kafka memory leak&#8221; &#8212; Punchplatform" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe></p>
<p>Kafka 버전을 살펴보니 어느새 2.1.0 버전이다. 내가 시스템을 셋업할때는 최신 버전이 0.10.X 버전이었는데 2년 사이에 엄청 발전한 모양이다. 사이에 한번 나도 버전업을 하긴 했지만 운영에 신경을 많이 쓰지 못한 건 맞는 사실이다. 뭐 하루에 한번씩 재시작시키는 걸로 운영을 퉁쳤으니까 할말 다했다. 🙁</p>
<p>기존 버전으로 최신 버전인 2.1.0 버전으로 올렸다. 재시작시키는 Cron Job을 없애고 몇일 두고 봤다. 이쁜 그림을 그리면서 잘 돌아간다. 관리를 제대로 안하고 툴을 욕했던 내가 한참을 잘못했다.</p>
<p><img class="alignnone size-large wp-image-623" src="http://www.chidoo.me/wp-content/uploads/2018/12/kafka-cluster-oom-cpu-uage-1024x483.png" alt="" width="730" height="344" srcset="http://www.chidoo.me/wp-content/uploads/2018/12/kafka-cluster-oom-cpu-uage-1024x483.png 1024w, http://www.chidoo.me/wp-content/uploads/2018/12/kafka-cluster-oom-cpu-uage-300x141.png 300w, http://www.chidoo.me/wp-content/uploads/2018/12/kafka-cluster-oom-cpu-uage-768x362.png 768w, http://www.chidoo.me/wp-content/uploads/2018/12/kafka-cluster-oom-cpu-uage-730x344.png 730w" sizes="(max-width: 730px) 100vw, 730px" /></p>
<p>이제 자잘한 말 그래도의 운영 이슈가 남아있지만, 이제는 비겁한 재시작은 없다. 2년이라는 시간이 걸리긴 했지만, 그럼에도 불구하고 제대로 시스템이 운영되기 시작하니까 마음이 한결 놓인다.</p>
<div class = 'socialMediaOnEveryPost'><div id="sgmbShare1-6" class="sgmbShare jssocials-theme-classic sgmbWidget1-6"></div><div class="dropdownWrapper dropdownWrapper1 dropdownWrapper-for-widget " id="dropdownWrapper-for-widget">
						<div class="dropdownLabel" id="dropdownLabel-share-list"><span class="sgmbButtonListLabel1">Share List</span></div>
						<div class="dropdownPanel dropdownPanel1-6">
						</div>
					</div><script>  SGMB_URL = "http://www.chidoo.me/wp-content/plugins/social-media-builder/"; jQuery(".dropdownWrapper").hide(); SGMB_GOOGLE_ACOUNT = ""; </script><script type="text/javascript">
		jQuery(document).ready(function($){var widget = new SGMBWidget();widget.show({"id":"1","title":"common socials","options":{"currentUrl":"0","url":"","fontSize":"14","theme":"classic","buttonsPosition":"","socialTheme":"","icon":"default","buttonsPanelEffect":"No Effect","buttonsEffect":"No Effect","iconsEffect":"No Effect","buttons":"{\"facebook\":{\"label\":\"Share\",\"icon\":\"default-facebook\"},\"linkedin\":{\"label\":\"Share\",\"icon\":\"default-linkedin\"},\"twitter\":{\"label\":\"Tweet\",\"icon\":\"default-twitter\",\"via\":\"\",\"hashtags\":\"\"},\"googleplus\":{\"label\":\"+1\",\"icon\":\"default-googleplus\"}}","roundButton":"","showLabels":"on","showCounts":"","showButtonsAsList":"","setButtonsPosition":"","sgmbDropdownColor":"","sgmbDropdownLabelFontSize":"14","sgmbDropdownLabelColor":"","showButtonsOnEveryPost":"on","sgmbPostionOnEveryPost":"Left","textOnEveryPost":"","showButtonsOnMobileDirect":"on"},"buttonOptions":{"facebook":{"label":"Share","icon":"default-facebook"},"linkedin":{"label":"Share","icon":"default-linkedin"},"twitter":{"label":"Tweet","icon":"default-twitter","via":"","hashtags":""},"googleplus":{"label":"+1","icon":"default-googleplus"}},"button":["facebook","linkedin","twitter","googleplus"]}, 6, '', ' http://politicalcritique.org/file/2017/05/pexels-photo-1.jpg', '', 'http://www.chidoo.me/index.php/2018/12/27/kafka-broker-memory-leak-in-0-10-x-version/'); });</script></div><script> jQuery(".socialMediaOnEveryPost").addClass("sgmb-left") </script>]]></content:encoded>
		<post-id xmlns="com-wordpress:feed-additions:1">620</post-id>	</item>
		<item>
		<title>Spring 5 reactive programming ground zero</title>
		<link>http://www.chidoo.me/index.php/2018/12/13/spring-5-reactive-programming-ground-zero/</link>
		<pubDate>Wed, 12 Dec 2018 17:22:25 +0000</pubDate>
		<dc:creator><![CDATA[chidoo]]></dc:creator>
				<category><![CDATA[Architecting]]></category>
		<category><![CDATA[TDD]]></category>
		<category><![CDATA[도구들]]></category>
		<category><![CDATA[웹]]></category>
		<category><![CDATA[프로그래밍]]></category>
		<category><![CDATA[asynchronous io]]></category>
		<category><![CDATA[spring]]></category>
		<category><![CDATA[spring reactive]]></category>
		<category><![CDATA[webflux]]></category>

		<guid isPermaLink="false">http://www.chidoo.me/?p=597</guid>
		<description><![CDATA[Spring framework에서도 5.X 버전부터 Reactive 방식의 프로그래밍이 가능하다. 이게 한 1년 이상 전 이야기인 것 같다. 내 입장에서 좋기는 한데 이게 그림의 떡이었다. 대부분의 Java Backend 개발을 Springboot framework을 가지고 하고 있는데, 여기에 Spring framework만 5.X 버전으로 덜렁 넣을 수 없기 때문이다. Spring 5.X 버전을 지원하기 위해 2.X 버전이 개발중에 있었지만, Milestone 버전이었고, 옆에서 Early ...</p><p><a href="http://www.chidoo.me/index.php/2018/12/13/spring-5-reactive-programming-ground-zero/" class="more-link">Continue reading &#8216;Spring 5 reactive programming ground zero&#8217; &#187;</a>]]></description>
				<content:encoded><![CDATA[<p>Spring framework에서도 5.X 버전부터 Reactive 방식의 프로그래밍이 가능하다. 이게 한 1년 이상 전 이야기인 것 같다. 내 입장에서 좋기는 한데 이게 그림의 떡이었다. 대부분의 Java Backend 개발을 Springboot framework을 가지고 하고 있는데, 여기에 Spring framework만 5.X 버전으로 덜렁 넣을 수 없기 때문이다. Spring 5.X 버전을 지원하기 위해 2.X 버전이 개발중에 있었지만, Milestone 버전이었고, 옆에서 Early Adopter 기질을 가진 친구가 고생하는 모습을 보니 아직은 때가 아닌 것 같았다. 아직은 스프링부트 1.X 버전이나 잘 쓰자 생각했다.</p>
<p>한 반년 사이에 Springboot 2.X 정식 버전이 릴리즈됐다. 하지만 바쁘다는, 2.X 버전으로 부트 버전만 변경하는게 별 의미없다는 핑계들을 가져다대며 미적댔다. 그 사이에 다른 친구들은 프로젝트에 Spring Reactive를 Streaming 방식으로 적용해서 성공적으로 마무리를 시켰다. 사람들에게 이제 Reactive의 시대니까 백엔드도 이 방식으로 개발을 해야한다고 떠들고 다녔다. 어이없게도 정작 내가 개념을 입으로만 떠들고 아는체하고 있는게 아닌가? 가장 싫어하는 짓을 내가 하고 있으면서 그걸 모른체하고 있다는게 어이없긴 하다.</p>
<p>출장중에 잠못드는 밤이 많고, 그 시간에 꾸역꾸역 억지로 잠을 청하느니 차라리 밀린 숙제나 해야겠다라는 심정으로 자료를 찾아봤다. 간단한 몇번의 구글링만으로도 뭔가를 시작해볼 수 있는 자료가 화면을 가득 채운다. 나만의 썰 몇 가지를 주절여보고, 검색 결과로 나온 아주 괜찮은 몇가지를 추려봤다.</p>
<h2>Reactive Programming의 개념부터 정리해보자.</h2>
<p>단어적인 의미를 직역하면 &#8220;반응형&#8221; 프로그래밍이다. 반응한다라는 것으로 어떤 의미일까? 주체적으로 동작하는 것이 아니라 외부 요인에 의해서 동작이 실행된다라는 것을 의미한다. Frontend 환경에서는 이런 반응형 프로그램이 ReactJS와 같은 Javascript framework의 발전과 더불어 보편적으로 채택되고 있다. UI 환경의 동작을 실행시키는 주된 요인은 사용자의 키보드 입력 혹은 마우스 클릭과 같은 이벤트와 Backend 서버에서 보낸 데이터의 &#8220;도착&#8221; 같은 것들이 대표적이다. 이런 요인들을 Browser 혹은 Framework이 Event/Promise와 같은 형태로 Trigger 시키고, 이를 Listening하는 개발자의 코드가 실행되는 모델이다.</p>
<p>Backend 환경은 User event와 같은 것들이 없다. 다만 IO를 중심으로 데이터가 &#8220;반응&#8221;을 촉발시키는 매체가 된다. Synchronous 환경은 직렬화된 데이터 처리를 강요한다. 반응형이 될려면 당연히 Asynchronous IO 기반의 데이터 처리가 기본이 되어야 한다. 사실 컴퓨터라는 것 자체가 Asynchronous하게 동작되는 물건인데, 개발자가 편하라고 Synchrnonous progrocessing을 지원했던 건데 세월이 지나보니 다시 과거의 개념으로 회귀한 것이다. 뭐 물론 다른 차원의 이야기이지만.</p>
<p>스프링의 언어 기반인 자바는 최초에 Synchronous IO만 지원했다. 그러다 Java 1.4 시점에 NIO라는 컨셉으로 Asynchronous IO를 지원하기 시작했다. 내가 Open Manager 2.0 버전을 설계하던 즈음에 이거 나온거보고 이거다 싶어서 작업을 했던 기억이 아련하다. Async IO의 장점은 데이터를 읽어들이는데 있다. Sync IO의 경우 자신이 지정한 데이터가 도착할때까지 무작정 기다려야한다. 반면에 Async는 데이터가 도착했는지를 확인하고, 도착하지 않았다면 그 사이에 다른 작업을 수행하면 된다. 원래 IO 처리 대상이 되는 socket은 Duplex Channel 방식을 지원한다. 즉 한 socket의 FD값을 알면, 두 개 이상의 쓰레드에서 읽고, 쓰기를 동시에 할 수 있다. 그리고 Async IO는 이와 같은 duplex channel 방식의 통신이 지원되는 기반에서 동작한다.</p>
<p><img src="http://www.chidoo.me/wp-content/uploads/2018/12/asyncIO.png" alt="" width="526" height="287" class="alignnone size-full wp-image-615" srcset="http://www.chidoo.me/wp-content/uploads/2018/12/asyncIO.png 526w, http://www.chidoo.me/wp-content/uploads/2018/12/asyncIO-300x164.png 300w" sizes="(max-width: 526px) 100vw, 526px" /></p>
<p>통상 이런 일련의 흐름을 개발자가 모두 코딩하기 어렵다. 그래서 필요한 것이 일종의 엔진이다. 엔진은 데이터가 도착했는지 확인하고, 도착한 데이터를 요청한 대상(Subscriber or Listener)에게 데이터를 넘겨 처리한다. 간단히 설명했지만, 이를 실제로 동작하게 하기 위해 Thread Pool, Queue, Publish and Subscribe 등이 기본적으로 갖춰져야한다.(2004년에 이걸 다 처음부터 끝까지 구현했다라는게 놀랍기는 하다.)</p>
<p>Spring framework 5.0 / Springboot 2.0 버전은 위와 같은 실행 모델을 지원하기 위한 전체 틀을 지원한다. 여기에는 실제 작업을 수행하는 Web Controller 수준의 작업 정의(Get/Post/Put&#8230; Mapper)와 내부의 데이터 수행을 위한 Mono/Flux와 같은 이벤트 방식의 실행 모델 및 이를 지원하기 위한 API 집합등을 포함한다. 또한 기반 웹서버와의 통합도 아주 중요하다. </p>
<p>Servlet이 특정 쓰레드에 의해 단독으로 처리되는 방식이 아닌 이벤트 방식으로 동작되어야 최적의 성능을 낼 수 있기 때문이다. 때문에 Netty를 쓰라고 권고하는 것이고, 톰캣은 너무 덩치가 커서 이 방식으로 전환하기에는 적절하지 않아서 동작되도록만 맞추고 최적화는 Give Up 한 것으로 보인다.</p>
<h2>Googling&#8230;</h2>
<p>기초 개념을 알면 이제 뭘 해야할까? 개발자라면 가끔씩 무턱대고 코드를 짜보는 것도 나쁘지는 않다. 그래도 무작정하는 것보다는 잘 파악한다음에 하는 성격을 가진 분들도 있다. 그런 분들에게 도움이 될지 모르겠지만 찾아본 자료들 가운데 Wow 했던 자료들 몇개를 링크한다.</p>
<ul>
<li><a href="https://content.pivotal.io/springone-platform-2017/servlet-or-reactive-stacks-the-choice-is-yours-oh-no-the-choice-is-mine-rossen-stoyanchev" target="_blank">Servlet or Reactive Stacks: The Choice is Yours. Oh No&#8230; The Choice is Mine! &#8211; Rossen Stoyanchev</a> &#8211; 2017년 SpringOne 발표된 자료인데, 시류가 Reactive라고 무조건 MVC(Sync)를 버리고 Reactive 방식을 따르지 말라고 충고한다. Pivotal에서 Reactive를 밀고 있는 사람인데 약파는 말이 아니라 쓰는 사람 관점에서 이야기를 한다. Awesome!! 물론 더 다양한 팁과 사례도 소개된다. 1시간 10분 남짓 분량인데, 조곤조곤 이야기를 설명을 참 잘한다.</li>
<li><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#webflux" target="_blank">Web on Reactive Stack</a> &#8211; 스프링쪽에서 만든 WebFlux의 How-To 문서이다. Spring MVC 모델에 대한 개념이 있다면, 이 문서를 읽어보는 것만으로도 뛰어다닐 수 있을 것이다.</li>
<li><a href="https://projectreactor.io/docs/core/release/api/index.html?reactor/core/publisher/Mono.html" target="_blank">Mono and/or Flux</a> &#8211; Spring Reactive Programming을 하기 위해 제공되는 객체 모델은 Mono와 Flux로 나뉜다. 이름이 의미하듯이 Mono는 1회성 데이터의 Reactive model을 위해 사용되고, Flux는 Streaming 방식의 Reactive Model을 위해 사용된다. Javadoc 문서인줄 알았는데, 비동기적 데이터의 흐름이 어떻게 되는지 제공되는 method 별로 그림을 곁들여 아주 잘 설명하고 있다. 읽어보는 것만으로도 개념을 이해하는데 많은 도움이 된다.</li>
<li><a href="https://projectreactor.io/docs/core/release/reference/index.html#which-operator" target="_blank">Which operator</a> &#8211; Mono/Flux를 사용해서 개발을 하더라도 Fully Reactive하게 코드를 작성하는게 만만하지는 않다. 이미 Synchronous 환경에 생각이 굳어져있어서, 특정 상황에 어떤 method를 쓰는게 좋을지 까리까리한 경우가 종종 발생한다.  이럴 때 이 문서를 참고하면 상황별로 어떻게 Reactive task를 시작하는게 좋을지 혹은 병렬로 처리된 2개의 Reactive Task를 Merge 시킬지에 대한 아이디어를 얻을 수 있다.</li>
</ul>
<p>&nbsp;</p>
<h2>Springboot 2.X에서 Reactive project setup</h2>
<p>오래 해보지는 않았지만, 가장 좋은 설정 조합은 WebFlux만을 사용해서 프로젝트를 셋팅하는 것이다. 이렇게 결심했다면 다음의 설정으로 처음 시작을 해보는게 좋다. </p>
<pre class="brush: xml; title: ; notranslate">
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
&lt;/dependency&gt;
</pre>
<p>물론 원한다면 spring-boot-starter-web artifact를 추가할 수 있다. 이려면 MVC 방식과 Reactive 방식 모두를 사용해서 코드 작업을 해볼 수 있다. 단점은 MVC 방식이 훨 쓉기 때문에 원래 할려고 했던 Reactive를 금새 포기하게 될거라는거. 이왕 할려면 맘을 독하게 먹는게 좋지 않을까? 한가지 덧붙힌다면 starter-web artifact를 사용하는 경우, 기반 어플리케이션 서버가 Tomcat 이라는 점. 위의 구글링한 결과 가운데 첫번째 동영상 링크를 봤다면 알겠지만, 톰캣은 Servlet 요청을 Synchronous 방식으로 구현했다. 돌려 말하면 요청의 시작부터 끝까지를 완전 Reactive 방식으로 처리가 안된다. WebFlux 단독으로 사용하면 Servlet 스펙을 Asynchronous하게 구현한 Netty가 기반 어플리케이션 서버가 된다. Full Async 혹은 Reactive 방식으로 구현이 가능하다. 물론 starter-web artifact를 사용하더라도 설정을 추가로 잡으면 Netty를 쓸 수 있다. 하지만 할거면 제대로 해보라는게 충고 아닌 충고다. 영역한 동물은 쉬운 길이 있으면 굳이 어려운 길을 고집하지 않고 쉬운 곳으로 방향을 잡기 마련이다.</p>
<p>Spring reactive programming에서 아래와 같은 2가지 실행 모델을 지원한다.</p>
<ul>
<li>Mono &#8211; 단일 값에 대한 처리</li>
<li>Flux &#8211; 서로 독립적인 복수 값들을 처리. 스트리밍 방식으로 떼이터를 처리할 때 주로 사용한다. 스트리밍 방식의 개념은 대강 할지만 여기에서 썰을 풀정도는 아니라서 스킵!</li>
</ul>
<p>설명을 위해 이제부터는 Mono를 가지고 계속 이야기를 하겠다. 그림과 같이 Mono는 Flow를 가진다. Reactive programming이란 우리는 흐르는 과정에서 실행되길 원하는 코드를 lambda를 거치게 만드는거다. That&#8217;s it. 간단히 보자면 간단하다. 약간 어려운 부분들이 있다면, 대강 아래 같은 것들이지 않을까 싶다.</p>
<ul>
<li>Mono가 가지는 Value object의 immutable refernece를 갖는다. 중요한 점은 reference가 immutable이라는거지 value object의 state(or value)는 변경 가능하다라는 점이다.</li>
<li>map() 혹은 비슷한 함수를 사용해 다른 타입의 Value object를 만들었다면, 그 객체에 대한 새로운 Mono가 만들어지고, 새로운 흐름이 만들어진다. 대부분의 경우에는 하나의 흐름을 상대하기 때문에 굳이 이런저런 걱정을 할 필요는 없다. 그리고 다른 흐름이 생겼다고, 원래 있던 흐름을 어케 정리하거나 할 필요는 없다. 이게 쓰레드나 파일과 같이 시스템의 리소스를 잡아먹는 그런 어마무시한 놈들은 아니라서.</li>
<li>여러 Mono들의 값들을 한꺼번에 다뤄야하는 경우가 있다. Mono는 흐름이지 직접적인 실행은 쓰레드 풀에 있는 언놈일지도 모르는 쓰레드가 담당한다. 기대 결과를 기다리는 Mono들이 준비가 된 상태인지를 확인하고, 그 상황에서 우리가 지정한 function이 실행되기 위해 zip() 혹은 when()과 비슷한 기능들을 활용할 수 있다.</li>
<li>Java 개발자들이 lambda를 좋아한다고 생각안해서 그런지 모르겠지만, BiFunction() 혹은 TriFunction() 같은걸 쓰는 경우가 종종 발생한다. 자바 언어가 Strong typed language이기 때문이라고 추측을 해보지만, 무식하게 생겼다라는 느낌을 지울 수 없다. Mono/Flux 클래스에서 지원하는 메소드들이 이런 것들을 많이 활용하기 때문에 어떤 방식으로 Lambda 함수를 받아서 처리하는지 사전에 알아두는게 좋다. 안그럼 좀 많이 헷갈린다.</li>
</ul>
<p>가장 많이 등장하는 그림이 아래 그림과 같다. 흐름이 종료되지 않으면 계속 그 흐름 과정에서 객체는 살아있다. 그리고 다른 객체 타입으로 변환되어 만들어지면, 그 순간 새로운 모노가 만들어진다.<br />
<img class="alignnone size-large" src="https://raw.githubusercontent.com/reactor/reactor-core/v3.1.3.RELEASE/src/docs/marble/mono.png" width="640" height="227" /></p>
<p>괜히 궁금해지는 부분! Mono 객체가 종료되지 않은 상태로 있다면 이 객체는 Garbage collection 대상이 되나? 이전의 테스트 상황에서 GC에 대한 부분을 구체적으로 살펴보지 않았지만 30분정도 부하 테스트에서 성능상 큰 문제가 없었던 것으로 봐서 GC 처리되는 것 같기는 하다. 최근에 하도 GC 문제 때문에 고생을 좀 해서 그런가 그래도 안전하게 할려면 안전한 종료 처리를 하는게 맞지 않을까 싶다.</p>
<p>이런 이해를 바탕으로 간단히 작업해본 셧다운(Shutdown) 로직 가운데 일부다.</p>
<pre class="brush: java; title: ; notranslate">
  @GetMapping(&quot;/{game}/{id}&quot;)
  @ResponseStatus(HttpStatus.OK)
  public Mono&lt;PlayPermission&gt; canPlayTheGame(@PathVariable String game, @PathVariable String id) {
      return playerService.identifyPlayer(id)
                          .doOnSuccess(playerInfo -&gt; ifFalse(gameService.isPlayableAge(game, playerInfo.calculateAge()), NotAvailableAgeResponseException.class))
                          .map((playerInfo) -&gt; new PlayPermission(game, id, Permission.ALLOWED));
  }
</pre>
<p>PlayerService에서 구현한 identifyPlayer는 WebClient를 통해 RESTful response를 받는다.</p>
<pre class="brush: java; title: ; notranslate">
  public Mono&lt;PlayerAccount&gt; identifyPlayer(String id) {
    return webClient.get().uri(&quot;/api/v1/account/&quot; + id)
                    .retrieve()
                    .onStatus(Predicate.isEqual(HttpStatus.NOT_FOUND), response -&gt; Mono.error(new NotExistingPlayerResponseException(puuid)))
                    .bodyToMono(KasPlayerDto.class)
                    .map(kasInfo -&gt; buildPlayerAccount(kasInfo));
  }
</pre>
<h2>So how about?</h2>
<p>요 설정을 기반으로 했을 때 성능 테스트 결과를 얻었다.<br />
<img src="http://www.chidoo.me/wp-content/uploads/2018/12/spring-reactive-loadtest.png" alt="" width="640" class="alignnone size-full wp-image-607" srcset="http://www.chidoo.me/wp-content/uploads/2018/12/spring-reactive-loadtest.png 915w, http://www.chidoo.me/wp-content/uploads/2018/12/spring-reactive-loadtest-300x189.png 300w, http://www.chidoo.me/wp-content/uploads/2018/12/spring-reactive-loadtest-768x484.png 768w, http://www.chidoo.me/wp-content/uploads/2018/12/spring-reactive-loadtest-730x460.png 730w" sizes="(max-width: 915px) 100vw, 915px" /></p>
<p>1000 Concurrent User를 m4.xlarge(4 Core, 8G Mem) 장비를 대상으로 실행했을 때, 466 TPS를 보였다. 재미있는 건 평균 응답 시간이 1초(1044 ms)다.<br />
딱 곧이 곧대로 보자면, 4개의 Core로 처리할 수 있는 작업이 4개라는 이야기다. 음?</p>
<p>물론 곧이 곧대로 세상을 보지는 않을 것이다. 해당 Thread가 IO처리를 하면, 당연히 OS는 그 쓰레드를 Context Switching시키고, 다른 쓰레드를 CPU에 올려서 일을 시킬 것이다. 즉 처리량을 늘릴려면 쓰레드를 정량적으로 늘리면 된다. 하지만 일정 개수를 초과하는 쓰레드는 Context Switching 비용만을 증가실킬 뿐 효율성의 향상을 초래하지는 못한다.</p>
<p>여기에서 설명한 예제는 2개의 외부 연동 포인트를 가지고 있다. 첫번째는 회원 정보 연동을 위해 External Service를 RESTful endpoint로 요청하는 구간이고, 해당 계정 사용자가 해당 시간에 시스템에 접근하는 것을 허용할지 말지를 조회하기 위한 Repository 조회다. 각 단위 연동 시간이 아래와 같다고 하자.</p>
<ul>
<li><b>External RESTful query</b> &#8211; 60ms</li>
<li><b>Repository query</b> &#8211; 20ms</li>
</ul>
<p>이외 부차적인 JSON Serialization/Deserialization 등등을 위해 소모되는 시간까지 고려했을때, 총 소요 시간은 계산하기 쉽게 100ms라고 가정하자. Synchronous한 방법으로 Transaction이 처리된다고 가정하면 1개 Core에서 초당 수행 가능한 건수는 10건이다. 4개 Core라고 하면 단순 계산으로 40건을 처리할 수 있다. </p>
<p><img src="http://www.chidoo.me/wp-content/uploads/2017/05/really.jpg" alt="Business people standing with question mark on boards" width="250" class="size-full wp-image-446" srcset="http://www.chidoo.me/wp-content/uploads/2017/05/really.jpg 550w, http://www.chidoo.me/wp-content/uploads/2017/05/really-300x201.jpg 300w" sizes="(max-width: 550px) 100vw, 550px" /><br />
헐&#8230; 근데 근데 부하 테스트 결과가 466 TPS라고? 사기아님?</p>
<p><img src="http://www.chidoo.me/wp-content/uploads/2018/12/transaction-execution-cost.png" alt="" width="466" height="349" class="alignnone size-full wp-image-611" srcset="http://www.chidoo.me/wp-content/uploads/2018/12/transaction-execution-cost.png 466w, http://www.chidoo.me/wp-content/uploads/2018/12/transaction-execution-cost-300x225.png 300w" sizes="(max-width: 466px) 100vw, 466px" /></p>
<p>사기라고 생각할 수 있지만, 위의 그림을 보면 납득이 될 것이다. 실제 어플리케이션의 쓰레드를 통해 실행되는 Code의 총 실행 시간은 20ms 밖에는 되질 않는다. 나머지 시간은 외부 시스템들(여기에서는 External Service와 Respository)에게 정보를 요청하고, 그 결과를 받는걸 기다리는 시간이다. 따라서 전체 CPU의 시간을 온전히 어플리케이션의 수행을 위해 사용한다면 50(1 core당 처리 가능한 Transaction 수) x 4 = 200개를 처리할 수 있다! </p>
<p>쉬운 이해를 위해 어플리케이션 자체 처리 시간을 20ms로 산정했지만, 실제 작성된 코드는 아름다운 최적화 알고리즘과 데이터 구조로 내부 처리 시간은 10ms안쪽에서 실행되기 때문에 466TPS 라는 숫자가 나올 수 있었다. 🙂</p>
<p>근데 MVC 방식으로 하든 Reactive 방식이든 정말 성능에 영향을 미치나? 당연히 미친다. 왜? 어떤 사람은 IO가 발생하면 쓰레드는 Context Switching되고, 다른 쓰레드가 CPU에 의해 실행되기 때문에 성능은 비슷해야하는거 아니냐고 반론은 제기할 수 있다. 틀린 말이기도 하고 올바르게 문제를 지적하기도 했다. 성능에 영향일 미치는 요인은 바로 Context Switching에 있다. Context Switching 자체도 결국 처리는 CPU에 의해 발생된다. 시스템이 CPU를 많이 잡아드시면 드실수록 사용자 프로세스(어플리케이션)이 CPU를 실제 일을 위해서 사용할 시간이 줄어든다. 바꿔말하면 열일할 수 없다.</p>
<p>Reactive 방식으로 열일 시킬려고 할 때 항상 주의해야할 부분이 있다. 바로 IO에 대한 처리다. IO 처리를 User code 관점에서 처리하면 안된다. 이러면 비용대비 효율성이 떨어진다. 이유는 IO에 대한 관리를 Reactive Framework에서 관리해줄 때 최고의 효과를 볼 수 있기 때문이다. User code 수준에서 IO에 대한 주도권을 가지면 IO 처리가 완료됐을 때 User code의 쓰레드가 이를 직접 제어해야한다. </p>
<p><img src="http://www.chidoo.me/wp-content/uploads/2018/12/MVC-SynchronousIO.png" alt="" width="451" height="342" class="alignnone size-full wp-image-612" srcset="http://www.chidoo.me/wp-content/uploads/2018/12/MVC-SynchronousIO.png 451w, http://www.chidoo.me/wp-content/uploads/2018/12/MVC-SynchronousIO-300x227.png 300w" sizes="(max-width: 451px) 100vw, 451px" /></p>
<p>이 말은 쓰레드가 위의 그림에서처럼 기다려야한다는 의미이고, Context switching을 이용해야한다는 의미다. 그렇기 때문에 Reactive Framework에서 제공하는 WebClient 혹은 Reactive한 Repository들을 사용해야 한다.</p>
<p><img src="http://www.chidoo.me/wp-content/uploads/2018/12/Reactive-AsyncIO.png" alt="" width="798" height="271" class="alignnone size-full wp-image-613" srcset="http://www.chidoo.me/wp-content/uploads/2018/12/Reactive-AsyncIO.png 798w, http://www.chidoo.me/wp-content/uploads/2018/12/Reactive-AsyncIO-300x102.png 300w, http://www.chidoo.me/wp-content/uploads/2018/12/Reactive-AsyncIO-768x261.png 768w, http://www.chidoo.me/wp-content/uploads/2018/12/Reactive-AsyncIO-730x248.png 730w" sizes="(max-width: 798px) 100vw, 798px" /></p>
<p>상상도이긴 하지만 실제 Reactive의 경우, 쓰레드의 Context에 의존하는게 아니라 각각의 Queue를 통해 User code의 control을 제어한다. 마찬가지로 IO에 대한 요청 역시 User code에서 이를 직접 제어하는 것이 아니라 Reactive Repository를 통해 필요한 데이터 Request를 위임한다. 그러면 IO Dispatcher 같은 놈이 데이터를 Connection Pool을 통해 실제 데이터 저장소 혹은 External Service에 전달한다. 이 과정에서 Async IO를 하기 때문에 굳이 Connection을 물고 기다리는 것이 아니라 계속 다른 요청을 전달한다. 물론 Connection Polling을 통해 특정 Connection에 응답이 도착하면 이를 관련된 Request에 Mapping하고 궁극적으로는 Mono/Flux 객체를 Reactive Queue에 넣어서 쓰레드가 어플리케이션 수준에서 다음 작업을 이어가게 한다. 이러한 이유로 RESTful Request를 처리하기 위해서는 Reactive에서는 RestTemplate이 아닌 WebClient를 사용해야 한다.</p>
<p>이 과정을 통해 시스템에 의한 개입을 최소화하여 어플리케이션 수준의 Performance를 극대화하는 것이 Reactive의 핵심이다.</p>
<h2>Reactive programming에서 주의할 점들</h2>
<p>일반적인 Sync 코딩 방법과는 달리 몇가지 부분들을 주의해야한다. 이 섹션은 앞으로 나도 작업을 하면서 보완해나갈 예정이다. 얼마나 잘 오류를 만들지에 따라 내용이 풍부해질지 아니면 빈약한 껍데기로 남을지는 모르겠다.</p>
<ul>
<li> 코딩 관점에서 반드시 생각할 점은 실행되는 쓰레드를 기다리게 만들면 안된다는 것이다. 로직을 실행하기 위해 필요한 데이터를 받아야 한다. RESTful API, NoSQL, MySQL이든 이건 IO를 통해 받기 마련이다. 이 과정에 Synchronous 한 부분이 들어간다면, 연산을 해야할 쓰레드가 불필요하게 대기해야한다. 이러면 Async 방식의 효율성이 크게 저하된다. </li>
<li> 비슷한 맥락으로 Mono/Flux에서 지원하는 block() 함수도 실제 런타임 코드에서는 사용하지 말아야 한다. block() 함수는 연관된 Async 동작이 모두 완료될 때까지 현재 쓰레드를 마찬가지로 대기하게 만든다. 디버깅을 위해 한시적으로 사용하는 용도로는 가끔씩 사용할 수 있다. </li>
</ul>
<div class = 'socialMediaOnEveryPost'><div id="sgmbShare1-8" class="sgmbShare jssocials-theme-classic sgmbWidget1-8"></div><div class="dropdownWrapper dropdownWrapper1 dropdownWrapper-for-widget " id="dropdownWrapper-for-widget">
						<div class="dropdownLabel" id="dropdownLabel-share-list"><span class="sgmbButtonListLabel1">Share List</span></div>
						<div class="dropdownPanel dropdownPanel1-8">
						</div>
					</div><script>  SGMB_URL = "http://www.chidoo.me/wp-content/plugins/social-media-builder/"; jQuery(".dropdownWrapper").hide(); SGMB_GOOGLE_ACOUNT = ""; </script><script type="text/javascript">
		jQuery(document).ready(function($){var widget = new SGMBWidget();widget.show({"id":"1","title":"common socials","options":{"currentUrl":"0","url":"","fontSize":"14","theme":"classic","buttonsPosition":"","socialTheme":"","icon":"default","buttonsPanelEffect":"No Effect","buttonsEffect":"No Effect","iconsEffect":"No Effect","buttons":"{\"facebook\":{\"label\":\"Share\",\"icon\":\"default-facebook\"},\"linkedin\":{\"label\":\"Share\",\"icon\":\"default-linkedin\"},\"twitter\":{\"label\":\"Tweet\",\"icon\":\"default-twitter\",\"via\":\"\",\"hashtags\":\"\"},\"googleplus\":{\"label\":\"+1\",\"icon\":\"default-googleplus\"}}","roundButton":"","showLabels":"on","showCounts":"","showButtonsAsList":"","setButtonsPosition":"","sgmbDropdownColor":"","sgmbDropdownLabelFontSize":"14","sgmbDropdownLabelColor":"","showButtonsOnEveryPost":"on","sgmbPostionOnEveryPost":"Left","textOnEveryPost":"","showButtonsOnMobileDirect":"on"},"buttonOptions":{"facebook":{"label":"Share","icon":"default-facebook"},"linkedin":{"label":"Share","icon":"default-linkedin"},"twitter":{"label":"Tweet","icon":"default-twitter","via":"","hashtags":""},"googleplus":{"label":"+1","icon":"default-googleplus"}},"button":["facebook","linkedin","twitter","googleplus"]}, 8, '', 'http://www.chidoo.me/wp-content/uploads/2018/12/asyncIO.png', '', 'http://www.chidoo.me/index.php/2018/12/13/spring-5-reactive-programming-ground-zero/'); });</script></div><script> jQuery(".socialMediaOnEveryPost").addClass("sgmb-left") </script>]]></content:encoded>
		<post-id xmlns="com-wordpress:feed-additions:1">597</post-id>	</item>
		<item>
		<title>Software developer vs Software engineer vs Full stack developer</title>
		<link>http://www.chidoo.me/index.php/2018/10/22/software-developer-vs-software-engineer-vs-full-stack-developer/</link>
		<pubDate>Mon, 22 Oct 2018 14:39:56 +0000</pubDate>
		<dc:creator><![CDATA[chidoo]]></dc:creator>
				<category><![CDATA[일하기]]></category>
		<category><![CDATA[Developer]]></category>
		<category><![CDATA[Engineer]]></category>
		<category><![CDATA[Fullstack]]></category>
		<category><![CDATA[Software]]></category>

		<guid isPermaLink="false">http://www.chidoo.me/?p=579</guid>
		<description><![CDATA[O&#8217;Reilly에서 보내주는 뉴스레터 메일에 가끔 재미있는 글이 있다. 오늘자 메일에 Software 분야에 일하는 사람들의 직군 호칭에 대한 레딧 이야기가 있다. 용어만 보면 나도 가끔 뭐가 뭔지 헷갈리는데 확실히 정확한 정의는 없는 것 같다. 각 호칭들에 대한 주관적인 생각들이 댓글로 달렸다. 주관적이지만 분류도 있고, 개인 경험을 대비한 솔직한 이야기들이 솔솔하다. 여러 댓글들 가운데 맘에 드는 글은 ...</p><p><a href="http://www.chidoo.me/index.php/2018/10/22/software-developer-vs-software-engineer-vs-full-stack-developer/" class="more-link">Continue reading &#8216;Software developer vs Software engineer vs Full stack developer&#8217; &#187;</a>]]></description>
				<content:encoded><![CDATA[<p>O&#8217;Reilly에서 보내주는 뉴스레터 메일에 가끔 재미있는 글이 있다. 오늘자 메일에 Software 분야에 일하는 사람들의 직군 호칭에 대한 <a href="https://www.reddit.com/r/SoftwareEngineering/comments/9o8n8h/software_developer_vs_software_engineer_vs_full/?mkt_tok=eyJpIjoiTVRVM09XTTFNR0ZsTURnNSIsInQiOiI1bWRHV0VMQXNhSExGbFkzN3VQaVFDRHhBZGNpSUt0bXZEY0dFVEdLbll3bHNZZ3JMcnJEUWpyR1RMOVhhNzFHVzNtRG1iVFQ3VEJ5cExMTXRhSnBxK050VXd1VmhwZVRXS29TdGZ0ZTNZWlAzb1JzVGl5NEU5aUlJNm9WMXVoWSJ9">레딧 이야기</a>가 있다. 용어만 보면 나도 가끔 뭐가 뭔지 헷갈리는데 확실히 정확한 정의는 없는 것 같다. 각 호칭들에 대한 주관적인 생각들이 댓글로 달렸다. 주관적이지만 분류도 있고, 개인 경험을 대비한 솔직한 이야기들이 솔솔하다.</p>
<p>여러 댓글들 가운데 맘에 드는 글은 요글이 아닐까 싶다.</p>
<blockquote><p>Here&#8217;s are my <em>very</em> simplistic definitions:</p>
<p><strong>Software Developer</strong></p>
<p>You know one, maybe two, programming languages well enough to implement a somebody else&#8217;s design.</p>
<p><strong>Software Engineer</strong></p>
<p>You know how to learn <em>any</em> language, how to choose the right one for the problem you need to solve and can create new designs.</p>
<p><strong>Full Stack Developer</strong></p>
<p>You&#8217;re a <em>Software Developer</em> that can work on both front-end and back-end software.</p>
<p>In my experience, a lot of people who consider themselves software engineers lack the adaptability and competency to make good tool and design choices.</p></blockquote>
<p>개인적으로 제일 맘에 드는 일은 developer 역할을 수행할 때다. 가장 편하게 코딩을 즐길 수 있으니까.</p>
<p>분류를 나누는게 과연 의미가 있을까? 종종 이런 질문이 생각든다. 우리가 평사원/대리/과장/부장 계층을 나누듯 개발 분야에서도 주니어/걍/시니어/아키텍트&#8230; 다양한 색깔의 완장을 둔다. 그리고 이걸 내세워서 경쟁하게 만든다. 치열한 경쟁의 결과물인 완장은 조직 안에 자신의 권력을 보장한다. 혹은 &#8220;보장한다&#8221; 라는 환상을 심어준다. 지내고 보면 쓸데없는 짓이고, 괜한 맘고생을 뒤짚어 쓰는 일이다.</p>
<p>개발자는 개발에 집중하고, 좋은 코드를 작성하고, 그 일과 과정이 즐거우면 된다. 이 일에 충성하는 사람을 잘 관찰하고 성장의 과정이 조직의 발전과 괘를 맞춰줄 수 있도록 충고를 해주는 관리자가 있다면 그 조직은 흥할 것이다.</p>
<p>개발자는 관리자가 되어서는 안된다. 이유는 뻔하다. 그 관리자와 다른 개발자들이 어떻게 PR 리뷰를 편하게 주고받을 수 있겠나? 동등한 관계에서 주고받는 리뷰와 피드백은 개발자 성장의 가장 큰 밑거름이다. 지식과 경험의 많고 적은 차이가 있을 뿐이지 코드를 작성하고 하나의 어플리케이션을 만든다는 점에서 같은 위치에 있어야 한다.</p>
<p>이렇든 저렇든 작은 조직에서 많은 걸 바랄 수는 없다. 하지만 스스로 조심 또 조심해야할 일이다.</p>
<div class = 'socialMediaOnEveryPost'><div id="sgmbShare1-10" class="sgmbShare jssocials-theme-classic sgmbWidget1-10"></div><div class="dropdownWrapper dropdownWrapper1 dropdownWrapper-for-widget " id="dropdownWrapper-for-widget">
						<div class="dropdownLabel" id="dropdownLabel-share-list"><span class="sgmbButtonListLabel1">Share List</span></div>
						<div class="dropdownPanel dropdownPanel1-10">
						</div>
					</div><script>  SGMB_URL = "http://www.chidoo.me/wp-content/plugins/social-media-builder/"; jQuery(".dropdownWrapper").hide(); SGMB_GOOGLE_ACOUNT = ""; </script><script type="text/javascript">
		jQuery(document).ready(function($){var widget = new SGMBWidget();widget.show({"id":"1","title":"common socials","options":{"currentUrl":"0","url":"","fontSize":"14","theme":"classic","buttonsPosition":"","socialTheme":"","icon":"default","buttonsPanelEffect":"No Effect","buttonsEffect":"No Effect","iconsEffect":"No Effect","buttons":"{\"facebook\":{\"label\":\"Share\",\"icon\":\"default-facebook\"},\"linkedin\":{\"label\":\"Share\",\"icon\":\"default-linkedin\"},\"twitter\":{\"label\":\"Tweet\",\"icon\":\"default-twitter\",\"via\":\"\",\"hashtags\":\"\"},\"googleplus\":{\"label\":\"+1\",\"icon\":\"default-googleplus\"}}","roundButton":"","showLabels":"on","showCounts":"","showButtonsAsList":"","setButtonsPosition":"","sgmbDropdownColor":"","sgmbDropdownLabelFontSize":"14","sgmbDropdownLabelColor":"","showButtonsOnEveryPost":"on","sgmbPostionOnEveryPost":"Left","textOnEveryPost":"","showButtonsOnMobileDirect":"on"},"buttonOptions":{"facebook":{"label":"Share","icon":"default-facebook"},"linkedin":{"label":"Share","icon":"default-linkedin"},"twitter":{"label":"Tweet","icon":"default-twitter","via":"","hashtags":""},"googleplus":{"label":"+1","icon":"default-googleplus"}},"button":["facebook","linkedin","twitter","googleplus"]}, 10, '', 'http://www.chidoo.me/wp-content/plugins/social-media-builder//img/no-image.png', '', 'http://www.chidoo.me/index.php/2018/10/22/software-developer-vs-software-engineer-vs-full-stack-developer/'); });</script></div><script> jQuery(".socialMediaOnEveryPost").addClass("sgmb-left") </script>]]></content:encoded>
		<post-id xmlns="com-wordpress:feed-additions:1">579</post-id>	</item>
		<item>
		<title>About the react-redux and keeping the global states in the persistent manner</title>
		<link>http://www.chidoo.me/index.php/2018/09/11/about-the-react-redux-and-keeping-the-global-states-in-the-persistent-manner/</link>
		<pubDate>Tue, 11 Sep 2018 14:41:57 +0000</pubDate>
		<dc:creator><![CDATA[chidoo]]></dc:creator>
				<category><![CDATA[Architecting]]></category>
		<category><![CDATA[웹]]></category>
		<category><![CDATA[프로그래밍]]></category>
		<category><![CDATA[javascript]]></category>
		<category><![CDATA[react]]></category>
		<category><![CDATA[react-persist]]></category>
		<category><![CDATA[react-redux]]></category>

		<guid isPermaLink="false">http://www.chidoo.me/?p=570</guid>
		<description><![CDATA[I&#8217;m a pretty new one in the developing the frontend app in the web. Making a user interface in the web with HTML, CSS, and JS was a very tedious work and its code writing was so much ugly because of my short knowledge. If I had tried to learn the core nature of JS ...</p><p><a href="http://www.chidoo.me/index.php/2018/09/11/about-the-react-redux-and-keeping-the-global-states-in-the-persistent-manner/" class="more-link">Continue reading &#8216;About the react-redux and keeping the global states in the persistent manner&#8217; &#187;</a>]]></description>
				<content:encoded><![CDATA[<p>I&#8217;m a pretty new one in the developing the frontend app in the web. Making a user interface in the web with HTML, CSS, and JS was a very tedious work and its code writing was so much ugly because of my short knowledge. If I had tried to learn the core nature of JS in the early days, it could be one of my best languages in the development.  Unfortunately, there was no such poor language than JS when I saw its beginning and its characteristics as a programming language. It has become the dominant programming language in the development world.</p>
<p>In recent days, I&#8217;ve fallen in love with the ReactJS app in the web. I&#8217;d hated the UI programming with any sorts of language, from VC++ to WEB(Mostly with HTML). But the ReactJS helps me to build a humble web app with full functionalities we need. Its code looks very good by adopting the functional and asynchronous style.  Its functional coding style helps the asynchronous event handling in a straightforward way.</p>
<h1>Redux and the management of the state</h1>
<p>But one of the headaches we should care is the separation of the logic from the UI. The frontend and backend system development approach has helped us define a clear role and responsibility and most of the critical business logic is on the backend side. However, some fraction of codes is related with the none UIs, just like the interactions with the backend. The values returned by the backend defines what actions or interaction should happen between the frontend app and a user. We call the set of values who controls the interaction as &#8220;<strong>states</strong>&#8220;. According to the characteristics of the data, some states are meaningful only a specific page. On the other hand, some states are valuable in the overall app and need to be shared by all pages or workflows in the app. In ReactJS, we call it the first as the &#8220;<strong>local states</strong>&#8220;, the other as the &#8220;<strong>global states</strong>&#8220;.</p>
<p>As far as I know, one of the many reasons why the redux feature has been introduced is to cover the management of the global states. The global states are very important resources and it should be managed in a controlled way. It means we should not make it be modified by anyone because it can do. To achieve this goal, it has adopted the value modification with the state machine along with the asynchronously executing observers. Anyone can reference values of the global states via the <em><span style="text-decoration: underline;"><strong>component&#8217;s properties</strong></span></em>, which are read-only and you cannot modify it directly.</p>
<p>You can see the technical details in the following resources.</p>
<ul>
<li>https://redux-observable.js.org/</li>
<li>https://redux-observable.js.org/docs/basics/Epics.html</li>
<li>https://redux.js.org/basics/reducers</li>
<li>Simple online code writing and running tool: http://jsbin.com/jexomi/edit?js,output</li>
<li>https://redux-observable.js.org/docs/Troubleshooting.html#rxjs-operators-are-missing-eg-typeerror-actionoftypeswitchmap-is-not-a-function</li>
</ul>
<p>It is a pretty awesome framework for many reasons.</p>
<ul>
<li>It allows you to manage the global values in the structured and controlled way via the state transitions.</li>
<li>Its architectural guide enforces the separation of the logical data manipulation from the UIs who trigger the action by a user.</li>
<li>It provides the simple global value reference via ReactJS component&#8217;s properties in a safe way.</li>
</ul>
<h2>But how about the local states?</h2>
<h2>Separation of concerns between UI and the logic vs Aggregating common concerns</h2>
<h1>Persistence</h1>
<p>Well, the redux-observable is a good solution to handle the global state management but it doesn&#8217;t keep the last global state in the browser. If you hit the current URL in the browser&#8217;s address bar, booms!! All the states kept in your web app are reset by the default values. To keep it, we should make one of the utilities such as the local storage, cookies, and sessions. The redux-persist supports the feature, not hurting the existing code. It requires a minimal routing change and offers a way to share the information among separate pages.</p>
<ul>
<li>https://www.npmjs.com/package/redux-persist#nested-persists</li>
</ul>
<p>The &#8220;Transform&#8221; should be your consideration to keep the local data safe. The data deletion is the simplest way to achieve this goal and the following guides can offer the way.</p>
<ul>
<li>https://github.com/gabceb/redux-persist-transform-expire</li>
<li>https://github.com/maxdeviant/redux-persist-transform-encrypt</li>
</ul>
<p>It is the first summary of my javascript/react programming and I will try to keep posting articles related to it sooner or later.</p>
<div class = 'socialMediaOnEveryPost'><div id="sgmbShare1-12" class="sgmbShare jssocials-theme-classic sgmbWidget1-12"></div><div class="dropdownWrapper dropdownWrapper1 dropdownWrapper-for-widget " id="dropdownWrapper-for-widget">
						<div class="dropdownLabel" id="dropdownLabel-share-list"><span class="sgmbButtonListLabel1">Share List</span></div>
						<div class="dropdownPanel dropdownPanel1-12">
						</div>
					</div><script>  SGMB_URL = "http://www.chidoo.me/wp-content/plugins/social-media-builder/"; jQuery(".dropdownWrapper").hide(); SGMB_GOOGLE_ACOUNT = ""; </script><script type="text/javascript">
		jQuery(document).ready(function($){var widget = new SGMBWidget();widget.show({"id":"1","title":"common socials","options":{"currentUrl":"0","url":"","fontSize":"14","theme":"classic","buttonsPosition":"","socialTheme":"","icon":"default","buttonsPanelEffect":"No Effect","buttonsEffect":"No Effect","iconsEffect":"No Effect","buttons":"{\"facebook\":{\"label\":\"Share\",\"icon\":\"default-facebook\"},\"linkedin\":{\"label\":\"Share\",\"icon\":\"default-linkedin\"},\"twitter\":{\"label\":\"Tweet\",\"icon\":\"default-twitter\",\"via\":\"\",\"hashtags\":\"\"},\"googleplus\":{\"label\":\"+1\",\"icon\":\"default-googleplus\"}}","roundButton":"","showLabels":"on","showCounts":"","showButtonsAsList":"","setButtonsPosition":"","sgmbDropdownColor":"","sgmbDropdownLabelFontSize":"14","sgmbDropdownLabelColor":"","showButtonsOnEveryPost":"on","sgmbPostionOnEveryPost":"Left","textOnEveryPost":"","showButtonsOnMobileDirect":"on"},"buttonOptions":{"facebook":{"label":"Share","icon":"default-facebook"},"linkedin":{"label":"Share","icon":"default-linkedin"},"twitter":{"label":"Tweet","icon":"default-twitter","via":"","hashtags":""},"googleplus":{"label":"+1","icon":"default-googleplus"}},"button":["facebook","linkedin","twitter","googleplus"]}, 12, '', 'http://www.chidoo.me/wp-content/plugins/social-media-builder//img/no-image.png', '', 'http://www.chidoo.me/index.php/2018/09/11/about-the-react-redux-and-keeping-the-global-states-in-the-persistent-manner/'); });</script></div><script> jQuery(".socialMediaOnEveryPost").addClass("sgmb-left") </script>]]></content:encoded>
		<post-id xmlns="com-wordpress:feed-additions:1">570</post-id>	</item>
		<item>
		<title>독후감: Blue ocean shift, Beyond competing</title>
		<link>http://www.chidoo.me/index.php/2018/09/05/review-of-blue-ocean-shift-beyond-competing/</link>
		<pubDate>Tue, 04 Sep 2018 18:13:50 +0000</pubDate>
		<dc:creator><![CDATA[chidoo]]></dc:creator>
				<category><![CDATA[책읽기]]></category>
		<category><![CDATA[beyond competing]]></category>
		<category><![CDATA[blue ocean shift]]></category>

		<guid isPermaLink="false">http://www.chidoo.me/?p=567</guid>
		<description><![CDATA[예전에 이 책의 부모님 책쯤되는 &#8220;블루오션 전략(BLUE OCEAN STRATEGY)&#8221;라는 책을 읽었다. 한참이나 제품을 가지고 고민하던 시절이었고, 읽으면서 어떤 포인트에서 제품을 만들어야 할까를 많이 고민하게 했었다. 시절이 한참이나 지나서 올초 LAX 공항 서점에서 책을 고르다보니 이 책이 눈에 들어왔다. 블루오션 전략이라는 책이 출간되면서 레드오션과 블루오션이라는 두 단어가 일상화되었다. 레드오션에서 피터지게 싸워봐야 남는게 없다. 사용자들에 대한 이해를 ...</p><p><a href="http://www.chidoo.me/index.php/2018/09/05/review-of-blue-ocean-shift-beyond-competing/" class="more-link">Continue reading &#8216;독후감: Blue ocean shift, Beyond competing&#8217; &#187;</a>]]></description>
				<content:encoded><![CDATA[<p>예전에 이 책의 부모님 책쯤되는 &#8220;블루오션 전략(BLUE OCEAN STRATEGY)&#8221;라는 책을 읽었다. 한참이나 제품을 가지고 고민하던 시절이었고, 읽으면서 어떤 포인트에서 제품을 만들어야 할까를 많이 고민하게 했었다. 시절이 한참이나 지나서 올초 LAX 공항 서점에서 책을 고르다보니 이 책이 눈에 들어왔다.</p>
<p><img class="alignleft" src="https://images-na.ssl-images-amazon.com/images/I/51ZmGElyjDL._SX330_BO1,204,203,200_.jpg" width="138" height="207" /><br />
블루오션 전략이라는 책이 출간되면서 레드오션과 블루오션이라는 두 단어가 일상화되었다. 레드오션에서 피터지게 싸워봐야 남는게 없다. 사용자들에 대한 이해를 바탕으로 그들이 진정 원하는 가치가 뭔지를 찾아라. 그 가치를 위한 제품이나 서비스를 만들고, 이걸로 새로운 시장을 만드는 것이 2000년대라는 새로운 시대에 삶아남는 방법이라고 이야기했다.</p>
<p>시장에 대한 새로운 접근 방법이었고, 제품이나 서비스를 만드는 입장에서 제대로 된 화두를 던졌다고 볼 수 있다. 10년이 넘은 세월이 흐른 뒤에 나온 이 책에서 저자들은 어떤 이야기를 하고 있을까?  저자들은 많은 사람들이 블루오션의 가치를 인식하지만 이를 실행하는데서 어려움을 겪는다고 한다. 아는게 다 잘 실행된다면 이 세상에 불행한 사람이 어디 있겠나?</p>
<p>새로운 시장을 창조한다고 이야기를 할 때, 흔히 혁신(Innovation)을 이야기한다. 혁신만이 새로운 시장을 이야기할 때 너무 강조되기 때문에 역설적으로 블루오션을 찾아내기 어렵다. 특히나 사람들은 자신이 갈망하는 것이 있다면 그것만 보게 되고 그 밖에 있는 더 큰 가치를 보지 못한다. 만약 이미 구조화된 조직내에서 이런 갈망을 추구했을 때 잃을 것들에 대한 두려움 때문에 혁신에 대한 도전을 주저하게 만든다. 결론적으로 블루오션을 하기 위해 필요하다고 많은 사람들이 이야기하는 &#8220;창조적 파괴&#8221; 라는 것에 이르지 못한다. 하지만 정말 창조적 파괴만이 이런 혁신을 달성하게 할까? 라고 저자들은 되려 질문한다. 새로운 시장을 만드는 전략적 방안으로 다음과 같은 3가지 옵션이 있다.</p>
<ul>
<li>Offering a breakthrough solution for an existing industry problem</li>
<li><strong>Redefining and solving an existing industry problem</strong></li>
<li>Identifying and solving a brand-new problem or seizing a brand-new opportunity</li>
</ul>
<p>블로오션을 개척한다는 것을 사람들은 너무 과하게 생각해서 뭔가를 없앤 이후에나 달성할 수 있다고 본다. 되러 이런 사고 방식이 관점의 전환을 어렵게 한다. 되려 이것보다는 현재의 문제점을 다른 관점에서 재해석하는 것이 필요하고 이를 통해 시장의 문제점을 파고들어 새로운 시장을 만들어내는 것(<em>Redefining and solving an existing industry problem</em>)이 좀 더 현실적이라고 충고한다.  이 때 중요한 해석의 기준이 바로 사용자의 가치를 혁신하는 가이다. 기술쪽에 있는 내 입장에서도 새로운 기술을 통한 혁신을 많이 이야기하고 듣기도 한다. 하지만 이런 시도가 과연 사용자에게 어떤 도움을 줄 수 있는가가 먼저 평가되어야 한다. 사용자들이 제품/서비스의 팬이 될 수 있다면 제대로 된 가치의 혁신을 이뤄냈다고 정의할 수 있다. 가치 혁신을 이뤄내기 위해, 즉 블루오션으로 전환할려는 사람들은 다음과 같은 마인드가 필요하다고 이야기한다.</p>
<ul>
<li>Blue ocean strategists do not take industry conditions as given. Rather, they set out to reshape them in their favor.</li>
<li>Blue ocean strategists do not seek to beat the competition. Instead, they aim to make the competition irrelevant.</li>
<li>Blue ocean strategists focus on creating and capturing new demand, not fighting over existing customers.</li>
<li>Blue ocean strategists simultaneously purse differentiation and low cost. They aim to break, not make, the value-cost trade-off.</li>
</ul>
<p>이런 것들을 추진하기 위해 가장 우선적으로 사람들이 변화와 행동의 필요성을 본인들 스스로 느껴야 한다. 역시나 일을 한다는 것의 기본은 사람이다. 같이 일하는 동료들이 이를 자각하지 못하고 시켜져 일을 한거나 두려워 주저한다면 말짱 도루묵이다. 집중할 수 있는 최소 단위로 일이나 문제를 재정의할 수 있어야 한다. 정의된 문제점들을 통해 사람들이 변화와 도전에 공감해야 한다. 물론 이런 도전의 결과로부터 자신들이 안전하다라는 것을 느낄 수 있도록 적절한 프로세스와 리더로부터의 충분한 설명도 뒤따라야 한다. 일련의 과정들은 투명하게 운영되어야 하며, 어떤 결과를 얻을 수 있는지에 대해 지속적인 대화가 이뤄져야한다. 즉 과정은 투명해야하며 결과는 공정해야 한다. ^^</p>
<p>그래서 다음의 절차에 맞춰 블루오션에 대한 시도를 해 볼 수 있다.</p>
<h2>Step One &#8211; Get Started</h2>
<ul>
<li>Choose the right place to start your blue ocean initiative: <strong>The Pioneer-Migrator-Settler Map</strong></li>
<li>Construct the right team for the initiative</li>
</ul>
<h2>Step Two: Understand Where You Are Now</h2>
<ul>
<li>Collectively build one simple picture that captures your current state of play: <strong>The Strategy Canvas</strong></li>
<li>See and easily agree on the need for the shift</li>
</ul>
<h2>Step Three: Image Where You Could Be</h2>
<ul>
<li>Discover the pain points of buyers imposed by the industry: <strong>The Buyer Utility Map</strong></li>
<li>Identify the total demand landscape you can unlock: <strong>The Three Tiers for Noncustomers</strong></li>
</ul>
<h2>Step Four: Find How You Get There</h2>
<ul>
<li>Apply systematic paths to reconstruct market boundaries: <strong>The Six Paths Framework</strong></li>
<li>Develop alternative strategic options that achieve differentiation and low cost: <strong>The Four Actions Framework (<em><span style="text-decoration: underline;">eliminate-reduce-raise-create</span></em>)</strong></li>
</ul>
<h2>Step Five: Make Your Move</h2>
<ul>
<li>Select your move at the blue ocean fair, conduct rapid market tests, and refine the move.</li>
<li>Finalize the move by formalizing the big-picture business model that delivers a win for both buyers and you.</li>
<li>Launch and roll out your move.</li>
</ul>
<p>정리는 여기까지. 이 정도 내용을 적어놨으면 나중에 다시 되씹으면서 찾아볼 수는 있을 듯 하다.</p>
<p>글을 쓰거나 코딩을 하거나 같이 적용되는 진실이 하나 있다. 지속적으로 하지 않으면 퇴화된다는 것이다. 항상 새로운 글을 쓰거나 새로운 랭귀지, 프레임웍을 시도할 필요는 굳이 없다. 짧은 거라도 거르지 않고 계속해야한다.  마지막 글을 쓴 다음에 이 글을 올리는 기간이 이미 상당히 벌어졌다. 영어로 된 글을 단순히 옮겨적는 것에 지나지 않지만 그럼에도 글을 쓰는게 상당히 힘들어졌다.  바쁘다는건 핑계고 소주 한잔을 줄이면 글을 쓸 수 있는데 말이다.</p>
<p>&nbsp;</p>
<div class = 'socialMediaOnEveryPost'><div id="sgmbShare1-14" class="sgmbShare jssocials-theme-classic sgmbWidget1-14"></div><div class="dropdownWrapper dropdownWrapper1 dropdownWrapper-for-widget " id="dropdownWrapper-for-widget">
						<div class="dropdownLabel" id="dropdownLabel-share-list"><span class="sgmbButtonListLabel1">Share List</span></div>
						<div class="dropdownPanel dropdownPanel1-14">
						</div>
					</div><script>  SGMB_URL = "http://www.chidoo.me/wp-content/plugins/social-media-builder/"; jQuery(".dropdownWrapper").hide(); SGMB_GOOGLE_ACOUNT = ""; </script><script type="text/javascript">
		jQuery(document).ready(function($){var widget = new SGMBWidget();widget.show({"id":"1","title":"common socials","options":{"currentUrl":"0","url":"","fontSize":"14","theme":"classic","buttonsPosition":"","socialTheme":"","icon":"default","buttonsPanelEffect":"No Effect","buttonsEffect":"No Effect","iconsEffect":"No Effect","buttons":"{\"facebook\":{\"label\":\"Share\",\"icon\":\"default-facebook\"},\"linkedin\":{\"label\":\"Share\",\"icon\":\"default-linkedin\"},\"twitter\":{\"label\":\"Tweet\",\"icon\":\"default-twitter\",\"via\":\"\",\"hashtags\":\"\"},\"googleplus\":{\"label\":\"+1\",\"icon\":\"default-googleplus\"}}","roundButton":"","showLabels":"on","showCounts":"","showButtonsAsList":"","setButtonsPosition":"","sgmbDropdownColor":"","sgmbDropdownLabelFontSize":"14","sgmbDropdownLabelColor":"","showButtonsOnEveryPost":"on","sgmbPostionOnEveryPost":"Left","textOnEveryPost":"","showButtonsOnMobileDirect":"on"},"buttonOptions":{"facebook":{"label":"Share","icon":"default-facebook"},"linkedin":{"label":"Share","icon":"default-linkedin"},"twitter":{"label":"Tweet","icon":"default-twitter","via":"","hashtags":""},"googleplus":{"label":"+1","icon":"default-googleplus"}},"button":["facebook","linkedin","twitter","googleplus"]}, 14, '', 'https://images-na.ssl-images-amazon.com/images/I/51ZmGElyjDL._SX330_BO1,204,203,200_.jpg', '', 'http://www.chidoo.me/index.php/2018/09/05/review-of-blue-ocean-shift-beyond-competing/'); });</script></div><script> jQuery(".socialMediaOnEveryPost").addClass("sgmb-left") </script>]]></content:encoded>
		<post-id xmlns="com-wordpress:feed-additions:1">567</post-id>	</item>
		<item>
		<title>Consideration in accessing API with the credential on the apache client libraries</title>
		<link>http://www.chidoo.me/index.php/2018/04/22/consideration-in-accessing-api-with-the-credential-on-the-apache-client-libraries/</link>
		<pubDate>Sun, 22 Apr 2018 06:08:26 +0000</pubDate>
		<dc:creator><![CDATA[chidoo]]></dc:creator>
				<category><![CDATA[도구들]]></category>
		<category><![CDATA[미분류]]></category>
		<category><![CDATA[웹]]></category>
		<category><![CDATA[authorization]]></category>
		<category><![CDATA[basic credential]]></category>
		<category><![CDATA[http]]></category>
		<category><![CDATA[www-authentication]]></category>

		<guid isPermaLink="false">http://www.chidoo.me/?p=544</guid>
		<description><![CDATA[본사 친구들이 신규 시스템을 개발하면서 기존에 연동하던 endpoint가 deprecated되고, 새로운 endpoint를 사용해야한다고 이야기해왔다. 변경될 API의 Swagger를 들어가서 죽 살펴보니 endpoint만 변경되고, 기능을 제공하는 URI에 대한 변경은 그닥 크지 않았다. curl을 가지고 테스트를 해봤다. 잘 되네&#8230; 예전 도메인을 신규 도메인으로 변경하면 이상없겠네. 로컬 환경에서 어플리케이션의 설정을 변경하고, 실행한 다음에 어플리케이션의 Swagger 페이지로 들어가서 테스트를 해봤다. 음&#8230; ...</p><p><a href="http://www.chidoo.me/index.php/2018/04/22/consideration-in-accessing-api-with-the-credential-on-the-apache-client-libraries/" class="more-link">Continue reading &#8216;Consideration in accessing API with the credential on the apache client libraries&#8217; &#187;</a>]]></description>
				<content:encoded><![CDATA[<p>본사 친구들이 신규 시스템을 개발하면서 기존에 연동하던 endpoint가 deprecated되고, 새로운 endpoint를 사용해야한다고 이야기해왔다. 변경될 API의 Swagger를 들어가서 죽 살펴보니 endpoint만 변경되고, 기능을 제공하는 URI에 대한 변경은 그닥 크지 않았다. curl을 가지고 테스트를 해봤다.</p>
<pre class="brush: bash; title: ; notranslate">
$ curl -X GET --header &quot;Accept: application/json&quot; --header &quot;AUTHORIZATION: Basic Y29tbX****************XR5X3VzZXI=&quot; \
&quot;http://new.domain.com/abc/v2/username/abcd&quot;
{&quot;subject&quot;:&quot;0a58c96afe1fd85ab7b9&quot;,&quot;username&quot;:&quot;abcd&quot;,&quot;platform_code&quot;:&quot;abc&quot;}
</pre>
<p>잘 되네&#8230; 예전 도메인을 신규 도메인으로 변경하면 이상없겠네.</p>
<p><img class="alignnone size-large" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxESEhETERIWFRUVFxUVFRgWFxgXFRcXFRgWGBUXFRUYHiggGBolGxUYITEhJikrLi4uFx8zODMtNygtLi0BCgoKDg0OGxAQGzUlICYuLy0rLy0zNzArLy8uNzgtMC04MC0wLS8tMC4tLS4tLS0tLy0tLS8tMi0tLS0tLS0tLf/AABEIAOgA2QMBEQACEQEDEQH/xAAcAAEAAQUBAQAAAAAAAAAAAAAABgECBAUHAwj/xABQEAABAwICBQUKCggEBQUBAAABAAIDBBESIQUGMUFRE2FxktEHFBYiMnOBkaGxIyQ0UlRicrKzwRVCQ1WiwuHwM1OCkzV0lMPSJWOD0/EX/8QAGwEBAAIDAQEAAAAAAAAAAAAAAAQFAQIDBgf/xABGEQACAQMABAkJBQUHBQEAAAAAAQIDBBEFEiExE0FRYXGBkbHBFBUyMzRScqHwBiJTVNEkYoLh4iM1QkRzwtJDkqKy8Rb/2gAMAwEAAhEDEQA/AO4oAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAo5wG1AeDqobgT7EBZ30fm+3+iAubVjeCPagMhrgcxmgKoAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIAgCAIC17rIDxwXzKAFoCAqGIC1zAgPAuLDcf0KAzYZQ4XCAvQC6AIAgCAIAgKFAUugLkAQBAEAQBAEAQBAEAQBAYsk3jHmyQFOVQDlEAMqA83yoDEqJ0BboyuHKBt8nZend/fOgN25Aaz9KjCHgXaThDr5Zmwv0mw9KAyjWtDsDsiBiJ3Wzzv6EB7xShwuEBegCAIC0lAVAQFUAQBAEBaUACAuQBAEAQBAEBpuUQF2NAMaAoXoDzkkQGpr6ggFAR9mlC2VpvsIPqKAlutemO9rOkuIXNwhwJFnnEc7Z7BfgsOSW9nSnSnUeIRbfMskBpNE6XrI3cjLyUD3YmlzQ15AdiabAeLewOeeewLRa7ySJu3iopJt427dmfmSOg0NpNsU8cuGWSVuASXwsa21gMN77SSVvtwRk4qSeNnIejtXdLm3xyNlgBZpkAy3m20rjKlUk/S+u0s6N9a0o44DPxPL/9S3wY0v8AvAdaRacBU99/XWdvOlr+Wj2/yK+DGl/3gOtInAVPff11jzpa/lo9v9JfHq1pUba8E/aktu/r61lUZ++zWWk7V7PJo/XUWHVnS/08daVOAn77+us2WlLVf5aPb/SPBnS37wHWkTgJ++x50tfy0e3+keDGlv3gOtKnAT99jzpa/lo9v9I8F9LfvAdaVY4Cfvv66zPnS0/LR+v4Sngvpb94fxSpwE/ff11jzra/lo/L/iPBbS37w/ilTgJ++/rrHnW1/LR+X/EvZq1pcbNIN9JkPvWeBn75rLSdo/8ALR7f6Sw6raW/eH8UqxwE/ff11m3nW1/LR+v4S12rGlxmK8E8C+UdqcBP339dY862v5aP1/CV0JrRVU9S2k0i3N1gyTLebA4gAHsJsL2BBtfI3SNScJatTj3MzVs7a6oSr2iw4+lH9PrbzMn6lFCCgLcR4IC5AR6V1nEcCR6igAkQFeUQAyIDylkQGn0g/IoCF6QmwyC3FDKJt3QI8f6NjPkueMQ45xD3OI9Ki3G2UFzl5oh6tC4kt+p+pOY2BoAAsBkFKKIxhpOAuwiaPFe2HG299lrX233LXXjnGTt5NW1dbUeOXDwJtJwMJa+aNrhtBe0EdIJyRzitjYjbVpLWjBtdDLP0xTfSIv8AcZ2rHCQ5UbeSXH4cuxlf0vTWc7l4rNGJxxts0ZC5zyFyPWnCR5THktfKWo8vYtj2laHStPOSIZo5C2xOB7XWvsvY5JGcZei8ita1qOHVg453ZWClbpanhNpp44zwe9rT6iUlOMd7wKVrXrbacHLoTZ60dfDMLwyskHFjg4ewrMZRluZrVoVKTxUi0+dYMhbHIIDWyawUbThdVQA7LGVl78DmubqwWxtEuNhdSWVTljoZsI5A4AtIIOwg3B6CF0TyRWnF4ZSaZrAXPcGtG0uIAHSSsNpbzMYyk8RWWYNPp2kkdhZUwudwbIwn0AHNaqrBvCaJFSyuacdadOSXOmbFbkUgvdZpwYIJNjmyloO+zo5CR62g+hRbv1Ze/Z1/tbXLF96JvCbtaeYe5SkUclhsvQwEAQEe0y3DITucL/kf750BgNnQF/LIChnQHhLOgNRpCoyKAisEBnq4IhnjeAej9Y+gXPoQydE18Hw+jfPfzxKNX9OHSXWi/Zrn4fBkyUkpDh+jh/6kz/nD+MVTw9d1+J9Gr/3c/wDT/wBpKtZNRKqoqp5mPhDZHNIDnPDhZjW5gMI2t4qTVtZzm5LBS6P09b29tClNSyuRLG9vlRBtHaPdNMyFmEPe4tbiuG3AJuSATbLgocIOUlFHpLi4jRpOrLOFteN5NtHah1cbKoOdCTLFybbOf5WNjvGuwWFmnipkLWcU921HnbjT1tUnSaUsRll5S3Ya5ecwtSXvpm6Ve2znQxZFubC9nK7DbMXF+haW+Ya75Ed9MKFzK1g9inLj34eDSaApIKmZ3flSYsQvjJAL3kjynuBA9O1caUYzl994LK+q17akvJaetji5F0LabrRmrNdBVtlpmiSNrxaRr4w2SIkYgRivsytbaL8F2hRqQnmO7wK240nZ3Fq6dd6smvRw8qXE93L8th1dWR4ohHdUrZGQRRtJa2VxDyN7Wi+DoJP8KiXkmopLjPRfZyhCdeU5LLitnS+Pq8SIaH0DTVFM5zakNqhiwwuLGg4ScLRizOIWzBsL8yiU6UJw37eQvbvSFxb3GHTzS2ZltfS9mzZyY29ZLO53oqupnyMnjLIXNxAF7HWkBGwNcbXBN+gKVawqQbUlsKTTt3Z3MYzpSzNbHsa2daW57ukies+k5a+rMbblok5OFn6twcOM85NzfcFFrTdWphdRd6Otqdha8JLe1mT4+XHVycbPbT+os9NAZS9kjW2xtaCC0HK4v5QuebJbVLWUI62cmljp2lc1uC1XFvc+Xm5vmSXuYadfK2SnlcXGMB0ZJu7Aci0nfhNs/rW3KRaVXJOL4io+0NhClKNemsKWxrizy9fgZHdTHxWLzw/DlW936sjfZ9/tf8L70TCDyW9A9ykLcUsvSZesmoQBAYOl6LlWWHlDNv5j0oCFSylpIORGR7EBYK0IC11aOKAx5q8cUBpdI12RzQEn7mOr7gXVsosXjDCDtwnyn+nYOa/FDLPbXStxV1HGP2b4yftPew26ob61Gr+nDp/QutF+z3Pw+EieqSUhxHR3/Emf83/3iqiHruvxPotf+7n/AKf+07crc+dHEdUP+IU3nXfdeqeh61dJ9F0p7BU6F3o7LpKjE0UkRJaHtc27TYi4tcK2lHWTR8/oVXSqRqJZw87TW6O0VS0FM5hLWx/tXyEDEXWb45OWeQA2LSMIUoY4iXcXVzf3ClvlxJcWNuzvILUamw1DpDo6qjkDbExuJ8XFewEjb3GRtcbtqhO2jPPByPSU9NVreMVe0ms8a48cz/XqNFT1NVo6oIzY9hGNl/EkGRsbZEEbDtHMVxUp0ZFnUpW2kaCe9Pc+NPvWHvXgdvifiaHDYQD61cI+cyWG0zR63topIxDWStjv4zCXBrwRliZfbtt6VxrcG1qzeCy0Y7unU4W2i5Y2PZlY5Gc+rdRZuT5ankjqIiC4Ft2vLeZpuD6/QoMrWWMxeUepo6epa/B14uEt3Ks967DM7mmm5ROKcvLopGuwgm+BzRiGE7mkA5bNnPfa0qvW1eIj/aGxpOi68ViSazzp7NvPnjNJqo4R19NjNsMpab/OIcwX58RC40dlVZ5Sy0muEsajjxxz1bH3HVdc3gUNXiNgYnt9Lhhb7SFZ13/Zy6DxGik3e0se8n2bX8iBdyuM9+SHcIHg/wCp8dvcfUoNmv7R9B6j7SSXksV+8u5/qSXuo/JYvPD8KVSrv1ZR6A9r/hfeiXw+S3oHuUhbiml6TL1k1CAIAgNNpzQLZ7uacEnHc77Q/P3oDnunKOemvyrCB84ZsP8AqGXoOaAj0mmLb0Biu0qTsuUBOdTdSnTYKisHiGzmRHa7eHScG/V37+BA6RUTsiYXPIa1ozJyA4f/AIgOXiKapq2ysjc4GYSHLyWh7bXPM0D1LhVi3KOOUttH1qdOhXU3huOFz7zp7agE22E7Nn5FdypOWUOrdW2tZKYHhoqsd7C2AyYsV78NyrI0ZqpnHGe3q6TtpWTpqazweOvGMHWVZniDkurGr1ZHWwSPp3tY2QkuNrAWcL7ecKro0Zqom0e50jpG1qWc4QqJtpbOw60rQ8MYel9HtqIZYXGwkaW3G0HcR0Gx9C1nFTi4s721eVCrGrHenk5VTaJ0pQSudDE8nyS6NvKMe3nbmfWAQqxU61KX3Ue1qXejb+klVkuXDeGn0/8A1HvQ6rV1dUcpVtcxriDI54DSWjLAxgzGQtsAG3M7do0KlWWZnOtpSzsqHB2zTa3JbVnlb+fyOstFsgrM8ORXX7Vt9XGx0NuVivYE2xtdbE2+wG4BF+BG+6jXNF1Flb0XWhdJRs6jjU9GW/ma3P5vJDKI6YgjNPHFM1huLcniw4vKwvANr3O/oUSPDxWqkz0FZaKr1OHnKLfTjOOVfXOSDufapSwP74qG4CGlsbLguF9rnWyBsLAc5Xe2oOL1pFXpvS1OvHgaLys5b8F4mFrpqVMZXz0rcbXnE9gIDmvPlFt7XBOfG5Po0r20tbWgSdE6bpKkqNw8NbE+JrkfRu5MfPSy0GlqjDFKyoe0EWD8mjdcl1g4jnJK5OFef3XknxuNF22atNxT5t/yzjq2HQdSdWu8o3YyHSyEFxGwAXwtHRcnpKnUKPBrbvPLaW0l5bUWqsRW7xZhd0/5ND54fhSrW69A66B9qfwvvRLofJb0D3KQinlvZesmoQBAEBQoDCqq+Ft2yPbwI8rcTYtF9wKA5zpjRNK+R74og1pOQtYc5A3XO5AaV1JGySPEPgw9uMAfqgjFl0XQydh/SDHNaYiHhwuCDdtvR7kMGvrqHlrOm8YMzDScLL8ennQEW0vpurY6FkcQjjklMYzAsGlgcWtG0ePlfguc56rS5SZbWvDQqTzjVWenf+hONH0DIwCAcRAxOJuefPd0BdCGZwCApdALoCqAoSgLboC4IC3lW3tiF+FxdYyZ1XjOC9ZMFLoCqAoXBAUaEBcgIh3TR8Xh88PwplGuvQ6y60F7S/hfeiWQ+S3oHuUhFPLey9ZNQgCAIDE0nKWsNgSTkANvP0ICLDQ9SXC2FjM7hxu7PeDu4dBKAyf0LGP8SUehAecsFBHm+x6c/egNpQ1sJaDGRh3W2IDz05pARxXcwOjOTjtw8CeA59yAiukmtDtHm7jimkw3sRbFAPTYb+N1wrelHpLbRyfA18e7+p0kLuVIQHEdch8fqvOC3VYqiv61n0XRT/YafR4s2v8A/OK758H+5J/9a6eR1Ob66iF/+jsvdl2L/kT3U3RMlLTNhlLS4Oe4lhJb4ziRmQD7FNoU3CGqzzGlbundXLq008YW/fs6MnONe6909dIGXIiAjbb6gLnkDmJd1VAuZOVTZxHrdC0I0LJSn/i2vr2L5Y7SU9zHS/KtmhcLOaRIOBD8nWG7NoP+pSbSprJxKT7Q2fBThVW57Oz+XceXdR0vLHyMEbiwPDnvLTYkAgBtxu2k+hYvKko4ijp9nLOnVcq01nGEs9/6EXh1NdJStqoZGSuIDnRMbd7bkXFwSS4bxYbCoytm4a8XnmLmemo07p29WLit2s3s7tz4nkmGptNUzU89LXRyBhADHSAh1nXuATndpAI4X5lLoKcoOFRFBpWpQpXELi0ks8aW7K/Xc/5kKoZ5dGV3j3+Ddhktez4nWzA5xZw5wAocW6NTbxdx6OtCnpOy+5xrK5pLi7dj5tpt+6HpnvmZsMTrxxAOJGYc9wGYtts0+tzgut1U15aq3Ir9B2nk1F1qi+9LYuZL9X3IzNOaE710SQQQ974nycQS4ANJHC9um63qU+DodhHsr3yrSutxJSS7N/WZvck/wanzgH8A7VtZei+k4/afHDU1+74k8U08yRDul/J4fPD8KZR7n0C50F7S/hfeiWReS3oC7oqJb2XrJqEAQBAa3SssrbFkZeLfq5kHoQEC07rbJE8sMb8QuCLbCOcGyA0Umn6mTdhv6wgMV0UrjdxJ6UBKNRqIyTOY9zg0Mc6wNrkFoH3kMsls+rz8XiTEsO0PzsOGW1DBg66stJo8cJAP4olHrenDpLjRvqLj4fBkvUgpwgOI65j4/VecH3Wqnr+tZ9G0S15DTzyeLN14I6Y/z3f9TKu3k9fl+ZXed9Fe5/4Im9HJJR0GKoOJ8Mbi84i67hcgYjmb5BTIt06eZcR5urGF3e6tFYUpLGzGOo5tqVND32ZqqRrWhkjiXG13yeKfWHPUC3cdfWmz12l6dXyVUqEW3lbuRbfBHnqfWimr47OBYXugLtzmOOFjuguDCsUJKFXm3G+laMrmxbaxJJSxyNbWuzKOia66Chq2NxTNiljuWOcRazrXa4EjI2Ge63oM6vSjUW14Z5TRN9VtJvVi5RlvS5uNc5zrSWrNZSjlsPijPlYX3FtzrizgOe1lAnQqQ+980est9J2l0+Cztf8AhkvlxomHc41lmnL6ed2NzW42PPlFoIDg477XFjt2qXa1pT+7IodPaMpW6jWpLCbw1xZ3pr5jupaHa6JtULB8Zax31mPcAB0hzr9Bcl5TTjr8hj7OXkoVXbvdLLXM0vFLuI/3N9FNnqTI7yYA11vnOcSGX5hhJ6QFwtIKU8viLXT91KjbqEd89nQlv7c47Sda/wAOKgqRwDX9R7Xfkplys0mea0LPVvqfS12po13cqitRud8+V59Qaz+VaWa/s885L+0c83ajyRS734kyUooCId0z5PB54fhTKPc+h1lzoL2l/C+9Esi8kdAXdFPLey9ZMBAEAQBAQTSejw9xcRmST60BrzosDcgPGWksgNzqSy1Q7zbvvMQE4QET13PwtB53+eJR63pQ6S40b6iv8PgyWKQU4QHGNb6KY11S5sUhBeCCI3EHxW7CBY7FU14y4RtI+g6LrUfIqcZTS2cq5WZXhTpf/wB3/px/4Lbh6/0v5HDzVovm/wC/+oy9L6VrJtHNZKyR0kkzg60RBEcYa4Xa1uXjFu3bmt5zqSpYa2t8hHtbW0o6Qcqckoxjs+9xvZvb5Mluq+ovfMPKzPkiOJwa3CAcItmQ4X23WKNrrxy9hvpHTvk9bg6SUljfnj6jV606ryUswZEJZGlgeHhhJBu4EeKMiLA+kLnWoOEsLaTNHaUp3VFyqtRecYzxdZutcdDzVcVNWxxOc8xNbNHhOMEXNw3abEuBG3Yu1enKpFVEuLaVuib2laValrOSS1sxednb0YfaaoazV3exo+TuCzkr8m/lcFrYem2V7X9Oa5cNU1NTH6k/zZZeUeVa3HrYytXO/Pbt3/IlHc11clhx1E7Sxz24GNOTg24LnOG65DbDblzqTa0XH70im0/pGnX1aNJ5SeW+LO7C6Nu02/dEic6gmaxpccUWTQScpWE2A5l0uk3SeOYgaDnGF9ByeF97f0Mj3coppGPqy+N7Lthtia5t7GW9rjPaPWuFlFpyyuQtftLVpzjS1JJ+lueeTkJPrvUzx0j3UxcJMUYGBuJ1i8B1hY7r7lJuHJQbjvKbRNOjUuoxr41cPe8LcYfc9rKmWGU1ReXCSzcbcBw4WnIWFxcnNaW0pyi9ckabo29KtFW6WMbcPO3L52SpSSlIh3TD8Xg89/2plGuvQ6y60F7S/hfeiWReSOgKSimlvZehgIAgCAsmPiu6D7kBozEEB4SwhAauthsgL9Ujap6WOHtB/JATdARLXnKSgJ2CYXP+qM/kfUo1f0ovnLnRe2jXit+r4MlqklMEAQBAEAQBAEAQBAEAQBAEAQEN7p7/AICADaZr89hFKCfW4D0qLd+h1l3oGObiT/d8UTCMWA6ApRSveXIYCAIAgLJ/Jd0H3IDQcsgKPlCA1VdIgLNWXfGo+fGP4SfyQE7QGs1h0Q2qhdG42O1jtuFw2HozIPMVzqU1OOCXZXcraqqi28TXKjRUuma6mAjqKR82HISRXdiA2XsDnzmx5lyVSpDZKOegsZ2VncPXo1VHP+GWzH119J7+Fsn0Cp6h7Fnh37rNPNMPx4dv8x4WyfQKnqHsTh37rHmmH48O0eFsn0Cp6h7E4d+6x5ph+PDtK+Fsn0Cp6h7E4d+6x5ph+PDtHhbJ9AqeoexOHfuseaYfjw7SnhbJ9AqeoexOHfusz5ph+PDtMA90eEOc0wPDm3DgXNBBGRBB2G+5a+U/us6eY9meFiZdPro57Q9lFUOadjmtu09BAsVlXDe6LOctDxi8OtBPpPTwtk+gVPUPYs8O/dZjzTD8eHaPC2T6BU9Q9icO/dY80w/Hh2lfC2T6BU9Q9icO/dY80w/Hh2lPC2T6BU9Q9icO/dY80w/Hh2jwtk+gVPUPYnDv3WPNMPx4dodrbLuoKm+67XAevCnDv3WPNNPjrw7f5mNRaJqayoZUVrRGyPOOLftBz4C4BN8zYCwC1jCVSWtPYluR0q3NvaUZUbZ60pelL9PrrJkpRRBAEAQBAWv2HoQERq38mc0BivrRxQGvnqMRsEBsdXY8M8RPEj1tI/NATlAUJQFLoC5AEAQBAEBRyA4Vp9wFTVNb/nzEniS91+z2dNTVn95pcp9B0dbxdvCUl/hXd9fW7rGoo+IU32T95ysLf1aPH6WWLyoufwN8uxXBAEBS6AAoCqAIAgCAIAgCA8qh3inoQGi0pTNc03QEIoqKaasFM2QNBY9+ItxWwFothBF74uO5AbXQFBdgc/M/3sQG2ibhew8HN94QEuQFCgKWQFwQBAEAQFCUBQBAcG1h+V1Xn5vxHKlq+nLpZ9NsPZaXwx7jruovyCm+yfvOVpb+qR4TTHttTp8Eb5ditCAIC0hAVAQFUAQBAEAugCAFAeNV5B9HvCA09YfFKA0Wq0N9IOf82B49LnxW9jSgM/RzLBzfmuc31EhAJBmOke9ASxAEAQBAEAQBAUsgKoDgOsJ+N1Xn5vxHKlqenLpZ9PsV+yUvhj3HYNRfkFN9k/ecrS39UjwWmPbanT4I3y7FaEAQBAEAQBAEAQFuFAXIAgPGr8h3o94QGirHeKUBh6lR3nq3/ViaPXIT+SAyAMMs4+u49Y4vzQFhzc37Q96AlSAIAgCAIAgCAIAgPn/WQ/G6rz834jlSVfTl0s+oaPX7LS+GPcdh1D+QUv2D95ytbf1SPBaZ9uq9Pgb9disCAIAgCAIAgCAIAgCAIDyqR4jugoCP1rhhOeaAakN8Sodxlt1WNP8AMgL6sAVEt8rhp/hA/JAeMGcsY+s32G6AlCAIAgCAIAgCAIAgPn7WT5XVefm/EcqSr6culn1HR/stL4Y9x2LUP5BS/YP3nK1t/VI8Dpn26r0+Bv12KwIAgCAIAgCAIAgCAIAgLZdh6CgIlX0u03QGdqV/hTDhMfuRoDz09Def/wCNv3noDy0fFhkj+0PegJUgCAIAgCAIAgCAID5+1iPxuq8/N+I5UlX1kuln1Gw9kpfDHuR2PUQfEKX7B+85Wtv6pHgdMe3VOnwN8uxWBAEAQBAEAQBAEAQBAEBZKcj0FAaCub4pKAameRP53+RiA9dLj4dvPGPY53agPBuT2fab7wgJIgCAtcUAAQFyAIAgCApdAcA1maRWVVxb4aU+gvcR7FSVfWS6WfUdHNO0pY92Pcdh1D+QUv2D94q1t/VI8Dpn26r0+Bv12KwIAgCAsBKAvAQBAEAQBAEAQHnNsPQfcgNHpA2ab8D7u2yAt1KHwUx4zH7kaA99ND4aI8Wu9hHagMYjxm9I94QEkQFCUBQBAXIAgCAIAUBagODa2PBqphe5EswP+68gegFUtd/ffSz6bouLVtB/ux7kdc1D+QUv2D94q0t/VI8Lpn26r0+Bv12KwIAgLSUBcAgCAIAgCAIAgCA8ql4DTfo9aA0GlpWYDYoD01L/AMGTzrvusQHtp0/CwdD/AORAeErm7igJA03zCAAICqAIAgCAIAgKOIGZyQHz3rA8GrqrH9vP+I5UdX05dLPqdj7LS+CPcjs2oR+IUv2P5ira39Uj5/pn26r0+Bv12KwIChCAAICqAIAgCAIAgCAIDQaXrXONmglo9vOgIxpKqNjdAbzUGqb3u65AJlfYb9jR+SA99Yn3kjw52adme0jsQGvDn72lASbQ82KIfV8X1bPZZAZqAIAgCAIAgCA453XHk1gaSS0RMIbc4QSX3IGy/Oqy7k1UxzHuPs7QhKzcuPWe1b+IgIiI2OPMMslGyXqhJLClsNzqvK6OogLHuBMsQJBIJu9oN7bRbctqc2pLHKRry2hKhUctv3Zb+g+iFdHzMIAgCAIAgCAIAgCAIDwrC7CcLcR4ZXPRfJAaqWruLcjID5p/vAsgNDpDQdVUGzI+TB2vkI2cWsaSSem1udAZWjtTDCzCJCTvJJuSdpQF8Oj5oHkmN0jTvbZxHS297dF0BlTVznCzKaUnzRZ7ZMI9qAydCUcwJdKMF9jMQcbfWIyv0X6SgN0gCAIAgCAIChQHM9ftV62oqOWjiD24Gss1wuMJcbkOIv5W5QLmhOctaJ6vQmlba3ocDVeHlvONm3HIQ1+qNdfOkl6t/aFF4Cr7p6BaWsX/ANVfP9DaaD1Mr+Vid3uWBr2OJeWtADXA7L33cFvTtqmsm0RL3TdkqM4xnltNYSfGscaSO1NvbParY+flUAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEAQBAEBHdNMeJWMjfI0FhJs9+47hizOwelVN86jrRhCTWxvYaPOTGpMfKw/CyOY8na9/A/WzGXs4WJ4UnUjXp/fbi+V8319YC3mzjM3+UXbMxOW8ARbEdme/1K9NypM4/YOOzZUHLZfac95/u6AqRNkREXAgft3Ag3POQRa397AMungJHjhzTwErz7boD071bxf139qAd6t4v67+1AO9W8X9d/agHereL+u/tQDvVvF/Xf2oB3q3i/rv7UA71bxf139qAd6t4v67+1AO9W8X9d/agHereL+u/tQDvVvF/Xf2oDGq9HuNiyV7SM7Fzy0+jEDns2+3NcatOctsZY7vD65zDFFCXC7yegPkFjv8A1v79ixRlOSzL6+vrkCMnvVvF/Xf2ruZHereL+u/tQGLpG0bQRiNzby5Mrg55FcK9V045SyYZSJ1w04JM2g5PfbMbMzf+/V0pycoKT40ZPWKO5sWvGRN+Ufbbs27c1uD271bxf139qAd6t4v67+1AO9W8X9d/agK97t4u67+1Aa7TWi5JXNkjeA5oLbEZEG9wdvG1iFX3lpOrJTpyw0sbdz+uhmrRiaL0PNyjJJnAYCSGix234ZDbfeuFtZVuEVSrLduSCT4z2/QLBezXXyzElsg0tH6tvJsNmdhe+d7c2H6CZswu4m8l7mxGdxntQF8GhmsILQ8EZ/4p4EcOBP8AZKAR6GbcEtdcW2ybLZXAAtfIIDZ45PmDrf0QDlH/ADP4v6IC5jnXzbYcb39lkB6IAgCAIAgCAIAgCAIAgCAxdIskLQIzY3zztlY7+my4V41JR/s3tMMtijnDW3c29mg3BOY8o3BF/UulJSUEpb8bTJUMn+fH1Hf+S3BUtm3OZew2tJF99s7j1lAUwz/Ojv8AYdbfb9bo9SA9YxJfxi3DwAN/Xf8AJAeyA//Z" width="217" height="232" /></p>
<p>로컬 환경에서 어플리케이션의 설정을 변경하고, 실행한 다음에 어플리케이션의 Swagger 페이지로 들어가서 테스트를 해봤다.</p>
<p><img class="alignnone size-full wp-image-546" src="http://www.chidoo.me/wp-content/uploads/2018/04/NoUserFoundException.png" alt="" width="686" height="315" srcset="http://www.chidoo.me/wp-content/uploads/2018/04/NoUserFoundException.png 686w, http://www.chidoo.me/wp-content/uploads/2018/04/NoUserFoundException-300x138.png 300w" sizes="(max-width: 686px) 100vw, 686px" /></p>
<p>음&#8230; 뭐지? 분명히 있는 사용자에 대한 정보를 조회했는데, 없다네? 그럴일이 없으니 console에 찍힌 Stack trace를 확인해보니 401 Unauthorized 오류가 찍혔다.</p>
<pre class="brush: java; title: ; notranslate">
Caused by: org.springframework.web.client.HttpClientErrorException: 401 Unauthorized
at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:85)
at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:708)
at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:661)
at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:636)
at org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:557)
</pre>
<p>401 오류가 발생했는데, 그걸 왜 사용자가 없다는 오류로 찍었는지도 잘못한 일이다. 하지만 원래 멀쩡하게 돌아가던 코드였고, curl로 동작을 미리 확인했을 때도 정상적인 결론을 줬던 건데 신박하게 401 오류라니??? 인증을 위해 Basic authorization 방식의 credential을 사용했는데, 그 정보가 그 사이에 변경됐는지도 본사 친구한테 물어봤지만 바뀐거가 없단다. 다른 짐작가는 이유가 따로 보이지 않으니 별수없이 Log Level을 Debug 수준으로 낮춘 다음에 HTTP 통신상에 어떤 메시지를 주고 받는지를 살펴봤다.</p>
<p>하지만 새로운 endpoint로 request를 쐈을 때에는 아래와 같은 response를 보낸 다음에 추가적인 request를 보내지 않고, 걍 실패해버린다.</p>
<pre class="brush: java; title: ; notranslate">
2018-04-18 02:41:48.517 DEBUG 93188 : http-outgoing-0 HTTP/1.1 401 Unauthorized
2018-04-18 02:41:48.517 DEBUG 93188 : http-outgoing-0 Content-Encoding: gzip
2018-04-18 02:41:48.517 DEBUG 93188 : http-outgoing-0 Content-Type: application/json
2018-04-18 02:41:48.517 DEBUG 93188 : http-outgoing-0 Date: Tue, 17 Apr 2018 17:41:48 GMT
2018-04-18 02:41:48.517 DEBUG 93188 : http-outgoing-0 Vary: Accept-Encoding
2018-04-18 02:41:48.517 DEBUG 93188 : http-outgoing-0 transfer-encoding: chunked
2018-04-18 02:41:48.517 DEBUG 93188 : http-outgoing-0 Connection: keep-alive
2018-04-18 02:41:48.517 DEBUG 93188 : Connection can be kept alive indefinitely
2018-04-18 02:41:48.517 DEBUG 93188 : Authentication required
2018-04-18 02:41:48.517 DEBUG 93188 : new.domain.com:80 requested authentication
2018-04-18 02:41:48.517 DEBUG 93188 : Response contains no authentication challenges
</pre>
<p>이상한데???</p>
<p><img class="alignnone size-large" src="data:image/jpeg;base64,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" width="287" height="176" /></p>
<p>Authentication required 라고 나오는데 코드상으로는 HTTP Connection factory를 생성할 때 Basic authorization을 아래와 같이 설정을 적용해뒀는데 말이다.</p>
<pre class="brush: java; title: ; notranslate">
@Bean
public HttpClient httpClient() throws MalformedURLException {
PoolingHttpClientConnectionManager cm = Protocols.valueOf(new URL(domain).getProtocol().toUpperCase()).factory().createManager();
cm.setMaxTotal(connectionPoolSize);
cm.setDefaultMaxPerRoute(connectionPoolSize);

BasicCredentialsProvider credentialsProvider = new BasicCredentialsProvider();
credentialsProvider.setCredentials(AuthScope.ANY,
new UsernamePasswordCredentials(username, password));

return HttpClients.custom()
.setConnectionManager(cm)
.setDefaultCredentialsProvider(credentialsProvider)
.build();
}
</pre>
<p>하지만 의심이 든다. 정말 요청할 때마다 Authorization header를 셋팅해서 내보내는건지. 이전 시스템과 어떤 방식으로 통신이 이뤄졌는지 궁금해서 endpoint를 이전 시스템으로 돌려서 확인을 해봤다. 정상적으로 데이터를 주고 받을 때는 아래와 같은 response를 endpoint에서 보내줬다.</p>
<pre class="brush: java; title: ; notranslate">
2018-04-18 02:38:09.676 DEBUG 93178 : http-outgoing-0 &quot;HTTP/1.1 401 Unauthorized[\r][\n]&quot;
2018-04-18 02:38:09.676 DEBUG 93178 : http-outgoing-0 &quot;Server: Apache-Coyote/1.1[\r][\n]&quot;
2018-04-18 02:38:09.676 DEBUG 93178 : http-outgoing-0 &quot;WWW-Authenticate: Basic realm=&quot;Spring Security Application&quot;[\r][\n]&quot;
2018-04-18 02:38:09.676 DEBUG 93178 : http-outgoing-0 &quot;Set-Cookie: JSESSIONID=78AEB7B20A1F8E1EA868A68D809E73CD; Path=/gas/; HttpOnly[\r][\n]&quot;
2018-04-18 02:38:09.676 DEBUG 93178 : http-outgoing-0 &quot;Content-Type: application/json;charset=UTF-8[\r][\n]&quot;
2018-04-18 02:38:09.676 DEBUG 93178 : http-outgoing-0 &quot;Transfer-Encoding: chunked[\r][\n]&quot;
2018-04-18 02:38:09.676 DEBUG 93178 : http-outgoing-0 &quot;Date: Tue, 17 Apr 2018 17:38:09 GMT[\r][\n]&quot;
</pre>
<p>이 로그가 출력된 다음에 다시 인증 헤더를 포함한 HTTP 요청이 한번 더 나간다! 이전과 이후의 로그에서 인증과 관련되어 바뀐 부분이 뭔지 두눈 부릅뜨고 살펴보니 새로 바뀐놈은 WWW-Authenticate 헤더를 주지 않는다. 이 Response Header가 어떤 역할을 하는지 살펴보니 아래와 같은 말이 나온다.</p>
<blockquote><p>(&#8230;)The response MUST include a WWW-Authenticate header field (section 14.47) containing a challenge applicable to the requested resource.(&#8230;)</p></blockquote>
<p>근데 이게 문제가 왜 될까?? 생각해보니 Apache에 Basic 인증을 설정하면 요런 메시지 박스가 나와서 아이디와 암호를 입력하라는 경우가 생각났다.</p>
<p><img class="alignnone size-full wp-image-556" src="http://www.chidoo.me/wp-content/uploads/2018/04/www-authentication.png" alt="" width="646" height="185" srcset="http://www.chidoo.me/wp-content/uploads/2018/04/www-authentication.png 646w, http://www.chidoo.me/wp-content/uploads/2018/04/www-authentication-300x86.png 300w" sizes="(max-width: 646px) 100vw, 646px" /></p>
<p>아하&#8230; 이 경우랑 같은거구나! 실제 인증 과정에서 이뤄지는 Protocol은 아래 그림과 같이 동작한다.</p>
<p><img class="alignnone size-large" src="https://mdn.mozillademos.org/files/14689/HTTPAuth.png" width="710" height="335" /></p>
<p>이 그림에서 볼 수 있는 것처럼 하나의 API 요청을 완성하기 위해서 2번의 HTTP Request가 필요했던 것이다. 이런걸 생각도 못하고 걍 Basic Credential을 Example에서 썼던 것처럼 쓰면 문제가 해결된다고 아무 생각없이 너무 간단히 생각했던 것 같다. 연동해야할 Endpoint가 여러 군데인 경우에는 이런 설정이 제각각이기 때문에 많이 사용하는 RestTemplate 수준에서 Header 객체를 만들어 인증 값을 설정했을 것 같다. 물론 RestTemplate을 생성하는 Bean을 두고, Authorization 값을 설정하면 되긴 했겠지만 상황상 그걸 쓸 수 없었다. 변명을 하자면 그렇다는 것이다.</p>
<p>제대로 짜면 이렇다.</p>
<pre class="brush: java; title: ; notranslate">
@Bean
public HttpClient httpClient() throws MalformedURLException {
....
Credentials credential = new UsernamePasswordCredentials(username, password);
HttpRequestInterceptor interceptor = (httpRequest, httpContext) -&gt;
httpRequest.addHeader(new BasicScheme().authenticate(credential, httpRequest, httpContext));

return HttpClients.custom()
.setConnectionManager(cm)
.addInterceptorFirst(interceptor)
.build();
}
</pre>
<p>앞선 예제처럼 Credential Provider를 두는게 아니라 interceptor를 하나 추가하고, 여기에서 crednetial 값을 걍 설정해주는 것이다. 이러면 이전처럼 2번이 아니라 한번에 인증이 처리된다.</p>
<p>몸이 먼저 움직이기보다는 생각이 먼저 움직여야 하는데 점점 더 마음만 급해지는 것 같다.</p>
<p>참고자료</p>
<ul>
<li>https://stackoverflow.com/questions/17121213/java-io-ioexception-no-authentication-challenges-found?answertab=active#tab-top</li>
<li>https://stackoverflow.com/questions/2014700/preemptive-basic-authentication-with-apache-httpclient-4</li>
</ul>
<p>&#8211; 끝 &#8211;</p>
<div class = 'socialMediaOnEveryPost'><div id="sgmbShare1-16" class="sgmbShare jssocials-theme-classic sgmbWidget1-16"></div><div class="dropdownWrapper dropdownWrapper1 dropdownWrapper-for-widget " id="dropdownWrapper-for-widget">
						<div class="dropdownLabel" id="dropdownLabel-share-list"><span class="sgmbButtonListLabel1">Share List</span></div>
						<div class="dropdownPanel dropdownPanel1-16">
						</div>
					</div><script>  SGMB_URL = "http://www.chidoo.me/wp-content/plugins/social-media-builder/"; jQuery(".dropdownWrapper").hide(); SGMB_GOOGLE_ACOUNT = ""; </script><script type="text/javascript">
		jQuery(document).ready(function($){var widget = new SGMBWidget();widget.show({"id":"1","title":"common socials","options":{"currentUrl":"0","url":"","fontSize":"14","theme":"classic","buttonsPosition":"","socialTheme":"","icon":"default","buttonsPanelEffect":"No Effect","buttonsEffect":"No Effect","iconsEffect":"No Effect","buttons":"{\"facebook\":{\"label\":\"Share\",\"icon\":\"default-facebook\"},\"linkedin\":{\"label\":\"Share\",\"icon\":\"default-linkedin\"},\"twitter\":{\"label\":\"Tweet\",\"icon\":\"default-twitter\",\"via\":\"\",\"hashtags\":\"\"},\"googleplus\":{\"label\":\"+1\",\"icon\":\"default-googleplus\"}}","roundButton":"","showLabels":"on","showCounts":"","showButtonsAsList":"","setButtonsPosition":"","sgmbDropdownColor":"","sgmbDropdownLabelFontSize":"14","sgmbDropdownLabelColor":"","showButtonsOnEveryPost":"on","sgmbPostionOnEveryPost":"Left","textOnEveryPost":"","showButtonsOnMobileDirect":"on"},"buttonOptions":{"facebook":{"label":"Share","icon":"default-facebook"},"linkedin":{"label":"Share","icon":"default-linkedin"},"twitter":{"label":"Tweet","icon":"default-twitter","via":"","hashtags":""},"googleplus":{"label":"+1","icon":"default-googleplus"}},"button":["facebook","linkedin","twitter","googleplus"]}, 16, '', 'data:image/jpeg;base64,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', '', 'http://www.chidoo.me/index.php/2018/04/22/consideration-in-accessing-api-with-the-credential-on-the-apache-client-libraries/'); });</script></div><script> jQuery(".socialMediaOnEveryPost").addClass("sgmb-left") </script>]]></content:encoded>
		<post-id xmlns="com-wordpress:feed-additions:1">544</post-id>	</item>
		<item>
		<title>Spring Data JPA와 AspectJ가 함께 친 사고</title>
		<link>http://www.chidoo.me/index.php/2018/04/22/conflict-of-spring-data-jpa-and-aspectj/</link>
		<pubDate>Sun, 22 Apr 2018 05:11:50 +0000</pubDate>
		<dc:creator><![CDATA[chidoo]]></dc:creator>
				<category><![CDATA[미분류]]></category>
		<category><![CDATA[프로그래밍]]></category>
		<category><![CDATA[aspectj]]></category>
		<category><![CDATA[cache]]></category>
		<category><![CDATA[entitymanager]]></category>
		<category><![CDATA[JPA]]></category>
		<category><![CDATA[spring]]></category>
		<category><![CDATA[spring data jpa]]></category>

		<guid isPermaLink="false">http://www.chidoo.me/?p=539</guid>
		<description><![CDATA[Spring JPA는 데이터베이스를 사용하는데 있어서 새로운 장을 열었다. 쿼리를 직접 사용해서 데이터베이스를 엑세스하는 MyBatis의 찌질한 XML 덩어리를 코드에서 걷어냄으로써 코드 자체도 간결해지고 직관적으로 특정 Repository 및 DAO가 어떤 테이블과의 매핑 관계가 있는지를 명확하게 파악할 수 있도록 해준다. 단점으로 생각되는 부분이 여러 테이블들을 복잡한 조인 관계를 설정하는게 상당히 난감하다. 하지만 역설적으로 이런 조인 관계를 왜 설정해야하는지를 ...</p><p><a href="http://www.chidoo.me/index.php/2018/04/22/conflict-of-spring-data-jpa-and-aspectj/" class="more-link">Continue reading &#8216;Spring Data JPA와 AspectJ가 함께 친 사고&#8217; &#187;</a>]]></description>
				<content:encoded><![CDATA[<p>Spring JPA는 데이터베이스를 사용하는데 있어서 새로운 장을 열었다. 쿼리를 직접 사용해서 데이터베이스를 엑세스하는 MyBatis의 찌질한 XML 덩어리를 코드에서 걷어냄으로써 코드 자체도 간결해지고 직관적으로 특정 Repository 및 DAO가 어떤 테이블과의 매핑 관계가 있는지를 명확하게 파악할 수 있도록 해준다. 단점으로 생각되는 부분이 여러 테이블들을 복잡한 조인 관계를 설정하는게 상당히 난감하다. 하지만 역설적으로 이런 조인 관계를 왜 설정해야하는지를 역으로 질문해볼 필요가 있다. 우리가 복잡한 코드를 최대한 단순화시키려고 노력할 때, 그 코드가 달성할려고 하는 목적과 의미를 가장 먼저 생각하는 것처럼. 더구나 마이크로서비스 아키텍처 개념에서는 한 서비스가 자신의 독립적인 Repository를 가지는 것이 원칙이라고 할 때 해당 Repository의 구조는 단순해야한다. 그렇기 때문에 Spring JPA가 더욱 더 각광을 받는 것이 아닐까 싶다.</p>
<p>AspectJ 역시 특정 POJO 객체의 값을 핸들링하거나 특정 동작을 대행하는데 있어서 아주 좋은 도구이다. 주로 특정 Signature 혹은 Annotation을 갖는 객체 혹은 메소드가 호출되는 경우에 일반적으로 처리해야할 작업들을 매번 명시적으로 처리하지 않아도 AspectJ를 통해 이를 공통적으로 실행시켜줄 수 있기 때문이다.</p>
<p>작업하는 코드에 이를 적용한 부분은 특정 DB 필드에 대한 자동 암호화이다.  값을 암호화해서 저장하고, 저장된 값을 읽어들여 평문으로 활용하는 경우가 있다. 이 경우에는 이만한 도구가 없다.</p>
<p><img class="alignnone size-full wp-image-550" src="http://www.chidoo.me/wp-content/uploads/2018/04/jpa-aspectj-simple-flow.png" alt="" width="775" height="357" srcset="http://www.chidoo.me/wp-content/uploads/2018/04/jpa-aspectj-simple-flow.png 775w, http://www.chidoo.me/wp-content/uploads/2018/04/jpa-aspectj-simple-flow-300x138.png 300w, http://www.chidoo.me/wp-content/uploads/2018/04/jpa-aspectj-simple-flow-768x354.png 768w, http://www.chidoo.me/wp-content/uploads/2018/04/jpa-aspectj-simple-flow-730x336.png 730w" sizes="(max-width: 775px) 100vw, 775px" /></p>
<p>이런 이해를 바탕으로 지금까지 서비스들을 잘 만들어서 사용하고 있었다. 그런데 새로운 기능 하나를 추가하면서 이상한 문제점이 발생하기 시작했다.  암호화된 테이블에 대한 저장은 분명 한번 일어났는데, 엉뚱하게 다른 처리를 거치고 나면 암호화 필드가 저장되어야 할 필드에 엉뚱하게 평문이 저장되었다. 그전까지 암호화된 값이 잘 저장되었는데&#8230; 더 황당한 문제는 내가 명시적으로 저장하지 않은 데이터까지 덤탱이로 변경이 되버린다!!!  개별 기능을 테스트 코드를 가지고 확인했을 때는 이상이 없었는데, 개발 서버에 올리고 테스트할려니 이런 현상이 발생한다.</p>
<p><img class="alignnone size-full wp-image-551" src="http://www.chidoo.me/wp-content/uploads/2018/04/unintended-data-update.png" alt="" width="704" height="322" srcset="http://www.chidoo.me/wp-content/uploads/2018/04/unintended-data-update.png 704w, http://www.chidoo.me/wp-content/uploads/2018/04/unintended-data-update-300x137.png 300w" sizes="(max-width: 704px) 100vw, 704px" /></p>
<p>&nbsp;</p>
<p>새로운 기능이 동작하는 방식을 간단히 정리하면 아래와 같다.</p>
<ol>
<li><em>기존 테이블에서 2라는 키값이 존재하는 데이터를 쿼리한다. 원래 시나리오상으로는 이런 데이터가 존재하지 않아야 한다.</em></li>
<li><em>2라는 PK값을 가지는 데이터를 저장한다.</em></li>
<li><em>저장 후 fk.for.grouping 이라는 그룹 키를 가진 항목들을 로딩해서 특정 값을 계산한다. 읽어들인 걸 저장하지는 않고, 읽어들여서 계산만 한다.</em></li>
<li><em>계산된 결과를 신규 테이블(New table)에 저장한다.</em></li>
</ol>
<p>디버깅을 통해 확인해보니 2번 단계에서는 정상적으로 AspectJ를 통해 암호화 필드가 정상적으로 저장된다. 그런데 4번 과정을 거치고나면 정말 웃기게도 평문값으로 업데이트가 이뤄진다.  그림에서 따로 적지는 않았지만, 멀쩡하게 암호화되어 있던 1번 데이터도 평문화되는게 아닌가??? 몇 번을 되짚어봐도 기존 테이블에 저장하는 로직은 없다. 뭐하는 시츄에이션이지??</p>
<p>JPA와 AspectJ를 사용하는데, 우리가 놓치고 있었던 점은 없었는지 곰곰히 생각해봤다. 생각해보니 JPA를 사용자 관점에서만 이해를 했지, 그 내부에서 어떻게 동작이 이뤄지는지를 잘 따져보지는 않았던 것 같다. 글 몇 개를 읽어보니 Spring의 Data JPA는 이런 방식으로 동작하는 것으로 정리된다.</p>
<p><img class="alignnone size-full wp-image-552" src="http://www.chidoo.me/wp-content/uploads/2018/04/jpa-working.png" alt="" width="999" height="337" srcset="http://www.chidoo.me/wp-content/uploads/2018/04/jpa-working.png 999w, http://www.chidoo.me/wp-content/uploads/2018/04/jpa-working-300x101.png 300w, http://www.chidoo.me/wp-content/uploads/2018/04/jpa-working-768x259.png 768w, http://www.chidoo.me/wp-content/uploads/2018/04/jpa-working-730x246.png 730w" sizes="(max-width: 999px) 100vw, 999px" /></p>
<p>재미있는 몇가지 사실들을 정리하면 아래와 같다.</p>
<ul>
<li>RDBMS를 위한 Spring Data는 JPA를 Wrapping해서 그저 쓰기 좋은 형태로 Wrapping한 것이고, 실제 내부적인 동작은 JPA 자체로 동작한다.</li>
<li>JPA는 내부적으로 EntityManager를 통해 RDBMS의 데이터를 어플리케이션에서 사용할 수 있도록 관리하는 역할을 한다.</li>
<li>EntityManager는 어플리케이션의 메모리에 적제된 JPA Object를 버리지 않고, Cache의 형태로 관리한다!!!</li>
</ul>
<p>EntityManager가 관리를 한다고?? 그럼 그 안에 있는 EntityManager는 어떤 방식으로 데이터를 관리하지?</p>
<p>&nbsp;</p>
<p><img class="alignnone wp-image-540 size-large" src="http://www.chidoo.me/wp-content/uploads/2018/04/entityManager_javabullets-1024x386.png" alt="JPA Entity Lifecycle" width="730" height="275" srcset="http://www.chidoo.me/wp-content/uploads/2018/04/entityManager_javabullets-1024x386.png 1024w, http://www.chidoo.me/wp-content/uploads/2018/04/entityManager_javabullets-300x113.png 300w, http://www.chidoo.me/wp-content/uploads/2018/04/entityManager_javabullets-768x290.png 768w, http://www.chidoo.me/wp-content/uploads/2018/04/entityManager_javabullets-730x275.png 730w, http://www.chidoo.me/wp-content/uploads/2018/04/entityManager_javabullets.png 1357w" sizes="(max-width: 730px) 100vw, 730px" /></p>
<p>&nbsp;</p>
<p>오호.. 문제의 원인을 이해할 수 있을 것 같다.</p>
<ul>
<li>Springboot application이 위의 처리 과정 3번에서 &#8220;<span style="text-decoration: underline;"><em><strong>fk.for.grouping 이라는 그룹 키를 가진 항목들을 로딩</strong></em></span>&#8221; 과정을 수행한다.</li>
<li>정말 읽어들이기만 했다면 문제가 없었겠지만 AspectJ를 통해서 읽어들인 객체의 암호화 필드를 Decryption했다.</li>
<li>Entity Manager에서 관리하는 객체를 변경해버렸다! 객체의 상태가 Dirty 상태가 되버렸다.</li>
<li>4번 과정에서 신규 테이블에 데이터를 저장할 때, Entity Manager는 관리하는 데이터 객체 가운데 Dirty 객체들을 테이블과 동기화시키기 위해 저장해버렸다.</li>
<li>하지만 이 과정은 Entity Manager 내부 과정이기 때문에 따로 AspectJ가 실행해야할 scope를 당연히 따르지 않는다.</li>
<li>결과적으로 평문화된 값이 걍 데이터베이스에 저장되어버렸다.</li>
</ul>
<p>따로 저장하라고 하지 않았음에도 불구하고 엉뚱하게 평문화된 값이 저장되는 원인을 찾았다.</p>
<p>문제를 해결하는 방법은 여러가지가 있을 수 있겠지만, 가장 간단한 방법으로 취한 건 이미 메모리상에 로드된 객체들을 깔끔하게 날려버리는 방법이다.</p>
<pre class="brush: java; title: ; notranslate">
public interface DBRepositoryCustom {
    void clearCache();
}

public class DBRepositoryImpl implements DBRepositoryCustom {
    @PersistenceContext
    private EntityManager em;

    @Override
    @Transactional
    public void clearCache() {
        em.clear();
    }
}
</pre>
<p>위와 같이 하면 Spring Data JPA 기반으로 EntityManager를 Access할 수 있게 된다. 이걸 기존 JPA Interface와 연동하기 위해, Custom interface를 상속하도록 코드를 변경해주면 된다.</p>
<pre class="brush: java; title: ; notranslate">
@Repository
public interface DBRepository extends CrudRepository&amp;lt;MemberInfo, Long&amp;gt;, DBRepositoryCustom {
    ...
}
</pre>
<p>여기에서 주의할 점은 DBRepository라는 Repository internface의 이름과 Custom, Impl이라는 Suffix rule을 반드시 지켜야 한다. 해당 규칙을 따르지 않으면 Spring에서 구현 클래스를 정상적으로 인식히지 못한다.  따라서 반드시 해당 이름 규칙을 지켜야 한다.</p>
<ul>
<li><strong>DBInterface</strong>가 JPA Repository의 이름이라면</li>
<li><strong>DBInterfaceCustom</strong> 이라는 EntityManager 조작할 Interface의 이름을 주어야 하며</li>
<li><strong>DBInterfaceImpl</strong> 이라는 구현 클래스를 제공해야 한다.</li>
</ul>
<p>이렇게 해서 위의 처리 단계 3번에서 객체를 로딩한 이후에 clearCache() 라는 메소드를 호출함으로써, EntityManager 내부에서 관리하는 객체를 Clear 시키고, 우리가 원하는 동작대로 움직이게 만들었다.</p>
<p>하지만 이건 정답은 아닌 것 같다. 제대로 할려면 AspectJ를 좀 더 정교하게 만드는 방법일 것 같다. 그러나 결론적으로 시간이 부족하다는 핑계로 기술 부채를 하나 더 만들었다.</p>
<p>&nbsp;</p>
<p>참고자료</p>
<ul>
<li>https://www.javabullets.com/access-entitymanager-spring-data-jpa/</li>
<li>https://www.javabullets.com/jpa-entity-lifecycle/</li>
</ul>
<p>&nbsp;</p>
<p>&#8211; 끝 &#8211;</p>
<div class = 'socialMediaOnEveryPost'><div id="sgmbShare1-18" class="sgmbShare jssocials-theme-classic sgmbWidget1-18"></div><div class="dropdownWrapper dropdownWrapper1 dropdownWrapper-for-widget " id="dropdownWrapper-for-widget">
						<div class="dropdownLabel" id="dropdownLabel-share-list"><span class="sgmbButtonListLabel1">Share List</span></div>
						<div class="dropdownPanel dropdownPanel1-18">
						</div>
					</div><script>  SGMB_URL = "http://www.chidoo.me/wp-content/plugins/social-media-builder/"; jQuery(".dropdownWrapper").hide(); SGMB_GOOGLE_ACOUNT = ""; </script><script type="text/javascript">
		jQuery(document).ready(function($){var widget = new SGMBWidget();widget.show({"id":"1","title":"common socials","options":{"currentUrl":"0","url":"","fontSize":"14","theme":"classic","buttonsPosition":"","socialTheme":"","icon":"default","buttonsPanelEffect":"No Effect","buttonsEffect":"No Effect","iconsEffect":"No Effect","buttons":"{\"facebook\":{\"label\":\"Share\",\"icon\":\"default-facebook\"},\"linkedin\":{\"label\":\"Share\",\"icon\":\"default-linkedin\"},\"twitter\":{\"label\":\"Tweet\",\"icon\":\"default-twitter\",\"via\":\"\",\"hashtags\":\"\"},\"googleplus\":{\"label\":\"+1\",\"icon\":\"default-googleplus\"}}","roundButton":"","showLabels":"on","showCounts":"","showButtonsAsList":"","setButtonsPosition":"","sgmbDropdownColor":"","sgmbDropdownLabelFontSize":"14","sgmbDropdownLabelColor":"","showButtonsOnEveryPost":"on","sgmbPostionOnEveryPost":"Left","textOnEveryPost":"","showButtonsOnMobileDirect":"on"},"buttonOptions":{"facebook":{"label":"Share","icon":"default-facebook"},"linkedin":{"label":"Share","icon":"default-linkedin"},"twitter":{"label":"Tweet","icon":"default-twitter","via":"","hashtags":""},"googleplus":{"label":"+1","icon":"default-googleplus"}},"button":["facebook","linkedin","twitter","googleplus"]}, 18, '', 'http://www.chidoo.me/wp-content/uploads/2018/04/jpa-aspectj-simple-flow.png', '', 'http://www.chidoo.me/index.php/2018/04/22/conflict-of-spring-data-jpa-and-aspectj/'); });</script></div><script> jQuery(".socialMediaOnEveryPost").addClass("sgmb-left") </script>]]></content:encoded>
		<post-id xmlns="com-wordpress:feed-additions:1">539</post-id>	</item>
		<item>
		<title>블로그가 털렸네</title>
		<link>http://www.chidoo.me/index.php/2018/03/08/poor-security-stolen-database/</link>
		<pubDate>Thu, 08 Mar 2018 09:22:16 +0000</pubDate>
		<dc:creator><![CDATA[chidoo]]></dc:creator>
				<category><![CDATA[AWS]]></category>
		<category><![CDATA[Security]]></category>
		<category><![CDATA[개발자]]></category>
		<category><![CDATA[aws rds]]></category>
		<category><![CDATA[aws security group]]></category>
		<category><![CDATA[mysql]]></category>
		<category><![CDATA[security]]></category>

		<guid isPermaLink="false">http://www.chidoo.me/?p=529</guid>
		<description><![CDATA[회사에서 개발을 하면서 항상 고려할 최우선 순위 가운데 하나가 보안이다. 특히나 서비스내에서 제공되는 정보 가운데 개인과 관련된 민감한 정보가 있다면 보안은 최우선 순위 고려 사항이다. 회사에서 개발을 할 때는 이걸 항상 가장 먼저 생각하는데, 최근에 정말 어이없는 일을 겪었다. 뭐냐하면… 짜잔~ 그렇다. 이 홈페이지가 털렸다. 친절하신 해커분께서 WordPress DB로 사용하는 MySQL 서버에 접속하셔서, 데이터를 몽땅 ...</p><p><a href="http://www.chidoo.me/index.php/2018/03/08/poor-security-stolen-database/" class="more-link">Continue reading &#8216;블로그가 털렸네&#8217; &#187;</a>]]></description>
				<content:encoded><![CDATA[<p>회사에서 개발을 하면서 항상 고려할 최우선 순위 가운데 하나가 보안이다. 특히나 서비스내에서 제공되는 정보 가운데 개인과 관련된 민감한 정보가 있다면 보안은 최우선 순위 고려 사항이다. 회사에서 개발을 할 때는 이걸 항상 가장 먼저 생각하는데, 최근에 정말 어이없는 일을 겪었다.</p>
<p>뭐냐하면… 짜잔~</p>
<p><img class="alignnone size-full wp-image-530" src="http://www.chidoo.me/wp-content/uploads/2018/03/ransom.png" alt="" width="1007" height="87" srcset="http://www.chidoo.me/wp-content/uploads/2018/03/ransom.png 1007w, http://www.chidoo.me/wp-content/uploads/2018/03/ransom-300x26.png 300w, http://www.chidoo.me/wp-content/uploads/2018/03/ransom-768x66.png 768w, http://www.chidoo.me/wp-content/uploads/2018/03/ransom-730x63.png 730w" sizes="(max-width: 1007px) 100vw, 1007px" /></p>
<p>그렇다. 이 홈페이지가 털렸다. 친절하신 해커분께서 WordPress DB로 사용하는 MySQL 서버에 접속하셔서, 데이터를 몽땅 다운로드 받으신 다음에 모든 테이블을 싹~ 정리해주셨다. 그리고 친절하게 READ.me 라는 테이블에 비트코인을 보내주면 데이터를 보내주겠다는 친절한 멘트를 남겨주셨네?</p>
<p>처음에는 이상하게 홈페이지 방문자 카운트가 나오지 않았다. 단순 플로그인 문제로 생각했다. 몇 달동안 플러그인 버전업이 됐다는 메시지를 봐왔으니까. 홈페이지의 방문자 수를 보는게 일상의 소소한 재미였는데, 몇 일이 지나도 숫자가 그대로니 고쳐야겠다는 생각이 들었다. 그런데 이게 왠걸? 업데이트 하라는 플러그인들을 죄다 업데이트했는데도 여전히 카운트가 나오질 않네? 뭐지???</p>
<p>Frontend 단에서 JS 문제가 있는가 싶어서 크롬 개발자 모드로 들어가서, Refresh를 했다. 음! DATABASE CONNECTION ERROR 라는 아주 불친절한 문구가 떡 하니 나온다. 그 사이에 암호도 변경한게 없고, AWS에 돈도 따박따박 내고 있었는데 이게 뭐지? 내가 실수로 Security Group 설정을 변경했나? 장비에 들어가서 telnet 으로 접속되는지 확인해봤지만 정상이다.</p>
<p>$ telnet db.rds.domain.name 3306</p>
<p>데이터베이스 서버로 TCP 접속은 되는데, 데이터베이스 오류면 암호가 안먹는거라는 것 같은데? Mysql Workbench로 데이터베이스에 접속해봤더니 덜렁 READ.me 라는 테이블만 하나 덜렁있다 순간 내가 RDS Instance의 Security Group의 설정을 0.0.0.0/0 으로 설정했던 기억이 머리를 커다란 망치로 때린다. 왜 EC2 Instance는 Security Group을 나름 생각한다고 잡아두고, RDS는 이렇게 바보처럼 해놨을까?</p>
<p><img class="alignnone size-large" src="http://2runzzal.com/uploads/zpicture/thum/d6b0ece23a4579d64f794032852159c3fb40207edca55b00816b774f6252fe44.jpg" alt="망!!" width="240" height="292" /></p>
<p>네이버 퇴사하면서 그 이후에 작성한 글들은 죄다 여기에서 작성해왔는데 다 날라간건가? 글의 절대적인 가치는 보잘것 없겠지만 그래도 하나 쓰더라도 나름 신경을 썼던 글들이었다. 무엇보다도 지금까지 라이엇에서 한 작업들 가운데 까먹지 말자라는 차원에서 기록해둔 것들이었는데. 이대로 날려버린건가?</p>
<p>좌절모드에서 헤매고 있었는데, AWS Console에서 RDS 설정을 보니 Snapshot 백업을 설정해 둔게 기억났다. 부랴부랴 들어가서 확인해보니 최근 7일내의 데이터가 일 단위로 백업되고 있었다. 언제 해킹을 당했는지 WordPress 사이트에서 일단위 Visiting count 이력을 보니 아직 하루쯤 여유 시간이 남았네!</p>
<p><img class="alignnone size-large wp-image-531" src="http://www.chidoo.me/wp-content/uploads/2018/03/rds-snapshot-backup-1024x382.png" alt="" width="730" height="272" srcset="http://www.chidoo.me/wp-content/uploads/2018/03/rds-snapshot-backup-1024x382.png 1024w, http://www.chidoo.me/wp-content/uploads/2018/03/rds-snapshot-backup-300x112.png 300w, http://www.chidoo.me/wp-content/uploads/2018/03/rds-snapshot-backup-768x286.png 768w, http://www.chidoo.me/wp-content/uploads/2018/03/rds-snapshot-backup-730x272.png 730w, http://www.chidoo.me/wp-content/uploads/2018/03/rds-snapshot-backup.png 1161w" sizes="(max-width: 730px) 100vw, 730px" /><br />
기쁘다 구주오셨다!</p>
<p>서둘러 Snapshot을 가지고 RDS Instance를 생성시켰다. 일단 생성시킨 RDS 접속해서 테이블의 상태를 확인해보니 모든 테이블과 데이터들이 온전히 살아있다. 다행히 최근에 이런 저런 일들이 있어서 글을 거의 안쓰고 있었는데 빠진 데이터없이 온전히 글들이 살아있다. 휴~ 일단은 다행이다.</p>
<ul>
<li>먼저 Security group의 설정부터 잡는다. EC2 Instance에서만 접근 가능하도록 했다. 물론 Workbench와 같은 쿼리 도구들을 바로 접속할 수 없긴 하지만 필요한 경우에는 AWS Console에서 필요할 때마다 Security Group의 설정을 변경하는게 아주 많이 안전하다.</li>
<li>다음으로 정말 단순했던 데이터베이스 접근 암호를 수정한다. 기억력의 한계를 절감하는 나이라 그런지 사이트마다 암호를 달리 설정하는데 한계가 있다. 5 ~ 6 가지 정도의 암호를 몇가지 룰을 가지고 변형해서 사용해왔다. 털린 암호는 2개의 영문 단어를 조합한 형태였는데 Dictionary를 가지고 대입 공격을 하면 쉽게 뚫릴 수 있는 구조라는 생각이 들었다. 안타깝게도 MySQL에서는 암호에 특수 문자를 사용할 수 없다. 그럼에도 암호에 대한 복잡도를 높일 필요성이 있고, 3개의 단어와 숫자들을 조합해서 암호를 변경했다.</li>
<li>가장 중요한 포인트인 것 같은데 암호를 변경할 날짜를 캘린더에 적어뒀다. 암호는 자주 바꿔주는게 최선인 것 같다. 바꾼 암호를 까먹지 않는다는 전제하에.</li>
</ul>
<p>이렇게 설정을 마치고, WordPress의 연결 정보를 업데이트했다. 그리고 이렇게 글을 쓴다.</p>
<p>이번 일을 겪으면서 돌이켜 생각이 든다. 과연 나는 제대로 된 보안 정책을 가지고 개발을 하고 있는가? 귀찮기 때문에 혹은 설마라는 생각 때문에 어느 포인트에서 보안과 관련된 허점을 만들어두지는 않았을까? 이번 일을 겪으면서 보니 모를 일이라는 생각이 불현듯 스친다. 신규로 개발한 서비스들에 대해서는 모두 보안 리뷰를 받았다. 전문가 팀이 리뷰를 해준 사항이기 때문에 일정 수준은 안전하다라는 생각이 들기도 하지만 이 생각 자체도 만약의 사고에 스스로를 위한 면피가 아닐까 싶다.</p>
<p>개발할 때 자만하지 말고 개발하자. 그리고 잘하자. 쉬운길이 아니라 제대로 된 길로 가자.</p>
<p>&#8211; 끝 &#8211;</p>
<div class = 'socialMediaOnEveryPost'><div id="sgmbShare1-20" class="sgmbShare jssocials-theme-classic sgmbWidget1-20"></div><div class="dropdownWrapper dropdownWrapper1 dropdownWrapper-for-widget " id="dropdownWrapper-for-widget">
						<div class="dropdownLabel" id="dropdownLabel-share-list"><span class="sgmbButtonListLabel1">Share List</span></div>
						<div class="dropdownPanel dropdownPanel1-20">
						</div>
					</div><script>  SGMB_URL = "http://www.chidoo.me/wp-content/plugins/social-media-builder/"; jQuery(".dropdownWrapper").hide(); SGMB_GOOGLE_ACOUNT = ""; </script><script type="text/javascript">
		jQuery(document).ready(function($){var widget = new SGMBWidget();widget.show({"id":"1","title":"common socials","options":{"currentUrl":"0","url":"","fontSize":"14","theme":"classic","buttonsPosition":"","socialTheme":"","icon":"default","buttonsPanelEffect":"No Effect","buttonsEffect":"No Effect","iconsEffect":"No Effect","buttons":"{\"facebook\":{\"label\":\"Share\",\"icon\":\"default-facebook\"},\"linkedin\":{\"label\":\"Share\",\"icon\":\"default-linkedin\"},\"twitter\":{\"label\":\"Tweet\",\"icon\":\"default-twitter\",\"via\":\"\",\"hashtags\":\"\"},\"googleplus\":{\"label\":\"+1\",\"icon\":\"default-googleplus\"}}","roundButton":"","showLabels":"on","showCounts":"","showButtonsAsList":"","setButtonsPosition":"","sgmbDropdownColor":"","sgmbDropdownLabelFontSize":"14","sgmbDropdownLabelColor":"","showButtonsOnEveryPost":"on","sgmbPostionOnEveryPost":"Left","textOnEveryPost":"","showButtonsOnMobileDirect":"on"},"buttonOptions":{"facebook":{"label":"Share","icon":"default-facebook"},"linkedin":{"label":"Share","icon":"default-linkedin"},"twitter":{"label":"Tweet","icon":"default-twitter","via":"","hashtags":""},"googleplus":{"label":"+1","icon":"default-googleplus"}},"button":["facebook","linkedin","twitter","googleplus"]}, 20, '', 'http://www.chidoo.me/wp-content/uploads/2018/03/ransom.png', '', 'http://www.chidoo.me/index.php/2018/03/08/poor-security-stolen-database/'); });</script></div><script> jQuery(".socialMediaOnEveryPost").addClass("sgmb-left") </script>]]></content:encoded>
		<post-id xmlns="com-wordpress:feed-additions:1">529</post-id>	</item>
	</channel>
</rss>
